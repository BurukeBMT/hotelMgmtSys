/*! For license information please see main.bb745d0d.js.LICENSE.txt */
(()=>{var e={43:(e,t,n)=>{"use strict";e.exports=n(202)},147:(e,t,n)=>{"use strict";n.d(t,{XR:()=>Se,qk:()=>Ne,c7:()=>Ae,KR:()=>Ee,D:()=>_e});var r=n(150),s=n(700),i=n(812);const a="firebasestorage.googleapis.com",o="storageBucket";class l extends s.g{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(d(e),"Firebase Storage: ".concat(t," (").concat(d(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,l.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return d(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var c,u;function d(e){return"storage/"+e}function h(){return new l(c.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function f(){return new l(c.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function m(){return new l(c.CANCELED,"User canceled the upload/download.")}function p(){return new l(c.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function g(e){return new l(c.INVALID_ARGUMENT,e)}function y(){return new l(c.APP_DELETED,"The Firebase app was deleted.")}function v(e,t){return new l(c.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function x(e){throw new l(c.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(c||(c={}));class b{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=b.makeFromUrl(e,t)}catch(s){return new b(e,"")}if(""===n.path)return n;throw r=e,new l(c.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const s=new RegExp("^gs://"+r+"(/(.*))?$","i");function i(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),u=[{regex:s,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(o,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://".concat(t===a?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:i}];for(let a=0;a<u.length;a++){const t=u[a],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let s=r[t.indices.path];s||(s=""),n=new b(e,s),t.postModify(n);break}}if(null==n)throw function(e){return new l(c.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class w{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function k(e){return"string"===typeof e||e instanceof String}function _(e){return N()&&e instanceof Blob}function N(){return"undefined"!==typeof Blob}function S(e,t,n,r){if(r<t)throw g("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw g("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function E(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function A(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function T(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),s=-1!==t.indexOf(e);return n||r||s}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(u||(u={}));class C{constructor(e,t,n,r,s,i,a,o,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=i,this.callback_=a,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new I(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===u.NO_ERROR,s=n.getStatus();if(!t||T(s,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===u.ABORT;return void e(!1,new I(!1,null,t))}const i=-1!==this.successCodes_.indexOf(s);e(!0,new I(i,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,s=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(s,s.getResponse());void 0!==e?n(e):n()}catch(i){r(i)}else if(null!==s){const e=h();e.serverResponse=s.getErrorText(),this.errorCallback_?r(this.errorCallback_(s,e)):r(e)}else if(t.canceled){r(this.appDelete_?y():m())}else{r(f())}};this.canceled_?t(0,new I(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,s=null,i=null,a=!1,o=0;function l(){return 2===o}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){s=setTimeout(()=>{s=null,e(f,l())},t)}function h(){i&&clearTimeout(i)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];if(e)return h(),void u.call(null,e,...n);if(l()||a)return h(),void u.call(null,e,...n);let i;r<64&&(r*=2),1===o?(o=2,i=0):i=1e3*(r+Math.random()),d(i)}let m=!1;function p(e){m||(m=!0,h(),c||(null!==s?(e||(o=2),clearTimeout(s),d(0)):e||(o=1)))}return d(0),i=setTimeout(()=>{a=!0,p(!0)},n),p}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class I{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function j(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function P(){const e=j();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(N())return new Blob(n);throw new l(c.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function D(e){if("undefined"===typeof atob)throw t="base-64",new l(c.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const R="raw",O="base64",L="base64url",M="data_url";class F{constructor(e,t){this.data=e,this.contentType=t||null}}function U(e,t){switch(e){case R:return new F(V(t));case O:case L:return new F(B(e,t));case M:return new F(function(e){const t=new q(e);return t.base64?B(O,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw v(M,"Malformed data URL.")}return V(t)}(t.rest)}(t),new q(t).contentType)}throw h()}function V(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function B(e,t){switch(e){case O:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw v(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case L:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw v(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=D(t)}catch(s){if(s.message.includes("polyfill"))throw s;throw v(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class q{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw v(M,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class z{constructor(e,t){let n=0,r="";_(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(_(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new z(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new z(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(N()){const e=t.map(e=>e instanceof z?e.data_:e);return new z(P.apply(null,e))}{const e=t.map(e=>k(e)?U(R,e).data:e.data_);let n=0;e.forEach(e=>{n+=e.byteLength});const r=new Uint8Array(n);let s=0;return e.forEach(e=>{for(let t=0;t<e.length;t++)r[s++]=e[t]}),new z(r,!0)}}uploadData(){return this.data_}}function K(e){let t;try{t=JSON.parse(e)}catch(r){return null}return"object"!==typeof(n=t)||Array.isArray(n)?null:t;var n}function W(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function H(e,t){return t}class G{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||H}}let Q=null;function J(){if(Q)return Q;const e=[];e.push(new G("bucket")),e.push(new G("generation")),e.push(new G("metageneration")),e.push(new G("name","fullPath",!0));const t=new G("name");t.xform=function(e,t){return function(e){return!k(e)||e.length<2?e:W(e)}(t)},e.push(t);const n=new G("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new G("timeCreated")),e.push(new G("updated")),e.push(new G("md5Hash",null,!0)),e.push(new G("cacheControl",null,!0)),e.push(new G("contentDisposition",null,!0)),e.push(new G("contentEncoding",null,!0)),e.push(new G("contentLanguage",null,!0)),e.push(new G("contentType",null,!0)),e.push(new G("metadata","customMetadata",!0)),Q=e,Q}function Y(e,t,n){const r={type:"file"},s=n.length;for(let i=0;i<s;i++){const e=n[i];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,s=new b(n,r);return t._makeStorageReference(s)}})}(r,e),r}function X(e,t,n){const r=K(t);if(null===r)return null;return Y(e,r,n)}function $(e,t){const n={},r=t.length;for(let s=0;s<r;s++){const r=t[s];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class Z{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ee(e){if(!e)throw h()}function te(e,t){return function(n,r){const s=X(e,r,t);return ee(null!==s),s}}function ne(e,t){return function(n,r){const s=X(e,r,t);return ee(null!==s),function(e,t,n,r){const s=K(t);if(null===s)return null;if(!k(s.downloadTokens))return null;const i=s.downloadTokens;if(0===i.length)return null;const a=encodeURIComponent;return i.split(",").map(t=>{const s=e.bucket,i=e.fullPath;return E("/b/"+a(s)+"/o/"+a(i),n,r)+A({alt:"media",token:t})})[0]}(s,r,e.host,e._protocol)}}function re(e){return function(t,n){let r;var s,i;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new l(c.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new l(c.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(i=e.bucket,r=new l(c.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(s=e.path,r=new l(c.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function se(e){const t=re(e);return function(n,r){let s=t(n,r);var i;return 404===n.getStatus()&&(i=e.path,s=new l(c.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),s.serverResponse=r.serverResponse,s}}function ie(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function ae(e,t,n,r,s){const i=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};const o=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+o;const l=ie(t,r,s),c="--"+o+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+$(l,n)+"\r\n--"+o+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+o+"--",d=z.getBlob(c,r,u);if(null===d)throw p();const h={name:l.fullPath},f=E(i,e.host,e._protocol),m=e.maxUploadRetryTime,g=new Z(f,"POST",te(e,n),m);return g.urlParams=h,g.headers=a,g.body=d.uploadData(),g.errorHandler=re(t),g}let oe=null;class le{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=u.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=u.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=u.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,r){if(this.sent_)throw x("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw x("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw x("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw x("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw x("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class ce extends le{initXhr(){this.xhr_.responseType="text"}}function ue(){return oe?oe():new ce}class de{constructor(e,t){this._service=e,this._location=t instanceof b?t:b.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new de(e,t)}get root(){const e=new b(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return W(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new b(this._location.bucket,e);return new de(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new l(c.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function he(e,t,n){e._throwIfRoot("uploadBytes");const r=ae(e.storage,e._location,J(),new z(t,!0),n);return e.storage.makeRequestWithTokens(r,ue).then(t=>({metadata:t,ref:e}))}function fe(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=E(t.fullServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,i=new Z(r,"GET",ne(e,n),s);return i.errorHandler=se(t),i}(e.storage,e._location,J());return e.storage.makeRequestWithTokens(t,ue).then(e=>{if(null===e)throw new l(c.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})}function me(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=E(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,s=new Z(n,"DELETE",function(e,t){},r);return s.successCodes=[200,204],s.errorHandler=se(t),s}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,ue)}function pe(e,t){const n=function(e,t){const n=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new b(e._location.bucket,n);return new de(e.storage,r)}function ge(e,t){if(e instanceof xe){const n=e;if(null==n._bucket)throw new l(c.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+o+"' property when initializing the app?");const r=new de(n,n._bucket);return null!=t?ge(r,t):r}return void 0!==t?pe(e,t):e}function ye(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof xe)return new de(e,t);throw g("To use ref(service, url), the first argument must be a Storage instance.")}return ge(e,t)}function ve(e,t){const n=null===t||void 0===t?void 0:t[o];return null==n?null:b.makeFromBucketSpec(n,e)}class xe{constructor(e,t,n,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=a,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?b.makeFromBucketSpec(r,this._host):ve(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=b.makeFromBucketSpec(this._url,e):this._bucket=ve(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){S("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){S("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new de(this,e)}_makeRequest(e,t,n,r){let s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new w(y());{const i=function(e,t,n,r,s,i){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const o=A(e.urlParams),l=e.url+o,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,i),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new C(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,a)}(e,this._appId,n,r,t,this._firebaseVersion,s);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const be="@firebase/storage",we="0.13.2",ke="storage";function _e(e,t,n){return he(e=(0,s.Ku)(e),t,n)}function Ne(e){return fe(e=(0,s.Ku)(e))}function Se(e){return me(e=(0,s.Ku)(e))}function Ee(e,t){return ye(e=(0,s.Ku)(e),t)}function Ae(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)(),t=arguments.length>1?arguments[1]:void 0;e=(0,s.Ku)(e);const n=(0,r.j6)(e,ke).getImmediate({identifier:t}),i=(0,s.yU)("storage");return i&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:(0,s.Fy)(i,e.app.options.projectId))}(e,t,n,r)}(n,...i),n}function Te(e,t){let{instanceIdentifier:n}=t;const s=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new xe(s,i,a,n,r.MF)}(0,r.om)(new i.uA(ke,Te,"PUBLIC").setMultipleInstances(!0)),(0,r.KO)(be,we,""),(0,r.KO)(be,we,"esm2017")},150:(e,t,n)=>{"use strict";n.d(t,{MF:()=>he,j6:()=>ae,xZ:()=>le,om:()=>ie,Us:()=>oe,Sx:()=>me,Wp:()=>fe,KO:()=>pe});var r=n(812),s=n(443),i=n(700),a=n(555);let o,l;const c=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap;let m={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return u.get(e);if("objectStoreNames"===t)return e.objectStoreNames||d.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return y(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function p(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(l||(l=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(v(this),n),y(c.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return y(e.apply(v(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(v(this),t,...r);return d.set(i,t.sort?t.sort():[t]),y(i)}}function g(e){return"function"===typeof e?p(e):(e instanceof IDBTransaction&&function(e){if(u.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});u.set(e,t)}(e),t=e,(o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,m):e);var t}function y(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(y(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&c.set(t,e)}).catch(()=>{}),f.set(t,e),t}(e);if(h.has(e))return h.get(e);const t=g(e);return t!==e&&(h.set(e,t),f.set(t,e)),t}const v=e=>f.get(e);const x=["get","getKey","getAll","getAllKeys","count"],b=["put","add","delete","clear"],w=new Map;function k(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(w.get(t))return w.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=b.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!x.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(i=i.index(o.shift())),(await Promise.all([i[n](...o),s&&t.done]))[0]};return w.set(t,i),i}m=(e=>(0,a.A)((0,a.A)({},e),{},{get:(t,n,r)=>k(t,n)||e.get(t,n,r),has:(t,n)=>!!k(t,n)||e.has(t,n)}))(m);class _{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const N="@firebase/app",S="0.10.13",E=new s.Vy("@firebase/app"),A="@firebase/app-compat",T="@firebase/analytics-compat",C="@firebase/analytics",I="@firebase/app-check-compat",j="@firebase/app-check",P="@firebase/auth",D="@firebase/auth-compat",R="@firebase/database",O="@firebase/data-connect",L="@firebase/database-compat",M="@firebase/functions",F="@firebase/functions-compat",U="@firebase/installations",V="@firebase/installations-compat",B="@firebase/messaging",q="@firebase/messaging-compat",z="@firebase/performance",K="@firebase/performance-compat",W="@firebase/remote-config",H="@firebase/remote-config-compat",G="@firebase/storage",Q="@firebase/storage-compat",J="@firebase/firestore",Y="@firebase/vertexai-preview",X="@firebase/firestore-compat",$="firebase",Z="[DEFAULT]",ee={[N]:"fire-core",[A]:"fire-core-compat",[C]:"fire-analytics",[T]:"fire-analytics-compat",[j]:"fire-app-check",[I]:"fire-app-check-compat",[P]:"fire-auth",[D]:"fire-auth-compat",[R]:"fire-rtdb",[O]:"fire-data-connect",[L]:"fire-rtdb-compat",[M]:"fire-fn",[F]:"fire-fn-compat",[U]:"fire-iid",[V]:"fire-iid-compat",[B]:"fire-fcm",[q]:"fire-fcm-compat",[z]:"fire-perf",[K]:"fire-perf-compat",[W]:"fire-rc",[H]:"fire-rc-compat",[G]:"fire-gcs",[Q]:"fire-gcs-compat",[J]:"fire-fst",[X]:"fire-fst-compat",[Y]:"fire-vertex","fire-js":"fire-js",[$]:"fire-js-all"},te=new Map,ne=new Map,re=new Map;function se(e,t){try{e.container.addComponent(t)}catch(n){E.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function ie(e){const t=e.name;if(re.has(t))return E.debug("There were multiple attempts to register component ".concat(t,".")),!1;re.set(t,e);for(const n of te.values())se(n,e);for(const n of ne.values())se(n,e);return!0}function ae(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function oe(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Z;ae(e,t).clearInstance(n)}function le(e){return void 0!==e.settings}const ce={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ue=new i.FA("app","Firebase",ce);class de{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ue.create("app-deleted",{appName:this._name})}}const he="10.14.1";function fe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const s=Object.assign({name:Z,automaticDataCollectionEnabled:!1},t),a=s.name;if("string"!==typeof a||!a)throw ue.create("bad-app-name",{appName:String(a)});if(n||(n=(0,i.T9)()),!n)throw ue.create("no-options");const o=te.get(a);if(o){if((0,i.bD)(n,o.options)&&(0,i.bD)(s,o.config))return o;throw ue.create("duplicate-app",{appName:a})}const l=new r.h1(a);for(const r of re.values())l.addComponent(r);const c=new de(n,s,l);return te.set(a,c),c}function me(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;const t=te.get(e);if(!t&&e===Z&&(0,i.T9)())return fe();if(!t)throw ue.create("no-app",{appName:e});return t}function pe(e,t,n){var s;let i=null!==(s=ee[e])&&void 0!==s?s:e;n&&(i+="-".concat(n));const a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void E.warn(e.join(" "))}ie(new r.uA("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const ge="firebase-heartbeat-store";let ye=null;function ve(){return ye||(ye=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=y(a);return r&&a.addEventListener("upgradeneeded",e=>{r(y(a.result),e.oldVersion,e.newVersion,y(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ge)}catch(n){console.warn(n)}}}).catch(e=>{throw ue.create("idb-open",{originalErrorMessage:e.message})})),ye}async function xe(e,t){try{const n=(await ve()).transaction(ge,"readwrite"),r=n.objectStore(ge);await r.put(t,be(e)),await n.done}catch(n){if(n instanceof i.g)E.warn(n.message);else{const e=ue.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});E.warn(e.message)}}}function be(e){return"".concat(e.name,"!").concat(e.options.appId)}class we{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new _e(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ke();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(n){E.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ke(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),Ne(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ne(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=(0,i.Uj)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return E.warn(t),""}}}function ke(){return(new Date).toISOString().substring(0,10)}class _e{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,i.zW)()&&(0,i.eX)().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ve()).transaction(ge),n=await t.objectStore(ge).get(be(e));return await t.done,n}catch(t){if(t instanceof i.g)E.warn(t.message);else{const e=ue.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});E.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return xe(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return xe(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Ne(e){return(0,i.Uj)(JSON.stringify({version:2,heartbeats:e})).length}var Se;Se="",ie(new r.uA("platform-logger",e=>new _(e),"PRIVATE")),ie(new r.uA("heartbeat",e=>new we(e),"PRIVATE")),pe(N,S,Se),pe(N,S,"esm2017"),pe("fire-js","")},153:(e,t,n)=>{"use strict";var r=n(43),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:s,type:e,key:c,ref:u,props:i,_owner:o.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function v(){}function x(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=x.prototype=new v;b.constructor=x,p(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,_={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var s,i={},a=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)k.call(t,s)&&!N.hasOwnProperty(s)&&(i[s]=t[s]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===i[s]&&(i[s]=l[s]);return{$$typeof:n,type:e,key:a,ref:o,props:i,_owner:_.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function C(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===i?"."+T(l,0):i,w(a)?(s="",null!=e&&(s=e.replace(A,"$&/")+"/"),C(a,t,s,"",function(e){return e})):null!=a&&(E(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(A,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var u=i+T(o=e[c],c);l+=C(o,t,s,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=C(o=o.value,t,s,u=i+T(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,n){if(null==e)return e;var r=[],s=0;return C(e,r,"","",function(e){return t.call(n,e,s++)}),r}function j(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},D={transition:null},R={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:D,ReactCurrentOwner:_};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:I,forEach:function(e,t,n){I(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return I(e,function(){t++}),t},toArray:function(e){return I(e,function(e){return e})||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=s,t.Profiler=a,t.PureComponent=x,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=p({},e.props),i=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=_.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k.call(t,c)&&!N.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:s,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:j}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,p=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,b(e),!p)if(null!==r(c))p=!0,D(k);else{var t=r(u);null!==t&&R(w,t.startTime-e)}}function k(e,n){p=!1,g&&(g=!1,v(E),E=-1),m=!0;var i=f;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!C());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&s(c),b(n)}else s(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&R(w,d.startTime-n),l=!1}return l}finally{h=null,f=i,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,N=!1,S=null,E=-1,A=5,T=-1;function C(){return!(t.unstable_now()-T<A)}function I(){if(null!==S){var e=t.unstable_now();T=e;var n=!0;try{n=S(!0,e)}finally{n?_():(N=!1,S=null)}}else N=!1}if("function"===typeof x)_=function(){x(I)};else if("undefined"!==typeof MessageChannel){var j=new MessageChannel,P=j.port2;j.port1.onmessage=I,_=function(){P.postMessage(null)}}else _=function(){y(I,0)};function D(e){S=e,N||(N=!0,_())}function R(e,n){E=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||m||(p=!0,D(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(v(E),E=-1):g=!0,R(w,i-a))):(e.sortIndex=o,n(c,e),p||m||(p=!0,D(k))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},393:function(e,t,n){!function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){i(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}function o(e,t){if(null==e)return{};var n,r,s=a(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function l(e,t){return c(e)||u(e,t)||d(e,t)||f()}function c(e){if(Array.isArray(e))return e}function u(e,t){var n=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,s,i=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){o=!0,s=l}finally{try{a||null==n.return||n.return()}finally{if(o)throw s}}return i}}function d(e,t){if(e){if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var p,g,y,v,x={exports:{}};function b(){return g?p:(g=1,p="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}function w(){if(v)return y;v=1;var e=b();function t(){}function n(){}return n.resetWarningCache=t,y=function(){function r(t,n,r,s,i,a){if(a!==e){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function s(){return r}r.isRequired=r;var i={array:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:t};return i.PropTypes=i,i}}x.exports=w()();var k=m(x.exports),_=function(e,n,r){var s=!!r,i=t.useRef(r);t.useEffect(function(){i.current=r},[r]),t.useEffect(function(){if(!s||!e)return function(){};var t=function(){i.current&&i.current.apply(i,arguments)};return e.on(n,t),function(){e.off(n,t)}},[s,n,e,i])},N=function(e){var n=t.useRef(e);return t.useEffect(function(){n.current=e},[e]),n.current},S=function(e){return null!==e&&"object"===s(e)},E=function(e){return S(e)&&"function"===typeof e.then},A=function(e){return S(e)&&"function"===typeof e.elements&&"function"===typeof e.createToken&&"function"===typeof e.createPaymentMethod&&"function"===typeof e.confirmCardPayment},T="[object Object]",C=function e(t,n){if(!S(t)||!S(n))return t===n;var r=Array.isArray(t);if(r!==Array.isArray(n))return!1;var s=Object.prototype.toString.call(t)===T;if(s!==(Object.prototype.toString.call(n)===T))return!1;if(!s&&!r)return t===n;var i=Object.keys(t),a=Object.keys(n);if(i.length!==a.length)return!1;for(var o={},l=0;l<i.length;l+=1)o[i[l]]=!0;for(var c=0;c<a.length;c+=1)o[a[c]]=!0;var u=Object.keys(o);if(u.length!==i.length)return!1;var d=t,h=n,f=function(t){return e(d[t],h[t])};return u.every(f)},I=function(e,t,n){return S(e)?Object.keys(e).reduce(function(s,a){var o=!S(t)||!C(e[a],t[a]);return n.includes(a)?(o&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),s):o?r(r({},s||{}),{},i({},a,e[a])):s},null):null},j="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j;if(null===e||A(e))return e;throw new Error(t)},D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j;if(E(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(e){return P(e,t)})};var n=P(e,t);return null===n?{tag:"empty"}:{tag:"sync",stripe:n}},R=function(e){e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"2.8.1"}),e.registerAppInfo({name:"react-stripe-js",version:"2.8.1",url:"https://stripe.com/docs/stripe-js/react"}))},O=t.createContext(null);O.displayName="ElementsContext";var L=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},M=function(e){var n=e.stripe,r=e.options,s=e.children,i=t.useMemo(function(){return D(n)},[n]),a=l(t.useState(function(){return{stripe:"sync"===i.tag?i.stripe:null,elements:"sync"===i.tag?i.stripe.elements(r):null}}),2),o=a[0],c=a[1];t.useEffect(function(){var e=!0,t=function(e){c(function(t){return t.stripe?t:{stripe:e,elements:e.elements(r)}})};return"async"!==i.tag||o.stripe?"sync"!==i.tag||o.stripe||t(i.stripe):i.stripePromise.then(function(n){n&&e&&t(n)}),function(){e=!1}},[i,o,r]);var u=N(n);t.useEffect(function(){null!==u&&u!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[u,n]);var d=N(r);return t.useEffect(function(){if(o.elements){var e=I(r,d,["clientSecret","fonts"]);e&&o.elements.update(e)}},[r,d,o.elements]),t.useEffect(function(){R(o.stripe)},[o.stripe]),t.createElement(O.Provider,{value:o},s)};M.propTypes={stripe:k.any,options:k.object};var F=function(e){var n=t.useContext(O);return L(n,e)},U=function(){return F("calls useElements()").elements},V=function(e){return(0,e.children)(F("mounts <ElementsConsumer>"))};V.propTypes={children:k.func.isRequired};var B=["on","session"],q=t.createContext(null);q.displayName="CustomCheckoutSdkContext";var z=function(e,t){if(!e)throw new Error("Could not find CustomCheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CustomCheckoutProvider> provider."));return e},K=t.createContext(null);K.displayName="CustomCheckoutContext";var W=function(e,t){if(!e)return null;e.on,e.session;var n=o(e,B);return r(r({},n),t||e.session())},H="Invalid prop `stripe` supplied to `CustomCheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",G=function(e){var n=e.stripe,r=e.options,s=e.children,i=t.useMemo(function(){return D(n,H)},[n]),a=l(t.useState(null),2),o=a[0],c=a[1],u=l(t.useState(function(){return{stripe:"sync"===i.tag?i.stripe:null,customCheckoutSdk:null}}),2),d=u[0],h=u[1],f=function(e,t){h(function(n){return n.stripe&&n.customCheckoutSdk?n:{stripe:e,customCheckoutSdk:t}})},m=t.useRef(!1);t.useEffect(function(){var e=!0;return"async"!==i.tag||d.stripe?"sync"===i.tag&&i.stripe&&!m.current&&(m.current=!0,i.stripe.initCustomCheckout(r).then(function(e){e&&(f(i.stripe,e),e.on("change",c))})):i.stripePromise.then(function(t){t&&e&&!m.current&&(m.current=!0,t.initCustomCheckout(r).then(function(e){e&&(f(t,e),e.on("change",c))}))}),function(){e=!1}},[i,d,r,c]);var p=N(n);t.useEffect(function(){null!==p&&p!==n&&console.warn("Unsupported prop change on CustomCheckoutProvider: You cannot change the `stripe` prop after setting it.")},[p,n]);var g=N(r);t.useEffect(function(){var e,t;if(d.customCheckoutSdk){!r.clientSecret||S(g)||C(r.clientSecret,g.clientSecret)||console.warn("Unsupported prop change: options.client_secret is not a mutable property.");var n=null===g||void 0===g||null===(e=g.elementsOptions)||void 0===e?void 0:e.appearance,s=null===r||void 0===r||null===(t=r.elementsOptions)||void 0===t?void 0:t.appearance;s&&!C(s,n)&&d.customCheckoutSdk.changeAppearance(s)}},[r,g,d.customCheckoutSdk]),t.useEffect(function(){R(d.stripe)},[d.stripe]);var y=t.useMemo(function(){return W(d.customCheckoutSdk,o)},[d.customCheckoutSdk,o]);return d.customCheckoutSdk?t.createElement(q.Provider,{value:d},t.createElement(K.Provider,{value:y},s)):null};G.propTypes={stripe:k.any,options:k.shape({clientSecret:k.string.isRequired,elementsOptions:k.object}).isRequired};var Q=function(e){var n=t.useContext(q);return z(n,e)},J=function(e){var n=t.useContext(q),r=t.useContext(O);if(n&&r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CustomCheckoutProvider> and <Elements> providers."));return n?z(n,e):L(r,e)},Y=function(){Q("calls useCustomCheckout()");var e=t.useContext(K);if(!e)throw new Error("Could not find CustomCheckout Context; You need to wrap the part of your app that calls useCustomCheckout() in an <CustomCheckoutProvider> provider.");return e},X=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},$=function(e,n){var r="".concat(X(e),"Element"),s=n?function(e){J("mounts <".concat(r,">"));var n=e.id,s=e.className;return t.createElement("div",{id:n,className:s})}:function(n){var s,i=n.id,a=n.className,o=n.options,c=void 0===o?{}:o,u=n.onBlur,d=n.onFocus,h=n.onReady,f=n.onChange,m=n.onEscape,p=n.onClick,g=n.onLoadError,y=n.onLoaderStart,v=n.onNetworksChange,x=n.onConfirm,b=n.onCancel,w=n.onShippingAddressChange,k=n.onShippingRateChange,S=J("mounts <".concat(r,">")),E="elements"in S?S.elements:null,A="customCheckoutSdk"in S?S.customCheckoutSdk:null,T=l(t.useState(null),2),C=T[0],j=T[1],P=t.useRef(null),D=t.useRef(null);_(C,"blur",u),_(C,"focus",d),_(C,"escape",m),_(C,"click",p),_(C,"loaderror",g),_(C,"loaderstart",y),_(C,"networkschange",v),_(C,"confirm",x),_(C,"cancel",b),_(C,"shippingaddresschange",w),_(C,"shippingratechange",k),_(C,"change",f),h&&(s="expressCheckout"===e?h:function(){h(C)}),_(C,"ready",s),t.useLayoutEffect(function(){if(null===P.current&&null!==D.current&&(E||A)){var t=null;A?t=A.createElement(e,c):E&&(t=E.create(e,c)),P.current=t,j(t),t&&t.mount(D.current)}},[E,A,c]);var R=N(c);return t.useEffect(function(){if(P.current){var e=I(c,R,["paymentRequest"]);e&&"update"in P.current&&P.current.update(e)}},[c,R]),t.useLayoutEffect(function(){return function(){if(P.current&&"function"===typeof P.current.destroy)try{P.current.destroy(),P.current=null}catch(e){}}},[]),t.createElement("div",{id:i,className:a,ref:D})};return s.propTypes={id:k.string,className:k.string,onChange:k.func,onBlur:k.func,onFocus:k.func,onReady:k.func,onEscape:k.func,onClick:k.func,onLoadError:k.func,onLoaderStart:k.func,onNetworksChange:k.func,onConfirm:k.func,onCancel:k.func,onShippingAddressChange:k.func,onShippingRateChange:k.func,options:k.object},s.displayName=r,s.__elementType=e,s},Z="undefined"===typeof window,ee=t.createContext(null);ee.displayName="EmbeddedCheckoutProviderContext";var te=function(){var e=t.useContext(ee);if(!e)throw new Error("<EmbeddedCheckout> must be used within <EmbeddedCheckoutProvider>");return e},ne="Invalid prop `stripe` supplied to `EmbeddedCheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",re=function(e){var n=e.stripe,r=e.options,s=e.children,i=t.useMemo(function(){return D(n,ne)},[n]),a=t.useRef(null),o=t.useRef(null),c=l(t.useState({embeddedCheckout:null}),2),u=c[0],d=c[1];t.useEffect(function(){if(!o.current&&!a.current){var e=function(e){o.current||a.current||(o.current=e,a.current=o.current.initEmbeddedCheckout(r).then(function(e){d({embeddedCheckout:e})}))};"async"!==i.tag||o.current||!r.clientSecret&&!r.fetchClientSecret?"sync"!==i.tag||o.current||!r.clientSecret&&!r.fetchClientSecret||e(i.stripe):i.stripePromise.then(function(t){t&&e(t)})}},[i,r,u,o]),t.useEffect(function(){return function(){u.embeddedCheckout?(a.current=null,u.embeddedCheckout.destroy()):a.current&&a.current.then(function(){a.current=null,u.embeddedCheckout&&u.embeddedCheckout.destroy()})}},[u.embeddedCheckout]),t.useEffect(function(){R(o)},[o]);var h=N(n);t.useEffect(function(){null!==h&&h!==n&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the `stripe` prop after setting it.")},[h,n]);var f=N(r);return t.useEffect(function(){null!=f&&(null!=r?(void 0===r.clientSecret&&void 0===r.fetchClientSecret&&console.warn("Invalid props passed to EmbeddedCheckoutProvider: You must provide one of either `options.fetchClientSecret` or `options.clientSecret`."),null!=f.clientSecret&&r.clientSecret!==f.clientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the client secret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),null!=f.fetchClientSecret&&r.fetchClientSecret!==f.fetchClientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change fetchClientSecret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),null!=f.onComplete&&r.onComplete!==f.onComplete&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onComplete option after setting it."),null!=f.onShippingDetailsChange&&r.onShippingDetailsChange!==f.onShippingDetailsChange&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onShippingDetailsChange option after setting it."),null!=f.onLineItemsChange&&r.onLineItemsChange!==f.onLineItemsChange&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onLineItemsChange option after setting it.")):console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot unset options after setting them."))},[f,r]),t.createElement(ee.Provider,{value:u},s)},se=function(e){var n=e.id,r=e.className,s=te().embeddedCheckout,i=t.useRef(!1),a=t.useRef(null);return t.useLayoutEffect(function(){return!i.current&&s&&null!==a.current&&(s.mount(a.current),i.current=!0),function(){if(i.current&&s)try{s.unmount(),i.current=!1}catch(e){}}},[s]),t.createElement("div",{ref:a,id:n,className:r})},ie=function(e){var n=e.id,r=e.className;return te(),t.createElement("div",{id:n,className:r})},ae=Z?ie:se,oe=function(){return J("calls useStripe()").stripe},le=$("auBankAccount",Z),ce=$("card",Z),ue=$("cardNumber",Z),de=$("cardExpiry",Z),he=$("cardCvc",Z),fe=$("fpxBank",Z),me=$("iban",Z),pe=$("idealBank",Z),ge=$("p24Bank",Z),ye=$("epsBank",Z),ve=$("payment",Z),xe=$("expressCheckout",Z),be=$("currencySelector",Z),we=$("paymentRequestButton",Z),ke=$("linkAuthentication",Z),_e=$("address",Z),Ne=$("shippingAddress",Z),Se=$("paymentMethodMessaging",Z),Ee=$("affirmMessage",Z),Ae=$("afterpayClearpayMessage",Z);e.AddressElement=_e,e.AffirmMessageElement=Ee,e.AfterpayClearpayMessageElement=Ae,e.AuBankAccountElement=le,e.CardCvcElement=he,e.CardElement=ce,e.CardExpiryElement=de,e.CardNumberElement=ue,e.CurrencySelectorElement=be,e.CustomCheckoutProvider=G,e.Elements=M,e.ElementsConsumer=V,e.EmbeddedCheckout=ae,e.EmbeddedCheckoutProvider=re,e.EpsBankElement=ye,e.ExpressCheckoutElement=xe,e.FpxBankElement=fe,e.IbanElement=me,e.IdealBankElement=pe,e.LinkAuthenticationElement=ke,e.P24BankElement=ge,e.PaymentElement=ve,e.PaymentMethodMessagingElement=Se,e.PaymentRequestButtonElement=we,e.ShippingAddressElement=Ne,e.useCustomCheckout=Y,e.useElements=U,e.useStripe=oe}(t,n(43))},443:(e,t,n)=>{"use strict";n.d(t,{$b:()=>s,Vy:()=>c});const r=[];var s;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(s||(s={}));const i={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},a=s.INFO,o={[s.DEBUG]:"log",[s.VERBOSE]:"log",[s.INFO]:"info",[s.WARN]:"warn",[s.ERROR]:"error"},l=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=o[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...i)};class c{constructor(e){this.name=e,this._logLevel=a,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in s))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?i[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.DEBUG,...t),this._logHandler(this,s.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.VERBOSE,...t),this._logHandler(this,s.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.INFO,...t),this._logHandler(this,s.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.WARN,...t),this._logHandler(this,s.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.ERROR,...t),this._logHandler(this,s.ERROR,...t)}}},472:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AbstractUserDataWriter:()=>Md,AggregateField:()=>Cu,AggregateQuerySnapshot:()=>Iu,Bytes:()=>ju,CACHE_SIZE_UNLIMITED:()=>fu,CollectionReference:()=>su,DocumentReference:()=>ru,DocumentSnapshot:()=>Hd,FieldPath:()=>Pu,FieldValue:()=>Ru,Firestore:()=>mu,FirestoreError:()=>L,GeoPoint:()=>Ou,LoadBundleTask:()=>hu,PersistentCacheIndexManager:()=>Vh,Query:()=>nu,QueryCompositeFilterConstraint:()=>vd,QueryConstraint:()=>md,QueryDocumentSnapshot:()=>Gd,QueryEndAtConstraint:()=>Cd,QueryFieldFilterConstraint:()=>gd,QueryLimitConstraint:()=>_d,QueryOrderByConstraint:()=>wd,QuerySnapshot:()=>Qd,QueryStartAtConstraint:()=>Ed,SnapshotMetadata:()=>Wd,Timestamp:()=>$,Transaction:()=>Ch,VectorValue:()=>Lu,WriteBatch:()=>Ah,_AutoId:()=>Q,_ByteString:()=>Et,_DatabaseId:()=>Ot,_DocumentKey:()=>se,_EmptyAppCheckTokenProvider:()=>H,_EmptyAuthCredentialsProvider:()=>U,_FieldPath:()=>re,_TestingHooks:()=>Jh,_cast:()=>Xc,_debugAssert:()=>D,_internalAggregationQueryToProtoRunAggregationQueryRequest:()=>Qh,_internalQueryToProtoQueryTarget:()=>Gh,_isBase64Available:()=>St,_logWarn:()=>C,_validateIsNotUsedTogether:()=>Gc,addDoc:()=>oh,aggregateFieldEqual:()=>zd,aggregateQuerySnapshotEqual:()=>Kd,and:()=>bd,arrayRemove:()=>Rh,arrayUnion:()=>Dh,average:()=>Bd,clearIndexedDbPersistence:()=>ku,collection:()=>iu,collectionGroup:()=>au,connectFirestoreEmulator:()=>tu,count:()=>qd,deleteAllPersistentCacheIndexes:()=>Kh,deleteDoc:()=>ah,deleteField:()=>jh,disableNetwork:()=>Su,disablePersistentCacheIndexAutoCreation:()=>zh,doc:()=>ou,documentId:()=>Du,enableIndexedDbPersistence:()=>xu,enableMultiTabIndexedDbPersistence:()=>bu,enableNetwork:()=>Nu,enablePersistentCacheIndexAutoCreation:()=>qh,endAt:()=>jd,endBefore:()=>Id,ensureFirestoreConfigured:()=>yu,executeWrite:()=>uh,getAggregateFromServer:()=>fh,getCountFromServer:()=>hh,getDoc:()=>Xd,getDocFromCache:()=>Zd,getDocFromServer:()=>eh,getDocs:()=>th,getDocsFromCache:()=>nh,getDocsFromServer:()=>rh,getFirestore:()=>gu,getPersistentCacheIndexManager:()=>Bh,increment:()=>Oh,initializeFirestore:()=>pu,limit:()=>Nd,limitToLast:()=>Sd,loadBundle:()=>Au,memoryEagerGarbageCollector:()=>vh,memoryLocalCache:()=>bh,memoryLruGarbageCollector:()=>xh,namedQuery:()=>Tu,onSnapshot:()=>lh,onSnapshotsInSync:()=>ch,or:()=>xd,orderBy:()=>kd,persistentLocalCache:()=>wh,persistentMultipleTabManager:()=>Sh,persistentSingleTabManager:()=>Nh,query:()=>pd,queryEqual:()=>cu,refEqual:()=>lu,runTransaction:()=>Ih,serverTimestamp:()=>Ph,setDoc:()=>sh,setIndexConfiguration:()=>Fh,setLogLevel:()=>E,snapshotEqual:()=>Yd,startAfter:()=>Td,startAt:()=>Ad,sum:()=>Vd,terminate:()=>Eu,updateDoc:()=>ih,vector:()=>Lh,waitForPendingWrites:()=>_u,where:()=>yd,writeBatch:()=>Mh});var r,s,i=n(150),a=n(812),o=n(443),l=n(700),c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},u={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],a=t+(i^n&(s^i))+r[0]+3614090360&4294967295;a=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=n+(a<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((i=(t=n+((a=t+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((s=i+((a=s+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function i(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,i=this.h,a=0;a<t;){if(0==i)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(s[i++]=e.charCodeAt(a++),i==this.blockSize){n(this,s),i=0;break}}else for(;a<t;)if(s[i++]=e[a++],i==this.blockSize){n(this,s),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var a={};function o(e){return-128<=e&&128>e?function(e,t){var n=a;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new i([0|e],0>e?-1:0)}):new i([0|e],0>e?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return c;if(0>e)return p(l(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new i(t,0)}var c=o(0),d=o(1),h=o(16777216);function f(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function m(e){return-1==e.h}function p(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new i(n,~e.h).add(d)}function g(e,t){return e.add(p(t))}function y(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function v(e,t){this.g=e,this.h=t}function x(e,t){if(f(t))throw Error("division by zero");if(f(e))return new v(c,c);if(m(e))return t=x(p(e),t),new v(p(t.g),p(t.h));if(m(t))return t=x(e,p(t)),new v(p(t.g),t.h);if(30<e.g.length){if(m(e)||m(t))throw Error("slowDivide_ only works with positive integers.");for(var n=d,r=t;0>=r.l(e);)n=b(n),r=b(r);var s=w(n,1),i=w(r,1);for(r=w(r,2),n=w(n,2);!f(r);){var a=i.add(r);0>=a.l(e)&&(s=s.add(n),i=a),r=w(r,1),n=w(n,1)}return t=g(e,s.j(t)),new v(s,t)}for(s=c;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),a=(i=l(n)).j(t);m(a)||0<a.l(e);)a=(i=l(n-=r)).j(t);f(i)&&(i=d),s=s.add(i),e=g(e,a)}return new v(s,e)}function b(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new i(n,e.h)}function w(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,s=[],a=0;a<r;a++)s[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new i(s,e.h)}(e=i.prototype).m=function(){if(m(this))return-p(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(f(this))return"0";if(m(this))return"-"+p(this).toString(e);for(var t=l(Math.pow(e,6)),n=this,r="";;){var s=x(n,t).g,i=((0<(n=g(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(f(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return m(e=g(this,e))?-1:f(e)?0:1},e.abs=function(){return m(this)?p(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,s=0;s<=t;s++){var a=r+(65535&this.i(s))+(65535&e.i(s)),o=(a>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);r=o>>>16,a&=65535,o&=65535,n[s]=o<<16|a}return new i(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(f(this)||f(e))return c;if(m(this))return m(e)?p(this).j(p(e)):p(p(this).j(e));if(m(e))return p(this.j(p(e)));if(0>this.l(h)&&0>e.l(h))return l(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<e.g.length;s++){var a=this.i(r)>>>16,o=65535&this.i(r),u=e.i(s)>>>16,d=65535&e.i(s);n[2*r+2*s]+=o*d,y(n,2*r+2*s),n[2*r+2*s+1]+=a*d,y(n,2*r+2*s+1),n[2*r+2*s+1]+=o*u,y(n,2*r+2*s+1),n[2*r+2*s+2]+=a*u,y(n,2*r+2*s+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new i(n,0)},e.A=function(e){return x(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new i(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new i(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new i(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,s=u.Md5=t,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=l,i.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return p(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=l(Math.pow(n,8)),s=c,i=0;i<t.length;i+=8){var a=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+a),n);8>a?(a=l(Math.pow(n,a)),s=s.j(a).add(l(o))):s=(s=s.j(r)).add(l(o))}return s},r=u.Integer=i}).apply("undefined"!==typeof c?c:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var d,h,f,m,p,g,y,v,x="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},b={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof x&&x];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];if(!(a in s))break e;s=s[a]}(r=r(i=s[e=e[e.length-1]]))!=i&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,function(e,t){return t})}});var r=r||{},s=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function k(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function _(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function S(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(i(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function E(e){return/^[\s\xa0]*$/.test(e)}function A(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function T(e){return T[" "](e),e}T[" "]=function(){};var C=-1!=A().indexOf("Gecko")&&!(-1!=A().toLowerCase().indexOf("webkit")&&-1==A().indexOf("Edge"))&&!(-1!=A().indexOf("Trident")||-1!=A().indexOf("MSIE"))&&-1==A().indexOf("Edge");function I(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function j(e){const t={};for(const n in e)t[n]=e[n];return t}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<P.length;t++)n=P[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function R(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function O(e){s.setTimeout(()=>{throw e},0)}function L(){var e=B;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var M=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new F,e=>e.reset());class F{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let U,V=!1,B=new class{constructor(){this.h=this.g=null}add(e,t){const n=M.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},q=()=>{const e=s.Promise.resolve(void 0);U=()=>{e.then(z)}};var z=()=>{for(var e;e=L();){try{e.h.call(e.g)}catch(n){O(n)}var t=M;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}V=!1};function K(){this.s=this.s,this.C=this.C}function W(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}K.prototype.s=!1,K.prototype.ma=function(){this.s||(this.s=!0,this.N())},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},W.prototype.h=function(){this.defaultPrevented=!0};var H=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function G(e,t){if(W.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(C){e:{try{T(t.nodeName);var s=!0;break e}catch(i){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Q[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&G.aa.h.call(this)}}k(G,W);var Q={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var J="closure_listenable_"+(1e6*Math.random()|0),Y=0;function X(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++Y,this.da=this.fa=!1}function $(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function Z(e){this.src=e,this.g={},this.h=0}function ee(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=Array.prototype.indexOf.call(s,t,void 0);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&($(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function te(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return s}return-1}Z.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var a=te(e,t,r,s);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new X(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var ne="closure_lm_"+(1e6*Math.random()|0),re={};function se(e,t,n,r,s){if(r&&r.once)return ae(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)se(e,t[i],n,r,s);return null}return n=fe(n),e&&e[J]?e.K(t,n,a(r)?!!r.capture:!!r,s):ie(e,t,n,!1,r,s)}function ie(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=a(s)?!!s.capture:!!s,l=de(e);if(l||(e[ne]=l=new Z(e)),(n=l.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=ue;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)H||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(ce(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ae(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)ae(e,t[i],n,r,s);return null}return n=fe(n),e&&e[J]?e.L(t,n,a(r)?!!r.capture:!!r,s):ie(e,t,n,!0,r,s)}function oe(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)oe(e,t[i],n,r,s);else r=a(r)?!!r.capture:!!r,n=fe(n),e&&e[J]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=te(i=e.g[t],n,r,s))&&($(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=de(e))&&(t=e.g[t.toString()],e=-1,t&&(e=te(t,n,r,s)),(n=-1<e?t[e]:null)&&le(n))}function le(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[J])ee(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ce(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=de(t))?(ee(n,e),0==n.h&&(n.src=null,t[ne]=null)):$(e)}}}function ce(e){return e in re?re[e]:re[e]="on"+e}function ue(e,t){if(e.da)e=!0;else{t=new G(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&le(e),e=n.call(r,t)}return e}function de(e){return(e=e[ne])instanceof Z?e:null}var he="__closure_events_fn_"+(1e9*Math.random()>>>0);function fe(e){return"function"===typeof e?e:(e[he]||(e[he]=function(t){return e.handleEvent(t)}),e[he])}function me(){K.call(this),this.i=new Z(this),this.M=this,this.F=null}function pe(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new W(t,e);else if(t instanceof W)t.target=t.target||e;else{var s=t;D(t=new W(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var a=t.g=n[i];s=ge(a,r,!0,t)&&s}if(s=ge(a=t.g=e,r,!0,t)&&s,s=ge(a,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=ge(a=t.g=n[i],r,!1,t)&&s}function ge(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var a=t[i];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&ee(e.i,a),s=!1!==o.call(l,r)&&s}}return s&&!r.defaultPrevented}function ye(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function ve(e){e.g=ye(()=>{e.g=null,e.i&&(e.i=!1,ve(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}k(me,K),me.prototype[J]=!0,me.prototype.removeEventListener=function(e,t,n,r){oe(this,e,t,n,r)},me.prototype.N=function(){if(me.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)$(n[r]);delete t.g[e],t.h--}}this.F=null},me.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},me.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class xe extends K{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ve(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function be(e){K.call(this),this.h=e,this.g={}}k(be,K);var we=[];function ke(e){I(e.g,function(e,t){this.g.hasOwnProperty(t)&&le(e)},e),e.g={}}be.prototype.N=function(){be.aa.N.call(this),ke(this)},be.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _e=s.JSON.stringify,Ne=s.JSON.parse,Se=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function Ee(){}function Ae(e){return e.h||(e.h=e.i())}function Te(){}Ee.prototype.h=null;var Ce={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ie(){W.call(this,"d")}function je(){W.call(this,"c")}k(Ie,W),k(je,W);var Pe={},De=null;function Re(){return De=De||new me}function Oe(e){W.call(this,Pe.La,e)}function Le(e){const t=Re();pe(t,new Oe(t))}function Me(e,t){W.call(this,Pe.STAT_EVENT,e),this.stat=t}function Fe(e){const t=Re();pe(t,new Me(t,e))}function Ue(e,t){W.call(this,Pe.Ma,e),this.size=t}function Ve(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Be(){this.g=!0}function qe(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var a=1;a<s.length;a++)s[a]=""}}}return _e(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}Pe.La="serverreachability",k(Oe,W),Pe.STAT_EVENT="statevent",k(Me,W),Pe.Ma="timingevent",k(Ue,W),Be.prototype.xa=function(){this.g=!1},Be.prototype.info=function(){};var ze,Ke={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},We={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function He(){}function Ge(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new be(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qe}function Qe(){this.i=null,this.g="",this.h=!1}k(He,Ee),He.prototype.g=function(){return new XMLHttpRequest},He.prototype.i=function(){return{}},ze=new He;var Je={},Ye={};function Xe(e,t,n){e.L=1,e.v=_t(vt(t)),e.m=n,e.P=!0,$e(e,null)}function $e(e,t){e.F=Date.now(),tt(e),e.A=vt(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Mt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Qe,e.g=Sn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new xe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(we[0]=s.toString()),s=we);for(var i=0;i<s.length;i++){var a=se(n,s[i],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?j(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Le(),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var a="",o=i.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function et(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ye:(n=Number(t.substring(n,r)),isNaN(n)?Je:(r+=1)+n>t.length?Ye:(t=t.slice(r,r+n),e.C=r+n,t))}function tt(e){e.S=Date.now()+e.I,nt(e,e.I)}function nt(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ve(c(e.ba,e),t)}function rt(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function st(e){0==e.j.G||e.J||bn(e.j,e)}function it(e){rt(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ke(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function at(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||dt(n.h,e)))if(!e.K&&dt(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;xn(n),cn(n)}gn(n),Fe(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ve(c(n.Za,n),6e3));if(1>=ut(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else kn(n,11)}else if((e.K||n.g==e)&&xn(n),!E(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=c[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(ht(i,i.h),i.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,kt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=Nn(r,r.J?r.ia:null,r.W),a.K){ft(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(rt(o),tt(o)),r.g=a}else pn(r);0<n.i.length&&dn(n)}else"stop"!=c[0]&&"close"!=c[0]||kn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?kn(n,7):ln(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Le()}catch(u){}}Ge.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==rn(e)?t.j():this.Y(e)},Ge.prototype.Y=function(e){try{if(e==this.g)e:{const h=rn(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||sn(this.g)))){this.J||4!=h||7==t||Le(),rt(this);var n=this.g.Z();this.X=n;t:if(Ze(this)){var r=sn(this.g);e="";var i=r.length,a=4==rn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){it(this),st(this);var o="";break t}this.h.i=new s.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,i,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+a})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Fe(12),it(this),st(this);break e}qe(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,at(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=et(this,o),e==Ye){4==h&&(this.s=4,Fe(14),n=!1),qe(this.i,this.l,null,"[Incomplete Response]");break}if(e==Je){this.s=4,Fe(15),qe(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}qe(this.i,this.l,e,null),at(this,e)}if(Ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,Fe(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),yn(d),d.M=!0,Fe(11))}}else qe(this.i,this.l,o,"[Invalid Chunked Response]"),it(this),st(this)}else qe(this.i,this.l,o,null),at(this,o);4==h&&it(this),this.o&&!this.J&&(4==h?bn(this.j,this):(this.o=!1,tt(this)))}else(function(e){const t={};e=(e.g&&2<=rn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(E(e[r]))continue;var n=R(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Fe(12)):(this.s=0,Fe(13)),it(this),st(this)}}}catch(w){}},Ge.prototype.cancel=function(){this.J=!0,it(this)},Ge.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Le(),Fe(17)),it(this),this.s=2,st(this)):nt(this,this.S-e)};var ot=class{constructor(e,t){this.g=e,this.map=t}};function lt(e){this.l=e||10,s.PerformanceNavigationTiming?e=0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ct(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ut(e){return e.h?1:e.g?e.g.size:0}function dt(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ht(e,t){e.g?e.g.add(t):e.h=t}function ft(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function mt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return _(e.i)}function pt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(i(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,a=0;a<s;a++)t.call(void 0,r[a],n&&n[a],e)}lt.prototype.cancel=function(){if(this.i=mt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var gt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof yt){this.h=e.h,xt(this,e.j),this.o=e.o,this.g=e.g,bt(this,e.s),this.l=e.l;var t=e.i,n=new Dt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),wt(this,n),this.m=e.m}else e&&(t=String(e).match(gt))?(this.h=!1,xt(this,t[1]||"",!0),this.o=Nt(t[2]||""),this.g=Nt(t[3]||"",!0),bt(this,t[4]),this.l=Nt(t[5]||"",!0),wt(this,t[6]||"",!0),this.m=Nt(t[7]||"")):(this.h=!1,this.i=new Dt(null,this.h))}function vt(e){return new yt(e)}function xt(e,t,n){e.j=n?Nt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function bt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function wt(e,t,n){t instanceof Dt?(e.i=t,function(e,t){t&&!e.j&&(Rt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Ot(this,t),Mt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=St(t,jt)),e.i=new Dt(t,e.h))}function kt(e,t,n){e.i.set(t,n)}function _t(e){return kt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Nt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function St(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Et),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Et(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}yt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(St(t,Tt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(St(t,Tt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(St(n,"/"==n.charAt(0)?It:Ct,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",St(n,Pt)),e.join("")};var At,Tt=/[#\/\?@]/g,Ct=/[#\?:]/g,It=/[#\?]/g,jt=/[#\?@]/g,Pt=/#/g;function Dt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Rt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Ot(e,t){Rt(e),t=Ft(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Lt(e,t){return Rt(e),t=Ft(e,t),e.g.has(t)}function Mt(e,t,n){Ot(e,t),0<n.length&&(e.i=null,e.g.set(Ft(e,t),_(n)),e.h+=n.length)}function Ft(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ut(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(i){}}function Vt(){this.g=new Se}function Bt(e,t,n){const r=n||"";try{pt(e,function(e,n){let s=e;a(e)&&(s=_e(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(s){throw t.push(r+"type="+encodeURIComponent("_badmap")),s}}function qt(e){this.l=e.Ub||null,this.j=e.eb||!1}function zt(e,t){me.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Kt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Wt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Ht(e)}function Ht(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Gt(e){let t="";return I(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Qt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Gt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):kt(e,t,n))}function Jt(e){me.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=Dt.prototype).add=function(e,t){Rt(this),this.i=null,e=Ft(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Rt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){Rt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){Rt(this);let t=[];if("string"===typeof e)Lt(this,e)&&(t=t.concat(this.g.get(Ft(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Rt(this),this.i=null,Lt(this,e=Ft(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var s=i;""!==a[r]&&(s+="="+encodeURIComponent(String(a[r]))),e.push(s)}}return this.i=e.join("&")},k(qt,Ee),qt.prototype.g=function(){return new zt(this.l,this.j)},qt.prototype.i=(At={},function(){return At}),k(zt,me),(e=zt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Ht(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Wt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ht(this)),this.g&&(this.readyState=3,Ht(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Kt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Wt(this):Ht(this),3==this.readyState&&Kt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Wt(this))},e.Qa=function(e){this.g&&(this.response=e,Wt(this))},e.ga=function(){this.g&&Wt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(zt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),k(Jt,me);var Yt=/^https?$/i,Xt=["POST","PUT"];function $t(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Zt(e),tn(e)}function Zt(e){e.A||(e.A=!0,pe(e,"complete"),pe(e,"error"))}function en(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=rn(e)||2!=e.Z()))if(e.u&&4==rn(e))ye(e.Ea,0,e);else if(pe(e,"readystatechange"),4==rn(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===r){var a=String(e.D).match(gt)[1]||null;!a&&s.self&&s.self.location&&(a=s.self.location.protocol.slice(0,-1)),i=!Yt.test(a?a.toLowerCase():"")}n=i}if(n)pe(e,"complete"),pe(e,"success");else{e.m=6;try{var o=2<rn(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Zt(e)}}finally{tn(e)}}}function tn(e,t){if(e.g){nn(e);const r=e.g,s=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||pe(e,"ready");try{r.onreadystatechange=s}catch(n){}}}function nn(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function rn(e){return e.g?e.g.readyState:0}function sn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(N){return null}}function an(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function on(e){this.Aa=0,this.i=[],this.j=new Be,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=an("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=an("baseRetryDelayMs",5e3,e),this.cb=an("retryDelaySeedMs",1e4,e),this.Wa=an("forwardChannelMaxRetries",2,e),this.wa=an("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new lt(e&&e.concurrentRequestLimit),this.Da=new Vt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function ln(e){if(un(e),3==e.G){var t=e.U++,n=vt(e.I);if(kt(n,"SID",e.K),kt(n,"RID",t),kt(n,"TYPE","terminate"),fn(e,n),(t=new Ge(e,e.j,t)).L=2,t.v=_t(vt(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=Sn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),tt(t)}_n(e)}function cn(e){e.g&&(yn(e),e.g.cancel(),e.g=null)}function un(e){cn(e),e.u&&(s.clearTimeout(e.u),e.u=null),xn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&s.clearTimeout(e.s),e.s=null)}function dn(e){if(!ct(e.h)&&!e.s){e.s=!0;var t=e.Ga;U||q(),V||(U(),V=!0),B.add(t,e),e.B=0}}function hn(e,t){var n;n=t?t.l:e.U++;const r=vt(e.I);kt(r,"SID",e.K),kt(r,"RID",n),kt(r,"AID",e.T),fn(e,r),e.m&&e.o&&Qt(r,e.m,e.o),n=new Ge(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=mn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),ht(e.h,n),Xe(n,r,t)}function fn(e,t){e.H&&I(e.H,function(e,n){kt(t,n,e)}),e.l&&pt({},function(e,n){kt(t,n,e)})}function mn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let i=!0;for(let a=0;a<n;a++){let n=s[a].g;const o=s[a].map;if(n-=t,0>n)t=Math.max(0,s[a].g-100),i=!1;else try{Bt(o,e,"req"+n+"_")}catch(w){r&&r(o)}}if(i){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function pn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;U||q(),V||(U(),V=!0),B.add(t,e),e.v=0}}function gn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ve(c(e.Fa,e),wn(e,e.v)),e.v++,!0)}function yn(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function vn(e){e.g=new Ge(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=vt(e.qa);kt(t,"RID","rpc"),kt(t,"SID",e.K),kt(t,"AID",e.T),kt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&kt(t,"TO",e.ja),kt(t,"TYPE","xmlhttp"),fn(e,t),e.m&&e.o&&Qt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=_t(vt(t)),n.m=null,n.P=!0,$e(n,e)}function xn(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function bn(e,t){var n=null;if(e.g==t){xn(e),yn(e),e.g=null;var r=2}else{if(!dt(e.h,t))return;n=t.D,ft(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;pe(r=Re(),new Ue(r,n)),dn(e)}else pn(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!(ut(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ve(c(e.Ga,e,t),wn(e,e.B)),e.B++,!0))}(e,t)||2==r&&gn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:kn(e,5);break;case 4:kn(e,10);break;case 3:kn(e,6);break;default:kn(e,2)}}function wn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function kn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new yt(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||xt(r,"https"),_t(r),t?function(e,t){const n=new Be;if(s.Image){const r=new Image;r.onload=u(Ut,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Ut,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Ut,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Ut,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Be;const n=new AbortController,r=setTimeout(()=>{n.abort(),Ut(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Ut(0,0,!0,t):Ut(0,0,!1,t)}).catch(()=>{clearTimeout(r),Ut(0,0,!1,t)})}(r.toString(),n)}else Fe(2);e.G=0,e.l&&e.l.sa(t),_n(e),un(e)}function _n(e){if(e.G=0,e.ka=[],e.l){const t=mt(e.h);0==t.length&&0==e.i.length||(S(e.ka,t),S(e.ka,e.i),e.h.i.length=0,_(e.i),e.i.length=0),e.l.ra()}}function Nn(e,t,n){var r=n instanceof yt?vt(n):new yt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),bt(r,r.s);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new yt(null);r&&xt(a,r),t&&(a.g=t),i&&bt(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&kt(r,n,t),kt(r,"VER",e.la),fn(e,r),r}function Sn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Jt(new qt({eb:n})):new Jt(e.pa)).Ha(e.J),t}function En(){}function An(){}function Tn(e,t){me.call(this),this.g=new on(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!E(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!E(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new jn(this)}function Cn(e){Ie.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function In(){je.call(this),this.status=1}function jn(e){this.g=e}(e=Jt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ze.g(),this.v=this.o?Ae(this.o):Ae(ze),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void $t(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Xt,t,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{nn(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){$t(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,pe(this,"complete"),pe(this,"abort"),tn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tn(this,!0)),Jt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?en(this):this.bb())},e.bb=function(){en(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<rn(this)?this.g.status:-1}catch(At){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(At){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Ne(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=on.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Fe(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=Nn(this,null,this.W),dn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new Ge(this,this.j,e);let i=this.o;if(this.S&&(i?(i=j(i),D(i,this.S)):i=this.S),null!==this.m||this.O||(s.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=mn(this,s,t),kt(n=vt(this.I),"RID",e),kt(n,"CVER",22),this.D&&kt(n,"X-HTTP-Session-Id",this.D),fn(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Gt(i)))+"&"+t:this.m&&Qt(n,this.m,i)),ht(this.h,s),this.Ua&&kt(n,"TYPE","init"),this.P?(kt(n,"$req",t),kt(n,"SID","null"),s.T=!0,Xe(s,n,null)):Xe(s,n,t),this.G=2}}else 3==this.G&&(e?hn(this,e):0==this.i.length||ct(this.h)||hn(this))},e.Fa=function(){if(this.u=null,vn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ve(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Fe(10),cn(this),vn(this))},e.Za=function(){null!=this.C&&(this.C=null,cn(this),gn(this),Fe(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Fe(2)):(this.j.info("Failed to ping google.com"),Fe(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=En.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},An.prototype.g=function(e,t){return new Tn(e,t)},k(Tn,me),Tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Tn.prototype.close=function(){ln(this.g)},Tn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=_e(e),e=n);t.i.push(new ot(t.Ya++,e)),3==t.G&&dn(t)},Tn.prototype.N=function(){this.g.l=null,delete this.j,ln(this.g),delete this.g,Tn.aa.N.call(this)},k(Cn,Ie),k(In,je),k(jn,En),jn.prototype.ua=function(){pe(this.g,"a")},jn.prototype.ta=function(e){pe(this.g,new Cn(e))},jn.prototype.sa=function(e){pe(this.g,new In)},jn.prototype.ra=function(){pe(this.g,"b")},An.prototype.createWebChannel=An.prototype.g,Tn.prototype.send=Tn.prototype.o,Tn.prototype.open=Tn.prototype.m,Tn.prototype.close=Tn.prototype.close,v=b.createWebChannelTransport=function(){return new An},y=b.getStatEventTarget=function(){return Re()},g=b.Event=Pe,p=b.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ke.NO_ERROR=0,Ke.TIMEOUT=8,Ke.HTTP_ERROR=6,m=b.ErrorCode=Ke,We.COMPLETE="complete",f=b.EventType=We,Te.EventType=Ce,Ce.OPEN="a",Ce.CLOSE="b",Ce.ERROR="c",Ce.MESSAGE="d",me.prototype.listen=me.prototype.K,h=b.WebChannel=Te,b.FetchXmlHttpFactory=qt,Jt.prototype.listenOnce=Jt.prototype.L,Jt.prototype.getLastError=Jt.prototype.Ka,Jt.prototype.getLastErrorCode=Jt.prototype.Ba,Jt.prototype.getStatus=Jt.prototype.Z,Jt.prototype.getResponseJson=Jt.prototype.Oa,Jt.prototype.getResponseText=Jt.prototype.oa,Jt.prototype.send=Jt.prototype.ea,Jt.prototype.setWithCredentials=Jt.prototype.Ha,d=b.XhrIo=Jt}).apply("undefined"!==typeof x?x:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const w="@firebase/firestore";class k{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}k.UNAUTHENTICATED=new k(null),k.GOOGLE_CREDENTIALS=new k("google-credentials-uid"),k.FIRST_PARTY=new k("first-party-uid"),k.MOCK_USER=new k("mock-user");let _="10.14.0";const N=new o.Vy("@firebase/firestore");function S(){return N.logLevel}function E(e){N.setLogLevel(e)}function A(e){if(N.logLevel<=o.$b.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(I);N.debug("Firestore (".concat(_,"): ").concat(e),...s)}}function T(e){if(N.logLevel<=o.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(I);N.error("Firestore (".concat(_,"): ").concat(e),...s)}}function C(e){if(N.logLevel<=o.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(I);N.warn("Firestore (".concat(_,"): ").concat(e),...s)}}function I(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function j(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(_,") INTERNAL ASSERTION FAILED: ")+e;throw T(t),new Error(t)}function P(e,t){e||j()}function D(e,t){e||j()}function R(e,t){return e}const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class L extends l.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class M{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class F{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class U{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(k.UNAUTHENTICATED))}shutdown(){}}class V{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class B{constructor(e){this.t=e,this.currentUser=k.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){P(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new M;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new M,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{A("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(A("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new M)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(A("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(P("string"==typeof t.accessToken),new F(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return P(null===e||"string"==typeof e),new k(e)}}class q{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=k.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class z{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new q(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(k.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class K{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class W{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){P(void 0===this.o);const n=e=>{null!=e.error&&A("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,A("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{A("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):A("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(P("string"==typeof e.token),this.R=e.token,new K(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class H{getToken(){return Promise.resolve(new K(""))}invalidateToken(){}start(e,t){}shutdown(){}}function G(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Q{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=G(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<t&&(n+=e.charAt(r[s]%62))}return n}}function J(e,t){return e<t?-1:e>t?1:0}function Y(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function X(e){return e+"\0"}class ${constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new L(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new L(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new L(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $.fromMillis(Date.now())}static fromDate(e){return $.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new $(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?J(this.nanoseconds,e.nanoseconds):J(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Z{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Z(e)}static min(){return new Z(new $(0,0))}static max(){return new Z(new $(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ee{constructor(e,t,n){void 0===t?t=0:t>e.length&&j(),void 0===n?n=e.length-t:n>e.length-t&&j(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ee.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ee?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),s=t.get(r);if(n<s)return-1;if(n>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class te extends ee{construct(e,t,n){return new te(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new L(O.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push(...s.split("/").filter(e=>e.length>0))}return new te(e)}static emptyPath(){return new te([])}}const ne=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class re extends ee{construct(e,t,n){return new re(e,t,n)}static isValidIdentifier(e){return ne.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),re.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new re(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new L(O.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new L(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new L(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new L(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new re(t)}static emptyPath(){return new re([])}}class se{constructor(e){this.path=e}static fromPath(e){return new se(te.fromString(e))}static fromName(e){return new se(te.fromString(e).popFirst(5))}static empty(){return new se(te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===te.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return te.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new te(e.slice()))}}class ie{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function ae(e){return e.fields.find(e=>2===e.kind)}function oe(e){return e.fields.filter(e=>2!==e.kind)}function le(e,t){let n=J(e.collectionGroup,t.collectionGroup);if(0!==n)return n;for(let r=0;r<Math.min(e.fields.length,t.fields.length);++r)if(n=ue(e.fields[r],t.fields[r]),0!==n)return n;return J(e.fields.length,t.fields.length)}ie.UNKNOWN_ID=-1;class ce{constructor(e,t){this.fieldPath=e,this.kind=t}}function ue(e,t){const n=re.comparator(e.fieldPath,t.fieldPath);return 0!==n?n:J(e.kind,t.kind)}class de{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new de(0,me.min())}}function he(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=Z.fromTimestamp(1e9===r?new $(n+1,0):new $(n,r));return new me(s,se.empty(),t)}function fe(e){return new me(e.readTime,e.key,-1)}class me{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new me(Z.min(),se.empty(),-1)}static max(){return new me(Z.max(),se.empty(),-1)}}function pe(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=se.comparator(e.documentKey,t.documentKey),0!==n?n:J(e.largestBatchId,t.largestBatchId))}const ge="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ye{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function ve(e){if(e.code!==O.FAILED_PRECONDITION||e.message!==ge)throw e;A("LocalStore","Unexpectedly lost primary lease")}class xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&j(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new xe((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof xe?t:xe.resolve(t)}catch(e){return xe.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):xe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):xe.reject(t)}static resolve(e){return new xe((t,n)=>{t(e)})}static reject(e){return new xe((t,n)=>{n(e)})}static waitFor(e){return new xe((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=xe.resolve(!1);for(const n of e)t=t.next(e=>e?xe.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new xe((n,r)=>{const s=e.length,i=new Array(s);let a=0;for(let o=0;o<s;o++){const l=o;t(e[l]).next(e=>{i[l]=e,++a,a===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new xe((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}class be{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new M,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Ne(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Ce(t.target.error);this.V.reject(new Ne(e,n))}}static open(e,t,n,r){try{return new be(t,e.transaction(r,n))}catch(e){throw new Ne(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(A("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ee(t)}}class we{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===we.S((0,l.ZQ)())&&T("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return A("SimpleDb","Removing database:",e),Ae(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,l.zW)())return!1;if(we.v())return!0;const e=(0,l.ZQ)(),t=we.S(e),n=0<t&&t<10,r=ke(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static v(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(A("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Ne(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new L(O.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new L(O.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Ne(e,r))},r.onupgradeneeded=e=>{A("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.O(t,r.transaction,e.oldVersion,this.version).next(()=>{A("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=e=>this.N(e)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const s="readonly"===t;let i=0;for(;;){++i;try{this.db=await this.M(e);const t=be.open(this.db,e,s?"readonly":"readwrite",n),i=r(t).next(e=>(t.g(),e)).catch(e=>(t.abort(e),xe.reject(e))).toPromise();return i.catch(()=>{}),await t.m,i}catch(e){const t=e,n="FirebaseError"!==t.name&&i<3;if(A("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function ke(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class _e{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ae(this.B.delete())}}class Ne extends L{constructor(e,t){super(O.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Se(e){return"IndexedDbTransactionError"===e.name}class Ee{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(A("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(A("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ae(n)}add(e){return A("SimpleDb","ADD",this.store.name,e,e),Ae(this.store.add(e))}get(e){return Ae(this.store.get(e)).next(t=>(void 0===t&&(t=null),A("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return A("SimpleDb","DELETE",this.store.name,e),Ae(this.store.delete(e))}count(){return A("SimpleDb","COUNT",this.store.name),Ae(this.store.count())}U(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new xe((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}{const e=this.cursor(n),t=[];return this.W(e,(e,n)=>{t.push(n)}).next(()=>t)}}G(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new xe((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}})}j(e,t){A("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.H=!1;const r=this.cursor(n);return this.W(r,(e,t,n)=>n.delete())}J(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Y(e){const t=this.cursor({});return new xe((n,r)=>{t.onerror=e=>{const t=Ce(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}W(e,t){const n=[];return new xe((r,s)=>{e.onerror=e=>{s(e.target.error)},e.onsuccess=e=>{const s=e.target.result;if(!s)return void r();const i=new _e(s),a=t(s.primaryKey,s.value,i);if(a instanceof xe){const e=a.catch(e=>(i.done(),xe.reject(e)));n.push(e)}i.isDone?r():null===i.K?s.continue():s.continue(i.K)}}).next(()=>xe.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ae(e){return new xe((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Ce(e.target.error);n(t)}})}let Te=!1;function Ce(e){const t=we.S((0,l.ZQ)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new L("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Te||(Te=!0,setTimeout(()=>{throw e},0)),e}}return e}class Ie{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){A("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{A("IndexBackfiller","Documents written: ".concat(await this.Z.ee()))}catch(e){Se(e)?A("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await ve(e)}await this.X(6e4)})}}class je{constructor(e,t){this.localStore=e,this.persistence=t}async ee(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))}te(e,t){const n=new Set;let r=t,s=!0;return xe.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(t=>{if(null!==t&&!n.has(t))return A("IndexBackfiller","Processing collection: ".concat(t)),this.ne(e,t,r).next(e=>{r-=e,n.add(t)});s=!1})).next(()=>t-r)}ne(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next(n=>{const s=n.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(r,n)).next(n=>(A("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n))).next(()=>s.size)}))}re(e,t){let n=e;return t.changes.forEach((e,t)=>{const r=fe(t);pe(r,n)>0&&(n=r)}),new me(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Pe{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function De(e){return null==e}function Re(e){return 0===e&&1/e==-1/0}function Oe(e){return"number"==typeof e&&Number.isInteger(e)&&!Re(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Le(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Fe(t)),t=Me(e.get(n),t);return Fe(t)}function Me(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const t=e.charAt(s);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Fe(e){return e+"\x01\x01"}function Ue(e){const t=e.length;if(P(t>=2),2===t)return P("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),te.emptyPath();const n=t-2,r=[];let s="";for(let i=0;i<t;){const t=e.indexOf("\x01",i);switch((t<0||t>n)&&j(),e.charAt(t+1)){case"\x01":const n=e.substring(i,t);let a;0===s.length?a=n:(s+=n,a=s,s=""),r.push(a);break;case"\x10":s+=e.substring(i,t),s+="\0";break;case"\x11":s+=e.substring(i,t+1);break;default:j()}i=t+2}return new te(r)}Pe.oe=-1;const Ve=["userId","batchId"];function Be(e,t){return[e,Le(t)]}function qe(e,t,n){return[e,Le(t),n]}const ze={},Ke=["prefixPath","collectionGroup","readTime","documentId"],We=["prefixPath","collectionGroup","documentId"],He=["collectionGroup","readTime","prefixPath","documentId"],Ge=["canonicalId","targetId"],Qe=["targetId","path"],Je=["path","targetId"],Ye=["collectionId","parent"],Xe=["indexId","uid"],$e=["uid","sequenceNumber"],Ze=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],et=["indexId","uid","orderedDocumentKey"],tt=["userId","collectionPath","documentId"],nt=["userId","collectionPath","largestBatchId"],rt=["userId","collectionGroup","largestBatchId"],st=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],it=[...st,"documentOverlays"],at=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ot=at,lt=[...ot,"indexConfiguration","indexState","indexEntries"],ct=lt,ut=[...lt,"globals"];class dt extends ye{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function ht(e,t){const n=R(e);return we.F(n._e,t)}function ft(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function mt(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function pt(e,t){const n=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.push(t(e[r],r,e));return n}function gt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class yt{constructor(e,t){this.comparator=e,this.root=t||xt.EMPTY}insert(e,t){return new yt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,xt.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vt(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vt(this.root,e,this.comparator,!1)}getReverseIterator(){return new vt(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vt(this.root,e,this.comparator,!0)}}class vt{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xt{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:xt.RED,this.left=null!=r?r:xt.EMPTY,this.right=null!=s?s:xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new xt(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return xt.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw j();if(this.right.isRed())throw j();const e=this.left.check();if(e!==this.right.check())throw j();return e+(this.isRed()?0:1)}}xt.EMPTY=null,xt.RED=!0,xt.BLACK=!1,xt.EMPTY=new class{constructor(){this.size=0}get key(){throw j()}get value(){throw j()}get color(){throw j()}get left(){throw j()}get right(){throw j()}copy(e,t,n,r,s){return this}insert(e,t,n){return new xt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class bt{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new wt(this.data.getIterator())}getIteratorFrom(e){return new wt(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof bt))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new bt(this.comparator);return t.data=e,t}}class wt{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function kt(e){return e.hasNext()?e.getNext():void 0}class _t{constructor(e){this.fields=e,e.sort(re.comparator)}static empty(){return new _t([])}unionWith(e){let t=new bt(re.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new _t(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Y(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Nt extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function St(){return"undefined"!=typeof atob}class Et{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Nt("Invalid base64 string: "+e):e}}(e);return new Et(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Et(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return J(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Et.EMPTY_BYTE_STRING=new Et("");const At=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tt(e){if(P(!!e),"string"==typeof e){let t=0;const n=At.exec(e);if(P(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ct(e.seconds),nanos:Ct(e.nanos)}}function Ct(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function It(e){return"string"==typeof e?Et.fromBase64String(e):Et.fromUint8Array(e)}function jt(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Pt(e){const t=e.mapValue.fields.__previous_value__;return jt(t)?Pt(t):t}function Dt(e){const t=Tt(e.mapValue.fields.__local_write_time__.timestampValue);return new $(t.seconds,t.nanos)}class Rt{constructor(e,t,n,r,s,i,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class Ot{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ot("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ot&&e.projectId===this.projectId&&e.database===this.database}}const Lt={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Mt={nullValue:"NULL_VALUE"};function Ft(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?jt(e)?4:tn(e)?9007199254740991:Zt(e)?10:11:j()}function Ut(e,t){if(e===t)return!0;const n=Ft(e);if(n!==Ft(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Dt(e).isEqual(Dt(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Tt(e.timestampValue),r=Tt(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return It(e.bytesValue).isEqual(It(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ct(e.geoPointValue.latitude)===Ct(t.geoPointValue.latitude)&&Ct(e.geoPointValue.longitude)===Ct(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ct(e.integerValue)===Ct(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Ct(e.doubleValue),r=Ct(t.doubleValue);return n===r?Re(n)===Re(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Y(e.arrayValue.values||[],t.arrayValue.values||[],Ut);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ft(n)!==ft(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!Ut(n[s],r[s])))return!1;return!0}(e,t);default:return j()}}function Vt(e,t){return void 0!==(e.values||[]).find(e=>Ut(e,t))}function Bt(e,t){if(e===t)return 0;const n=Ft(e),r=Ft(t);if(n!==r)return J(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return J(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Ct(e.integerValue||e.doubleValue),r=Ct(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return qt(e.timestampValue,t.timestampValue);case 4:return qt(Dt(e),Dt(t));case 5:return J(e.stringValue,t.stringValue);case 6:return function(e,t){const n=It(e),r=It(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=J(n[s],r[s]);if(0!==e)return e}return J(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=J(Ct(e.latitude),Ct(t.latitude));return 0!==n?n:J(Ct(e.longitude),Ct(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return zt(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,s,i;const a=e.fields||{},o=t.fields||{},l=null===(n=a.value)||void 0===n?void 0:n.arrayValue,c=null===(r=o.value)||void 0===r?void 0:r.arrayValue,u=J((null===(s=null==l?void 0:l.values)||void 0===s?void 0:s.length)||0,(null===(i=null==c?void 0:c.values)||void 0===i?void 0:i.length)||0);return 0!==u?u:zt(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Lt.mapValue&&t===Lt.mapValue)return 0;if(e===Lt.mapValue)return 1;if(t===Lt.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let a=0;a<r.length&&a<i.length;++a){const e=J(r[a],i[a]);if(0!==e)return e;const t=Bt(n[r[a]],s[i[a]]);if(0!==t)return t}return J(r.length,i.length)}(e.mapValue,t.mapValue);default:throw j()}}function qt(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return J(e,t);const n=Tt(e),r=Tt(t),s=J(n.seconds,r.seconds);return 0!==s?s:J(n.nanos,r.nanos)}function zt(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=Bt(n[s],r[s]);if(e)return e}return J(n.length,r.length)}function Kt(e){return Wt(e)}function Wt(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Tt(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return It(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return se.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Wt(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+="".concat(s,":").concat(Wt(e.fields[s]));return n+"}"}(e.mapValue):j()}function Ht(e){switch(Ft(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Pt(e);return t?16+Ht(t):16;case 5:return 2*e.stringValue.length;case 6:return It(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Ht(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return mt(e.fields,(e,n)=>{t+=e.length+Ht(n)}),t}(e.mapValue);default:throw j()}}function Gt(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Qt(e){return!!e&&"integerValue"in e}function Jt(e){return!!e&&"arrayValue"in e}function Yt(e){return!!e&&"nullValue"in e}function Xt(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function $t(e){return!!e&&"mapValue"in e}function Zt(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function en(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return mt(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=en(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=en(e.arrayValue.values[n]);return t}return Object.assign({},e)}function tn(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}const nn={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function rn(e){return"nullValue"in e?Mt:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Gt(Ot.empty(),se.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?Zt(e)?nn:{mapValue:{}}:j()}function sn(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Gt(Ot.empty(),se.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?nn:"mapValue"in e?Zt(e)?{mapValue:{}}:Lt:j()}function an(e,t){const n=Bt(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function on(e,t){const n=Bt(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!$t(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=en(t)}setAll(e){let t=re.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=en(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());$t(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ut(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];$t(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){mt(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new ln(en(this.value))}}function cn(e){const t=[];return mt(e.fields,(e,n)=>{const r=new re([e]);if($t(n)){const e=cn(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new _t(t)}class un{constructor(e,t,n,r,s,i,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=a}static newInvalidDocument(e){return new un(e,0,Z.min(),Z.min(),Z.min(),ln.empty(),0)}static newFoundDocument(e,t,n,r){return new un(e,1,t,Z.min(),n,r,0)}static newNoDocument(e,t){return new un(e,2,t,Z.min(),Z.min(),ln.empty(),0)}static newUnknownDocument(e,t){return new un(e,3,t,Z.min(),Z.min(),ln.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Z.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class dn{constructor(e,t){this.position=e,this.inclusive=t}}function hn(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(r=i.field.isKeyField()?se.comparator(se.fromName(a.referenceValue),n.key):Bt(a,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function fn(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ut(e.position[n],t.position[n]))return!1;return!0}class mn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function pn(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class gn{}class yn extends gn{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new An(e,t,n):"array-contains"===t?new jn(e,n):"in"===t?new Pn(e,n):"not-in"===t?new Dn(e,n):"array-contains-any"===t?new Rn(e,n):new yn(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Tn(e,n):new Cn(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Bt(t,this.value)):null!==t&&Ft(this.value)===Ft(t)&&this.matchesComparison(Bt(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return j()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vn extends gn{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new vn(e,t)}matches(e){return xn(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function xn(e){return"and"===e.op}function bn(e){return"or"===e.op}function wn(e){return kn(e)&&xn(e)}function kn(e){for(const t of e.filters)if(t instanceof vn)return!1;return!0}function _n(e){if(e instanceof yn)return e.field.canonicalString()+e.op.toString()+Kt(e.value);if(wn(e))return e.filters.map(e=>_n(e)).join(",");{const t=e.filters.map(e=>_n(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Nn(e,t){return e instanceof yn?function(e,t){return t instanceof yn&&e.op===t.op&&e.field.isEqual(t.field)&&Ut(e.value,t.value)}(e,t):e instanceof vn?function(e,t){return t instanceof vn&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Nn(n,t.filters[r]),!0)}(e,t):void j()}function Sn(e,t){const n=e.filters.concat(t);return vn.create(n,e.op)}function En(e){return e instanceof yn?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Kt(e.value))}(e):e instanceof vn?function(e){return e.op.toString()+" {"+e.getFilters().map(En).join(" ,")+"}"}(e):"Filter"}class An extends yn{constructor(e,t,n){super(e,t,n),this.key=se.fromName(n.referenceValue)}matches(e){const t=se.comparator(e.key,this.key);return this.matchesComparison(t)}}class Tn extends yn{constructor(e,t){super(e,"in",t),this.keys=In("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Cn extends yn{constructor(e,t){super(e,"not-in",t),this.keys=In("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function In(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>se.fromName(e.referenceValue))}class jn extends yn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Jt(t)&&Vt(t.arrayValue,this.value)}}class Pn extends yn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Vt(this.value.arrayValue,t)}}class Dn extends yn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vt(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Vt(this.value.arrayValue,t)}}class Rn extends yn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Jt(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Vt(this.value.arrayValue,e))}}class On{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=a,this.ue=null}}function Ln(e){return new On(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Mn(e){const t=R(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>_n(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),De(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Kt(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Kt(e)).join(",")),t.ue=e}return t.ue}function Fn(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!pn(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Nn(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!fn(e.startAt,t.startAt)&&fn(e.endAt,t.endAt)}function Un(e){return se.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Vn(e,t){return e.filters.filter(e=>e instanceof yn&&e.field.isEqual(t))}function Bn(e,t,n){let r=Mt,s=!0;for(const i of Vn(e,t)){let e=Mt,t=!0;switch(i.op){case"<":case"<=":e=rn(i.value);break;case"==":case"in":case">=":e=i.value;break;case">":e=i.value,t=!1;break;case"!=":case"not-in":e=Mt}an({value:r,inclusive:s},{value:e,inclusive:t})<0&&(r=e,s=t)}if(null!==n)for(let i=0;i<e.orderBy.length;++i)if(e.orderBy[i].field.isEqual(t)){const e=n.position[i];an({value:r,inclusive:s},{value:e,inclusive:n.inclusive})<0&&(r=e,s=n.inclusive);break}return{value:r,inclusive:s}}function qn(e,t,n){let r=Lt,s=!0;for(const i of Vn(e,t)){let e=Lt,t=!0;switch(i.op){case">=":case">":e=sn(i.value),t=!1;break;case"==":case"in":case"<=":e=i.value;break;case"<":e=i.value,t=!1;break;case"!=":case"not-in":e=Lt}on({value:r,inclusive:s},{value:e,inclusive:t})>0&&(r=e,s=t)}if(null!==n)for(let i=0;i<e.orderBy.length;++i)if(e.orderBy[i].field.isEqual(t)){const e=n.position[i];on({value:r,inclusive:s},{value:e,inclusive:n.inclusive})>0&&(r=e,s=n.inclusive);break}return{value:r,inclusive:s}}class zn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=a,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Kn(e,t,n,r,s,i,a,o){return new zn(e,t,n,r,s,i,a,o)}function Wn(e){return new zn(e)}function Hn(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Gn(e){return null!==e.collectionGroup}function Qn(e){const t=R(e);if(null===t.ce){t.ce=[];const e=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new bt(re.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new mn(r,n))}),e.has(re.keyField().canonicalString())||t.ce.push(new mn(re.keyField(),n))}return t.ce}function Jn(e){const t=R(e);return t.le||(t.le=Xn(t,Qn(e))),t.le}function Yn(e){const t=R(e);return t.he||(t.he=Xn(t,e.explicitOrderBy)),t.he}function Xn(e,t){if("F"===e.limitType)return Ln(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new mn(e.field,t)});const n=e.endAt?new dn(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new dn(e.startAt.position,e.startAt.inclusive):null;return Ln(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function $n(e,t){const n=e.filters.concat([t]);return new zn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Zn(e,t,n){return new zn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function er(e,t){return Fn(Jn(e),Jn(t))&&e.limitType===t.limitType}function tr(e){return"".concat(Mn(Jn(e)),"|lt:").concat(e.limitType)}function nr(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>En(e)).join(", "),"]")),De(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Kt(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Kt(e)).join(",")),"Target(".concat(t,")")}(Jn(e)),"; limitType=").concat(e.limitType,")")}function rr(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):se.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Qn(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=hn(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Qn(e),t))&&!(e.endAt&&!function(e,t,n){const r=hn(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Qn(e),t))}(e,t)}function sr(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ir(e){return(t,n)=>{let r=!1;for(const s of Qn(e)){const e=ar(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function ar(e,t,n){const r=e.field.isKeyField()?se.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?Bt(r,s):j()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return j()}}class or{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){mt(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return gt(this.inner)}size(){return this.innerSize}}const lr=new yt(se.comparator);function cr(){return lr}const ur=new yt(se.comparator);function dr(){let e=ur;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function hr(e){let t=ur;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function fr(){return pr()}function mr(){return pr()}function pr(){return new or(e=>e.toString(),(e,t)=>e.isEqual(t))}const gr=new yt(se.comparator),yr=new bt(se.comparator);function vr(){let e=yr;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const xr=new bt(J);function br(){return xr}function wr(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Re(t)?"-0":t}}function kr(e){return{integerValue:""+e}}function _r(e,t){return Oe(t)?kr(t):wr(e,t)}class Nr{constructor(){this._=void 0}}function Sr(e,t,n){return e instanceof Tr?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&jt(t)&&(t=Pt(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Cr?Ir(e,t):e instanceof jr?Pr(e,t):function(e,t){const n=Ar(e,t),r=Rr(n)+Rr(e.Pe);return Qt(n)&&Qt(e.Pe)?kr(r):wr(e.serializer,r)}(e,t)}function Er(e,t,n){return e instanceof Cr?Ir(e,t):e instanceof jr?Pr(e,t):n}function Ar(e,t){return e instanceof Dr?function(e){return Qt(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Tr extends Nr{}class Cr extends Nr{constructor(e){super(),this.elements=e}}function Ir(e,t){const n=Or(t);for(const r of e.elements)n.some(e=>Ut(e,r))||n.push(r);return{arrayValue:{values:n}}}class jr extends Nr{constructor(e){super(),this.elements=e}}function Pr(e,t){let n=Or(t);for(const r of e.elements)n=n.filter(e=>!Ut(e,r));return{arrayValue:{values:n}}}class Dr extends Nr{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Rr(e){return Ct(e.integerValue||e.doubleValue)}function Or(e){return Jt(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Lr{constructor(e,t){this.field=e,this.transform=t}}class Mr{constructor(e,t){this.version=e,this.transformResults=t}}class Fr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Fr}static exists(e){return new Fr(void 0,e)}static updateTime(e){return new Fr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ur(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Vr{}function Br(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Xr(e.key,Fr.none()):new Hr(e.key,e.data,Fr.none());{const n=e.data,r=ln.empty();let s=new bt(re.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new Gr(e.key,r,new _t(s.toArray()),Fr.none())}}function qr(e,t,n){e instanceof Hr?function(e,t,n){const r=e.value.clone(),s=Jr(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Gr?function(e,t,n){if(!Ur(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Jr(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(Qr(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function zr(e,t,n,r){return e instanceof Hr?function(e,t,n,r){if(!Ur(e.precondition,t))return n;const s=e.value.clone(),i=Yr(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof Gr?function(e,t,n,r){if(!Ur(e.precondition,t))return n;const s=Yr(e.fieldTransforms,r,t),i=t.data;return i.setAll(Qr(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Ur(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Kr(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=Ar(r.transform,e||null);null!=s&&(null===n&&(n=ln.empty()),n.set(r.field,s))}return n||null}function Wr(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Y(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Cr&&t instanceof Cr||e instanceof jr&&t instanceof jr?Y(e.elements,t.elements,Ut):e instanceof Dr&&t instanceof Dr?Ut(e.Pe,t.Pe):e instanceof Tr&&t instanceof Tr}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Hr extends Vr{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Gr extends Vr{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Qr(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Jr(e,t,n){const r=new Map;P(e.length===n.length);for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,o=t.data.field(i.field);r.set(i.field,Er(a,o,n[s]))}return r}function Yr(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,Sr(e,i,t))}return r}class Xr extends Vr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $r extends Vr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Zr{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&qr(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=zr(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=zr(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=mr();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let a=this.applyToLocalView(i,s.mutatedFields);a=t.has(r.key)?null:a;const o=Br(i,a);null!==o&&n.set(r.key,o),i.isValidDocument()||i.convertToNoDocument(Z.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),vr())}isEqual(e){return this.batchId===e.batchId&&Y(this.mutations,e.mutations,(e,t)=>Wr(e,t))&&Y(this.baseMutations,e.baseMutations,(e,t)=>Wr(e,t))}}class es{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){P(e.mutations.length===n.length);let r=gr;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new es(e,t,n,r)}}class ts{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class ns{constructor(e,t,n){this.alias=e,this.aggregateType=t,this.fieldPath=n}}class rs{constructor(e,t){this.count=e,this.unchangedNames=t}}var ss,is;function as(e){switch(e){default:return j();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0}}function os(e){if(void 0===e)return T("GRPC error has no .code"),O.UNKNOWN;switch(e){case ss.OK:return O.OK;case ss.CANCELLED:return O.CANCELLED;case ss.UNKNOWN:return O.UNKNOWN;case ss.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case ss.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case ss.INTERNAL:return O.INTERNAL;case ss.UNAVAILABLE:return O.UNAVAILABLE;case ss.UNAUTHENTICATED:return O.UNAUTHENTICATED;case ss.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case ss.NOT_FOUND:return O.NOT_FOUND;case ss.ALREADY_EXISTS:return O.ALREADY_EXISTS;case ss.PERMISSION_DENIED:return O.PERMISSION_DENIED;case ss.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case ss.ABORTED:return O.ABORTED;case ss.OUT_OF_RANGE:return O.OUT_OF_RANGE;case ss.UNIMPLEMENTED:return O.UNIMPLEMENTED;case ss.DATA_LOSS:return O.DATA_LOSS;default:return j()}}(is=ss||(ss={}))[is.OK=0]="OK",is[is.CANCELLED=1]="CANCELLED",is[is.UNKNOWN=2]="UNKNOWN",is[is.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",is[is.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",is[is.NOT_FOUND=5]="NOT_FOUND",is[is.ALREADY_EXISTS=6]="ALREADY_EXISTS",is[is.PERMISSION_DENIED=7]="PERMISSION_DENIED",is[is.UNAUTHENTICATED=16]="UNAUTHENTICATED",is[is.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",is[is.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",is[is.ABORTED=10]="ABORTED",is[is.OUT_OF_RANGE=11]="OUT_OF_RANGE",is[is.UNIMPLEMENTED=12]="UNIMPLEMENTED",is[is.INTERNAL=13]="INTERNAL",is[is.UNAVAILABLE=14]="UNAVAILABLE",is[is.DATA_LOSS=15]="DATA_LOSS";let ls=null;function cs(){return new TextEncoder}const us=new r([4294967295,4294967295],0);function ds(e){const t=cs().encode(e),n=new s;return n.update(t),new Uint8Array(n.digest())}function hs(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new r([n,s],0),new r([i,a],0)]}class fs{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ms("Invalid padding: ".concat(t));if(n<0)throw new ms("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new ms("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new ms("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=r.fromNumber(this.Ie)}Ee(e,t,n){let s=e.add(t.multiply(r.fromNumber(n)));return 1===s.compare(us)&&(s=new r([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=ds(e),[n,r]=hs(t);for(let s=0;s<this.hashCount;s++){const e=this.Ee(n,r,s);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new fs(s,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.Ie)return;const t=ds(e),[n,r]=hs(t);for(let s=0;s<this.hashCount;s++){const e=this.Ee(n,r,s);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ms extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ps{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,gs.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ps(Z.min(),r,new yt(J),cr(),vr())}}class gs{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new gs(n,t,vr(),vr(),vr())}}class ys{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class vs{constructor(e,t){this.targetId=e,this.me=t}}class xs{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Et.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class bs{constructor(){this.fe=0,this.ge=_s(),this.pe=Et.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=vr(),t=vr(),n=vr();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:j()}}),new gs(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=_s()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,P(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ws{constructor(e){this.Le=e,this.Be=new Map,this.ke=cr(),this.qe=ks(),this.Qe=new yt(J)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:j()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((e,n)=>{this.ze(n)&&t(n)})}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const s=r.target;if(Un(s))if(0===n){const e=new se(s.path);this.Ue(t,e,un.newNoDocument(e,Z.min()))}else P(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),s=n?this.Xe(n,e,r):1;if(0!==s){this.je(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==ls||ls.et(function(e,t,n,r,s){var i,a,o,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===s,hashCount:null!==(i=null==h?void 0:h.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(l=null===(o=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.me,this.Le.tt(),n,s))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let i,a;try{i=It(n).toUint8Array()}catch(e){if(e instanceof Nt)return C("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new fs(i,r,s)}catch(e){return C(e instanceof ms?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.Ie?null:a}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const s=this.Le.tt(),i="projects/".concat(s.projectId,"/databases/").concat(s.database,"/documents/").concat(n.path.canonicalString());e.mightContain(i)||(this.Ue(t,n,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((n,r)=>{const s=this.Je(r);if(s){if(n.current&&Un(s.target)){const t=new se(s.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,un.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}});let n=vr();this.qe.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ke.forEach((t,n)=>n.setReadTime(e));const r=new ps(e,t,this.Qe,this.ke,n);return this.ke=cr(),this.qe=ks(),this.Qe=new yt(J),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new bs,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new bt(J),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||A("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new bs),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function ks(){return new yt(se.comparator)}function _s(){return new yt(se.comparator)}const Ns={asc:"ASCENDING",desc:"DESCENDING"},Ss={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Es={and:"AND",or:"OR"};class As{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ts(e,t){return e.useProto3Json||De(t)?t:{value:t}}function Cs(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Is(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function js(e,t){return Cs(e,t.toTimestamp())}function Ps(e){return P(!!e),Z.fromTimestamp(function(e){const t=Tt(e);return new $(t.seconds,t.nanos)}(e))}function Ds(e,t){return Rs(e,t).canonicalString()}function Rs(e,t){const n=function(e){return new te(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Os(e){const t=te.fromString(e);return P(si(t)),t}function Ls(e,t){return Ds(e.databaseId,t.path)}function Ms(e,t){const n=Os(t);if(n.get(1)!==e.databaseId.projectId)throw new L(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new L(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new se(Bs(n))}function Fs(e,t){return Ds(e.databaseId,t)}function Us(e){const t=Os(e);return 4===t.length?te.emptyPath():Bs(t)}function Vs(e){return new te(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Bs(e){return P(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function qs(e,t,n){return{name:Ls(e,t),fields:n.value.mapValue.fields}}function zs(e,t,n){const r=Ms(e,t.name),s=Ps(t.updateTime),i=t.createTime?Ps(t.createTime):Z.min(),a=new ln({mapValue:{fields:t.fields}}),o=un.newFoundDocument(r,s,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Ks(e,t){let n;if(t instanceof Hr)n={update:qs(e,t.key,t.value)};else if(t instanceof Xr)n={delete:Ls(e,t.key)};else if(t instanceof Gr)n={update:qs(e,t.key,t.data),updateMask:ri(t.fieldMask)};else{if(!(t instanceof $r))return j();n={verify:Ls(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Tr)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Cr)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof jr)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Dr)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw j()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:js(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:j()}(e,t.precondition)),n}function Ws(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Fr.updateTime(Ps(e.updateTime)):void 0!==e.exists?Fr.exists(e.exists):Fr.none()}(t.currentDocument):Fr.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;if("setToServerValue"in t)P("REQUEST_TIME"===t.setToServerValue),n=new Tr;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Cr(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new jr(e)}else"increment"in t?n=new Dr(e,t.increment):j();const r=re.fromServerFormat(t.fieldPath);return new Lr(r,n)}(e,t)):[];if(t.update){t.update.name;const s=Ms(e,t.update.name),i=new ln({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new _t(t.map(e=>re.fromServerFormat(e)))}(t.updateMask);return new Gr(s,i,e,n,r)}return new Hr(s,i,n,r)}if(t.delete){const r=Ms(e,t.delete);return new Xr(r,n)}if(t.verify){const r=Ms(e,t.verify);return new $r(r,n)}return j()}function Hs(e,t){return{documents:[Fs(e,t.path)]}}function Gs(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Fs(e,s);const i=function(e){if(0!==e.length)return ni(vn.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:ei(e.field),direction:Xs(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Ts(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:s}}function Qs(e,t,n,r){const{_t:s,parent:i}=Gs(e,t),a={},o=[];let l=0;return n.forEach(e=>{const t=r?e.alias:"aggregate_"+l++;a[t]=e.alias,"count"===e.aggregateType?o.push({alias:t,count:{}}):"avg"===e.aggregateType?o.push({alias:t,avg:{field:ei(e.fieldPath)}}):"sum"===e.aggregateType&&o.push({alias:t,sum:{field:ei(e.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:o,structuredQuery:s.structuredQuery},parent:s.parent},ut:a,parent:i}}function Js(e){let t=Us(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){P(1===r);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=Ys(e);return t instanceof vn&&wn(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new mn(ti(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,De(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new dn(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new dn(n,t)}(n.endAt)),Kn(t,s,a,i,o,"F",l,c)}function Ys(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ti(e.unaryFilter.field);return yn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=ti(e.unaryFilter.field);return yn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ti(e.unaryFilter.field);return yn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=ti(e.unaryFilter.field);return yn.create(s,"!=",{nullValue:"NULL_VALUE"});default:return j()}}(e):void 0!==e.fieldFilter?function(e){return yn.create(ti(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return j()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return vn.create(e.compositeFilter.filters.map(e=>Ys(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return j()}}(e.compositeFilter.op))}(e):j()}function Xs(e){return Ns[e]}function $s(e){return Ss[e]}function Zs(e){return Es[e]}function ei(e){return{fieldPath:e.canonicalString()}}function ti(e){return re.fromServerFormat(e.fieldPath)}function ni(e){return e instanceof yn?function(e){if("=="===e.op){if(Xt(e.value))return{unaryFilter:{field:ei(e.field),op:"IS_NAN"}};if(Yt(e.value))return{unaryFilter:{field:ei(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Xt(e.value))return{unaryFilter:{field:ei(e.field),op:"IS_NOT_NAN"}};if(Yt(e.value))return{unaryFilter:{field:ei(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ei(e.field),op:$s(e.op),value:e.value}}}(e):e instanceof vn?function(e){const t=e.getFilters().map(e=>ni(e));return 1===t.length?t[0]:{compositeFilter:{op:Zs(e.op),filters:t}}}(e):j()}function ri(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function si(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class ii{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Z.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Z.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Et.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new ii(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ai{constructor(e){this.ct=e}}function oi(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:li(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Ls(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Cs(e,t.version.toTimestamp()),createTime:Cs(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ci(t.version)};else{if(!t.isUnknownDocument())return j();r.unknownDocument={path:n.path.toArray(),version:ci(t.version)}}return r}function li(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function ci(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function ui(e){const t=new $(e.seconds,e.nanoseconds);return Z.fromTimestamp(t)}function di(e,t){const n=(t.baseMutations||[]).map(t=>Ws(e.ct,t));for(let i=0;i<t.mutations.length-1;++i){const e=t.mutations[i];if(i+1<t.mutations.length&&void 0!==t.mutations[i+1].transform){const n=t.mutations[i+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(i+1,1),++i}}const r=t.mutations.map(t=>Ws(e.ct,t)),s=$.fromMillis(t.localWriteTimeMs);return new Zr(t.batchId,s,n,r)}function hi(e){const t=ui(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?ui(e.lastLimboFreeSnapshotVersion):Z.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return P(1===e.documents.length),Jn(Wn(Us(e.documents[0])))}(e.query):function(e){return Jn(Js(e))}(e.query),new ii(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Et.fromBase64String(e.resumeToken))}function fi(e,t){const n=ci(t.snapshotVersion),r=ci(t.lastLimboFreeSnapshotVersion);let s;s=Un(t.target)?Hs(e.ct,t.target):Gs(e.ct,t.target)._t;const i=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Mn(t.target),readTime:n,resumeToken:i,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function mi(e){const t=Js({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Zn(t,t.limit,"L"):t}function pi(e,t){return new ts(t.largestBatchId,Ws(e.ct,t.overlayMutation))}function gi(e,t){const n=t.path.lastSegment();return[e,Le(t.path.popLast()),n]}function yi(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:ci(r.readTime),documentKey:Le(r.documentKey.path),largestBatchId:r.largestBatchId}}class vi{getBundleMetadata(e,t){return xi(e).get(t).next(e=>{if(e)return function(e){return{id:e.bundleId,createTime:ui(e.createTime),version:e.version}}(e)})}saveBundleMetadata(e,t){return xi(e).put(function(e){return{bundleId:e.id,createTime:ci(Ps(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return bi(e).get(t).next(e=>{if(e)return function(e){return{name:e.name,query:mi(e.bundledQuery),readTime:ui(e.readTime)}}(e)})}saveNamedQuery(e,t){return bi(e).put(function(e){return{name:e.name,readTime:ci(Ps(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function xi(e){return ht(e,"bundles")}function bi(e){return ht(e,"namedQueries")}class wi{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new wi(e,n)}getOverlay(e,t){return ki(e).get(gi(this.userId,t)).next(e=>e?pi(this.serializer,e):null)}getOverlays(e,t){const n=fr();return xe.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){const r=[];return n.forEach((n,s)=>{const i=new ts(t,s);r.push(this.ht(e,i))}),xe.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach(e=>r.add(Le(e.getCollectionPath())));const s=[];return r.forEach(t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);s.push(ki(e).j("collectionPathOverlayIndex",r))}),xe.waitFor(s)}getOverlaysForCollection(e,t,n){const r=fr(),s=Le(t),i=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return ki(e).U("collectionPathOverlayIndex",i).next(e=>{for(const t of e){const e=pi(this.serializer,t);r.set(e.getKey(),e)}return r})}getOverlaysForCollectionGroup(e,t,n,r){const s=fr();let i;const a=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ki(e).J({index:"collectionGroupOverlayIndex",range:a},(e,t,n)=>{const a=pi(this.serializer,t);s.size()<r||a.largestBatchId===i?(s.set(a.getKey(),a),i=a.largestBatchId):n.done()}).next(()=>s)}ht(e,t){return ki(e).put(function(e,t,n){const[r,s,i]=gi(t,n.mutation.key);return{userId:t,collectionPath:s,documentId:i,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Ks(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function ki(e){return ht(e,"documentOverlays")}class _i{Pt(e){return ht(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(e=>{const t=null==e?void 0:e.value;return t?Et.fromUint8Array(t):Et.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class Ni{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ct(e.integerValue));else if("doubleValue"in e){const n=Ct(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),Re(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=Tt(n)),t.Rt("".concat(n.seconds||"")),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(It(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?tn(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Zt(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):j()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const s=e.fields||{};this.dt(t,53);const i="value",a=(null===(r=null===(n=s[i].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(Ct(a)),this.Vt(i,t),this.Tt(s[i],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),se.fromName(e).path.forEach(e=>{this.dt(t,60),this.Dt(e,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}function Si(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Ei(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Si(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Ni.vt=new Ni;class Ai{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ft(n.value),n=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ot(n.value),n=t.next();this.Nt()}Lt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ft(e);else if(e<2048)this.Ft(960|e>>>6),this.Ft(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e);else{const e=t.codePointAt(0);this.Ft(240|e>>>18),this.Ft(128|63&e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e)}}this.Mt()}Bt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ot(e);else if(e<2048)this.Ot(960|e>>>6),this.Ot(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ot(480|e>>>12),this.Ot(128|63&e>>>6),this.Ot(128|63&e);else{const e=t.codePointAt(0);this.Ot(240|e>>>18),this.Ot(128|63&e>>>12),this.Ot(128|63&e>>>6),this.Ot(128|63&e)}}this.Nt()}kt(e){const t=this.qt(e),n=Ei(t);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Kt(e){const t=this.qt(e),n=Ei(t);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ft(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Ti{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class Ci{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Ii{constructor(){this.jt=new Ai,this.Ht=new Ti(this.jt),this.Jt=new Ci(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class ji{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Zt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new ji(this.indexId,this.documentKey,this.arrayValue,n)}}function Pi(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=Di(e.arrayValue,t.arrayValue),0!==n?n:(n=Di(e.directionalValue,t.directionalValue),0!==n?n:se.comparator(e.documentKey,t.documentKey)))}function Di(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class Ri{constructor(e){this.Xt=new bt((e,t)=>re.comparator(e.field,t.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const e=t;e.isInequality()?this.Xt=this.Xt.add(e):this.tn.push(e)}}get nn(){return this.Xt.size>1}rn(e){if(P(e.collectionGroup===this.collectionId),this.nn)return!1;const t=ae(e);if(void 0!==t&&!this.sn(t))return!1;const n=oe(e);let r=new Set,s=0,i=0;for(;s<n.length&&this.sn(n[s]);++s)r=r.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.Xt.size>0){const e=this.Xt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[s];if(!this.on(e,t)||!this._n(this.en[i++],t))return!1}++s}for(;s<n.length;++s){const e=n[s];if(i>=this.en.length||!this._n(this.en[i++],e))return!1}return!0}an(){if(this.nn)return null;let e=new bt(re.comparator);const t=[];for(const n of this.tn)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new ce(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new ce(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new ce(n.field,"asc"===n.dir?0:1)));return new ie(ie.UNKNOWN_ID,this.collectionId,t,de.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Oi(e){var t,n;if(P(e instanceof yn||e instanceof vn),e instanceof yn){if(e instanceof Pn){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map(t=>yn.create(e.field,"==",t)))||[];return vn.create(r,"or")}return e}const r=e.filters.map(e=>Oi(e));return vn.create(r,e.op)}function Li(e){if(0===e.getFilters().length)return[];const t=Vi(Oi(e));return P(Ui(t)),Mi(t)||Fi(t)?[t]:t.getFilters()}function Mi(e){return e instanceof yn}function Fi(e){return e instanceof vn&&wn(e)}function Ui(e){return Mi(e)||Fi(e)||function(e){if(e instanceof vn&&bn(e)){for(const t of e.getFilters())if(!Mi(t)&&!Fi(t))return!1;return!0}return!1}(e)}function Vi(e){if(P(e instanceof yn||e instanceof vn),e instanceof yn)return e;if(1===e.filters.length)return Vi(e.filters[0]);const t=e.filters.map(e=>Vi(e));let n=vn.create(t,e.op);return n=zi(n),Ui(n)?n:(P(n instanceof vn),P(xn(n)),P(n.filters.length>1),n.filters.reduce((e,t)=>Bi(e,t)))}function Bi(e,t){let n;return P(e instanceof yn||e instanceof vn),P(t instanceof yn||t instanceof vn),n=e instanceof yn?t instanceof yn?function(e,t){return vn.create([e,t],"and")}(e,t):qi(e,t):t instanceof yn?qi(t,e):function(e,t){if(P(e.filters.length>0&&t.filters.length>0),xn(e)&&xn(t))return Sn(e,t.getFilters());const n=bn(e)?e:t,r=bn(e)?t:e,s=n.filters.map(e=>Bi(e,r));return vn.create(s,"or")}(e,t),zi(n)}function qi(e,t){if(xn(t))return Sn(t,e.getFilters());{const n=t.filters.map(t=>Bi(e,t));return vn.create(n,"or")}}function zi(e){if(P(e instanceof yn||e instanceof vn),e instanceof yn)return e;const t=e.getFilters();if(1===t.length)return zi(t[0]);if(kn(e))return e;const n=t.map(e=>zi(e)),r=[];return n.forEach(t=>{t instanceof yn?r.push(t):t instanceof vn&&(t.op===e.op?r.push(...t.filters):r.push(t))}),1===r.length?r[0]:vn.create(r,e.op)}class Ki{constructor(){this.un=new Wi}addToCollectionParentIndex(e,t){return this.un.add(t),xe.resolve()}getCollectionParents(e,t){return xe.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return xe.resolve()}deleteFieldIndex(e,t){return xe.resolve()}deleteAllFieldIndexes(e){return xe.resolve()}createTargetIndexes(e,t){return xe.resolve()}getDocumentsMatchingTarget(e,t){return xe.resolve(null)}getIndexType(e,t){return xe.resolve(0)}getFieldIndexes(e,t){return xe.resolve([])}getNextCollectionGroupToUpdate(e){return xe.resolve(null)}getMinOffset(e,t){return xe.resolve(me.min())}getMinOffsetFromCollectionGroup(e,t){return xe.resolve(me.min())}updateCollectionGroup(e,t,n){return xe.resolve()}updateIndexEntries(e,t){return xe.resolve()}}class Wi{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new bt(te.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new bt(te.comparator)).toArray()}}const Hi=new Uint8Array(0);class Gi{constructor(e,t){this.databaseId=t,this.cn=new Wi,this.ln=new or(e=>Mn(e),(e,t)=>Fn(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:n,parent:Le(r)};return Qi(e).put(s)}return xe.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[X(t),""],!1,!0);return Qi(e).U(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Ue(r.parent))}return n})}addFieldIndex(e,t){const n=Yi(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])}}(t);delete r.indexId;const s=n.add(r);if(t.indexState){const n=Xi(e);return s.next(e=>{n.put(yi(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const n=Yi(e),r=Xi(e),s=Ji(e);return n.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Yi(e),n=Ji(e),r=Xi(e);return t.j().next(()=>n.j()).next(()=>r.j())}createTargetIndexes(e,t){return xe.forEach(this.hn(t),t=>this.getIndexType(e,t).next(n=>{if(0===n||1===n){const n=new Ri(t).an();if(null!=n)return this.addFieldIndex(e,n)}}))}getDocumentsMatchingTarget(e,t){const n=Ji(e);let r=!0;const s=new Map;return xe.forEach(this.hn(t),t=>this.Pn(e,t).next(e=>{r&&(r=!!e),s.set(t,e)})).next(()=>{if(r){let e=vr();const r=[];return xe.forEach(s,(s,i)=>{A("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map(e=>"".concat(e.fieldPath,":").concat(e.kind)).join(","))}(s)," to execute ").concat(Mn(t)));const a=function(e,t){const n=ae(t);if(void 0===n)return null;for(const r of Vn(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(i,s),o=function(e,t){const n=new Map;for(const r of oe(t))for(const t of Vn(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(i,s),l=function(e,t){const n=[];let r=!0;for(const s of oe(t)){const t=0===s.kind?Bn(e,s.fieldPath,e.startAt):qn(e,s.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new dn(n,r)}(i,s),c=function(e,t){const n=[];let r=!0;for(const s of oe(t)){const t=0===s.kind?qn(e,s.fieldPath,e.endAt):Bn(e,s.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new dn(n,r)}(i,s),u=this.In(s,i,l),d=this.In(s,i,c),h=this.Tn(s,i,o),f=this.En(s.indexId,a,u,l.inclusive,d,c.inclusive,h);return xe.forEach(f,s=>n.G(s,t.limit).next(t=>{t.forEach(t=>{const n=se.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))})}))}).next(()=>r)}return xe.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(t=0===e.filters.length?[e]:Li(vn.create(e.filters,"and")).map(t=>Ln(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,n,r,s,i,a){const o=(null!=t?t.length:1)*Math.max(n.length,s.length),l=o/(null!=t?t.length:1),c=[];for(let u=0;u<o;++u){const o=t?this.dn(t[u/l]):Hi,d=this.An(e,o,n[u%l],r),h=this.Rn(e,o,s[u%l],i),f=a.map(t=>this.An(e,o,t,!0));c.push(...this.createRange(d,h,f))}return c}An(e,t,n,r){const s=new ji(e,se.empty(),t,n);return r?s:s.Zt()}Rn(e,t,n,r){const s=new ji(e,se.empty(),t,n);return r?s.Zt():s}Pn(e,t){const n=new Ri(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(e=>{let t=null;for(const r of e)n.rn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t})}getIndexType(e,t){let n=2;const r=this.hn(t);return xe.forEach(r,t=>this.Pn(e,t).next(e=>{e?0!==n&&e.fields.length<function(e){let t=new bt(re.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})).next(()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n)}Vn(e,t){const n=new Ii;for(const r of oe(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const s=n.Yt(r.kind);Ni.vt.It(e,s)}return n.zt()}dn(e){const t=new Ii;return Ni.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const n=new Ii;return Ni.vt.It(Gt(this.databaseId,t),n.Yt(function(e){const t=oe(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.zt()}Tn(e,t,n){if(null===n)return[];let r=[];r.push(new Ii);let s=0;for(const i of oe(e)){const e=n[s++];for(const n of r)if(this.fn(t,i.fieldPath)&&Jt(e))r=this.gn(r,i,e);else{const t=n.Yt(i.kind);Ni.vt.It(e,t)}}return this.pn(r)}In(e,t,n){return this.Tn(e,t,n.position)}pn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].zt();return t}gn(e,t,n){const r=[...e],s=[];for(const i of n.arrayValue.values||[])for(const e of r){const n=new Ii;n.seed(e.zt()),Ni.vt.It(i,n.Yt(t.kind)),s.push(n)}return s}fn(e,t){return!!e.filters.find(e=>e instanceof yn&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){const n=Yi(e),r=Xi(e);return(t?n.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.U()).next(e=>{const t=[];return xe.forEach(e,e=>r.get([e.indexId,this.uid]).next(n=>{t.push(function(e,t){const n=t?new de(t.sequenceNumber,new me(ui(t.readTime),new se(Ue(t.documentKey)),t.largestBatchId)):de.empty(),r=e.fields.map(e=>{let[t,n]=e;return new ce(re.fromServerFormat(t),n)});return new ie(e.indexId,e.collectionGroup,r,n)}(e,n))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:J(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,n){const r=Yi(e),s=Xi(e);return this.yn(e).next(e=>r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(t=>xe.forEach(t,t=>s.put(yi(t.indexId,this.uid,e,n)))))}updateIndexEntries(e,t){const n=new Map;return xe.forEach(t,(t,r)=>{const s=n.get(t.collectionGroup);return(s?xe.resolve(s):this.getFieldIndexes(e,t.collectionGroup)).next(s=>(n.set(t.collectionGroup,s),xe.forEach(s,n=>this.wn(e,t,n).next(t=>{const s=this.Sn(r,n);return t.isEqual(s)?xe.resolve():this.bn(e,r,n,t,s)}))))})}Dn(e,t,n,r){return Ji(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.mn(n,t.key),documentKey:t.key.path.toArray()})}vn(e,t,n,r){return Ji(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.mn(n,t.key),t.key.path.toArray()])}wn(e,t,n){const r=Ji(e);let s=new bt(Pi);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,t)])},(e,r)=>{s=s.add(new ji(n.indexId,t,r.arrayValue,r.directionalValue))}).next(()=>s)}Sn(e,t){let n=new bt(Pi);const r=this.Vn(t,e);if(null==r)return n;const s=ae(t);if(null!=s){const i=e.data.field(s.fieldPath);if(Jt(i))for(const s of i.arrayValue.values||[])n=n.add(new ji(t.indexId,e.key,this.dn(s),r))}else n=n.add(new ji(t.indexId,e.key,Hi,r));return n}bn(e,t,n,r,s){A("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const i=[];return function(e,t,n,r,s){const i=e.getIterator(),a=t.getIterator();let o=kt(i),l=kt(a);for(;o||l;){let e=!1,t=!1;if(o&&l){const r=n(o,l);r<0?t=!0:r>0&&(e=!0)}else null!=o?t=!0:e=!0;e?(r(l),l=kt(a)):t?(s(o),o=kt(i)):(o=kt(i),l=kt(a))}}(r,s,Pi,r=>{i.push(this.Dn(e,t,n,r))},r=>{i.push(this.vn(e,t,n,r))}),xe.waitFor(i)}yn(e){let t=1;return Xi(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,n,r)=>{r.done(),t=n.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((e,t)=>Pi(e,t)).filter((e,t,n)=>!t||0!==Pi(e,n[t-1]));const r=[];r.push(e);for(const i of n){const n=Pi(i,e),s=Pi(i,t);if(0===n)r[0]=e.Zt();else if(n>0&&s<0)r.push(i),r.push(i.Zt());else if(s>0)break}r.push(t);const s=[];for(let i=0;i<r.length;i+=2){if(this.Cn(r[i],r[i+1]))return[];const e=[r[i].indexId,this.uid,r[i].arrayValue,r[i].directionalValue,Hi,[]],t=[r[i+1].indexId,this.uid,r[i+1].arrayValue,r[i+1].directionalValue,Hi,[]];s.push(IDBKeyRange.bound(e,t))}return s}Cn(e,t){return Pi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next($i)}getMinOffset(e,t){return xe.mapArray(this.hn(t),t=>this.Pn(e,t).next(e=>e||j())).next($i)}}function Qi(e){return ht(e,"collectionParents")}function Ji(e){return ht(e,"indexEntries")}function Yi(e){return ht(e,"indexConfiguration")}function Xi(e){return ht(e,"indexState")}function $i(e){P(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const s=e[r].indexState.offset;pe(s,t)<0&&(t=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new me(t.readTime,t.documentKey,n)}const Zi={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ea{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new ea(e,ea.DEFAULT_COLLECTION_PERCENTILE,ea.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ta(e,t,n){const r=e.store("mutations"),s=e.store("documentMutations"),i=[],a=IDBKeyRange.only(n.batchId);let o=0;const l=r.J({range:a},(e,t,n)=>(o++,n.delete()));i.push(l.next(()=>{P(1===o)}));const c=[];for(const u of n.mutations){const e=qe(t,u.key.path,n.batchId);i.push(s.delete(e)),c.push(u.key)}return xe.waitFor(i).next(()=>c)}function na(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw j();t=e.noDocument}return JSON.stringify(t).length}ea.DEFAULT_COLLECTION_PERCENTILE=10,ea.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ea.DEFAULT=new ea(41943040,ea.DEFAULT_COLLECTION_PERCENTILE,ea.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ea.DISABLED=new ea(-1,0,0);class ra{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Fn={}}static lt(e,t,n,r){P(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new ra(s,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ia(e).J({index:"userMutationsIndex",range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const s=aa(e),i=ia(e);return i.add({}).next(a=>{P("number"==typeof a);const o=new Zr(a,t,n,r),l=function(e,t,n){const r=n.baseMutations.map(t=>Ks(e.ct,t)),s=n.mutations.map(t=>Ks(e.ct,t));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:s}}(this.serializer,this.userId,o),c=[];let u=new bt((e,t)=>J(e.canonicalString(),t.canonicalString()));for(const e of r){const t=qe(this.userId,e.key.path,a);u=u.add(e.key.path.popLast()),c.push(i.put(l)),c.push(s.put(t,ze))}return u.forEach(t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.Fn[a]=o.keys()}),xe.waitFor(c).next(()=>o)})}lookupMutationBatch(e,t){return ia(e).get(t).next(e=>e?(P(e.userId===this.userId),di(this.serializer,e)):null)}Mn(e,t){return this.Fn[t]?xe.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.Fn[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return ia(e).J({index:"userMutationsIndex",range:r},(e,t,r)=>{t.userId===this.userId&&(P(t.batchId>=n),s=di(this.serializer,t)),r.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return ia(e).J({index:"userMutationsIndex",range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ia(e).U("userMutationsIndex",t).next(e=>e.map(e=>di(this.serializer,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Be(this.userId,t.path),r=IDBKeyRange.lowerBound(n),s=[];return aa(e).J({range:r},(n,r,i)=>{const[a,o,l]=n,c=Ue(o);if(a===this.userId&&t.path.isEqual(c))return ia(e).get(l).next(e=>{if(!e)throw j();P(e.userId===this.userId),s.push(di(this.serializer,e))});i.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new bt(J);const r=[];return t.forEach(t=>{const s=Be(this.userId,t.path),i=IDBKeyRange.lowerBound(s),a=aa(e).J({range:i},(e,r,s)=>{const[i,a,o]=e,l=Ue(a);i===this.userId&&t.path.isEqual(l)?n=n.add(o):s.done()});r.push(a)}),xe.waitFor(r).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,s=Be(this.userId,n),i=IDBKeyRange.lowerBound(s);let a=new bt(J);return aa(e).J({range:i},(e,t,s)=>{const[i,o,l]=e,c=Ue(o);i===this.userId&&n.isPrefixOf(c)?c.length===r&&(a=a.add(l)):s.done()}).next(()=>this.xn(e,a))}xn(e,t){const n=[],r=[];return t.forEach(t=>{r.push(ia(e).get(t).next(e=>{if(null===e)throw j();P(e.userId===this.userId),n.push(di(this.serializer,e))}))}),xe.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return ta(e._e,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),xe.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return xe.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return aa(e).J({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=Ue(e[1]);r.push(t)}else n.done()}).next(()=>{P(0===r.length)})})}containsKey(e,t){return sa(e,this.userId,t)}Nn(e){return oa(e).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function sa(e,t,n){const r=Be(t,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let a=!1;return aa(e).J({range:i,H:!0},(e,n,r)=>{const[i,o,l]=e;i===t&&o===s&&(a=!0),r.done()}).next(()=>a)}function ia(e){return ht(e,"mutations")}function aa(e){return ht(e,"documentMutations")}function oa(e){return ht(e,"mutationQueues")}class la{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new la(0)}static kn(){return new la(-1)}}class ca{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const n=new la(t.highestTargetId);return t.highestTargetId=n.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(e=>Z.fromTimestamp(new $(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.qn(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Qn(e,r)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(t,n),this.Qn(e,n))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ua(e).delete(t.targetId)).next(()=>this.qn(e)).next(t=>(P(t.targetCount>0),t.targetCount-=1,this.Qn(e,t)))}removeTargets(e,t,n){let r=0;const s=[];return ua(e).J((i,a)=>{const o=hi(a);o.sequenceNumber<=t&&null===n.get(o.targetId)&&(r++,s.push(this.removeTargetData(e,o)))}).next(()=>xe.waitFor(s)).next(()=>r)}forEachTarget(e,t){return ua(e).J((e,n)=>{const r=hi(n);t(r)})}qn(e){return da(e).get("targetGlobalKey").next(e=>(P(null!==e),e))}Qn(e,t){return da(e).put("targetGlobalKey",t)}Kn(e,t){return ua(e).put(fi(this.serializer,t))}$n(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(e=>e.targetCount)}getTargetData(e,t){const n=Mn(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return ua(e).J({range:r,index:"queryTargetsIndex"},(e,n,r)=>{const i=hi(n);Fn(t,i.target)&&(s=i,r.done())}).next(()=>s)}addMatchingKeys(e,t,n){const r=[],s=ha(e);return t.forEach(t=>{const i=Le(t.path);r.push(s.put({targetId:n,path:i})),r.push(this.referenceDelegate.addReference(e,n,t))}),xe.waitFor(r)}removeMatchingKeys(e,t,n){const r=ha(e);return xe.forEach(t,t=>{const s=Le(t.path);return xe.waitFor([r.delete([n,s]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=ha(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=ha(e);let s=vr();return r.J({range:n,H:!0},(e,t,n)=>{const r=Ue(e[1]),i=new se(r);s=s.add(i)}).next(()=>s)}containsKey(e,t){const n=Le(t.path),r=IDBKeyRange.bound([n],[X(n)],!1,!0);let s=0;return ha(e).J({index:"documentTargetsIndex",H:!0,range:r},(e,t,n)=>{let[r,i]=e;0!==r&&(s++,n.done())}).next(()=>s>0)}ot(e,t){return ua(e).get(t).next(e=>e?hi(e):null)}}function ua(e){return ht(e,"targets")}function da(e){return ht(e,"targetGlobal")}function ha(e){return ht(e,"targetDocuments")}function fa(e,t){let[n,r]=e,[s,i]=t;const a=J(n,s);return 0===a?J(r,i):a}class ma{constructor(e){this.Un=e,this.buffer=new bt(fa),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();fa(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class pa{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){A("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Se(e)?A("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await ve(e)}await this.Hn(3e5)})}}class ga{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return xe.resolve(Pe.oe);const n=new ma(t);return this.Jn.forEachTarget(e,e=>n.zn(e.sequenceNumber)).next(()=>this.Jn.Zn(e,e=>n.zn(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(A("LruGarbageCollector","Garbage collection skipped; disabled"),xe.resolve(Zi)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(A("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Zi):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let n,r,s,i,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(A("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(s=t,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(c=Date.now(),S()<=o.$b.DEBUG&&A("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(i-u,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-i)+"ms\n"+"\tRemoved ".concat(s," targets in ")+(l-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-l)+"ms\n"+"Total Duration: ".concat(c-u,"ms")),xe.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e})))}}function ya(e,t){return new ga(e,t)}class va{constructor(e,t){this.db=e,this.garbageCollector=ya(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}er(e){let t=0;return this.Zn(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(e,n)=>t(n))}addReference(e,t,n){return xa(e,n)}removeReference(e,t,n){return xa(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return xa(e,t)}nr(e,t){return function(e,t){let n=!1;return oa(e).Y(r=>sa(e,r,t).next(e=>(e&&(n=!0),xe.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.tr(e,(i,a)=>{if(a<=t){const t=this.nr(e,i).next(t=>{if(!t)return s++,n.getEntry(e,i).next(()=>(n.removeEntry(i,Z.min()),ha(e).delete(function(e){return[0,Le(e.path)]}(i))))});r.push(t)}}).next(()=>xe.waitFor(r)).next(()=>n.apply(e)).next(()=>s)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return xa(e,t)}tr(e,t){const n=ha(e);let r,s=Pe.oe;return n.J({index:"documentTargetsIndex"},(e,n)=>{let[i,a]=e,{path:o,sequenceNumber:l}=n;0===i?(s!==Pe.oe&&t(new se(Ue(r)),s),s=l,r=o):s=Pe.oe}).next(()=>{s!==Pe.oe&&t(new se(Ue(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function xa(e,t){return ha(e).put(function(e,t){return{targetId:0,path:Le(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class ba{constructor(){this.changes=new or(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?xe.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class wa{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Sa(e).put(n)}removeEntry(e,t,n){return Sa(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],li(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.rr(e,n)))}getEntry(e,t){let n=un.newInvalidDocument(t);return Sa(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ea(t))},(e,r)=>{n=this.ir(t,r)}).next(()=>n)}sr(e,t){let n={size:0,document:un.newInvalidDocument(t)};return Sa(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ea(t))},(e,r)=>{n={document:this.ir(t,r),size:na(r)}}).next(()=>n)}getEntries(e,t){let n=cr();return this._r(e,t,(e,t)=>{const r=this.ir(e,t);n=n.insert(e,r)}).next(()=>n)}ar(e,t){let n=cr(),r=new yt(se.comparator);return this._r(e,t,(e,t)=>{const s=this.ir(e,t);n=n.insert(e,s),r=r.insert(e,na(t))}).next(()=>({documents:n,ur:r}))}_r(e,t,n){if(t.isEmpty())return xe.resolve();let r=new bt(Ta);t.forEach(e=>r=r.add(e));const s=IDBKeyRange.bound(Ea(r.first()),Ea(r.last())),i=r.getIterator();let a=i.getNext();return Sa(e).J({index:"documentKeyIndex",range:s},(e,t,r)=>{const s=se.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;a&&Ta(a,s)<0;)n(a,null),a=i.getNext();a&&a.isEqual(s)&&(n(a,t),a=i.hasNext()?i.getNext():null),a?r.$(Ea(a)):r.done()}).next(()=>{for(;a;)n(a,null),a=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,t,n,r,s){const i=t.path,a=[i.popLast().toArray(),i.lastSegment(),li(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],o=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Sa(e).U(IDBKeyRange.bound(a,o,!0)).next(e=>{null==s||s.incrementDocumentReadCount(e.length);let n=cr();for(const s of e){const e=this.ir(se.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);e.isFoundDocument()&&(rr(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n})}getAllFromCollectionGroup(e,t,n,r){let s=cr();const i=Aa(t,n),a=Aa(t,me.max());return Sa(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(i,a,!0)},(e,t,n)=>{const i=this.ir(se.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);s=s.insert(i.key,i),s.size===r&&n.done()}).next(()=>s)}newChangeBuffer(e){return new _a(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return Na(e).get("remoteDocumentGlobalKey").next(e=>(P(!!e),e))}rr(e,t){return Na(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const e=function(e,t){let n;if(t.document)n=zs(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=se.fromSegments(t.noDocument.path),r=ui(t.noDocument.readTime);n=un.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return j();{const e=se.fromSegments(t.unknownDocument.path),r=ui(t.unknownDocument.version);n=un.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new $(e[0],e[1]);return Z.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Z.min()))return e}return un.newInvalidDocument(e)}}function ka(e){return new wa(e)}class _a extends ba{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new or(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new bt((e,t)=>J(e.canonicalString(),t.canonicalString()));return this.changes.forEach((s,i)=>{const a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),i.isValidDocument()){const o=oi(this.cr.serializer,i);r=r.add(s.path.popLast());const l=na(o);n+=l-a.size,t.push(this.cr.addEntry(e,s,o))}else if(n-=a.size,this.trackRemovals){const n=oi(this.cr.serializer,i.convertToNoDocument(Z.min()));t.push(this.cr.addEntry(e,s,n))}}),r.forEach(n=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,n))}),t.push(this.cr.updateMetadata(e,n)),xe.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(e=>(this.lr.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(e=>{let{documents:t,ur:n}=e;return n.forEach((e,n)=>{this.lr.set(e,{size:n,readTime:t.get(e).readTime})}),t})}}function Na(e){return ht(e,"remoteDocumentGlobal")}function Sa(e){return ht(e,"remoteDocumentsV14")}function Ea(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Aa(e,t){const n=t.documentKey.path.toArray();return[e,li(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Ta(e,t){const n=e.path.toArray(),r=t.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=J(n[i],r[i]),s)return s;return s=J(n.length,r.length),s||(s=J(n[n.length-2],r[r.length-2]),s||J(n[n.length-1],r[r.length-1]))}class Ca{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Ia{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&zr(n.mutation,e,_t.empty(),$.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,vr()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vr();const r=fr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=dr();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=fr();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,vr()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=cr();const i=pr(),a=pr();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Gr)?s=s.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),zr(a.mutation,t,a.mutation.getFieldMask(),$.now())):i.set(t.key,_t.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new Ca(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=pr();let r=new yt((e,t)=>e-t),s=vr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let a=n.get(e)||_t.empty();a=s.applyToLocalView(i,a),n.set(e,a);const o=(r.get(s.batchId)||vr()).add(e);r=r.insert(s.batchId,o)})}).next(()=>{const i=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=mr();l.forEach(e=>{if(!s.has(e)){const r=Br(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,o,c))}return xe.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return se.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Gn(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):xe.resolve(fr());let a=-1,o=s;return i.next(t=>xe.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),s.get(t)?xe.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,o,t,vr())).next(e=>({batchId:a,changes:hr(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new se(t)).next(e=>{let t=dr();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let i=dr();return this.indexManager.getCollectionParents(e,s).next(a=>xe.forEach(a,a=>{const o=function(e,t){return new zn(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(e=>{s.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,un.newInvalidDocument(r)))});let n=dr();return e.forEach((e,r)=>{const i=s.get(e);void 0!==i&&zr(i.mutation,r,_t.empty(),$.now()),rr(t,r)&&(n=n.insert(e,r))}),n})}}class ja{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return xe.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Ps(e.createTime)}}(t)),xe.resolve()}getNamedQuery(e,t){return xe.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:mi(e.bundledQuery),readTime:Ps(e.readTime)}}(t)),xe.resolve()}}class Pa{constructor(){this.overlays=new yt(se.comparator),this.Ir=new Map}getOverlay(e,t){return xe.resolve(this.overlays.get(t))}getOverlays(e,t){const n=fr();return xe.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.ht(e,t,r)}),xe.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ir.delete(n)),xe.resolve()}getOverlaysForCollection(e,t,n){const r=fr(),s=t.length+1,i=new se(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return xe.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new yt((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=fr(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=fr(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return xe.resolve(a)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new ts(t,n));let s=this.Ir.get(t);void 0===s&&(s=vr(),this.Ir.set(t,s)),this.Ir.set(t,s.add(n.key))}}class Da{constructor(){this.sessionToken=Et.EMPTY_BYTE_STRING}getSessionToken(e){return xe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,xe.resolve()}}class Ra{constructor(){this.Tr=new bt(Oa.Er),this.dr=new bt(Oa.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new Oa(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Vr(new Oa(e,t))}mr(e,t){e.forEach(e=>this.removeReference(e,t))}gr(e){const t=new se(new te([])),n=new Oa(t,e),r=new Oa(t,e+1),s=[];return this.dr.forEachInRange([n,r],e=>{this.Vr(e),s.push(e.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new se(new te([])),n=new Oa(t,e),r=new Oa(t,e+1);let s=vr();return this.dr.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new Oa(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Oa{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return se.comparator(e.key,t.key)||J(e.wr,t.wr)}static Ar(e,t){return J(e.wr,t.wr)||se.comparator(e.key,t.key)}}class La{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new bt(Oa.Er)}checkEmpty(e){return xe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Zr(s,t,n,r);this.mutationQueue.push(i);for(const a of r)this.br=this.br.add(new Oa(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return xe.resolve(i)}lookupMutationBatch(e,t){return xe.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),s=r<0?0:r;return xe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return xe.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Oa(t,0),r=new Oa(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,r],e=>{const t=this.Dr(e.wr);s.push(t)}),xe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new bt(J);return t.forEach(e=>{const t=new Oa(e,0),r=new Oa(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],e=>{n=n.add(e.wr)})}),xe.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;se.isDocumentKey(s)||(s=s.child(""));const i=new Oa(new se(s),0);let a=new bt(J);return this.br.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.wr)),!0)},i),xe.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(e=>{const n=this.Dr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){P(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return xe.forEach(t.mutations,r=>{const s=new Oa(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new Oa(t,0),r=this.br.firstAfterOrEqual(n);return xe.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,xe.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Ma{constructor(e){this.Mr=e,this.docs=new yt(se.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return xe.resolve(n?n.document.mutableCopy():un.newInvalidDocument(t))}getEntries(e,t){let n=cr();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():un.newInvalidDocument(e))}),xe.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=cr();const i=t.path,a=new se(i.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||pe(fe(a),n)<=0||(r.has(a.key)||rr(t,a))&&(s=s.insert(a.key,a.mutableCopy()))}return xe.resolve(s)}getAllFromCollectionGroup(e,t,n,r){j()}Or(e,t){return xe.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Fa(this)}getSize(e){return xe.resolve(this.size)}}class Fa extends ba{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),xe.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class Ua{constructor(e){this.persistence=e,this.Nr=new or(e=>Mn(e),Fn),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ra,this.targetCount=0,this.kr=la.Bn()}forEachTarget(e,t){return this.Nr.forEach((e,n)=>t(n)),xe.resolve()}getLastRemoteSnapshotVersion(e){return xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),xe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),xe.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new la(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,xe.resolve()}updateTargetData(e,t){return this.Kn(t),xe.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,xe.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.Nr.forEach((i,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Nr.delete(i),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),xe.waitFor(s).next(()=>r)}getTargetCount(e){return xe.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return xe.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),xe.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),xe.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),xe.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return xe.resolve(n)}containsKey(e,t){return xe.resolve(this.Br.containsKey(t))}}class Va{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Pe(0),this.Kr=!1,this.Kr=!0,this.$r=new Da,this.referenceDelegate=e(this),this.Ur=new Ua(this),this.indexManager=new Ki,this.remoteDocumentCache=function(e){return new Ma(e)}(e=>this.referenceDelegate.Wr(e)),this.serializer=new ai(t),this.Gr=new ja(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Pa,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new La(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){A("MemoryPersistence","Starting transaction:",e);const r=new Ba(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(e=>this.referenceDelegate.jr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Hr(e,t){return xe.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class Ba extends ye{constructor(e){super(),this.currentSequenceNumber=e}}class qa{constructor(e){this.persistence=e,this.Jr=new Ra,this.Yr=null}static Zr(e){return new qa(e)}get Xr(){if(this.Yr)return this.Yr;throw j()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),xe.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),xe.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),xe.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(e=>this.Xr.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xr.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xe.forEach(this.Xr,n=>{const r=se.fromPath(n);return this.ei(e,r).next(e=>{e||t.removeEntry(r,Z.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return xe.or([()=>xe.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class za{constructor(e,t){this.persistence=e,this.ti=new or(e=>Le(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=ya(this,t)}static Zr(e,t){return new za(e,t)}zr(){}jr(e){return xe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Yn(e){const t=this.er(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}er(e){let t=0;return this.Zn(e,e=>{t++}).next(()=>t)}Zn(e,t){return xe.forEach(this.ti,(n,r)=>this.nr(e,n,r).next(e=>e?xe.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.Or(e,r=>this.nr(e,r,t).next(e=>{e||(n++,s.removeEntry(r,Z.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.ti.set(t,e.currentSequenceNumber),xe.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.ti.set(n,e.currentSequenceNumber),xe.resolve()}removeReference(e,t,n){return this.ti.set(n,e.currentSequenceNumber),xe.resolve()}updateLimboDocument(e,t){return this.ti.set(t,e.currentSequenceNumber),xe.resolve()}Wr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ht(e.data.value)),t}nr(e,t,n){return xe.or([()=>this.persistence.Hr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.ti.get(t);return xe.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Ka{constructor(e){this.serializer=e}O(e,t,n,r){const s=new be("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ve,{unique:!0}),e.createObjectStore("documentMutations")}(e),Wa(e),function(e){e.createObjectStore("remoteDocuments")}(e));let i=xe.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Wa(e)),i=i.next(()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Z.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(s))),n<4&&r>=4&&(0!==n&&(i=i.next(()=>function(e,t){return t.store("mutations").U().next(n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ve,{unique:!0});const r=t.store("mutations"),s=n.map(e=>r.put(e));return xe.waitFor(s)})}(e,s))),i=i.next(()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),n<5&&r>=5&&(i=i.next(()=>this.ni(s))),n<6&&r>=6&&(i=i.next(()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),n<7&&r>=7&&(i=i.next(()=>this.ii(s))),n<8&&r>=8&&(i=i.next(()=>this.si(e,s))),n<9&&r>=9&&(i=i.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)})),n<10&&r>=10&&(i=i.next(()=>this.oi(s))),n<11&&r>=11&&(i=i.next(()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&r>=12&&(i=i.next(()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:tt});t.createIndex("collectionPathOverlayIndex",nt,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",rt,{unique:!1})}(e)})),n<13&&r>=13&&(i=i.next(()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Ke});t.createIndex("documentKeyIndex",We),t.createIndex("collectionGroupIndex",He)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&r>=14&&(i=i.next(()=>this.ai(e,s))),n<15&&r>=15&&(i=i.next(()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Xe}).createIndex("sequenceNumberIndex",$e,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Ze}).createIndex("documentKeyIndex",et,{unique:!1})}(e))),n<16&&r>=16&&(i=i.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),n<17&&r>=17&&(i=i.next(()=>{!function(e){e.createObjectStore("globals",{keyPath:"name"})}(e)})),i}ri(e){let t=0;return e.store("remoteDocuments").J((e,n)=>{t+=na(n)}).next(()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.U().next(t=>xe.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",r).next(n=>xe.forEach(n,n=>{P(n.userId===t.userId);const r=di(this.serializer,n);return ta(e,t.userId,r).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(e=>{const r=[];return n.J((n,s)=>{const i=new te(n),a=function(e){return[0,Le(e)]}(i);r.push(t.get(a).next(n=>n?xe.resolve():(n=>t.put({targetId:0,path:Le(n),sequenceNumber:e.highestListenSequenceNumber}))(i)))}).next(()=>xe.waitFor(r))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:Ye});const n=t.store("collectionParents"),r=new Wi,s=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Le(r)})}};return t.store("remoteDocuments").J({H:!0},(e,t)=>{const n=new te(e);return s(n.popLast())}).next(()=>t.store("documentMutations").J({H:!0},(e,t)=>{let[n,r,i]=e;const a=Ue(r);return s(a.popLast())}))}oi(e){const t=e.store("targets");return t.J((e,n)=>{const r=hi(n),s=fi(this.serializer,r);return t.put(s)})}_i(e,t){const n=t.store("remoteDocuments"),r=[];return n.J((e,n)=>{const s=t.store("remoteDocumentsV14"),i=function(e){return e.document?new se(te.fromString(e.document.name).popFirst(5)):e.noDocument?se.fromSegments(e.noDocument.path):e.unknownDocument?se.fromSegments(e.unknownDocument.path):j()}(n).path.toArray(),a={prefixPath:i.slice(0,i.length-2),collectionGroup:i[i.length-2],documentId:i[i.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(s.put(a))}).next(()=>xe.waitFor(r))}ai(e,t){const n=t.store("mutations"),r=ka(this.serializer),s=new Va(qa.Zr,this.serializer.ct);return n.U().next(e=>{const n=new Map;return e.forEach(e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:vr();di(this.serializer,e).keys().forEach(e=>r=r.add(e)),n.set(e.userId,r)}),xe.forEach(n,(e,n)=>{const i=new k(n),a=wi.lt(this.serializer,i),o=s.getIndexManager(i),l=ra.lt(i,this.serializer,o,s.referenceDelegate);return new Ia(r,l,a,o).recalculateAndSaveOverlaysForDocumentKeys(new dt(t,Pe.oe),e).next()})})}}function Wa(e){e.createObjectStore("targetDocuments",{keyPath:Qe}).createIndex("documentTargetsIndex",Je,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ge,{unique:!0}),e.createObjectStore("targetGlobal")}const Ha="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ga{constructor(e,t,n,r,s,i,a,o,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:17;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.ui=s,this.window=i,this.document=a,this.ci=l,this.li=c,this.hi=u,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=e=>Promise.resolve(),!Ga.D())throw new L(O.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new va(this,r),this.Ai=t+"main",this.serializer=new ai(o),this.Ri=new we(this.Ai,this.hi,new Ka(this.serializer)),this.$r=new _i,this.Ur=new ca(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ka(this.serializer),this.Gr=new vi,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===c&&T("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new L(O.FAILED_PRECONDITION,Ha);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Pe(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async t=>{null===t.newVersion&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ja(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(e=>{e||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Se(e))return A("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return A("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Qa(e).get("owner").next(e=>xe.resolve(this.vi(e)))}Ci(e){return Ja(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const t=ht(e,"clientMetadata");return t.U().next(e=>{const n=this.xi(e,18e5),r=e.filter(e=>-1===n.indexOf(e));return xe.forEach(r,e=>t.delete(e.clientId)).next(()=>r)})}).catch(()=>[]);if(this.Vi)for(const t of e)this.Vi.removeItem(this.Oi(t.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?xe.resolve(!0):Qa(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new L(O.FAILED_PRECONDITION,Ha);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ja(e).U().next(e=>void 0===this.xi(e,5e3).find(e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&A("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new dt(e,Pe.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()}xi(e,t){return e.filter(e=>this.Mi(e.updateTimeMs,t)&&!this.Ni(e.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Ja(e).U().next(e=>this.xi(e,18e5).map(e=>e.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return ra.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Gi(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return wi.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,n){A("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",s=function(e){return 17===e?ut:16===e?ct:15===e?lt:14===e?ot:13===e?at:12===e?it:11===e?st:void j()}(this.hi);let i;return this.Ri.runTransaction(e,r,s,r=>(i=new dt(r,this.Qr?this.Qr.next():Pe.oe),"readwrite-primary"===t?this.wi(i).next(e=>!!e||this.Si(i)).next(t=>{if(!t)throw T("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new L(O.FAILED_PRECONDITION,ge);return n(i)}).next(e=>this.Di(i).next(()=>e)):this.Ki(i).next(()=>n(i)))).then(e=>(i.raiseOnCommittedEvent(),e))}Ki(e){return Qa(e).get("owner").next(e=>{if(null!==e&&this.Mi(e.leaseTimestampMs,5e3)&&!this.Ni(e.ownerId)&&!this.vi(e)&&!(this.li||this.allowTabSynchronization&&e.allowTabSynchronization))throw new L(O.FAILED_PRECONDITION,Ha)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Qa(e).put("owner",t)}static D(){return we.D()}bi(e){const t=Qa(e);return t.get("owner").next(e=>this.vi(e)?(A("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):xe.resolve())}Mi(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(T("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const e=/(?:Version|Mobile)\/1[456]/;(0,l.nr)()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const n=null!==(null===(t=this.Vi)||void 0===t?void 0:t.getItem(this.Oi(e)));return A("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return T("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){T("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch(e){}}Oi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Qa(e){return ht(e,"owner")}function Ja(e){return ht(e,"clientMetadata")}function Ya(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Xa{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=vr(),r=vr();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Xa(e,t.fromCache,n,r)}}class $a{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Za{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,l.nr)()?8:ke((0,l.ZQ)())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.Yi(e,t).next(e=>{s.result=e}).next(()=>{if(!s.result)return this.Zi(e,t,r,n).next(e=>{s.result=e})}).next(()=>{if(s.result)return;const n=new $a;return this.Xi(e,t,n).next(r=>{if(s.result=r,this.zi)return this.es(e,t,n,r.size)})}).next(()=>s.result)}es(e,t,n,r){return n.documentReadCount<this.ji?(S()<=o.$b.DEBUG&&A("QueryEngine","SDK will not create cache indexes for query:",nr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),xe.resolve()):(S()<=o.$b.DEBUG&&A("QueryEngine","Query:",nr(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(S()<=o.$b.DEBUG&&A("QueryEngine","The SDK decides to create cache indexes for query:",nr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jn(t))):xe.resolve())}Yi(e,t){if(Hn(t))return xe.resolve(null);let n=Jn(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Zn(t,null,"F"),n=Jn(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=vr(...r);return this.Ji.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.ts(t,r);return this.ns(t,i,s,n.readTime)?this.Yi(e,Zn(t,null,"F")):this.rs(e,i,t,n)}))})))}Zi(e,t,n,r){return Hn(t)||r.isEqual(Z.min())?xe.resolve(null):this.Ji.getDocuments(e,n).next(s=>{const i=this.ts(t,s);return this.ns(t,i,n,r)?xe.resolve(null):(S()<=o.$b.DEBUG&&A("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),nr(t)),this.rs(e,i,t,he(r,-1)).next(e=>e))})}ts(e,t){let n=new bt(ir(e));return t.forEach((t,r)=>{rr(e,r)&&(n=n.add(r))}),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,t,n){return S()<=o.$b.DEBUG&&A("QueryEngine","Using full collection scan to execute query:",nr(t)),this.Ji.getDocumentsMatchingQuery(e,t,me.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class eo{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new yt(J),this._s=new or(e=>Mn(e),Fn),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ia(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function to(e,t,n,r){return new eo(e,t,n,r)}async function no(e,t){const n=R(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let a=vr();for(const e of r){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({hs:e,removedBatchIds:s,addedBatchIds:i}))})})}function ro(e){const t=R(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function so(e,t,n){let r=vr(),s=vr();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=cr();return n.forEach((n,i)=>{const a=e.get(n);i.isFoundDocument()!==a.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(Z.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):A("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)}),{Ps:r,Is:s}})}function io(e,t){const n=R(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function ao(e,t){const n=R(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Ur.getTargetData(e,t).next(s=>s?(r=s,xe.resolve(r)):n.Ur.allocateTargetId(e).next(s=>(r=new ii(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e})}async function oo(e,t,n){const r=R(e),s=r.os.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!Se(e))throw e;A("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.os=r.os.remove(t),r._s.delete(s.target)}function lo(e,t,n){const r=R(e);let s=Z.min(),i=vr();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=R(e),s=r._s.get(n);return void 0!==s?xe.resolve(r.os.get(s)):r.Ur.getTargetData(t,n)}(r,e,Jn(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.ss.getDocumentsMatchingQuery(e,t,n?s:Z.min(),n?i:vr())).next(e=>(ho(r,sr(t),e),{documents:e,Ts:i})))}function co(e,t){const n=R(e),r=R(n.Ur),s=n.os.get(t);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",e=>r.ot(e,t).next(e=>e?e.target:null))}function uo(e,t){const n=R(e),r=n.us.get(t)||Z.min();return n.persistence.runTransaction("Get new document changes","readonly",e=>n.cs.getAllFromCollectionGroup(e,t,he(r,-1),Number.MAX_SAFE_INTEGER)).then(e=>(ho(n,t,e),e))}function ho(e,t,n){let r=e.us.get(t)||Z.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.us.set(t,r)}async function fo(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vr();const r=await ao(e,Jn(mi(t.bundledQuery))),s=R(e);return s.persistence.runTransaction("Save named query","readwrite",e=>{const i=Ps(t.readTime);if(r.snapshotVersion.compareTo(i)>=0)return s.Gr.saveNamedQuery(e,t);const a=r.withResumeToken(Et.EMPTY_BYTE_STRING,i);return s.os=s.os.insert(a.targetId,a),s.Ur.updateTargetData(e,a).next(()=>s.Ur.removeMatchingKeysForTargetId(e,r.targetId)).next(()=>s.Ur.addMatchingKeys(e,n,r.targetId)).next(()=>s.Gr.saveNamedQuery(e,t))})}function mo(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function po(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function go(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class yo{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Rs(e,t,n){const r=JSON.parse(n);let s,i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code,i&&(s=new L(r.error.code,r.error.message))),i?new yo(e,t,r.state,s):(T("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vo{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Rs(e,t){const n=JSON.parse(t);let r,s="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return s&&n.error&&(s="string"==typeof n.error.message&&"string"==typeof n.error.code,s&&(r=new L(n.error.code,n.error.message))),s?new vo(e,n.state,r):(T("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xo{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,s=br();for(let i=0;r&&i<n.activeTargetIds.length;++i)r=Oe(n.activeTargetIds[i]),s=s.add(n.activeTargetIds[i]);return r?new xo(e,s):(T("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class bo{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new bo(t.clientId,t.onlineState):(T("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class wo{constructor(){this.activeTargetIds=br()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ko{constructor(e,t,n,r,s){this.window=e,this.ui=t,this.persistenceKey=n,this.ps=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new yt(J),this.started=!1,this.bs=[];const i=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=mo(this.persistenceKey,this.ps),this.vs=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new wo),this.Cs=new RegExp("^firestore_clients_".concat(i,"_([^_]*)$")),this.Fs=new RegExp("^firestore_mutations_".concat(i,"_(\\d+)(?:_(.*))?$")),this.Ms=new RegExp("^firestore_targets_".concat(i,"_(\\d+)$")),this.xs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Os=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const e=this.getItem(mo(this.persistenceKey,n));if(e){const t=xo.Rs(n,e);t&&(this.Ss=this.Ss.insert(t.clientId,t))}}this.Ns();const t=this.storage.getItem(this.xs);if(t){const e=this.Ls(t);e&&this.Bs(e)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,n){this.qs(e,t,n),this.Qs(e)}addLocalQueryTarget(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="not-current";if(this.isActiveQueryTarget(e)){const t=this.storage.getItem(go(this.persistenceKey,e));if(t){const r=vo.Rs(e,t);r&&(n=r.state)}}return t&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(go(this.persistenceKey,e))}updateQueryState(e,t,n){this.$s(e,t,n)}handleUserChange(e,t,n){t.forEach(e=>{this.Qs(e)}),this.currentUser=e,n.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return A("SharedClientState","READ",e,t),t}setItem(e,t){A("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){A("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const t=e;if(t.storageArea===this.storage){if(A("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void T("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(null!==t.key)if(this.Cs.test(t.key)){if(null==t.newValue){const e=this.Gs(t.key);return this.zs(e,null)}{const e=this.js(t.key,t.newValue);if(e)return this.zs(e.clientId,e)}}else if(this.Fs.test(t.key)){if(null!==t.newValue){const e=this.Hs(t.key,t.newValue);if(e)return this.Js(e)}}else if(this.Ms.test(t.key)){if(null!==t.newValue){const e=this.Ys(t.key,t.newValue);if(e)return this.Zs(e)}}else if(t.key===this.xs){if(null!==t.newValue){const e=this.Ls(t.newValue);if(e)return this.Bs(e)}}else if(t.key===this.vs){const e=function(e){let t=Pe.oe;if(null!=e)try{const n=JSON.parse(e);P("number"==typeof n),t=n}catch(e){T("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Pe.oe&&this.sequenceNumberHandler(e)}else if(t.key===this.Os){const e=this.Xs(t.newValue);await Promise.all(e.map(e=>this.syncEngine.eo(e)))}}else this.bs.push(t)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,n){const r=new yo(this.currentUser,e,t,n),s=po(this.persistenceKey,this.currentUser,e);this.setItem(s,r.Vs())}Qs(e){const t=po(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){const t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,n){const r=go(this.persistenceKey,e),s=new vo(e,t,n);this.setItem(r,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const n=this.Gs(e);return xo.Rs(n,t)}Hs(e,t){const n=this.Fs.exec(e),r=Number(n[1]),s=void 0!==n[2]?n[2]:null;return yo.Rs(new k(s),r,t)}Ys(e,t){const n=this.Ms.exec(e),r=Number(n[1]);return vo.Rs(r,t)}Ls(e){return bo.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);A("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const n=t?this.Ss.insert(e,t):this.Ss.remove(e),r=this.ks(this.Ss),s=this.ks(n),i=[],a=[];return s.forEach(e=>{r.has(e)||i.push(e)}),r.forEach(e=>{s.has(e)||a.push(e)}),this.syncEngine.io(i,a).then(()=>{this.Ss=n})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=br();return e.forEach((e,n)=>{t=t.unionWith(n.activeTargetIds)}),t}}class _o{constructor(){this.so=new wo,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new wo,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class No{_o(e){}shutdown(){}}class So{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){A("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){A("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Eo=null;function Ao(){return null===Eo?Eo=268435456+Math.round(2147483648*Math.random()):Eo++,"0x"+Eo.toString(16)}const To={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Co{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Io="WebChannelConnection";class jo extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo="projects/".concat(n,"/databases/").concat(r),this.Co="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get Fo(){return!1}Mo(e,t,n,r,s){const i=Ao(),a=this.xo(e,t.toUriEncodedString());A("RestConnection","Sending RPC '".concat(e,"' ").concat(i,":"),a,n);const o={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(o,r,s),this.No(e,a,o,n).then(t=>(A("RestConnection","Received RPC '".concat(e,"' ").concat(i,": "),t),t),t=>{throw C("RestConnection","RPC '".concat(e,"' ").concat(i," failed with error: "),t,"url: ",a,"request:",n),t})}Lo(e,t,n,r,s,i){return this.Mo(e,t,n,r,s)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}xo(e,t){const n=To[e];return"".concat(this.Do,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const s=Ao();return new Promise((i,a)=>{const o=new d;o.setWithCredentials(!0),o.listenOnce(f.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case m.NO_ERROR:const t=o.getResponseJson();A(Io,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(t)),i(t);break;case m.TIMEOUT:A(Io,"RPC '".concat(e,"' ").concat(s," timed out")),a(new L(O.DEADLINE_EXCEEDED,"Request time out"));break;case m.HTTP_ERROR:const n=o.getStatus();if(A(Io,"RPC '".concat(e,"' ").concat(s," failed with status:"),n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(t)>=0?t:O.UNKNOWN}(t.status);a(new L(e,t.message))}else a(new L(O.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new L(O.UNAVAILABLE,"Connection failed."));break;default:j()}}finally{A(Io,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(r);A(Io,"RPC '".concat(e,"' ").concat(s," sending request:"),r),o.send(t,"POST",l,n,15)})}Bo(e,t,n){const r=Ao(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=v(),a=y(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Oo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=s.join("");A(Io,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=i.createWebChannel(c,o);let d=!1,f=!1;const m=new Co({Io:t=>{f?A(Io,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(A(Io,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),A(Io,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},To:()=>u.close()}),x=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return x(u,h.EventType.OPEN,()=>{f||(A(Io,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),m.yo())}),x(u,h.EventType.CLOSE,()=>{f||(f=!0,A(Io,"RPC '".concat(e,"' stream ").concat(r," transport closed")),m.So())}),x(u,h.EventType.ERROR,t=>{f||(f=!0,C(Io,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),m.So(new L(O.UNAVAILABLE,"The operation could not be completed")))}),x(u,h.EventType.MESSAGE,t=>{var n;if(!f){const s=t.data[0];P(!!s);const i=s,a=i.error||(null===(n=i[0])||void 0===n?void 0:n.error);if(a){A(Io,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=ss[e];if(void 0!==t)return os(t)}(t),s=a.message;void 0===n&&(n=O.INTERNAL,s="Unknown error status: "+t+" with message "+a.message),f=!0,m.So(new L(n,s)),u.close()}else A(Io,"RPC '".concat(e,"' stream ").concat(r," received:"),s),m.bo(s)}}),x(a,g.STAT_EVENT,t=>{t.stat===p.PROXY?A(Io,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===p.NOPROXY&&A(Io,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{m.wo()},0),m}}function Po(){return"undefined"!=typeof window?window:null}function Do(){return"undefined"!=typeof document?document:null}function Ro(e){return new As(e,!0)}class Oo{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&A("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Ko," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class Lo{constructor(e,t,n,r,s,i,a,o){this.ui=e,this.Ho=n,this.Jo=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Oo(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===O.RESOURCE_EXHAUSTED?(T(t.toString()),T("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===O.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)},t=>{e(()=>{const e=new L(O.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)})})}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(e=>{n(()=>this.I_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.e_?this.E_(e):this.onNext(e))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return A("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(A("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Mo extends Lo{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:j()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(P(void 0===t||"string"==typeof t),Et.fromBase64String(t||"")):(P(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Et.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?O.UNKNOWN:os(e.code);return new L(t,e.message||"")}(a);n=new xs(r,s,i,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ms(e,r.document.name),i=Ps(r.document.updateTime),a=r.document.createTime?Ps(r.document.createTime):Z.min(),o=new ln({mapValue:{fields:r.document.fields}}),l=un.newFoundDocument(s,i,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new ys(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Ms(e,r.document),i=r.readTime?Ps(r.readTime):Z.min(),a=un.newNoDocument(s,i),o=r.removedTargetIds||[];n=new ys([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Ms(e,r.document),i=r.removedTargetIds||[];n=new ys([],i,s,null)}else{if(!("filter"in t))return j();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new rs(r,s),a=e.targetId;n=new vs(a,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Z.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Z.min():t.readTime?Ps(t.readTime):Z.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=Vs(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Un(r)?{documents:Hs(e,r)}:{query:Gs(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Is(e,t.resumeToken);const r=Ts(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Z.min())>0){n.readTime=Cs(e,t.snapshotVersion.toTimestamp());const r=Ts(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return j()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=Vs(this.serializer),t.removeTarget=e,this.a_(t)}}class Fo extends Lo{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return P(!!e.streamToken),this.lastStreamToken=e.streamToken,P(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){P(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(P(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?Ps(e.updateTime):Ps(t);return n.isEqual(Z.min())&&(n=Ps(t)),new Mr(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Ps(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=Vs(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Ks(this.serializer,e))};this.a_(t)}}class Uo extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new L(O.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[i,a]=s;return this.connection.Mo(e,Rs(t,n),r,i,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new L(O.UNKNOWN,e.toString())})}Lo(e,t,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[a,o]=i;return this.connection.Lo(e,Rs(t,n),r,a,o,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new L(O.UNKNOWN,e.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Vo{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.D_?(T(t),this.D_=!1):A("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Bo{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(e=>{n.enqueueAndForget(async()=>{Yo(this)&&(A("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=R(e);t.L_.add(4),await zo(t),t.q_.set("Unknown"),t.L_.delete(4),await qo(t)}(this))})}),this.q_=new Vo(n,r)}}async function qo(e){if(Yo(e))for(const t of e.B_)await t(!0)}async function zo(e){for(const t of e.B_)await t(!1)}function Ko(e,t){const n=R(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),Jo(n)?Qo(n):pl(n).r_()&&Ho(n,t))}function Wo(e,t){const n=R(e),r=pl(n);n.N_.delete(t),r.r_()&&Go(n,t),0===n.N_.size&&(r.r_()?r.o_():Yo(n)&&n.q_.set("Unknown"))}function Ho(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Z.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}pl(e).A_(t)}function Go(e,t){e.Q_.xe(t),pl(e).R_(t)}function Qo(e){e.Q_=new ws({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),pl(e).start(),e.q_.v_()}function Jo(e){return Yo(e)&&!pl(e).n_()&&e.N_.size>0}function Yo(e){return 0===R(e).L_.size}function Xo(e){e.Q_=void 0}async function $o(e){e.q_.set("Online")}async function Zo(e){e.N_.forEach((t,n)=>{Ho(e,t)})}async function el(e,t){Xo(e),Jo(e)?(e.q_.M_(t),Qo(e)):e.q_.set("Unknown")}async function tl(e,t,n){if(e.q_.set("Online"),t instanceof xs&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){A("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await nl(e,n)}else if(t instanceof ys?e.Q_.Ke(t):t instanceof vs?e.Q_.He(t):e.Q_.We(t),!n.isEqual(Z.min()))try{const t=await ro(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.N_.get(r);s&&e.N_.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(Et.EMPTY_BYTE_STRING,r.snapshotVersion)),Go(e,t);const s=new ii(r.target,t,n,r.sequenceNumber);Ho(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){A("RemoteStore","Failed to raise snapshot:",t),await nl(e,t)}}async function nl(e,t,n){if(!Se(t))throw t;e.L_.add(1),await zo(e),e.q_.set("Offline"),n||(n=()=>ro(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{A("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await qo(e)})}function rl(e,t){return t().catch(n=>nl(e,n,t))}async function sl(e){const t=R(e),n=gl(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;il(t);)try{const e=await io(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,al(t,e)}catch(e){await nl(t,e)}ol(t)&&ll(t)}function il(e){return Yo(e)&&e.O_.length<10}function al(e,t){e.O_.push(t);const n=gl(e);n.r_()&&n.V_&&n.m_(t.mutations)}function ol(e){return Yo(e)&&!gl(e).n_()&&e.O_.length>0}function ll(e){gl(e).start()}async function cl(e){gl(e).p_()}async function ul(e){const t=gl(e);for(const n of e.O_)t.m_(n.mutations)}async function dl(e,t,n){const r=e.O_.shift(),s=es.from(r,t,n);await rl(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await sl(e)}async function hl(e,t){t&&gl(e).V_&&await async function(e,t){if(function(e){return as(e)&&e!==O.ABORTED}(t.code)){const n=e.O_.shift();gl(e).s_(),await rl(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await sl(e)}}(e,t),ol(e)&&ll(e)}async function fl(e,t){const n=R(e);n.asyncQueue.verifyOperationInProgress(),A("RemoteStore","RemoteStore received new credentials");const r=Yo(n);n.L_.add(3),await zo(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await qo(n)}async function ml(e,t){const n=R(e);t?(n.L_.delete(2),await qo(n)):t||(n.L_.add(2),await zo(n),n.q_.set("Unknown"))}function pl(e){return e.K_||(e.K_=function(e,t,n){const r=R(e);return r.w_(),new Mo(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:$o.bind(null,e),Ro:Zo.bind(null,e),mo:el.bind(null,e),d_:tl.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),Jo(e)?Qo(e):e.q_.set("Unknown")):(await e.K_.stop(),Xo(e))})),e.K_}function gl(e){return e.U_||(e.U_=function(e,t,n){const r=R(e);return r.w_(),new Fo(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:cl.bind(null,e),mo:hl.bind(null,e),f_:ul.bind(null,e),g_:dl.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await sl(e)):(await e.U_.stop(),e.O_.length>0&&(A("RemoteStore","Stopping write stream with ".concat(e.O_.length," pending writes")),e.O_=[]))})),e.U_}class yl{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new M,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,a=new yl(e,t,i,r,s);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new L(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vl(e,t){if(T("AsyncQueue","".concat(t,": ").concat(e)),Se(e))return new L(O.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class xl{constructor(e){this.comparator=e?(t,n)=>e(t,n)||se.comparator(t.key,n.key):(e,t)=>se.comparator(e.key,t.key),this.keyedMap=dr(),this.sortedSet=new yt(this.comparator)}static emptySet(e){return new xl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof xl))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new xl;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class bl{constructor(){this.W_=new yt(se.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):j():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}}class wl{constructor(e,t,n,r,s,i,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new wl(e,t,xl.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&er(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class kl{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class _l{constructor(){this.queries=Nl(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=R(e),r=n.queries;n.queries=Nl(),r.forEach((e,n)=>{for(const r of n.j_)r.onError(t)})}(this,new L(O.ABORTED,"Firestore shutting down"))}}function Nl(){return new or(e=>tr(e),er)}async function Sl(e,t){const n=R(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.H_()&&t.J_()&&(r=2):(i=new kl,r=t.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=vl(e,"Initialization of query '".concat(nr(t.query),"' failed"));return void t.onError(n)}n.queries.set(s,i),i.j_.push(t),t.Z_(n.onlineState),i.z_&&t.X_(i.z_)&&Cl(n)}async function El(e,t){const n=R(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const e=i.j_.indexOf(t);e>=0&&(i.j_.splice(e,1),0===i.j_.length?s=t.J_()?0:1:!i.H_()&&t.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Al(e,t){const n=R(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(s)&&(r=!0);t.z_=s}}r&&Cl(n)}function Tl(e,t,n){const r=R(e),s=r.queries.get(t);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(t)}function Cl(e){e.Y_.forEach(e=>{e.next()})}var Il,jl;(jl=Il||(Il={})).ea="default",jl.Cache="cache";class Pl{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new wl(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=wl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Il.Cache}}class Dl{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}class Rl{constructor(e){this.serializer=e}Es(e){return Ms(this.serializer,e)}ds(e){return e.metadata.exists?zs(this.serializer,e.document,!1):un.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Ps(e)}}class Ol{constructor(e,t,n){this.ca=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Ll(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const n=te.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,n=new Rl(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Es(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||vr()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const s=R(e);let i=vr(),a=cr();for(const c of n){const e=t.Es(c.metadata.name);c.document&&(i=i.add(e));const n=t.ds(c);n.setReadTime(t.As(c.metadata.readTime)),a=a.insert(e,n)}const o=s.cs.newChangeBuffer({trackRemovals:!0}),l=await ao(s,function(e){return Jn(Wn(te.fromString("__bundle__/docs/".concat(e))))}(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",e=>so(e,o,a).next(t=>(o.apply(e),t)).next(t=>s.Ur.removeMatchingKeysForTargetId(e,l.targetId).next(()=>s.Ur.addMatchingKeys(e,i,l.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(e,t.Ps,t.Is)).next(()=>t.Ps)))}(this.localStore,new Rl(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(const n of this.queries)await fo(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function Ll(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class Ml{constructor(e){this.key=e}}class Fl{constructor(e){this.key=e}}class Ul{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=vr(),this.mutatedKeys=vr(),this.Aa=ir(e),this.Ra=new xl(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new bl,r=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=rr(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.ga(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Aa(u,o)>0||l&&this.Aa(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(i=i.add(u),s=h?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{Ra:i,fa:n,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return j()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc)),this.pa(n),r=null!=r&&r;const a=t&&!r?this.ya():[],o=0===this.da.size&&this.current&&!r?1:0,l=o!==this.Ea;return this.Ea=o,0!==i.length||l?{snapshot:new wl(this.query,e.Ra,s,i,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new bl,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=vr(),this.Ra.forEach(e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))});const t=[];return e.forEach(e=>{this.da.has(e)||t.push(new Fl(e))}),this.da.forEach(n=>{e.has(n)||t.push(new Ml(n))}),t}ba(e){this.Ta=e.Ts,this.da=vr();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return wl.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Vl{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Bl{constructor(e){this.key=e,this.va=!1}}class ql{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new or(e=>tr(e),er),this.Ma=new Map,this.xa=new Set,this.Oa=new yt(se.comparator),this.Na=new Map,this.La=new Ra,this.Ba={},this.ka=new Map,this.qa=la.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function zl(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=vc(e);let s;const i=r.Fa.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await Wl(r,t,n,!0),s}async function Kl(e,t){const n=vc(e);await Wl(n,t,!0,!1)}async function Wl(e,t,n,r){const s=await ao(e.localStore,Jn(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let o;return r&&(o=await Hl(e,t,i,"current"===a,s.resumeToken)),e.isPrimaryClient&&n&&Ko(e.remoteStore,s),o}async function Hl(e,t,n,r,s){e.Ka=(t,n,r)=>async function(e,t,n,r){let s=t.view.ma(n);s.ns&&(s=await lo(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ma(n,s)}));const i=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,i,a);return sc(e,t.targetId,o.wa),o.snapshot}(e,t,n,r);const i=await lo(e.localStore,t,!0),a=new Ul(t,i.Ts),o=a.ma(i.documents),l=gs.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=a.applyChanges(o,e.isPrimaryClient,l);sc(e,n,c.wa);const u=new Vl(t,n,a);return e.Fa.set(t,u),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot}async function Gl(e,t,n){const r=R(e),s=r.Fa.get(t),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(e=>!er(e,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await oo(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Wo(r.remoteStore,s.targetId),nc(r,s.targetId)}).catch(ve)):(nc(r,s.targetId),await oo(r.localStore,s.targetId,!0))}async function Ql(e,t){const n=R(e),r=n.Fa.get(t),s=n.Ma.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Wo(n.remoteStore,r.targetId))}async function Jl(e,t){const n=R(e);try{const e=await function(e,t){const n=R(e),r=t.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];t.targetChanges.forEach((i,o)=>{const l=s.get(o);if(!l)return;a.push(n.Ur.removeMatchingKeys(e,i.removedDocuments,o).next(()=>n.Ur.addMatchingKeys(e,i.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(Et.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),s=s.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,i)&&a.push(n.Ur.updateTargetData(e,c))});let o=cr(),l=vr();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(so(e,i,t.documentUpdates).next(e=>{o=e.Ps,l=e.Is})),!r.isEqual(Z.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next(t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return xe.waitFor(a).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.os=s,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Na.get(t);r&&(P(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?P(r.va):e.removedDocuments.size>0&&(P(r.va),r.va=!1))}),await oc(n,e,t)}catch(e){await ve(e)}}function Yl(e,t,n){const r=R(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach((n,r)=>{const s=r.view.Z_(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=R(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.j_)s.Z_(t)&&(r=!0)}),r&&Cl(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Xl(e,t,n){const r=R(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Na.get(t),i=s&&s.key;if(i){let e=new yt(se.comparator);e=e.insert(i,un.newNoDocument(i,Z.min()));const n=vr().add(i),s=new ps(Z.min(),new Map,new yt(J),e,n);await Jl(r,s),r.Oa=r.Oa.remove(i),r.Na.delete(t),ac(r)}else await oo(r.localStore,t,!1).then(()=>nc(r,t,n)).catch(ve)}async function $l(e,t){const n=R(e),r=t.batch.batchId;try{const e=await function(e,t){const n=R(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let a=xe.resolve();return i.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);P(null!==i),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=vr();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);tc(n,r,null),ec(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await oc(n,e)}catch(e){await ve(e)}}async function Zl(e,t,n){const r=R(e);try{const e=await function(e,t){const n=R(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(P(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);tc(r,t,n),ec(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await oc(r,e)}catch(n){await ve(n)}}function ec(e,t){(e.ka.get(t)||[]).forEach(e=>{e.resolve()}),e.ka.delete(t)}function tc(e,t,n){const r=R(e);let s=r.Ba[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Ba[r.currentUser.toKey()]=s}}function nc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(t=>{e.La.containsKey(t)||rc(e,t)})}function rc(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(Wo(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),ac(e))}function sc(e,t,n){for(const r of n)r instanceof Ml?(e.La.addReference(r.key,t),ic(e,r)):r instanceof Fl?(A("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||rc(e,r.key)):j()}function ic(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(A("SyncEngine","New document in limbo: "+n),e.xa.add(r),ac(e))}function ac(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new se(te.fromString(t)),r=e.qa.next();e.Na.set(r,new Bl(n)),e.Oa=e.Oa.insert(n,r),Ko(e.remoteStore,new ii(Jn(Wn(n.path)),r,"TargetPurposeLimboResolution",Pe.oe))}}async function oc(e,t,n){const r=R(e),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((e,o)=>{a.push(r.Ka(o,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const s=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,s?"current":"not-current")}if(e){s.push(e);const t=Xa.Wi(o.targetId,e);i.push(t)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(e,t){const n=R(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>xe.forEach(t,t=>xe.forEach(t.$i,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>xe.forEach(t.Ui,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Se(e))throw e;A("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,s)}}}(r.localStore,i))}async function lc(e,t){const n=R(e);if(!n.currentUser.isEqual(t)){A("SyncEngine","User change. New user:",t.toKey());const e=await no(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach(e=>{e.forEach(e=>{e.reject(new L(O.CANCELLED,t))})}),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await oc(n,e.hs)}}function cc(e,t){const n=R(e),r=n.Na.get(t);if(r&&r.va)return vr().add(r.key);{let e=vr();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}async function uc(e,t){const n=R(e),r=await lo(n.localStore,t.query,!0),s=t.view.ba(r);return n.isPrimaryClient&&sc(n,t.targetId,s.wa),s}async function dc(e,t){const n=R(e);return uo(n.localStore,t).then(e=>oc(n,e))}async function hc(e,t,n,r){const s=R(e),i=await function(e,t){const n=R(e),r=R(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",e=>r.Mn(e,t).next(t=>t?n.localDocuments.getDocuments(e,t):xe.resolve(null)))}(s.localStore,t);null!==i?("pending"===n?await sl(s.remoteStore):"acknowledged"===n||"rejected"===n?(tc(s,t,r||null),ec(s,t),function(e,t){R(R(e).mutationQueue).On(t)}(s.localStore,t)):j(),await oc(s,i)):A("SyncEngine","Cannot apply mutation batch with id: "+t)}async function fc(e,t,n){const r=R(e),s=[],i=[];for(const a of t){let e;const t=r.Ma.get(a);if(t&&0!==t.length){e=await ao(r.localStore,Jn(t[0]));for(const e of t){const t=r.Fa.get(e),n=await uc(r,t);n.snapshot&&i.push(n.snapshot)}}else{const t=await co(r.localStore,a);e=await ao(r.localStore,t),await Hl(r,mc(t),a,!1,e.resumeToken)}s.push(e)}return r.Ca.d_(i),s}function mc(e){return Kn(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function pc(e){return function(e){return R(R(e).persistence).Qi()}(R(e).localStore)}async function gc(e,t,n,r){const s=R(e);if(s.Qa)return void A("SyncEngine","Ignoring unexpected query state notification.");const i=s.Ma.get(t);if(i&&i.length>0)switch(n){case"current":case"not-current":{const e=await uo(s.localStore,sr(i[0])),r=ps.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,Et.EMPTY_BYTE_STRING);await oc(s,e,r);break}case"rejected":await oo(s.localStore,t,!0),nc(s,t,r);break;default:j()}}async function yc(e,t,n){const r=vc(e);if(r.Qa){for(const e of t){if(r.Ma.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){A("SyncEngine","Adding an already active target "+e);continue}const t=await co(r.localStore,e),n=await ao(r.localStore,t);await Hl(r,mc(t),n.targetId,!1,n.resumeToken),Ko(r.remoteStore,n)}for(const e of n)r.Ma.has(e)&&await oo(r.localStore,e,!1).then(()=>{Wo(r.remoteStore,e),nc(r,e)}).catch(ve)}}function vc(e){const t=R(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Jl.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=cc.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Xl.bind(null,t),t.Ca.d_=Al.bind(null,t.eventManager),t.Ca.$a=Tl.bind(null,t.eventManager),t}function xc(e){const t=R(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=$l.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Zl.bind(null,t),t}class bc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ro(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return to(this.persistence,new Za,e.initialUser,this.serializer)}Ga(e){return new Va(qa.Zr,this.serializer)}Wa(e){return new _o}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bc.provider={build:()=>new bc};class wc extends bc{constructor(e){super(),this.cacheSizeBytes=e}ja(e,t){P(this.persistence.referenceDelegate instanceof za);const n=this.persistence.referenceDelegate.garbageCollector;return new pa(n,e.asyncQueue,t)}Ga(e){const t=void 0!==this.cacheSizeBytes?ea.withCacheSize(this.cacheSizeBytes):ea.DEFAULT;return new Va(e=>za.Zr(e,t),this.serializer)}}class kc extends bc{constructor(e,t,n){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await xc(this.Ja.syncEngine),await sl(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return to(this.persistence,new Za,e.initialUser,this.serializer)}ja(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new pa(n,e.asyncQueue,t)}Ha(e,t){const n=new je(t,this.persistence);return new Ie(e.asyncQueue,n)}Ga(e){const t=Ya(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ea.withCacheSize(this.cacheSizeBytes):ea.DEFAULT;return new Ga(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Po(),Do(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new _o}}class _c extends kc{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Ja.syncEngine;this.sharedClientState instanceof ko&&(this.sharedClientState.syncEngine={no:hc.bind(null,t),ro:gc.bind(null,t),io:yc.bind(null,t),Qi:pc.bind(null,t),eo:dc.bind(null,t)},await this.sharedClientState.start()),await this.persistence.yi(async e=>{await async function(e,t){const n=R(e);if(vc(n),xc(n),!0===t&&!0!==n.Qa){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await fc(n,e.toArray());n.Qa=!0,await ml(n.remoteStore,!0);for(const r of t)Ko(n.remoteStore,r)}else if(!1===t&&!1!==n.Qa){const e=[];let t=Promise.resolve();n.Ma.forEach((r,s)=>{n.sharedClientState.isLocalQueryTarget(s)?e.push(s):t=t.then(()=>(nc(n,s),oo(n.localStore,s,!0))),Wo(n.remoteStore,s)}),await t,await fc(n,e),function(e){const t=R(e);t.Na.forEach((e,n)=>{Wo(t.remoteStore,n)}),t.La.pr(),t.Na=new Map,t.Oa=new yt(se.comparator)}(n),n.Qa=!1,await ml(n.remoteStore,!1)}}(this.Ja.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())})}Wa(e){const t=Po();if(!ko.D(t))throw new L(O.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Ya(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ko(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Nc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Yl(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=lc.bind(null,this.syncEngine),await ml(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new _l}createDatastore(e){const t=Ro(e.databaseInfo.databaseId),n=function(e){return new jo(e)}(e.databaseInfo);return function(e,t,n,r){return new Uo(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new Bo(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,e=>Yl(this.syncEngine,e,0),So.D()?new So:new No)}createSyncEngine(e,t){return function(e,t,n,r,s,i,a){const o=new ql(e,t,n,r,s,i);return a&&(o.Qa=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=R(e);A("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await zo(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}function Sc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}Nc.provider={build:()=>new Nc};class Ec{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):T("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class Ac{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new M,this.buffer=new Uint8Array,this.eu=new TextDecoder("utf-8"),this.tu().then(e=>{e&&e.ua()?this.metadata.resolve(e.aa.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.aa))))},e=>this.metadata.reject(e))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(null===e)return null;const t=this.eu.decode(e),n=Number(t);isNaN(n)&&this.ru("length string (".concat(t,") is not valid number"));const r=await this.iu(n);return new Dl(JSON.parse(r),e.length+n)}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async nu(){for(;this.su()<0&&!await this.ou(););if(0===this.buffer.length)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}ru(e){throw this.Xa.cancel(),new Error("Invalid bundle format: ".concat(e))}async ou(){const e=await this.Xa.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class Tc{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new L(O.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=R(e),r={documents:t.map(e=>Ls(n.serializer,e))},s=await n.Lo("BatchGetDocuments",n.serializer.databaseId,te.emptyPath(),r,t.length),i=new Map;s.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){P(!!t.found),t.found.name,t.found.updateTime;const n=Ms(e,t.found.name),r=Ps(t.found.updateTime),s=t.found.createTime?Ps(t.found.createTime):Z.min(),i=new ln({mapValue:{fields:t.found.fields}});return un.newFoundDocument(n,r,s,i)}(e,t):"missing"in t?function(e,t){P(!!t.missing),P(!!t.readTime);const n=Ms(e,t.missing),r=Ps(t.readTime);return un.newNoDocument(n,r)}(e,t):j()}(n.serializer,e);i.set(t.key.toString(),t)});const a=[];return t.forEach(e=>{const t=i.get(e.toString());P(!!t),a.push(t)}),a}(this.datastore,e);return t.forEach(e=>this.recordVersion(e)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Xr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,t)=>{const n=se.fromPath(t);this.mutations.push(new $r(n,this.precondition(n)))}),await async function(e,t){const n=R(e),r={writes:t.map(e=>Ks(n.serializer,e))};await n.Mo("Commit",n.serializer.databaseId,te.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw j();t=Z.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new L(O.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Z.min())?Fr.exists(!1):Fr.updateTime(t):Fr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Z.min()))throw new L(O.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Fr.updateTime(t)}return Fr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Cc{constructor(e,t,n,r,s){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=s,this._u=n.maxAttempts,this.t_=new Oo(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new Tc(this.datastore),t=this.cu(e);t&&t.then(t=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(t)}).catch(e=>{this.lu(e)}))}).catch(e=>{this.lu(e)})})}cu(e){try{const t=this.updateFunction(e);return!De(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!as(t)}return!1}}class Ic{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=k.UNAUTHENTICATED,this.clientId=Q.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async e=>{A("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(A("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new M;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=vl(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function jc(e,t){e.asyncQueue.verifyOperationInProgress(),A("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await no(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Pc(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Dc(e);A("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>fl(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>fl(t.remoteStore,n)),e._onlineComponents=t}async function Dc(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){A("FirestoreClient","Using user provided OfflineComponentProvider");try{await jc(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===O.FAILED_PRECONDITION||e.code===O.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;C("Error using user provided cache. Falling back to memory cache: "+n),await jc(e,new bc)}}else A("FirestoreClient","Using default OfflineComponentProvider"),await jc(e,new bc);return e._offlineComponents}async function Rc(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(A("FirestoreClient","Using user provided OnlineComponentProvider"),await Pc(e,e._uninitializedComponentsProvider._online)):(A("FirestoreClient","Using default OnlineComponentProvider"),await Pc(e,new Nc))),e._onlineComponents}function Oc(e){return Dc(e).then(e=>e.persistence)}function Lc(e){return Dc(e).then(e=>e.localStore)}function Mc(e){return Rc(e).then(e=>e.remoteStore)}function Fc(e){return Rc(e).then(e=>e.syncEngine)}function Uc(e){return Rc(e).then(e=>e.datastore)}async function Vc(e){const t=await Rc(e),n=t.eventManager;return n.onListen=zl.bind(null,t.syncEngine),n.onUnlisten=Gl.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Kl.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Ql.bind(null,t.syncEngine),n}function Bc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new M;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new Ec({next:o=>{i.Za(),t.enqueueAndForget(()=>El(e,a));const l=o.docs.has(n);!l&&o.fromCache?s.reject(new L(O.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?s.reject(new L(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(o)},error:e=>s.reject(e)}),a=new Pl(Wn(n.path),i,{includeMetadataChanges:!0,_a:!0});return Sl(e,a)}(await Vc(e),e.asyncQueue,t,n,r)),r.promise}function qc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new M;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new Ec({next:n=>{i.Za(),t.enqueueAndForget(()=>El(e,a)),n.fromCache&&"server"===r.source?s.reject(new L(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),a=new Pl(n,i,{includeMetadataChanges:!0,_a:!0});return Sl(e,a)}(await Vc(e),e.asyncQueue,t,n,r)),r.promise}function zc(e,t,n,r){const s=function(e,t){let n;return n="string"==typeof e?cs().encode(e):e,function(e,t){return new Ac(e,t)}(function(e,t){if(e instanceof Uint8Array)return Sc(e,t);if(e instanceof ArrayBuffer)return Sc(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Ro(t));e.asyncQueue.enqueueAndForget(async()=>{!function(e,t,n){const r=R(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=R(e),r=Ps(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",e=>n.Gr.getBundleMetadata(e,t.id)).then(e=>!!e&&e.createTime.compareTo(r)>=0)}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(Ll(r));const s=new Ol(r,e.localStore,t.serializer);let i=await t.Ua();for(;i;){const e=await s.la(i);e&&n._updateProgress(e),i=await t.Ua()}const a=await s.complete();return await oc(e,a.Ia,void 0),await function(e,t){const n=R(e);return n.persistence.runTransaction("Save bundle","readwrite",e=>n.Gr.saveBundleMetadata(e,t))}(e.localStore,r),n._completeWith(a.progress),Promise.resolve(a.Pa)}catch(e){return C("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then(e=>{r.sharedClientState.notifyBundleLoaded(e)})}(await Fc(e),s,r)})}function Kc(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Wc=new Map;function Hc(e,t,n){if(!n)throw new L(O.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Gc(e,t,n,r){if(!0===t&&!0===r)throw new L(O.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Qc(e){if(!se.isDocumentKey(e))throw new L(O.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Jc(e){if(se.isDocumentKey(e))throw new L(O.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Yc(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":j()}function Xc(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new L(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Yc(e);throw new L(O.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function $c(e,t){if(t<=0)throw new L(O.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class Zc{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new L(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new L(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Gc("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Kc(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new L(O.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new L(O.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new L(O.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class eu{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zc({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new L(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zc(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new U;switch(e.type){case"firstParty":return new z(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new L(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Wc.get(e);t&&(A("ComponentProvider","Removing Datastore"),Wc.delete(e),t.terminate())}(this),Promise.resolve()}}function tu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var s;const i=(e=Xc(e,eu))._getSettings(),a="".concat(t,":").concat(n);if("firestore.googleapis.com"!==i.host&&i.host!==a&&C("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=k.MOCK_USER;else{t=(0,l.Fy)(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new L(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new k(i)}e._authCredentials=new V(new F(t,n))}}class nu{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new nu(this.firestore,e,this._query)}}class ru{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new su(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ru(this.firestore,e,this._key)}}class su extends nu{constructor(e,t,n){super(e,t,Wn(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ru(this.firestore,null,new se(e))}withConverter(e){return new su(this.firestore,e,this._path)}}function iu(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=(0,l.Ku)(e),Hc("collection","path",t),e instanceof eu){const n=te.fromString(t,...r);return Jc(n),new su(e,null,n)}{if(!(e instanceof ru||e instanceof su))throw new L(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(te.fromString(t,...r));return Jc(n),new su(e.firestore,null,n)}}function au(e,t){if(e=Xc(e,eu),Hc("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new L(O.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new nu(e,null,function(e){return new zn(te.emptyPath(),e)}(t))}function ou(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=(0,l.Ku)(e),1===arguments.length&&(t=Q.newId()),Hc("doc","path",t),e instanceof eu){const n=te.fromString(t,...r);return Qc(n),new ru(e,null,new se(n))}{if(!(e instanceof ru||e instanceof su))throw new L(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(te.fromString(t,...r));return Qc(n),new ru(e.firestore,e instanceof su?e.converter:null,new se(n))}}function lu(e,t){return e=(0,l.Ku)(e),t=(0,l.Ku)(t),(e instanceof ru||e instanceof su)&&(t instanceof ru||t instanceof su)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function cu(e,t){return e=(0,l.Ku)(e),t=(0,l.Ku)(t),e instanceof nu&&t instanceof nu&&e.firestore===t.firestore&&er(e._query,t._query)&&e.converter===t.converter}class uu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Oo(this,"async_queue_retry"),this.Vu=()=>{const e=Do();e&&A("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=Do();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Do();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new M;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Se(e))throw e;A("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw T("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.du=!1,e))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=yl.createAndSchedule(this,e,t,n,e=>this.yu(e));return this.Tu.push(r),r}fu(){this.Eu&&j()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function du(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class hu{constructor(){this._progressObserver={},this._taskCompletionResolver=new M,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const fu=-1;class mu extends eu{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new uu,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new uu(e),this._firestoreClient=void 0,await e}}}function pu(e,t,n){n||(n="(default)");const r=(0,i.j6)(e,"firestore");if(r.isInitialized(n)){const e=r.getImmediate({identifier:n}),s=r.getOptions(n);if((0,l.bD)(s,t))return e;throw new L(O.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==t.cacheSizeBytes&&void 0!==t.localCache)throw new L(O.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(void 0!==t.cacheSizeBytes&&-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new L(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function gu(e,t){const n="object"==typeof e?e:(0,i.Sx)(),r="string"==typeof e?e:t||"(default)",s=(0,i.j6)(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const e=(0,l.yU)("firestore");e&&tu(s,...e)}return s}function yu(e){if(e._terminated)throw new L(O.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||vu(e),e._firestoreClient}function vu(e){var t,n,r;const s=e._freezeSettings(),i=function(e,t,n,r){return new Rt(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Kc(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new Ic(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}function xu(e,t){C("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings();return wu(e,Nc.provider,{build:e=>new kc(e,n.cacheSizeBytes,null==t?void 0:t.forceOwnership)}),Promise.resolve()}async function bu(e){C("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=e._freezeSettings();wu(e,Nc.provider,{build:e=>new _c(e,t.cacheSizeBytes)})}function wu(e,t,n){if((e=Xc(e,mu))._firestoreClient||e._terminated)throw new L(O.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(e._componentsProvider||e._getSettings().localCache)throw new L(O.FAILED_PRECONDITION,"SDK cache is already specified.");e._componentsProvider={_online:t,_offline:n},vu(e)}function ku(e){if(e._initialized&&!e._terminated)throw new L(O.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new M;return e._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(e){if(!we.D())return Promise.resolve();const t=e+"main";await we.delete(t)}(Ya(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}}),t.promise}function _u(e){return function(e){const t=new M;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t){const n=R(e);Yo(n.remoteStore)||A("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=R(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e))}(n.localStore);if(-1===e)return void t.resolve();const r=n.ka.get(e)||[];r.push(t),n.ka.set(e,r)}catch(e){const n=vl(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await Fc(e),t)),t.promise}(yu(e=Xc(e,mu)))}function Nu(e){return function(e){return e.asyncQueue.enqueue(async()=>{const t=await Oc(e),n=await Mc(e);return t.setNetworkEnabled(!0),function(e){const t=R(e);return t.L_.delete(0),qo(t)}(n)})}(yu(e=Xc(e,mu)))}function Su(e){return function(e){return e.asyncQueue.enqueue(async()=>{const t=await Oc(e),n=await Mc(e);return t.setNetworkEnabled(!1),async function(e){const t=R(e);t.L_.add(0),await zo(t),t.q_.set("Offline")}(n)})}(yu(e=Xc(e,mu)))}function Eu(e){return(0,i.Us)(e.app,"firestore",e._databaseId.database),e._delete()}function Au(e,t){const n=yu(e=Xc(e,mu)),r=new hu;return zc(n,e._databaseId,t,r),r}function Tu(e,t){return function(e,t){return e.asyncQueue.enqueue(async()=>function(e,t){const n=R(e);return n.persistence.runTransaction("Get named query","readonly",e=>n.Gr.getNamedQuery(e,t))}(await Lc(e),t))}(yu(e=Xc(e,mu)),t).then(t=>t?new nu(e,null,t.query):null)}class Cu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"count",t=arguments.length>1?arguments[1]:void 0;this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class Iu{constructor(e,t,n){this._userDataWriter=t,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}class ju{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ju(Et.fromBase64String(e))}catch(e){throw new L(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new ju(Et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Pu{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new L(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new re(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function Du(){return new Pu("__name__")}class Ru{constructor(e){this._methodName=e}}class Ou{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new L(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new L(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return J(this._lat,e._lat)||J(this._long,e._long)}}class Lu{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Mu=/^__.*__$/;class Fu{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Gr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Hr(e,this.data,t,this.fieldTransforms)}}class Uu{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Gr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Vu(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw j()}}class Bu{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Bu(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return od(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(Vu(this.Cu)&&Mu.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class qu{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Ro(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Bu({Cu:e,methodName:t,qu:n,path:re.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zu(e){const t=e._freezeSettings(),n=Ro(e._databaseId);return new qu(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Ku(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Qu(i.merge||i.mergeFields?2:0,t,n,s);rd("Data must be an object, but it was:",a,r);const o=td(r,a);let l,c;if(i.merge)l=new _t(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=sd(t,r,n);if(!a.contains(s))throw new L(O.INVALID_ARGUMENT,"Field '".concat(s,"' is specified in your field mask but missing from your input data."));ld(e,s)||e.push(s)}l=new _t(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new Fu(new ln(o),l,c)}class Wu extends Ru{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Bu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wu}}function Hu(e,t,n){return new Bu({Cu:3,qu:t.settings.qu,methodName:e._methodName,xu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Gu extends Ru{_toFieldTransform(e){return new Lr(e.path,new Tr)}isEqual(e){return e instanceof Gu}}class Qu extends Ru{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=Hu(this,e,!0),n=this.Ku.map(e=>ed(e,t)),r=new Cr(n);return new Lr(e.path,r)}isEqual(e){return e instanceof Qu&&(0,l.bD)(this.Ku,e.Ku)}}class Ju extends Ru{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=Hu(this,e,!0),n=this.Ku.map(e=>ed(e,t)),r=new jr(n);return new Lr(e.path,r)}isEqual(e){return e instanceof Ju&&(0,l.bD)(this.Ku,e.Ku)}}class Yu extends Ru{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new Dr(e.serializer,_r(e.serializer,this.$u));return new Lr(e.path,t)}isEqual(e){return e instanceof Yu&&this.$u===e.$u}}function Xu(e,t,n,r){const s=e.Qu(1,t,n);rd("Data must be an object, but it was:",s,r);const i=[],a=ln.empty();mt(r,(e,r)=>{const o=ad(t,e,n);r=(0,l.Ku)(r);const c=s.Nu(o);if(r instanceof Wu)i.push(o);else{const e=ed(r,c);null!=e&&(i.push(o),a.set(o,e))}});const o=new _t(i);return new Uu(a,o,s.fieldTransforms)}function $u(e,t,n,r,s,i){const a=e.Qu(1,t,n),o=[sd(t,r,n)],c=[s];if(i.length%2!=0)throw new L(O.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let l=0;l<i.length;l+=2)o.push(sd(t,i[l])),c.push(i[l+1]);const u=[],d=ln.empty();for(let f=o.length-1;f>=0;--f)if(!ld(u,o[f])){const e=o[f];let t=c[f];t=(0,l.Ku)(t);const n=a.Nu(e);if(t instanceof Wu)u.push(e);else{const r=ed(t,n);null!=r&&(u.push(e),d.set(e,r))}}const h=new _t(u);return new Uu(d,h,a.fieldTransforms)}function Zu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return ed(n,e.Qu(r?4:3,t))}function ed(e,t){if(nd(e=(0,l.Ku)(e)))return rd("Unsupported field value:",t,e),td(e,t);if(e instanceof Ru)return function(e,t){if(!Vu(t.Cu))throw t.Bu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Bu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=ed(s,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,l.Ku)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return _r(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=$.fromDate(e);return{timestampValue:Cs(t.serializer,n)}}if(e instanceof $){const n=new $(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Cs(t.serializer,n)}}if(e instanceof Ou)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof ju)return{bytesValue:Is(t.serializer,e._byteString)};if(e instanceof ru){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Ds(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Lu)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return wr(t.serializer,e)})}}}}}}(e,t);throw t.Bu("Unsupported field value: ".concat(Yc(e)))}(e,t)}function td(e,t){const n={};return gt(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):mt(e,(e,r)=>{const s=ed(r,t.Mu(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function nd(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof $||e instanceof Ou||e instanceof ju||e instanceof ru||e instanceof Ru||e instanceof Lu)}function rd(e,t,n){if(!nd(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Yc(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function sd(e,t,n){if((t=(0,l.Ku)(t))instanceof Pu)return t._internalPath;if("string"==typeof t)return ad(e,t);throw od("Field path arguments must be of type string or ",e,!1,void 0,n)}const id=new RegExp("[~\\*/\\[\\]]");function ad(e,t,n){if(t.search(id)>=0)throw od("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Pu(...t.split("."))._internalPath}catch(r){throw od("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function od(e,t,n,r,s){const i=r&&!r.isEmpty(),a=void 0!==s;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(s)),l+=")"),new L(O.INVALID_ARGUMENT,o+e+l)}function ld(e,t){return e.some(e=>e.isEqual(t))}class cd{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ru(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ud(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(dd("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ud extends cd{data(){return super.data()}}function dd(e,t){return"string"==typeof t?ad(e,t):t instanceof Pu?t._internalPath:t._delegate._internalPath}function hd(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new L(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fd{}class md extends fd{}function pd(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];t instanceof fd&&n.push(t),n=n.concat(s),function(e){const t=e.filter(e=>e instanceof vd).length,n=e.filter(e=>e instanceof gd).length;if(t>1||t>0&&n>0)throw new L(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class gd extends md{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new gd(e,t,n)}_apply(e){const t=this._parse(e);return Od(e._query,t),new nu(e.firestore,e.converter,$n(e._query,t))}_parse(e){const t=zu(e.firestore),n=function(e,t,n,r,s,i,a){let o;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new L(O.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(i,"' queries on documentId()."));if("in"===i||"not-in"===i){Rd(a,i);const t=[];for(const n of a)t.push(Dd(r,e,n));o={arrayValue:{values:t}}}else o=Dd(r,e,a)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||Rd(a,i),o=Zu(n,t,a,"in"===i||"not-in"===i);return yn.create(s,i,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function yd(e,t,n){const r=t,s=dd("where",e);return gd._create(s,r,n)}class vd extends fd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new vd(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:vn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)Od(n,s),n=$n(n,s)}(e._query,t),new nu(e.firestore,e.converter,$n(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function xd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach(e=>Ld("or",e)),vd._create("or",t)}function bd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach(e=>Ld("and",e)),vd._create("and",t)}class wd extends md{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new wd(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new L(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new L(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new mn(t,n)}(e._query,this._field,this._direction);return new nu(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new zn(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function kd(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=dd("orderBy",e);return wd._create(n,t)}class _d extends md{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new _d(e,t,n)}_apply(e){return new nu(e.firestore,e.converter,Zn(e._query,this._limit,this._limitType))}}function Nd(e){return $c("limit",e),_d._create("limit",e,"F")}function Sd(e){return $c("limitToLast",e),_d._create("limitToLast",e,"L")}class Ed extends md{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Ed(e,t,n)}_apply(e){const t=Pd(e,this.type,this._docOrFields,this._inclusive);return new nu(e.firestore,e.converter,function(e,t){return new zn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}function Ad(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ed._create("startAt",t,!0)}function Td(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ed._create("startAfter",t,!1)}class Cd extends md{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Cd(e,t,n)}_apply(e){const t=Pd(e,this.type,this._docOrFields,this._inclusive);return new nu(e.firestore,e.converter,function(e,t){return new zn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Id(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Cd._create("endBefore",t,!1)}function jd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Cd._create("endAt",t,!0)}function Pd(e,t,n,r){if(n[0]=(0,l.Ku)(n[0]),n[0]instanceof cd)return function(e,t,n,r,s){if(!r)throw new L(O.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const i=[];for(const a of Qn(e))if(a.field.isKeyField())i.push(Gt(t,r.key));else{const e=r.data.field(a.field);if(jt(e))throw new L(O.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=a.field.canonicalString();throw new L(O.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}i.push(e)}return new dn(i,s)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const s=zu(e.firestore);return function(e,t,n,r,s,i){const a=e.explicitOrderBy;if(s.length>a.length)throw new L(O.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const o=[];for(let l=0;l<s.length;l++){const i=s[l];if(a[l].field.isKeyField()){if("string"!=typeof i)throw new L(O.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof i));if(!Gn(e)&&-1!==i.indexOf("/"))throw new L(O.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(i,"' contains a slash."));const n=e.path.child(te.fromString(i));if(!se.isDocumentKey(n))throw new L(O.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const s=new se(n);o.push(Gt(t,s))}else{const e=Zu(n,r,i);o.push(e)}}return new dn(o,i)}(e._query,e.firestore._databaseId,s,t,n,r)}}function Dd(e,t,n){if("string"==typeof(n=(0,l.Ku)(n))){if(""===n)throw new L(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gn(t)&&-1!==n.indexOf("/"))throw new L(O.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(te.fromString(n));if(!se.isDocumentKey(r))throw new L(O.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Gt(e,new se(r))}if(n instanceof ru)return Gt(e,n._key);throw new L(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Yc(n),"."))}function Rd(e,t){if(!Array.isArray(e)||0===e.length)throw new L(O.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Od(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new L(O.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new L(O.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}function Ld(e,t){if(!(t instanceof gd||t instanceof vd))throw new L(O.INVALID_ARGUMENT,"Function ".concat(e,"() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'."))}class Md{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ft(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(It(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw j()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return mt(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const s=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>Ct(e.doubleValue));return new Lu(s)}convertGeoPoint(e){return new Ou(Ct(e.latitude),Ct(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Pt(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Dt(e));default:return null}}convertTimestamp(e){const t=Tt(e);return new $(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=te.fromString(e);P(si(n));const r=new Ot(n.get(1),n.get(3)),s=new se(n.popFirst(5));return r.isEqual(t)||T("Document ".concat(s," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),s}}function Fd(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Ud extends Md{constructor(e){super(),this.firestore=e}convertBytes(e){return new ju(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ru(this.firestore,null,t)}}function Vd(e){return new Cu("sum",sd("sum",e))}function Bd(e){return new Cu("avg",sd("average",e))}function qd(){return new Cu("count")}function zd(e,t){var n,r;return e instanceof Cu&&t instanceof Cu&&e.aggregateType===t.aggregateType&&(null===(n=e._internalFieldPath)||void 0===n?void 0:n.canonicalString())===(null===(r=t._internalFieldPath)||void 0===r?void 0:r.canonicalString())}function Kd(e,t){return cu(e.query,t.query)&&(0,l.bD)(e.data(),t.data())}class Wd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hd extends cd{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Gd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(dd("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Gd extends Hd{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Qd{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Wd(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Gd(this._firestore,this._userDataWriter,n.key,n,new Wd(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new L(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Gd(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Wd(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Gd(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Wd(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:Jd(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Jd(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return j()}}function Yd(e,t){return e instanceof Hd&&t instanceof Hd?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Qd&&t instanceof Qd&&e._firestore===t._firestore&&cu(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function Xd(e){e=Xc(e,ru);const t=Xc(e.firestore,mu);return Bc(yu(t),e._key).then(n=>dh(t,e,n))}class $d extends Md{constructor(e){super(),this.firestore=e}convertBytes(e){return new ju(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ru(this.firestore,null,t)}}function Zd(e){e=Xc(e,ru);const t=Xc(e.firestore,mu),n=yu(t),r=new $d(t);return function(e,t){const n=new M;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){try{const r=await function(e,t){const n=R(e);return n.persistence.runTransaction("read document","readonly",e=>n.localDocuments.getDocument(e,t))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new L(O.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=vl(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await Lc(e),t,n)),n.promise}(n,e._key).then(n=>new Hd(t,r,e._key,n,new Wd(null!==n&&n.hasLocalMutations,!0),e.converter))}function eh(e){e=Xc(e,ru);const t=Xc(e.firestore,mu);return Bc(yu(t),e._key,{source:"server"}).then(n=>dh(t,e,n))}function th(e){e=Xc(e,nu);const t=Xc(e.firestore,mu),n=yu(t),r=new $d(t);return hd(e._query),qc(n,e._query).then(n=>new Qd(t,r,e,n))}function nh(e){e=Xc(e,nu);const t=Xc(e.firestore,mu),n=yu(t),r=new $d(t);return function(e,t){const n=new M;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){try{const r=await lo(e,t,!0),s=new Ul(t,r.Ts),i=s.ma(r.documents),a=s.applyChanges(i,!1);n.resolve(a.snapshot)}catch(e){const r=vl(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await Lc(e),t,n)),n.promise}(n,e._query).then(n=>new Qd(t,r,e,n))}function rh(e){e=Xc(e,nu);const t=Xc(e.firestore,mu),n=yu(t),r=new $d(t);return qc(n,e._query,{source:"server"}).then(n=>new Qd(t,r,e,n))}function sh(e,t,n){e=Xc(e,ru);const r=Xc(e.firestore,mu),s=Fd(e.converter,t,n);return uh(r,[Ku(zu(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,Fr.none())])}function ih(e,t,n){e=Xc(e,ru);const r=Xc(e.firestore,mu),s=zu(r);let i;for(var a=arguments.length,o=new Array(a>3?a-3:0),c=3;c<a;c++)o[c-3]=arguments[c];return i="string"==typeof(t=(0,l.Ku)(t))||t instanceof Pu?$u(s,"updateDoc",e._key,t,n,o):Xu(s,"updateDoc",e._key,t),uh(r,[i.toMutation(e._key,Fr.exists(!0))])}function ah(e){return uh(Xc(e.firestore,mu),[new Xr(e._key,Fr.none())])}function oh(e,t){const n=Xc(e.firestore,mu),r=ou(e),s=Fd(e.converter,t);return uh(n,[Ku(zu(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,Fr.exists(!1))]).then(()=>r)}function lh(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var s,i,a;e=(0,l.Ku)(e);let o={includeMetadataChanges:!1,source:"default"},c=0;"object"!=typeof n[c]||du(n[c])||(o=n[c],c++);const u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(du(n[c])){const e=n[c];n[c]=null===(s=e.next)||void 0===s?void 0:s.bind(e),n[c+1]=null===(i=e.error)||void 0===i?void 0:i.bind(e),n[c+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let d,h,f;if(e instanceof ru)h=Xc(e.firestore,mu),f=Wn(e._key.path),d={next:t=>{n[c]&&n[c](dh(h,e,t))},error:n[c+1],complete:n[c+2]};else{const t=Xc(e,nu);h=Xc(t.firestore,mu),f=t._query;const r=new $d(h);d={next:e=>{n[c]&&n[c](new Qd(h,r,t,e))},error:n[c+1],complete:n[c+2]},hd(e._query)}return function(e,t,n,r){const s=new Ec(r),i=new Pl(t,s,n);return e.asyncQueue.enqueueAndForget(async()=>Sl(await Vc(e),i)),()=>{s.Za(),e.asyncQueue.enqueueAndForget(async()=>El(await Vc(e),i))}}(yu(h),f,u,d)}function ch(e,t){return function(e,t){const n=new Ec(t);return e.asyncQueue.enqueueAndForget(async()=>function(e,t){R(e).Y_.add(t),t.next()}(await Vc(e),n)),()=>{n.Za(),e.asyncQueue.enqueueAndForget(async()=>function(e,t){R(e).Y_.delete(t)}(await Vc(e),n))}}(yu(e=Xc(e,mu)),du(t)?t:{next:t})}function uh(e,t){return function(e,t){const n=new M;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=xc(e);try{const e=await function(e,t){const n=R(e),r=$.now(),s=t.reduce((e,t)=>e.add(t.key),vr());let i,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=cr(),l=vr();return n.cs.getEntries(e,s).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(s=>{i=s;const a=[];for(const e of t){const t=Kr(e,i.get(e.key).overlayedDocument);null!=t&&a.push(new Gr(e.key,t,cn(t.value.mapValue),Fr.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:hr(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new yt(J)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await oc(r,e.changes),await sl(r.remoteStore)}catch(e){const t=vl(e,"Failed to persist write");n.reject(t)}}(await Fc(e),t,n)),n.promise}(yu(e),t)}function dh(e,t,n){const r=n.docs.get(t._key),s=new $d(e);return new Hd(e,s,t._key,r,new Wd(n.hasPendingWrites,n.fromCache),t.converter)}function hh(e){return fh(e,{count:qd()})}function fh(e,t){const n=Xc(e.firestore,mu),r=yu(n),s=pt(t,(e,t)=>new ns(t,e.aggregateType,e._internalFieldPath));return function(e,t,n){const r=new M;return e.asyncQueue.enqueueAndForget(async()=>{try{const s=await Uc(e);r.resolve(async function(e,t,n){var r;const s=R(e),{request:i,ut:a,parent:o}=Qs(s.serializer,Yn(t),n);s.connection.Fo||delete i.parent;const l=(await s.Lo("RunAggregationQuery",s.serializer.databaseId,o,i,1)).filter(e=>!!e.result);P(1===l.length);const c=null===(r=l[0].result)||void 0===r?void 0:r.aggregateFields;return Object.keys(c).reduce((e,t)=>(e[a[t]]=c[t],e),{})}(s,t,n))}catch(e){r.reject(e)}}),r.promise}(r,e._query,s).then(t=>function(e,t,n){const r=new $d(e);return new Iu(t,r,n)}(n,e,t))}class mh{constructor(e){this.kind="memory",this._onlineComponentProvider=Nc.provider,(null==e?void 0:e.garbageCollector)?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=bc.provider}toJSON(){return{kind:this.kind}}}class ph{constructor(e){let t;this.kind="persistent",(null==e?void 0:e.tabManager)?(e.tabManager._initialize(e),t=e.tabManager):(t=Nh(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class gh{constructor(){this.kind="memoryEager",this._offlineComponentProvider=bc.provider}toJSON(){return{kind:this.kind}}}class yh{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new wc(e)}}toJSON(){return{kind:this.kind}}}function vh(){return new gh}function xh(e){return new yh(null==e?void 0:e.cacheSizeBytes)}function bh(e){return new mh(e)}function wh(e){return new ph(e)}class kh{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Nc.provider,this._offlineComponentProvider={build:t=>new kc(t,null==e?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class _h{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Nc.provider,this._offlineComponentProvider={build:t=>new _c(t,null==e?void 0:e.cacheSizeBytes)}}}function Nh(e){return new kh(null==e?void 0:e.forceOwnership)}function Sh(){return new _h}const Eh={maxAttempts:5};class Ah{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=zu(e)}set(e,t,n){this._verifyNotCommitted();const r=Th(e,this._firestore),s=Fd(r.converter,t,n),i=Ku(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,n);return this._mutations.push(i.toMutation(r._key,Fr.none())),this}update(e,t,n){this._verifyNotCommitted();const r=Th(e,this._firestore);let s;for(var i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];return s="string"==typeof(t=(0,l.Ku)(t))||t instanceof Pu?$u(this._dataReader,"WriteBatch.update",r._key,t,n,a):Xu(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(s.toMutation(r._key,Fr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Th(e,this._firestore);return this._mutations=this._mutations.concat(new Xr(t._key,Fr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new L(O.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Th(e,t){if((e=(0,l.Ku)(e)).firestore!==t)throw new L(O.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class Ch extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=zu(e)}get(e){const t=Th(e,this._firestore),n=new Ud(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return j();const r=e[0];if(r.isFoundDocument())return new cd(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new cd(this._firestore,n,t._key,null,t.converter);throw j()})}set(e,t,n){const r=Th(e,this._firestore),s=Fd(r.converter,t,n),i=Ku(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,n);return this._transaction.set(r._key,i),this}update(e,t,n){const r=Th(e,this._firestore);let s;for(var i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];return s="string"==typeof(t=(0,l.Ku)(t))||t instanceof Pu?$u(this._dataReader,"Transaction.update",r._key,t,n,a):Xu(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,s),this}delete(e){const t=Th(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Th(e,this._firestore),n=new $d(this._firestore);return super.get(e).then(e=>new Hd(this._firestore,n,t._key,e._document,new Wd(!1,!1),t.converter))}}function Ih(e,t,n){e=Xc(e,mu);const r=Object.assign(Object.assign({},Eh),n);return function(e){if(e.maxAttempts<1)throw new L(O.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new M;return e.asyncQueue.enqueueAndForget(async()=>{const s=await Uc(e);new Cc(e.asyncQueue,s,n,t,r).au()}),r.promise}(yu(e),n=>t(new Ch(e,n)),r)}function jh(){return new Wu("deleteField")}function Ph(){return new Gu("serverTimestamp")}function Dh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Qu("arrayUnion",t)}function Rh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Ju("arrayRemove",t)}function Oh(e){return new Yu("increment",e)}function Lh(e){return new Lu(e)}function Mh(e){return yu(e=Xc(e,mu)),new Ah(e,t=>uh(e,t))}function Fh(e,t){const n=yu(e=Xc(e,mu));if(!n._uninitializedComponentsProvider||"memory"===n._uninitializedComponentsProvider._offline.kind)return C("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=function(e){const t="string"==typeof e?function(e){try{return JSON.parse(e)}catch(e){throw new L(O.INVALID_ARGUMENT,"Failed to parse JSON: "+(null==e?void 0:e.message))}}(e):e,n=[];if(Array.isArray(t.indexes))for(const r of t.indexes){const e=Uh(r,"collectionGroup"),t=[];if(Array.isArray(r.fields))for(const n of r.fields){const e=ad("setIndexConfiguration",Uh(n,"fieldPath"));"CONTAINS"===n.arrayConfig?t.push(new ce(e,2)):"ASCENDING"===n.order?t.push(new ce(e,0)):"DESCENDING"===n.order&&t.push(new ce(e,1))}n.push(new ie(ie.UNKNOWN_ID,e,t,de.empty()))}return n}(t);return function(e,t){return e.asyncQueue.enqueue(async()=>async function(e,t){const n=R(e),r=n.indexManager,s=[];return n.persistence.runTransaction("Configure indexes","readwrite",e=>r.getFieldIndexes(e).next(n=>function(e,t,n,r,s){e=[...e],t=[...t],e.sort(n),t.sort(n);const i=e.length,a=t.length;let o=0,l=0;for(;o<a&&l<i;){const i=n(e[l],t[o]);i<0?s(e[l++]):i>0?r(t[o++]):(o++,l++)}for(;o<a;)r(t[o++]);for(;l<i;)s(e[l++])}(n,t,le,t=>{s.push(r.addFieldIndex(e,t))},t=>{s.push(r.deleteFieldIndex(e,t))})).next(()=>xe.waitFor(s)))}(await Lc(e),t))}(n,r)}function Uh(e,t){if("string"!=typeof e[t])throw new L(O.INVALID_ARGUMENT,"Missing string value for: "+t);return e[t]}class Vh{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function Bh(e){var t;e=Xc(e,mu);const n=Hh.get(e);if(n)return n;if("persistent"!==(null===(t=yu(e)._uninitializedComponentsProvider)||void 0===t?void 0:t._offline.kind))return null;const r=new Vh(e);return Hh.set(e,r),r}function qh(e){Wh(e,!0)}function zh(e){Wh(e,!1)}function Kh(e){(function(e){return e.asyncQueue.enqueue(async()=>function(e){const t=R(e),n=t.indexManager;return t.persistence.runTransaction("Delete All Indexes","readwrite",e=>n.deleteAllFieldIndexes(e))}(await Lc(e)))})(yu(e._firestore)).then(e=>A("deleting all persistent cache indexes succeeded")).catch(e=>C("deleting all persistent cache indexes failed",e))}function Wh(e,t){(function(e,t){return e.asyncQueue.enqueue(async()=>function(e,t){R(e).ss.zi=t}(await Lc(e),t))})(yu(e._firestore),t).then(e=>A("setting persistent cache index auto creation isEnabled=".concat(t," succeeded"))).catch(e=>C("setting persistent cache index auto creation isEnabled=".concat(t," failed"),e))}const Hh=new WeakMap;function Gh(e){var t;const n=null===(t=yu(Xc(e.firestore,mu))._onlineComponents)||void 0===t?void 0:t.datastore.serializer;return void 0===n?null:Gs(n,Jn(e._query))._t}function Qh(e,t){var n;const r=pt(t,(e,t)=>new ns(t,e.aggregateType,e._internalFieldPath)),s=null===(n=yu(Xc(e.firestore,mu))._onlineComponents)||void 0===n?void 0:n.datastore.serializer;return void 0===s?null:Qs(s,Yn(e._query),r,!0).request}class Jh{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return Yh.instance.onExistenceFilterMismatch(e)}}class Yh{constructor(){this.Uu=new Map}static get instance(){return Xh||(Xh=new Yh,function(e){if(ls)throw new Error("a TestingHooksSpi instance is already set");ls=e}(Xh)),Xh}et(e){this.Uu.forEach(t=>t(e))}onExistenceFilterMismatch(e){const t=Symbol(),n=this.Uu;return n.set(t,e),()=>n.delete(t)}}let Xh=null;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){_=e}(i.MF),(0,i.om)(new a.uA("firestore",(e,n)=>{let{instanceIdentifier:r,options:s}=n;const i=e.getProvider("app").getImmediate(),a=new mu(new B(e.getProvider("auth-internal")),new W(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new L(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ot(e.options.projectId,t)}(i,r),i);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,i.KO)(w,"4.7.3",e),(0,i.KO)(w,"4.7.3","esm2017")}()},555:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=r(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function i(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.d(t,{A:()=>o})},579:(e,t,n)=>{"use strict";e.exports=n(153)},700:(e,t,n)=>{"use strict";n.d(t,{Am:()=>j,FA:()=>E,Fy:()=>p,I9:()=>P,Im:()=>T,Ku:()=>M,T9:()=>h,Tj:()=>u,Uj:()=>a,XA:()=>f,ZQ:()=>g,bD:()=>C,c1:()=>v,cY:()=>m,eX:()=>N,g:()=>S,hp:()=>D,jZ:()=>y,lT:()=>w,lV:()=>b,nr:()=>k,sr:()=>x,tD:()=>R,u:()=>o,yU:()=>d,zW:()=>_});const r=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,a=i?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,i||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],a=s<e.length?n[e.charAt(s)]:0;++s;const o=s<e.length?n[e.charAt(s)]:64;++s;const l=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==a||null==o||null==l)throw new i;const c=t<<2|a>>4;if(r.push(c),64!==o){const e=a<<4&240|o>>2;if(r.push(e),64!==l){const e=o<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class i extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a=function(e){return function(e){const t=r(e);return s.encodeByteArray(t,!0)}(e).replace(/\./g,"")},o=function(e){try{return s.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const l=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,c=()=>{try{return l()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&o(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},u=e=>{var t,n;return null===(n=null===(t=c())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},d=e=>{const t=u(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},h=()=>{var e;return null===(e=c())||void 0===e?void 0:e.config},f=e=>{var t;return null===(t=c())||void 0===t?void 0:t["_".concat(e)]};class m{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function p(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[a(JSON.stringify({alg:"none",type:"JWT"})),a(JSON.stringify(i)),""].join(".")}function g(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function y(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())}function v(){return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function x(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function b(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function w(){const e=g();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function k(){return!function(){var e;const t=null===(e=c())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _(){try{return"object"===typeof indexedDB}catch(e){return!1}}function N(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}class S extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,S.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,E.prototype.create)}}class E{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],s=r?function(e,t){return e.replace(A,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",i="".concat(this.serviceName,": ").concat(s," (").concat(n,").");return new S(n,i,t)}}const A=/\{\$([^}]+)}/g;function T(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function C(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(I(n)&&I(i)){if(!C(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function I(e){return null!==e&&"object"===typeof e}function j(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function P(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function D(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function R(e,t){const n=new O(e,t);return n.subscribe.bind(n)}class O{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=L),void 0===r.error&&(r.error=L),void 0===r.complete&&(r.complete=L);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function L(){}function M(e){return e&&e._delegate?e._delegate:e}},730:(e,t,n)=>{"use strict";var r=n(43),s=n(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function p(e,t,n,r,s,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new p(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new p(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new p(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new p(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new p(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new p(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function x(e,t,n,r){var s=g.hasOwnProperty(t)?g[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!d.call(m,e)||!d.call(f,e)&&(h.test(e)?m[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new p(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),A=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var L,M=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var s=c.stack.split("\n"),i=r.stack.split("\n"),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(1!==a||1!==o)do{if(a--,0>--o||s[a]!==i[o]){var l="\n"+s[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case k:return"Portal";case S:return"Profiler";case N:return"StrictMode";case C:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case j:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function $(e,t){X(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ie(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(fe).forEach(function(e){me.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,_e=null,Ne=null;function Se(e){if(e=xs(e)){if("function"!==typeof ke)throw Error(i(280));var t=e.stateNode;t&&(t=ws(t),ke(e.stateNode,e.type,t))}}function Ee(e){_e?Ne?Ne.push(e):Ne=[e]:_e=e}function Ae(){if(_e){var e=_e,t=Ne;if(Ne=_e=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Te(e,t){return e(t)}function Ce(){}var Ie=!1;function je(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Te(e,t,n)}finally{Ie=!1,(null!==_e||null!==Ne)&&(Ce(),Ae())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=ws(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var De=!1;if(u)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){De=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ue){De=!1}function Oe(e,t,n,r,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Me=null,Fe=!1,Ue=null,Ve={onError:function(e){Le=!0,Me=e}};function Be(e,t,n,r,s,i,a,o,l){Le=!1,Me=null,Oe.apply(Ve,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(qe(e)!==e)throw Error(i(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(r=s.return)){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return Ke(s),e;if(a===r)return Ke(s),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ge=s.unstable_scheduleCallback,Qe=s.unstable_cancelCallback,Je=s.unstable_shouldYield,Ye=s.unstable_requestPaint,Xe=s.unstable_now,$e=s.unstable_getCurrentPriorityLevel,Ze=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,rt=s.unstable_IdlePriority,st=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~s;0!==o?r=dt(o):0!==(i&=a)&&(r=dt(i))}else 0!==(a=n&~s)?r=dt(a):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(i=t&-t)||16===s&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-at(t)),r|=e[n],t&=~s;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var xt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,kt,_t,Nt,St,Et=!1,At=[],Tt=null,Ct=null,It=null,jt=new Map,Pt=new Map,Dt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":jt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Lt(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=xs(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Mt(e){var t=vs(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void St(e.priority,function(){_t(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xs(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){Et=!1,null!==Tt&&Ft(Tt)&&(Tt=null),null!==Ct&&Ft(Ct)&&(Ct=null),null!==It&&Ft(It)&&(It=null),jt.forEach(Ut),Pt.forEach(Ut)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Vt)))}function qt(e){function t(t){return Bt(t,e)}if(0<At.length){Bt(At[0],e);for(var n=1;n<At.length;n++){var r=At[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&Bt(Tt,e),null!==Ct&&Bt(Ct,e),null!==It&&Bt(It,e),jt.forEach(t),Pt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Dt.shift()}var zt=b.ReactCurrentBatchConfig,Kt=!0;function Wt(e,t,n,r){var s=xt,i=zt.transition;zt.transition=null;try{xt=1,Gt(e,t,n,r)}finally{xt=s,zt.transition=i}}function Ht(e,t,n,r){var s=xt,i=zt.transition;zt.transition=null;try{xt=4,Gt(e,t,n,r)}finally{xt=s,zt.transition=i}}function Gt(e,t,n,r){if(Kt){var s=Jt(e,t,n,r);if(null===s)Kr(e,t,r,Qt,n),Ot(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return Tt=Lt(Tt,e,t,n,r,s),!0;case"dragenter":return Ct=Lt(Ct,e,t,n,r,s),!0;case"mouseover":return It=Lt(It,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return jt.set(i,Lt(jt.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Pt.set(i,Lt(Pt.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==s;){var i=xs(s);if(null!==i&&wt(i),null===(i=Jt(e,t,n,r))&&Kr(e,t,r,Qt,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Jt(e,t,n,r){if(Qt=null,null!==(e=vs(e=we(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,s="value"in Xt?Xt.value:Xt.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return Zt=s.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=M({},cn,{view:0,detail:0}),hn=sn(dn),fn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),mn=sn(fn),pn=sn(M({},fn,{dataTransfer:0})),gn=sn(M({},dn,{relatedTarget:0})),yn=sn(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=sn(vn),bn=sn(M({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Sn(){return Nn}var En=M({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=sn(En),Tn=sn(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=sn(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),In=sn(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),jn=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=sn(jn),Dn=[9,13,27,32],Rn=u&&"CompositionEvent"in window,On=null;u&&"documentMode"in document&&(On=document.documentMode);var Ln=u&&"TextEvent"in window&&!On,Mn=u&&(!Rn||On&&8<On&&11>=On),Fn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ee(r),0<(t=Hr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Gn=null;function Qn(e){Fr(e,0)}function Jn(e){if(G(bs(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(u){var $n;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Xn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Gn=Hn=null)}function nr(e){if("value"===e.propertyName&&Jn(Gn)){var t=[];Wn(t,Gn,e,we(e)),je(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Gn)}function ir(e,t){if("click"===e)return Jn(t)}function ar(e,t){if("input"===e||"change"===e)return Jn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!d.call(t,s)||!or(e[s],t[s]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=void 0===r.end?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=ur(n,i);var a=ur(n,r);s&&a&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,xr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Hr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Nr={};function Sr(e){if(_r[e])return _r[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Nr)return _r[e]=n[t];return e}u&&(Nr=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Er=Sr("animationend"),Ar=Sr("animationiteration"),Tr=Sr("animationstart"),Cr=Sr("transitionend"),Ir=new Map,jr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Ir.set(e,t),l(t,[e])}for(var Dr=0;Dr<jr.length;Dr++){var Rr=jr[Dr];Pr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Pr(Er,"onAnimationEnd"),Pr(Ar,"onAnimationIteration"),Pr(Tr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Cr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,a,o,l,c){if(Be.apply(this,arguments),Le){if(!Le)throw Error(i(198));var u=Me;Le=!1,Me=null,Fe||(Fe=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;Mr(s,o,c),i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;Mr(s,o,c),i=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[ps];void 0===n&&(n=t[ps]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[Br]){e[Br]=!0,a.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||Vr(t,!1,e),Vr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function zr(e,t,n,r){switch(Yt(t)){case 1:var s=Wt;break;case 4:s=Ht;break;default:s=Gt}n=s.bind(null,t,n,e),s=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;a=a.return}for(;null!==o;){if(null===(a=vs(o)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}o=o.parentNode}}r=r.return}je(function(){var r=i,s=we(n),a=[];e:{var o=Ir.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=An;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Cn;break;case Er:case Ar:case Tr:l=yn;break;case Cr:l=In;break;case"scroll":l=hn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,m=r;null!==m;){var p=(f=m).stateNode;if(5===f.tag&&null!==p&&(f=p,null!==h&&(null!=(p=Pe(m,h))&&u.push(Wr(m,p,f)))),d)break;m=m.return}0<u.length&&(o=new l(o,c,null,n,s),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!vs(c)&&!c[ms])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vs(c):null)&&(c!==(d=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=mn,p="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tn,p="onPointerLeave",h="onPointerEnter",m="pointer"),d=null==l?o:bs(l),f=null==c?o:bs(c),(o=new u(p,m+"leave",l,n,s)).target=d,o.relatedTarget=f,p=null,vs(s)===r&&((u=new u(h,m+"enter",c,n,s)).target=f,u.relatedTarget=d,p=u),d=p,l&&c)e:{for(h=c,m=0,f=u=l;f;f=Gr(f))m++;for(f=0,p=h;p;p=Gr(p))f++;for(;0<m-f;)u=Gr(u),m--;for(;0<f-m;)h=Gr(h),f--;for(;m--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gr(u),h=Gr(h)}u=null}else u=null;null!==l&&Qr(a,o,l,u,!1),null!==c&&null!==d&&Qr(a,d,c,u,!0)}if("select"===(l=(o=r?bs(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Yn;else if(Kn(o))if(Xn)g=ar;else{g=sr;var y=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ir);switch(g&&(g=g(e,r))?Wn(a,g,n,s):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?bs(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,br(a,n,s);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":br(a,n,s)}var v;if(Rn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else qn?Vn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Mn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==x?"onCompositionEnd"===x&&qn&&(v=en()):($t="value"in(Xt=s)?Xt.value:Xt.textContent,qn=!0)),0<(y=Hr(r,x)).length&&(x=new bn(x,e,null,n,s),a.push({event:x,listeners:y}),v?x.data=v:null!==(v=Bn(n))&&(x.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Rn&&Vn(e,t)?(e=en(),Zt=$t=Xt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(s=new bn("onBeforeInput","beforeinput",null,n,s),a.push({event:s,listeners:r}),s.data=v))}Fr(a,t)})}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;5===s.tag&&null!==i&&(s=i,null!=(i=Pe(e,n))&&r.unshift(Wr(e,i,s)),null!=(i=Pe(e,t))&&r.push(Wr(e,i,s))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=Pe(n,i))&&a.unshift(Wr(n,l,o)):s||null!=(l=Pe(n,i))&&a.push(Wr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Jr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Jr,"\n").replace(Yr,"")}function $r(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(i(425))}function Zr(){}var es=null,ts=null;function ns(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rs="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,is="function"===typeof Promise?Promise:void 0,as="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof is?function(e){return is.resolve(null).then(e).catch(os)}:rs;function os(e){setTimeout(function(){throw e})}function ls(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);qt(t)}function cs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function us(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ds=Math.random().toString(36).slice(2),hs="__reactFiber$"+ds,fs="__reactProps$"+ds,ms="__reactContainer$"+ds,ps="__reactEvents$"+ds,gs="__reactListeners$"+ds,ys="__reactHandles$"+ds;function vs(e){var t=e[hs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ms]||n[hs]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=us(e);null!==e;){if(n=e[hs])return n;e=us(e)}return t}n=(e=n).parentNode}return null}function xs(e){return!(e=e[hs]||e[ms])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function ws(e){return e[fs]||null}var ks=[],_s=-1;function Ns(e){return{current:e}}function Ss(e){0>_s||(e.current=ks[_s],ks[_s]=null,_s--)}function Es(e,t){_s++,ks[_s]=e.current,e.current=t}var As={},Ts=Ns(As),Cs=Ns(!1),Is=As;function js(e,t){var n=e.type.contextTypes;if(!n)return As;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,i={};for(s in n)i[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ps(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ds(){Ss(Cs),Ss(Ts)}function Rs(e,t,n){if(Ts.current!==As)throw Error(i(168));Es(Ts,t),Es(Cs,n)}function Os(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(i(108,z(e)||"Unknown",s));return M({},n,r)}function Ls(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||As,Is=Ts.current,Es(Ts,e),Es(Cs,Cs.current),!0}function Ms(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Os(e,t,Is),r.__reactInternalMemoizedMergedChildContext=e,Ss(Cs),Ss(Ts),Es(Ts,e)):Ss(Cs),Es(Cs,n)}var Fs=null,Us=!1,Vs=!1;function Bs(e){null===Fs?Fs=[e]:Fs.push(e)}function qs(){if(!Vs&&null!==Fs){Vs=!0;var e=0,t=xt;try{var n=Fs;for(xt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fs=null,Us=!1}catch(s){throw null!==Fs&&(Fs=Fs.slice(e+1)),Ge(Ze,qs),s}finally{xt=t,Vs=!1}}return null}var zs=[],Ks=0,Ws=null,Hs=0,Gs=[],Qs=0,Js=null,Ys=1,Xs="";function $s(e,t){zs[Ks++]=Hs,zs[Ks++]=Ws,Ws=e,Hs=t}function Zs(e,t,n){Gs[Qs++]=Ys,Gs[Qs++]=Xs,Gs[Qs++]=Js,Js=e;var r=Ys;e=Xs;var s=32-at(r)-1;r&=~(1<<s),n+=1;var i=32-at(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Ys=1<<32-at(t)+s|n<<s|r,Xs=i+e}else Ys=1<<i|n<<s|r,Xs=e}function ei(e){null!==e.return&&($s(e,1),Zs(e,1,0))}function ti(e){for(;e===Ws;)Ws=zs[--Ks],zs[Ks]=null,Hs=zs[--Ks],zs[Ks]=null;for(;e===Js;)Js=Gs[--Qs],Gs[Qs]=null,Xs=Gs[--Qs],Gs[Qs]=null,Ys=Gs[--Qs],Gs[Qs]=null}var ni=null,ri=null,si=!1,ii=null;function ai(e,t){var n=jc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=cs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Js?{id:Ys,overflow:Xs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=jc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(si){var t=ri;if(t){var n=t;if(!oi(e,t)){if(li(e))throw Error(i(418));t=cs(n.nextSibling);var r=ni;t&&oi(e,t)?ai(r,n):(e.flags=-4097&e.flags|2,si=!1,ni=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,si=!1,ni=e}}}function ui(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function di(e){if(e!==ni)return!1;if(!si)return ui(e),si=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ns(e.type,e.memoizedProps)),t&&(t=ri)){if(li(e))throw hi(),Error(i(418));for(;t;)ai(e,t),t=cs(t.nextSibling)}if(ui(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=cs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=ni?cs(e.stateNode.nextSibling):null;return!0}function hi(){for(var e=ri;e;)e=cs(e.nextSibling)}function fi(){ri=ni=null,si=!1}function mi(e){null===ii?ii=[e]:ii.push(e)}var pi=b.ReactCurrentBatchConfig;function gi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var s=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=s.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function yi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vi(e){return(0,e._init)(e._payload)}function xi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===_?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===P&&vi(i)===t.type)?((r=s(t,n.props)).ref=gi(e,t,n),r.return=e,r):((r=Rc(n.type,n.key,n.props,null,e.mode,r)).ref=gi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=gi(e,null,t),n.return=e,n;case k:return(t=Fc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Oc(t,e.mode,n,null)).return=e,t;yi(e,t)}return null}function f(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===s?c(e,t,n,r):null;case k:return n.key===s?u(e,t,n,r):null;case P:return f(e,t,(s=n._init)(n._payload),r)}if(te(n)||O(n))return null!==s?null:d(e,t,n,r,null);yi(e,n)}return null}function m(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case k:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case P:return m(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||O(r))return d(t,e=e.get(n)||null,r,s,null);yi(t,r)}return null}function p(s,i,o,l){for(var c=null,u=null,d=i,p=i=0,g=null;null!==d&&p<o.length;p++){d.index>p?(g=d,d=null):g=d.sibling;var y=f(s,d,o[p],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(s,d),i=a(y,i,p),null===u?c=y:u.sibling=y,u=y,d=g}if(p===o.length)return n(s,d),si&&$s(s,p),c;if(null===d){for(;p<o.length;p++)null!==(d=h(s,o[p],l))&&(i=a(d,i,p),null===u?c=d:u.sibling=d,u=d);return si&&$s(s,p),c}for(d=r(s,d);p<o.length;p++)null!==(g=m(d,s,p,o[p],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?p:g.key),i=a(g,i,p),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(s,e)}),si&&$s(s,p),c}function g(s,o,l,c){var u=O(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,p=o,g=o=0,y=null,v=l.next();null!==p&&!v.done;g++,v=l.next()){p.index>g?(y=p,p=null):y=p.sibling;var x=f(s,p,v.value,c);if(null===x){null===p&&(p=y);break}e&&p&&null===x.alternate&&t(s,p),o=a(x,o,g),null===d?u=x:d.sibling=x,d=x,p=y}if(v.done)return n(s,p),si&&$s(s,g),u;if(null===p){for(;!v.done;g++,v=l.next())null!==(v=h(s,v.value,c))&&(o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return si&&$s(s,g),u}for(p=r(s,p);!v.done;g++,v=l.next())null!==(v=m(p,s,g,v.value,c))&&(e&&null!==v.alternate&&p.delete(null===v.key?g:v.key),o=a(v,o,g),null===d?u=v:d.sibling=v,d=v);return e&&p.forEach(function(e){return t(s,e)}),si&&$s(s,g),u}return function e(r,i,a,l){if("object"===typeof a&&null!==a&&a.type===_&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=i;null!==u;){if(u.key===c){if((c=a.type)===_){if(7===u.tag){n(r,u.sibling),(i=s(u,a.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&vi(c)===u.type){n(r,u.sibling),(i=s(u,a.props)).ref=gi(r,u,a),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===_?((i=Oc(a.props.children,r.mode,l,a.key)).return=r,r=i):((l=Rc(a.type,a.key,a.props,null,r.mode,l)).ref=gi(r,i,a),l.return=r,r=l)}return o(r);case k:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=s(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Fc(a,r.mode,l)).return=r,r=i}return o(r);case P:return e(r,i,(u=a._init)(a._payload),l)}if(te(a))return p(r,i,a,l);if(O(a))return g(r,i,a,l);yi(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=s(i,a)).return=r,r=i):(n(r,i),(i=Mc(a,r.mode,l)).return=r,r=i),o(r)):n(r,i)}}var bi=xi(!0),wi=xi(!1),ki=Ns(null),_i=null,Ni=null,Si=null;function Ei(){Si=Ni=_i=null}function Ai(e){var t=ki.current;Ss(ki),e._currentValue=t}function Ti(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ci(e,t){_i=e,Si=Ni=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xo=!0),e.firstContext=null)}function Ii(e){var t=e._currentValue;if(Si!==e)if(e={context:e,memoizedValue:t,next:null},null===Ni){if(null===_i)throw Error(i(308));Ni=e,_i.dependencies={lanes:0,firstContext:e}}else Ni=Ni.next=e;return t}var ji=null;function Pi(e){null===ji?ji=[e]:ji.push(e)}function Di(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,Pi(t)):(n.next=s.next,s.next=n),t.interleaved=n,Ri(e,r)}function Ri(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Oi=!1;function Li(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ui(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Tl)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Ri(e,n)}return null===(s=r.interleaved)?(t.next=t,Pi(r)):(t.next=s.next,s.next=t),r.interleaved=t,Ri(e,n)}function Vi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Bi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qi(e,t,n,r){var s=e.updateQueue;Oi=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=s.baseState;for(a=0,u=c=l=null,o=i;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,p=o;switch(h=t,f=n,p.tag){case 1:if("function"===typeof(m=p.payload)){d=m.call(f,d,h);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=p.payload)?m.call(f,d,h):m)||void 0===h)break e;d=M({},d,h);break e;case 2:Oi=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(h=o).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null!==(t=s.shared.interleaved)){s=t;do{a|=s.lane,s=s.next}while(s!==t)}else null===i&&(s.shared.lanes=0);Ll|=a,e.lanes=a,e.memoizedState=d}}function zi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(i(191,s));s.call(r)}}}var Ki={},Wi=Ns(Ki),Hi=Ns(Ki),Gi=Ns(Ki);function Qi(e){if(e===Ki)throw Error(i(174));return e}function Ji(e,t){switch(Es(Gi,t),Es(Hi,e),Es(Wi,Ki),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ss(Wi),Es(Wi,t)}function Yi(){Ss(Wi),Ss(Hi),Ss(Gi)}function Xi(e){Qi(Gi.current);var t=Qi(Wi.current),n=le(t,e.type);t!==n&&(Es(Hi,e),Es(Wi,n))}function $i(e){Hi.current===e&&(Ss(Wi),Ss(Hi))}var Zi=Ns(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ra=b.ReactCurrentDispatcher,sa=b.ReactCurrentBatchConfig,ia=0,aa=null,oa=null,la=null,ca=!1,ua=!1,da=0,ha=0;function fa(){throw Error(i(321))}function ma(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function pa(e,t,n,r,s,a){if(ia=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?$a:Za,e=n(r,s),ua){a=0;do{if(ua=!1,da=0,25<=a)throw Error(i(301));a+=1,la=oa=null,t.updateQueue=null,ra.current=eo,e=n(r,s)}while(ua)}if(ra.current=Xa,t=null!==oa&&null!==oa.next,ia=0,la=oa=aa=null,ca=!1,t)throw Error(i(300));return e}function ga(){var e=0!==da;return da=0,e}function ya(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function va(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(i(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function xa(e,t){return"function"===typeof t?t(e):t}function ba(e){var t=va(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=oa,s=r.baseQueue,a=n.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(null!==s){a=s.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((ia&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,aa.lanes|=d,Ll|=d}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(xo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{a=s.lane,aa.lanes|=a,Ll|=a,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wa(e){var t=va(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);or(a,t.memoizedState)||(xo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ka(){}function _a(e,t){var n=aa,r=va(),s=t(),a=!or(r.memoizedState,s);if(a&&(r.memoizedState=s,xo=!0),r=r.queue,Oa(Ea.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Ia(9,Sa.bind(null,n,r,s,t),void 0,null),null===Cl)throw Error(i(349));0!==(30&ia)||Na(n,t,s)}return s}function Na(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Sa(e,t,n,r){t.value=n,t.getSnapshot=r,Aa(t)&&Ta(e)}function Ea(e,t,n){return n(function(){Aa(t)&&Ta(e)})}function Aa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Ta(e){var t=Ri(e,1);null!==t&&nc(t,e,1,-1)}function Ca(e){var t=ya();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:e},t.queue=e,e=e.dispatch=Ga.bind(null,aa,e),[t.memoizedState,e]}function Ia(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ja(){return va().memoizedState}function Pa(e,t,n,r){var s=ya();aa.flags|=e,s.memoizedState=Ia(1|t,n,void 0,void 0===r?null:r)}function Da(e,t,n,r){var s=va();r=void 0===r?null:r;var i=void 0;if(null!==oa){var a=oa.memoizedState;if(i=a.destroy,null!==r&&ma(r,a.deps))return void(s.memoizedState=Ia(t,n,i,r))}aa.flags|=e,s.memoizedState=Ia(1|t,n,i,r)}function Ra(e,t){return Pa(8390656,8,e,t)}function Oa(e,t){return Da(2048,8,e,t)}function La(e,t){return Da(4,2,e,t)}function Ma(e,t){return Da(4,4,e,t)}function Fa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ua(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Da(4,4,Fa.bind(null,t,e),n)}function Va(){}function Ba(e,t){var n=va();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qa(e,t){var n=va();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function za(e,t,n){return 0===(21&ia)?(e.baseState&&(e.baseState=!1,xo=!0),e.memoizedState=n):(or(n,t)||(n=pt(),aa.lanes|=n,Ll|=n,e.baseState=!0),t)}function Ka(e,t){var n=xt;xt=0!==n&&4>n?n:4,e(!0);var r=sa.transition;sa.transition={};try{e(!1),t()}finally{xt=n,sa.transition=r}}function Wa(){return va().memoizedState}function Ha(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qa(e))Ja(t,n);else if(null!==(n=Di(e,t,n,r))){nc(n,e,r,ec()),Ya(n,t,r)}}function Ga(e,t,n){var r=tc(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qa(e))Ja(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(s.next=s,Pi(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(c){}null!==(n=Di(e,t,s,r))&&(nc(n,e,r,s=ec()),Ya(n,t,r))}}function Qa(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Ja(e,t){ua=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ya(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Xa={readContext:Ii,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},$a={readContext:Ii,useCallback:function(e,t){return ya().memoizedState=[e,void 0===t?null:t],e},useContext:Ii,useEffect:Ra,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pa(4194308,4,Fa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Pa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Pa(4,2,e,t)},useMemo:function(e,t){var n=ya();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ya();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ha.bind(null,aa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ya().memoizedState=e},useState:Ca,useDebugValue:Va,useDeferredValue:function(e){return ya().memoizedState=e},useTransition:function(){var e=Ca(!1),t=e[0];return e=Ka.bind(null,e[1]),ya().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=aa,s=ya();if(si){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Cl)throw Error(i(349));0!==(30&ia)||Na(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,Ra(Ea.bind(null,r,a,e),[e]),r.flags|=2048,Ia(9,Sa.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ya(),t=Cl.identifierPrefix;if(si){var n=Xs;t=":"+t+"R"+(n=(Ys&~(1<<32-at(Ys)-1)).toString(32)+n),0<(n=da++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:Ii,useCallback:Ba,useContext:Ii,useEffect:Oa,useImperativeHandle:Ua,useInsertionEffect:La,useLayoutEffect:Ma,useMemo:qa,useReducer:ba,useRef:ja,useState:function(){return ba(xa)},useDebugValue:Va,useDeferredValue:function(e){return za(va(),oa.memoizedState,e)},useTransition:function(){return[ba(xa)[0],va().memoizedState]},useMutableSource:ka,useSyncExternalStore:_a,useId:Wa,unstable_isNewReconciler:!1},eo={readContext:Ii,useCallback:Ba,useContext:Ii,useEffect:Oa,useImperativeHandle:Ua,useInsertionEffect:La,useLayoutEffect:Ma,useMemo:qa,useReducer:wa,useRef:ja,useState:function(){return wa(xa)},useDebugValue:Va,useDeferredValue:function(e){var t=va();return null===oa?t.memoizedState=e:za(t,oa.memoizedState,e)},useTransition:function(){return[wa(xa)[0],va().memoizedState]},useMutableSource:ka,useSyncExternalStore:_a,useId:Wa,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),i=Fi(r,s);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Ui(e,i,s))&&(nc(t,e,s,r),Vi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),i=Fi(r,s);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Ui(e,i,s))&&(nc(t,e,s,r),Vi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),s=Fi(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Ui(e,s,r))&&(nc(t,e,r,n),Vi(t,e,r))}};function so(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(s,i))}function io(e,t,n){var r=!1,s=As,i=t.contextType;return"object"===typeof i&&null!==i?i=Ii(i):(s=Ps(t)?Is:Ts.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?js(e,s):As),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function ao(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Li(e);var i=t.contextType;"object"===typeof i&&null!==i?s.context=Ii(i):(i=Ps(t)?Is:Ts.current,s.context=js(e,i)),s.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(no(e,t,i,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&ro.enqueueReplaceState(s,s.state,null),qi(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var s=n}catch(i){s="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:s,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=Fi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Kl||(Kl=!0,Wl=r),uo(0,t)},n}function mo(e,t,n){(n=Fi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){uo(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Hl?Hl=new Set([this]):Hl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function po(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yo(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fi(-1,1)).tag=2,Ui(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var vo=b.ReactCurrentOwner,xo=!1;function bo(e,t,n,r){t.child=null===e?wi(t,null,n,r):bi(t,e.child,n,r)}function wo(e,t,n,r,s){n=n.render;var i=t.ref;return Ci(t,s),r=pa(e,t,n,r,i,s),n=ga(),null===e||xo?(si&&n&&ei(t),t.flags|=1,bo(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ko(e,t,s))}function ko(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Pc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,_o(e,t,i,r,s))}if(i=e.child,0===(e.lanes&s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Ko(e,t,s)}return t.flags|=1,(e=Dc(i,r)).ref=t.ref,e.return=t,t.child=e}function _o(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(xo=!1,t.pendingProps=r=i,0===(e.lanes&s))return t.lanes=e.lanes,Ko(e,t,s);0!==(131072&e.flags)&&(xo=!0)}}return Eo(e,t,n,r,s)}function No(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Es(Dl,Pl),Pl|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Es(Dl,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Es(Dl,Pl),Pl|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Es(Dl,Pl),Pl|=r;return bo(e,t,s,n),t.child}function So(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Eo(e,t,n,r,s){var i=Ps(n)?Is:Ts.current;return i=js(t,i),Ci(t,s),n=pa(e,t,n,r,i,s),r=ga(),null===e||xo?(si&&r&&ei(t),t.flags|=1,bo(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ko(e,t,s))}function Ao(e,t,n,r,s){if(Ps(n)){var i=!0;Ls(t)}else i=!1;if(Ci(t,s),null===t.stateNode)zo(e,t),io(t,n,r),oo(t,n,r,s),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ii(c):c=js(t,c=Ps(n)?Is:Ts.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&ao(t,a,r,c),Oi=!1;var h=t.memoizedState;a.state=h,qi(t,r,a,s),l=t.memoizedState,o!==r||h!==l||Cs.current||Oi?("function"===typeof u&&(no(t,n,u,r),l=t.memoizedState),(o=Oi||so(t,n,o,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Mi(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ii(l):l=js(t,l=Ps(n)?Is:Ts.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&ao(t,a,r,l),Oi=!1,h=t.memoizedState,a.state=h,qi(t,r,a,s);var m=t.memoizedState;o!==d||h!==m||Cs.current||Oi?("function"===typeof f&&(no(t,n,f,r),m=t.memoizedState),(c=Oi||so(t,n,c,r,h,m,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,m,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,m,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),a.props=r,a.state=m,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return To(e,t,n,r,i,s)}function To(e,t,n,r,s,i){So(e,t);var a=0!==(128&t.flags);if(!r&&!a)return s&&Ms(t,n,!1),Ko(e,t,i);r=t.stateNode,vo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=bi(t,e.child,null,i),t.child=bi(t,null,o,i)):bo(e,t,o,i),t.memoizedState=r.state,s&&Ms(t,n,!0),t.child}function Co(e){var t=e.stateNode;t.pendingContext?Rs(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Rs(0,t.context,!1),Ji(e,t.containerInfo)}function Io(e,t,n,r,s){return fi(),mi(s),t.flags|=256,bo(e,t,n,r),t.child}var jo,Po,Do,Ro,Oo={dehydrated:null,treeContext:null,retryLane:0};function Lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mo(e,t,n){var r,s=t.pendingProps,a=Zi.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Es(Zi,1&a),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Lc(l,s,0,null),e=Oc(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Lo(n),t.memoizedState=Oo,e):Fo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,s,a,o){if(n)return 256&t.flags?(t.flags&=-257,Uo(e,t,o,r=co(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=Lc({mode:"visible",children:r.children},s,0,null),(a=Oc(a,s,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&bi(t,e.child,null,o),t.child.memoizedState=Lo(o),t.memoizedState=Oo,a);if(0===(1&t.mode))return Uo(e,t,o,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var l=r.dgst;return r=l,Uo(e,t,o,r=co(a=Error(i(419)),r,void 0))}if(l=0!==(o&e.childLanes),xo||l){if(null!==(r=Cl)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|o))?0:s)&&s!==a.retryLane&&(a.retryLane=s,Ri(e,s),nc(r,e,s,-1))}return pc(),Uo(e,t,o,r=co(Error(i(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Ac.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,ri=cs(s.nextSibling),ni=t,si=!0,ii=null,null!==e&&(Gs[Qs++]=Ys,Gs[Qs++]=Xs,Gs[Qs++]=Js,Ys=e.id,Xs=e.overflow,Js=t),t=Fo(t,r.children),t.flags|=4096,t)}(e,t,l,s,r,a,n);if(o){o=s.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==a?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Dc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Dc(r,o):(o=Oc(o,l,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Lo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Oo,s}return e=(o=e.child).sibling,s=Dc(o,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Fo(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uo(e,t,n,r){return null!==r&&mi(r),bi(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ti(e.return,t,n)}function Bo(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function qo(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(bo(e,t,r.children,n),0!==(2&(r=Zi.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vo(e,n,t);else if(19===e.tag)Vo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Es(Zi,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Bo(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ea(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Bo(t,!0,n,null,i);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ko(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wo(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ho(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Go(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ho(t),null;case 1:case 17:return Ps(t.type)&&Ds(),Ho(t),null;case 3:return r=t.stateNode,Yi(),Ss(Cs),Ss(Ts),na(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(di(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(ac(ii),ii=null))),Po(e,t),Ho(t),null;case 5:$i(t);var s=Qi(Gi.current);if(n=t.type,null!==e&&null!=t.stateNode)Do(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Ho(t),null}if(e=Qi(Wi.current),di(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hs]=t,r[fs]=a,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(s=0;s<Or.length;s++)Ur(Or[s],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,a),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ur("invalid",r);break;case"textarea":se(r,a),Ur("invalid",r)}for(var l in ve(n,a),s=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,c,e),s=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,c,e),s=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":H(r),Z(r,a,!0);break;case"textarea":H(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hs]=t,e[fs]=r,jo(e,t,!1,!1),t.stateNode=e;e:{switch(l=xe(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),s=r;break;case"iframe":case"object":case"embed":Ur("load",e),s=r;break;case"video":case"audio":for(s=0;s<Or.length;s++)Ur(Or[s],e);s=r;break;case"source":Ur("error",e),s=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),s=r;break;case"details":Ur("toggle",e),s=r;break;case"input":Y(e,r),s=J(e,r),Ur("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=M({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":se(e,r),s=re(e,r),Ur("invalid",e)}for(a in ve(n,s),c=s)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Ur("scroll",e):null!=u&&x(e,a,u,l))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ho(t),null;case 6:if(e&&null!=t.stateNode)Ro(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Qi(Gi.current),Qi(Wi.current),di(t)){if(r=t.stateNode,n=t.memoizedProps,r[hs]=t,(a=r.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hs]=t,t.stateNode=r}return Ho(t),null;case 13:if(Ss(Zi),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(si&&null!==ri&&0!==(1&t.mode)&&0===(128&t.flags))hi(),fi(),t.flags|=98560,a=!1;else if(a=di(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[hs]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ho(t),a=!1}else null!==ii&&(ac(ii),ii=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zi.current)?0===Rl&&(Rl=3):pc())),null!==t.updateQueue&&(t.flags|=4),Ho(t),null);case 4:return Yi(),Po(e,t),null===e&&qr(t.stateNode.containerInfo),Ho(t),null;case 10:return Ai(t.type._context),Ho(t),null;case 19:if(Ss(Zi),null===(a=t.memoizedState))return Ho(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Wo(a,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,Wo(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Es(Zi,1&Zi.current|2),t.child}e=e.sibling}null!==a.tail&&Xe()>ql&&(t.flags|=128,r=!0,Wo(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ea(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!si)return Ho(t),null}else 2*Xe()-a.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Wo(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xe(),t.sibling=null,n=Zi.current,Es(Zi,r?1&n|2:1&n),t):(Ho(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(Ho(t),6&t.subtreeFlags&&(t.flags|=8192)):Ho(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Qo(e,t){switch(ti(t),t.tag){case 1:return Ps(t.type)&&Ds(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Yi(),Ss(Cs),Ss(Ts),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return $i(t),null;case 13:if(Ss(Zi),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ss(Zi),null;case 4:return Yi(),null;case 10:return Ai(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}jo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Po=function(){},Do=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Qi(Wi.current);var i,a=null;switch(n){case"input":s=J(e,s),r=J(e,r),a=[];break;case"select":s=M({},s,{value:void 0}),r=M({},r,{value:void 0}),a=[];break;case"textarea":s=re(e,s),r=re(e,r),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&null!=s[u])if("style"===u){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=s?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ro=function(e,t,n,r){n!==r&&(t.flags|=4)};var Jo=!1,Yo=!1,Xo="function"===typeof WeakSet?WeakSet:Set,$o=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Nc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Nc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,void 0!==i&&el(t,n,i)}s=s.next}while(s!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hs],delete t[fs],delete t[ps],delete t[gs],delete t[ys])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(st,n)}catch(o){}switch(n.tag){case 5:Yo||Zo(n,t);case 6:var r=ul,s=dl;ul=null,hl(e,t,n),dl=s,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?ls(e.parentNode,n):1===e.nodeType&&ls(e,n),qt(e)):ls(ul,n.stateNode));break;case 4:r=ul,s=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=s;break;case 0:case 11:case 14:case 15:if(!Yo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&el(n,t,a),s=s.next}while(s!==r)}hl(e,t,n);break;case 1:if(!Yo&&(Zo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Nc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Yo=(r=Yo)||null!==n.memoizedState,hl(e,t,n),Yo=r):hl(e,t,n);break;default:hl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xo),t.forEach(function(t){var r=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function pl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(i(160));fl(a,o,s),ul=null,dl=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(u){Nc(s,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pl(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Nc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Nc(e,e.return,g)}}break;case 1:pl(t,e),yl(e),512&r&&null!==n&&Zo(n,n.return);break;case 5:if(pl(t,e),yl(e),512&r&&null!==n&&Zo(n,n.return),32&e.flags){var s=e.stateNode;try{he(s,"")}catch(g){Nc(e,e.return,g)}}if(4&r&&null!=(s=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(s,a),xe(l,o);var u=xe(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(s,h):"dangerouslySetInnerHTML"===d?de(s,h):"children"===d?he(s,h):x(s,d,h,u)}switch(l){case"input":$(s,a);break;case"textarea":ie(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var m=a.value;null!=m?ne(s,!!a.multiple,m,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(s,!!a.multiple,a.defaultValue,!0):ne(s,!!a.multiple,a.multiple?[]:"",!1))}s[fs]=a}catch(g){Nc(e,e.return,g)}}break;case 6:if(pl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(i(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(g){Nc(e,e.return,g)}}break;case 3:if(pl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(g){Nc(e,e.return,g)}break;case 4:default:pl(t,e),yl(e);break;case 13:pl(t,e),yl(e),8192&(s=e.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||(Bl=Xe())),4&r&&ml(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Yo=(u=Yo)||d,pl(t,e),Yo=u):pl(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for($o=e,d=e.child;null!==d;){for(h=$o=d;null!==$o;){switch(m=(f=$o).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Zo(f,f.return);var p=f.stateNode;if("function"===typeof p.componentWillUnmount){r=f,n=f.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){Nc(r,n,g)}}break;case 5:Zo(f,f.return);break;case 22:if(null!==f.memoizedState){wl(h);continue}}null!==m?(m.return=f,$o=m):wl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{s=h.stateNode,u?"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=pe("display",o))}catch(g){Nc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Nc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:pl(t,e),yl(e),4&r&&ml(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(he(s,""),r.flags&=-33),cl(e,ol(e),s);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,ol(e),a);break;default:throw Error(i(161))}}catch(o){Nc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){$o=e,xl(e,t,n)}function xl(e,t,n){for(var r=0!==(1&e.mode);null!==$o;){var s=$o,i=s.child;if(22===s.tag&&r){var a=null!==s.memoizedState||Jo;if(!a){var o=s.alternate,l=null!==o&&null!==o.memoizedState||Yo;o=Jo;var c=Yo;if(Jo=a,(Yo=l)&&!c)for($o=s;null!==$o;)l=(a=$o).child,22===a.tag&&null!==a.memoizedState?kl(s):null!==l?(l.return=a,$o=l):kl(s);for(;null!==i;)$o=i,xl(i,t,n),i=i.sibling;$o=s,Jo=o,Yo=c}bl(e)}else 0!==(8772&s.subtreeFlags)&&null!==i?(i.return=s,$o=i):bl(e)}}function bl(e){for(;null!==$o;){var t=$o;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yo||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Yo)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&zi(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}zi(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(i(163))}Yo||512&t.flags&&sl(t)}catch(f){Nc(t,t.return,f)}}if(t===e){$o=null;break}if(null!==(n=t.sibling)){n.return=t.return,$o=n;break}$o=t.return}}function wl(e){for(;null!==$o;){var t=$o;if(t===e){$o=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$o=n;break}$o=t.return}}function kl(e){for(;null!==$o;){var t=$o;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Nc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(l){Nc(t,s,l)}}var i=t.return;try{sl(t)}catch(l){Nc(t,i,l)}break;case 5:var a=t.return;try{sl(t)}catch(l){Nc(t,a,l)}}}catch(l){Nc(t,t.return,l)}if(t===e){$o=null;break}var o=t.sibling;if(null!==o){o.return=t.return,$o=o;break}$o=t.return}}var _l,Nl=Math.ceil,Sl=b.ReactCurrentDispatcher,El=b.ReactCurrentOwner,Al=b.ReactCurrentBatchConfig,Tl=0,Cl=null,Il=null,jl=0,Pl=0,Dl=Ns(0),Rl=0,Ol=null,Ll=0,Ml=0,Fl=0,Ul=null,Vl=null,Bl=0,ql=1/0,zl=null,Kl=!1,Wl=null,Hl=null,Gl=!1,Ql=null,Jl=0,Yl=0,Xl=null,$l=-1,Zl=0;function ec(){return 0!==(6&Tl)?Xe():-1!==$l?$l:$l=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Tl)&&0!==jl?jl&-jl:null!==pi.transition?(0===Zl&&(Zl=pt()),Zl):0!==(e=xt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,n,r){if(50<Yl)throw Yl=0,Xl=null,Error(i(185));yt(e,n,r),0!==(2&Tl)&&e===Cl||(e===Cl&&(0===(2&Tl)&&(Ml|=n),4===Rl&&oc(e,jl)),rc(e,r),1===n&&0===Tl&&0===(1&t.mode)&&(ql=Xe()+500,Us&&qs()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var r=ht(e,e===Cl?jl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Us=!0,Bs(e)}(lc.bind(null,e)):Bs(lc.bind(null,e)),as(function(){0===(6&Tl)&&qs()}),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Cc(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if($l=-1,Zl=0,0!==(6&Tl))throw Error(i(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var r=ht(e,e===Cl?jl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var s=Tl;Tl|=2;var a=mc();for(Cl===e&&jl===t||(zl=null,ql=Xe()+500,hc(e,t));;)try{vc();break}catch(l){fc(e,l)}Ei(),Sl.current=a,Tl=s,null!==Il?t=0:(Cl=null,jl=0,t=Rl)}if(0!==t){if(2===t&&(0!==(s=mt(e))&&(r=s,t=ic(e,s))),1===t)throw n=Ol,hc(e,0),oc(e,r),rc(e,Xe()),n;if(6===t)oc(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!or(i(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=gc(e,r))&&(0!==(a=mt(e))&&(r=a,t=ic(e,a))),1===t))throw n=Ol,hc(e,0),oc(e,r),rc(e,Xe()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:wc(e,Vl,zl);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Bl+500-Xe())){if(0!==ht(e,0))break;if(((s=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=rs(wc.bind(null,e,Vl,zl),t);break}wc(e,Vl,zl);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>s&&(s=o),r&=~a}if(r=s,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Nl(r/1960))-r)){e.timeoutHandle=rs(wc.bind(null,e,Vl,zl),r);break}wc(e,Vl,zl);break;default:throw Error(i(329))}}}return rc(e,Xe()),e.callbackNode===n?sc.bind(null,e):null}function ic(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Vl,Vl=n,null!==t&&ac(t)),e}function ac(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function oc(e,t){for(t&=~Fl,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Tl))throw Error(i(327));kc();var t=ht(e,0);if(0===(1&t))return rc(e,Xe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=mt(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Ol,hc(e,0),oc(e,t),rc(e,Xe()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Vl,zl),rc(e,Xe()),null}function cc(e,t){var n=Tl;Tl|=1;try{return e(t)}finally{0===(Tl=n)&&(ql=Xe()+500,Us&&qs())}}function uc(e){null!==Ql&&0===Ql.tag&&0===(6&Tl)&&kc();var t=Tl;Tl|=1;var n=Al.transition,r=xt;try{if(Al.transition=null,xt=1,e)return e()}finally{xt=r,Al.transition=n,0===(6&(Tl=t))&&qs()}}function dc(){Pl=Dl.current,Ss(Dl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ss(n)),null!==Il)for(n=Il.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ds();break;case 3:Yi(),Ss(Cs),Ss(Ts),na();break;case 5:$i(r);break;case 4:Yi();break;case 13:case 19:Ss(Zi);break;case 10:Ai(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Cl=e,Il=e=Dc(e.current,null),jl=Pl=t,Rl=0,Ol=null,Fl=Ml=Ll=0,Vl=Ul=null,null!==ji){for(t=0;t<ji.length;t++)if(null!==(r=(n=ji[t]).interleaved)){n.interleaved=null;var s=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=s,r.next=a}n.pending=r}ji=null}return e}function fc(e,t){for(;;){var n=Il;try{if(Ei(),ra.current=Xa,ca){for(var r=aa.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}ca=!1}if(ia=0,la=oa=aa=null,ua=!1,da=0,El.current=null,null===n||null===n.return){Rl=1,Ol=t,Il=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=jl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=go(o);if(null!==m){m.flags&=-257,yo(m,o,l,0,t),1&m.mode&&po(a,u,t),c=u;var p=(t=m).updateQueue;if(null===p){var g=new Set;g.add(c),t.updateQueue=g}else p.add(c);break e}if(0===(1&t)){po(a,u,t),pc();break e}c=Error(i(426))}else if(si&&1&l.mode){var y=go(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),yo(y,o,l,0,t),mi(lo(c,l));break e}}a=c=lo(c,l),4!==Rl&&(Rl=2),null===Ul?Ul=[a]:Ul.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Bi(a,fo(0,c,t));break e;case 1:l=c;var v=a.type,x=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Hl||!Hl.has(x)))){a.flags|=65536,t&=-t,a.lanes|=t,Bi(a,mo(a,l,t));break e}}a=a.return}while(null!==a)}bc(n)}catch(b){t=b,Il===n&&null!==n&&(Il=n=n.return);continue}break}}function mc(){var e=Sl.current;return Sl.current=Xa,null===e?Xa:e}function pc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Cl||0===(268435455&Ll)&&0===(268435455&Ml)||oc(Cl,jl)}function gc(e,t){var n=Tl;Tl|=2;var r=mc();for(Cl===e&&jl===t||(zl=null,hc(e,t));;)try{yc();break}catch(s){fc(e,s)}if(Ei(),Tl=n,Sl.current=r,null!==Il)throw Error(i(261));return Cl=null,jl=0,Rl}function yc(){for(;null!==Il;)xc(Il)}function vc(){for(;null!==Il&&!Je();)xc(Il)}function xc(e){var t=_l(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?bc(e):Il=t,El.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Go(n,t,Pl)))return void(Il=n)}else{if(null!==(n=Qo(n,t)))return n.flags&=32767,void(Il=n);if(null===e)return Rl=6,void(Il=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Il=t);Il=t=e}while(null!==t);0===Rl&&(Rl=5)}function wc(e,t,n){var r=xt,s=Al.transition;try{Al.transition=null,xt=1,function(e,t,n,r){do{kc()}while(null!==Ql);if(0!==(6&Tl))throw Error(i(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-at(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}(e,a),e===Cl&&(Il=Cl=null,jl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Cc(tt,function(){return kc(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Al.transition,Al.transition=null;var o=xt;xt=1;var l=Tl;Tl|=4,El.current=null,function(e,t){if(es=Kt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=o),f===a&&++d===r&&(c=o),null!==(m=h.nextSibling))break;f=(h=f).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ts={focusedElem:e,selectionRange:n},Kt=!1,$o=t;null!==$o;)if(e=(t=$o).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$o=e;else for(;null!==$o;){t=$o;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var g=p.memoizedProps,y=p.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(i(163))}}catch(w){Nc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,$o=e;break}$o=t.return}p=tl,tl=!1}(e,n),gl(n,e),mr(ts),Kt=!!es,ts=es=null,e.current=n,vl(n,e,s),Ye(),Tl=l,xt=o,Al.transition=a}else e.current=n;if(Gl&&(Gl=!1,Ql=e,Jl=s),a=e.pendingLanes,0===a&&(Hl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Kl)throw Kl=!1,e=Wl,Wl=null,e;0!==(1&Jl)&&0!==e.tag&&kc(),a=e.pendingLanes,0!==(1&a)?e===Xl?Yl++:(Yl=0,Xl=e):Yl=0,qs()}(e,t,n,r)}finally{Al.transition=s,xt=r}return null}function kc(){if(null!==Ql){var e=bt(Jl),t=Al.transition,n=xt;try{if(Al.transition=null,xt=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,Jl=0,0!==(6&Tl))throw Error(i(331));var s=Tl;for(Tl|=4,$o=e.current;null!==$o;){var a=$o,o=a.child;if(0!==(16&$o.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for($o=u;null!==$o;){var d=$o;switch(d.tag){case 0:case 11:case 15:nl(8,d,a)}var h=d.child;if(null!==h)h.return=d,$o=h;else for(;null!==$o;){var f=(d=$o).sibling,m=d.return;if(il(d),d===u){$o=null;break}if(null!==f){f.return=m,$o=f;break}$o=m}}}var p=a.alternate;if(null!==p){var g=p.child;if(null!==g){p.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}$o=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,$o=o;else e:for(;null!==$o;){if(0!==(2048&(a=$o).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,$o=v;break e}$o=a.return}}var x=e.current;for($o=x;null!==$o;){var b=(o=$o).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,$o=b;else e:for(o=x;null!==$o;){if(0!==(2048&(l=$o).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(k){Nc(l,l.return,k)}if(l===o){$o=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,$o=w;break e}$o=l.return}}if(Tl=s,qs(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(st,e)}catch(k){}r=!0}return r}finally{xt=n,Al.transition=t}}return!1}function _c(e,t,n){e=Ui(e,t=fo(0,t=lo(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Nc(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hl||!Hl.has(r))){t=Ui(t,e=mo(t,e=lo(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Cl===e&&(jl&n)===n&&(4===Rl||3===Rl&&(130023424&jl)===jl&&500>Xe()-Bl?hc(e,0):Fl|=n),rc(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Ri(e,t))&&(yt(e,t,n),rc(e,n))}function Ac(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Ec(e,n)}function Cc(e,t){return Ge(e,t)}function Ic(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jc(e,t,n,r){return new Ic(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=jc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,r,s,a){var o=2;if(r=e,"function"===typeof e)Pc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case _:return Oc(n.children,s,a,t);case N:o=8,s|=8;break;case S:return(e=jc(12,n,t,2|s)).elementType=S,e.lanes=a,e;case C:return(e=jc(13,n,t,s)).elementType=C,e.lanes=a,e;case I:return(e=jc(19,n,t,s)).elementType=I,e.lanes=a,e;case D:return Lc(n,s,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:o=10;break e;case A:o=9;break e;case T:o=11;break e;case j:o=14;break e;case P:o=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=jc(o,n,t,s)).elementType=e,t.type=r,t.lanes=a,t}function Oc(e,t,n,r){return(e=jc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=jc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=jc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=jc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,s,i,a,o,l){return e=new Uc(e,t,n,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=jc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Li(i),e}function Bc(e){if(!e)return As;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ps(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Ps(n))return Os(e,n,t)}return t}function qc(e,t,n,r,s,i,a,o,l){return(e=Vc(n,r,!0,e,0,i,0,o,l)).context=Bc(null),n=e.current,(i=Fi(r=ec(),s=tc(n))).callback=void 0!==t&&null!==t?t:null,Ui(n,i,s),e.current.lanes=s,yt(e,s,r),rc(e,r),e}function zc(e,t,n,r){var s=t.current,i=ec(),a=tc(s);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fi(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ui(s,t,a))&&(nc(e,s,a,i),Vi(e,s,a)),a}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}_l=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Cs.current)xo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xo=!1,function(e,t,n){switch(t.tag){case 3:Co(t),fi();break;case 5:Xi(t);break;case 1:Ps(t.type)&&Ls(t);break;case 4:Ji(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Es(ki,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Es(Zi,1&Zi.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Mo(e,t,n):(Es(Zi,1&Zi.current),null!==(e=Ko(e,t,n))?e.sibling:null);Es(Zi,1&Zi.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Es(Zi,Zi.current),r)break;return null;case 22:case 23:return t.lanes=0,No(e,t,n)}return Ko(e,t,n)}(e,t,n);xo=0!==(131072&e.flags)}else xo=!1,si&&0!==(1048576&t.flags)&&Zs(t,Hs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;zo(e,t),e=t.pendingProps;var s=js(t,Ts.current);Ci(t,n),s=pa(null,t,r,e,s,n);var a=ga();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ps(r)?(a=!0,Ls(t)):a=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Li(t),s.updater=ro,t.stateNode=s,s._reactInternals=t,oo(t,r,e,n),t=To(null,t,r,!0,a,n)):(t.tag=0,si&&a&&ei(t),bo(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(zo(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===j)return 14}return 2}(r),e=to(r,e),s){case 0:t=Eo(null,t,r,e,n);break e;case 1:t=Ao(null,t,r,e,n);break e;case 11:t=wo(null,t,r,e,n);break e;case 14:t=ko(null,t,r,to(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,Eo(e,t,r,s=t.elementType===r?s:to(r,s),n);case 1:return r=t.type,s=t.pendingProps,Ao(e,t,r,s=t.elementType===r?s:to(r,s),n);case 3:e:{if(Co(t),null===e)throw Error(i(387));r=t.pendingProps,s=(a=t.memoizedState).element,Mi(e,t),qi(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Io(e,t,r,n,s=lo(Error(i(423)),t));break e}if(r!==s){t=Io(e,t,r,n,s=lo(Error(i(424)),t));break e}for(ri=cs(t.stateNode.containerInfo.firstChild),ni=t,si=!0,ii=null,n=wi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===s){t=Ko(e,t,n);break e}bo(e,t,r,n)}t=t.child}return t;case 5:return Xi(t),null===e&&ci(t),r=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,o=s.children,ns(r,s)?o=null:null!==a&&ns(r,a)&&(t.flags|=32),So(e,t),bo(e,t,o,n),t.child;case 6:return null===e&&ci(t),null;case 13:return Mo(e,t,n);case 4:return Ji(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bi(t,null,r,n):bo(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,wo(e,t,r,s=t.elementType===r?s:to(r,s),n);case 7:return bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,Es(ki,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===s.children&&!Cs.current){t=Ko(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Fi(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ti(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(i(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ti(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}bo(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ci(t,n),r=r(s=Ii(s)),t.flags|=1,bo(e,t,r,n),t.child;case 14:return s=to(r=t.type,t.pendingProps),ko(e,t,r,s=to(r.type,s),n);case 15:return _o(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:to(r,s),zo(e,t),t.tag=1,Ps(r)?(e=!0,Ls(t)):e=!1,Ci(t,n),io(t,r,s),oo(t,r,s,n),To(null,t,r,!0,e,n);case 19:return qo(e,t,n);case 22:return No(e,t,n)}throw Error(i(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function Zc(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof s){var o=s;s=function(){var e=Kc(a);o.call(e)}}zc(t,a,e,s)}else a=function(e,t,n,r,s){if(s){if("function"===typeof r){var i=r;r=function(){var e=Kc(a);i.call(e)}}var a=qc(t,r,e,0,null,!1,0,"",$c);return e._reactRootContainer=a,e[ms]=a.current,qr(8===e.nodeType?e.parentNode:e),uc(),a}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var o=r;r=function(){var e=Kc(l);o.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=l,e[ms]=l.current,qr(8===e.nodeType?e.parentNode:e),uc(function(){zc(t,l,n,r)}),l}(n,t,e,s,r);return Kc(a)}Jc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));zc(e,t,null,null)},Jc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){zc(null,e,null,null)}),t[ms]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,Xe()),0===(6&Tl)&&(ql=Xe()+500,qs()))}break;case 13:uc(function(){var t=Ri(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Hc(e,1)}},kt=function(e){if(13===e.tag){var t=Ri(e,134217728);if(null!==t)nc(t,e,134217728,ec());Hc(e,134217728)}},_t=function(e){if(13===e.tag){var t=tc(e),n=Ri(e,t);if(null!==n)nc(n,e,t,ec());Hc(e,t)}},Nt=function(){return xt},St=function(e,t){var n=xt;try{return xt=e,t()}finally{xt=n}},ke=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=ws(r);if(!s)throw Error(i(90));G(r),$(r,s)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=cc,Ce=uc;var eu={usingClientEntryPoint:!1,Events:[xs,bs,ws,Ee,Ae,cc]},tu={findFiberByHostInstance:vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{st=ru.inject(nu),it=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(i(299));var n=!1,r="",s=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,s),e[ms]=t.current,qr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(i(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,s=!1,a="",o=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,s,0,a,o),e[ms]=t.current,qr(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Jc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(i(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(i(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[ms]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},786:(e,t,n)=>{"use strict";n.d(t,{IX:()=>Ue,eJ:()=>rt,xI:()=>En,hg:()=>lt,kZ:()=>tt,x9:()=>st,CI:()=>ct,f3:()=>at,r7:()=>it});var r=n(150),s=n(700),i=n(443);function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var o=n(812);function l(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const c=l,u=new s.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),d=new i.Vy("@firebase/auth");function h(e){if(d.logLevel<=i.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];d.error("Auth (".concat(r.MF,"): ").concat(e),...n)}}function f(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw y(e,...n)}function m(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return y(e,...n)}function p(e,t,n){const r=Object.assign(Object.assign({},c()),{[t]:n});return new s.FA("auth","Firebase",r).create(t,{appName:e.name})}function g(e){return p(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function y(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return u.create(e,...n)}function v(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw y(t,...r)}}function x(e){const t="INTERNAL ASSERTION FAILED: "+e;throw h(t),new Error(t)}function b(e,t){e||x(t)}function w(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function k(){return"http:"===_()||"https:"===_()}function _(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class N{constructor(e,t){this.shortDelay=e,this.longDelay=t,b(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,s.jZ)()||(0,s.lV)()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(k()||(0,s.sr)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function S(e,t){b(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class E{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void x("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void x("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void x("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const A={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},T=new N(3e4,6e4);function C(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function I(e,t,n,r){return j(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},a={};r&&("GET"===t?a=r:i={body:JSON.stringify(r)});const o=(0,s.Am)(Object.assign({key:e.config.apiKey},a)).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const c=Object.assign({method:t,headers:l},i);return(0,s.c1)()||(c.referrerPolicy="no-referrer"),E.fetch()(D(e,e.config.apiHost,n,o),c)})}async function j(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},A),t);try{const t=new O(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw L(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw L(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw L(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw L(e,"user-disabled",i);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw p(e,o,a);f(e,o)}}catch(i){if(i instanceof s.g)throw i;f(e,"network-request-failed",{message:String(i)})}}async function P(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await I(e,t,n,r,s);return"mfaPendingCredential"in i&&f(e,"multi-factor-auth-required",{_serverResponse:i}),i}function D(e,t,n,r){const s="".concat(t).concat(n,"?").concat(r);return e.config.emulator?S(e.config,s):"".concat(e.config.apiScheme,"://").concat(s)}function R(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class O{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(m(this.auth,"network-request-failed")),T.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function L(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=m(e,t,r);return s.customData._tokenResponse=n,s}function M(e){return void 0!==e&&void 0!==e.enterprise}class F{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return R(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function U(e,t){return I(e,"GET","/v2/recaptchaConfig",C(e,t))}async function V(e,t){return I(e,"POST","/v1/accounts:lookup",t)}function B(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function q(e){return 1e3*Number(e)}function z(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return h("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,s.u)(n);return e?JSON.parse(e):(h("Failed to decode base64 JWT payload"),null)}catch(i){return h("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function K(e){const t=z(e);return v(t,"internal-error"),v("undefined"!==typeof t.exp,"internal-error"),v("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function W(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof s.g&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class H{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class G{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=B(this.lastLoginAt),this.creationTime=B(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Q(e){var t;const n=e.auth,r=await e.getIdToken(),s=await W(e,V(n,{idToken:r}));v(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const a=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?J(i.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&i.passwordHash)&&!(null===o||void 0===o?void 0:o.length),h=!!u&&d,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new G(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function J(e){return e.map(e=>{var{providerId:t}=e,n=a(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Y{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){v(e.idToken,"internal-error"),v("undefined"!==typeof e.idToken,"internal-error"),v("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):K(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){v(0!==e.length,"internal-error");const t=K(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(v(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await j(e,{},async()=>{const n=(0,s.Am)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,a=D(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",E.fetch()(a,{method:"POST",headers:o,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new Y;return n&&(v("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(v("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(v("number"===typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Y,this.toJSON())}_performRefresh(){return x("not implemented")}}function X(e,t){v("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class ${constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=a(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new H(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new G(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await W(this,this.stsTokenManager.getToken(this.auth,e));return v(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,s.Ku)(e),r=await n.getIdToken(t),i=z(r);v(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a="object"===typeof i.firebase?i.firebase:void 0,o=null===a||void 0===a?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:B(q(i.auth_time)),issuedAtTime:B(q(i.iat)),expirationTime:B(q(i.exp)),signInProvider:o||null,signInSecondFactor:(null===a||void 0===a?void 0:a.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,s.Ku)(e);await Q(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(v(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new $(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){v(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Q(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,r.xZ)(this.auth.app))return Promise.reject(g(this.auth));const e=await this.getIdToken();return await W(this,async function(e,t){return I(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,i,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,f=null!==(i=t.photoURL)&&void 0!==i?i:void 0,m=null!==(a=t.tenantId)&&void 0!==a?a:void 0,p=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:x,emailVerified:b,isAnonymous:w,providerData:k,stsTokenManager:_}=t;v(x&&_,e,"internal-error");const N=Y.fromJSON(this.name,_);v("string"===typeof x,e,"internal-error"),X(u,e.name),X(d,e.name),v("boolean"===typeof b,e,"internal-error"),v("boolean"===typeof w,e,"internal-error"),X(h,e.name),X(f,e.name),X(m,e.name),X(p,e.name),X(g,e.name),X(y,e.name);const S=new $({uid:x,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:h,tenantId:m,stsTokenManager:N,createdAt:g,lastLoginAt:y});return k&&Array.isArray(k)&&(S.providerData=k.map(e=>Object.assign({},e))),p&&(S._redirectEventId=p),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Y;r.updateFromServerResponse(t);const s=new $({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Q(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];v(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?J(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length),a=new Y;a.updateFromIdToken(n);const o=new $({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:i}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new G(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length)};return Object.assign(o,l),o}}const Z=new Map;function ee(e){b(e instanceof Function,"Expected a class definition");let t=Z.get(e);return t?(b(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Z.set(e,t),t)}class te{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}te.type="NONE";const ne=te;function re(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class se{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=re(this.userKey,r.apiKey,s),this.fullPersistenceKey=re("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?$._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new se(ee(ne),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||ee(ne);const i=re(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(i);if(t){const n=$._fromJSON(e,t);c!==s&&(a=n),s=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&o.length?(s=o[0],a&&await s._set(i,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(i)}catch(l){}})),new se(s,e,n)):new se(s,e,n)}}function ie(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ce(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ae(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(de(t))return"Blackberry";if(he(t))return"Webos";if(oe(t))return"Safari";if((t.includes("chrome/")||le(t))&&!t.includes("edge/"))return"Chrome";if(ue(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function ae(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/firefox\//i.test(e)}function oe(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function le(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/crios\//i.test(e)}function ce(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/iemobile/i.test(e)}function ue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/android/i.test(e)}function de(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/blackberry/i.test(e)}function he(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/webos/i.test(e)}function fe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function me(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return fe(e)||ue(e)||he(e)||de(e)||/windows phone/i.test(e)||ce(e)}function pe(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ie((0,s.ZQ)());break;case"Worker":t="".concat(ie((0,s.ZQ)()),"-").concat(e);break;default:t=e}const i=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(r.MF,"/").concat(i)}class ge{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(s){r(s)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class ye{constructor(e){var t,n,r,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,i,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(s=o.containsUppercaseLetter)||void 0===s||s),o.isValid&&(o.isValid=null===(i=o.containsNumericCharacter)||void 0===i||i),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class ve{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new be(this),this.idTokenSubscription=new be(this),this.beforeStateQueue=new ge(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=u,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ee(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await se.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(s){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await V(this,{idToken:e}),n=await $._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if((0,r.xZ)(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,r=null===s||void 0===s?void 0:s._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==r||!(null===a||void 0===a?void 0:a.user)||(s=a.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return v(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Q(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if((0,r.xZ)(this.app))return Promise.reject(g(this));const t=e?(0,s.Ku)(e):null;return t&&v(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&v(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(0,r.xZ)(this.app)?Promise.reject(g(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return(0,r.xZ)(this.app)?Promise.reject(g(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ee(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return I(e,"GET","/v2/passwordPolicy",C(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new ye(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new s.FA("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return I(e,"POST","/v2/accounts:revokeToken",C(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ee(e)||this._popupRedirectResolver;v(t,this,"argument-error"),this.redirectPersistenceManager=await se.create(this,[ee(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(v(a,this,"internal-error"),a.then(()=>{i||s(this.currentUser)}),"function"===typeof t){const s=e.addObserver(t,n,r);return()=>{i=!0,s()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return v(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(d.logLevel<=i.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];d.warn("Auth (".concat(r.MF,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function xe(e){return(0,s.Ku)(e)}class be{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,s.tD)(e=>this.observer=e)}get next(){return v(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let we={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ke(e){return we.loadJS(e)}function _e(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Ne{constructor(e){this.type="recaptcha-enterprise",this.auth=xe(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;M(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{U(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new F(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(s=>{if(!t&&M(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=we.recaptchaEnterpriseScript;0!==t.length&&(t+=s),ke(t).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Se(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=new Ne(e);let i;try{i=await s.verify(n)}catch(o){i=await s.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ee(e,t,n,r){var s;if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Se(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch(async s=>{if(s.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const s=await Se(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)})}function Ae(e,t,n){const r=xe(e);v(r._canInitEmulator,r,"emulator-config-failed"),v(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(null===n||void 0===n?void 0:n.disableWarnings),i=Te(t),{host:a,port:o}=function(e){const t=Te(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:Ce(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Ce(t)}}}(t),l=null===o?"":":".concat(o);r.config.emulator={url:"".concat(i,"//").concat(a).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Te(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ce(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ie{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return x("not implemented")}_getIdTokenResponse(e){return x("not implemented")}_linkToIdToken(e,t){return x("not implemented")}_getReauthenticationResolver(e){return x("not implemented")}}async function je(e,t){return I(e,"POST","/v1/accounts:signUp",t)}async function Pe(e,t){return P(e,"POST","/v1/accounts:signInWithPassword",C(e,t))}class De extends Ie{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new De(e,t,"password")}static _fromEmailAndCode(e,t){return new De(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Ee(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Pe);case"emailLink":return async function(e,t){return P(e,"POST","/v1/accounts:signInWithEmailLink",C(e,t))}(e,{email:this._email,oobCode:this._password});default:f(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ee(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",je);case"emailLink":return async function(e,t){return P(e,"POST","/v1/accounts:signInWithEmailLink",C(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:f(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Re(e,t){return P(e,"POST","/v1/accounts:signInWithIdp",C(e,t))}class Oe extends Ie{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Oe(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):f("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=a(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new Oe(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){return Re(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Re(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Re(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,s.Am)(t)}return e}}const Le={USER_NOT_FOUND:"user-not-found"};class Me extends Ie{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Me({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Me({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return P(e,"POST","/v1/accounts:signInWithPhoneNumber",C(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await P(e,"POST","/v1/accounts:signInWithPhoneNumber",C(e,t));if(n.temporaryProof)throw L(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return P(e,"POST","/v1/accounts:signInWithPhoneNumber",C(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Le)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new Me({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class Fe{constructor(e){var t,n,r,i,a,o;const l=(0,s.I9)((0,s.hp)(e)),c=null!==(t=l.apiKey)&&void 0!==t?t:null,u=null!==(n=l.oobCode)&&void 0!==n?n:null,d=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=l.mode)&&void 0!==r?r:null);v(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=null!==(i=l.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(a=l.languageCode)&&void 0!==a?a:null,this.tenantId=null!==(o=l.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=(0,s.I9)((0,s.hp)(e)).link,n=t?(0,s.I9)((0,s.hp)(t)).deep_link_id:null,r=(0,s.I9)((0,s.hp)(e)).deep_link_id;return(r?(0,s.I9)((0,s.hp)(r)).link:null)||r||n||t||e}(e);try{return new Fe(t)}catch(n){return null}}}class Ue{constructor(){this.providerId=Ue.PROVIDER_ID}static credential(e,t){return De._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Fe.parseLink(t);return v(n,"argument-error"),De._fromEmailAndCode(e,n.code,n.tenantId)}}Ue.PROVIDER_ID="password",Ue.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ue.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ve{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Be extends Ve{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class qe extends Be{constructor(){super("facebook.com")}static credential(e){return Oe._fromParams({providerId:qe.PROVIDER_ID,signInMethod:qe.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qe.credentialFromTaggedObject(e)}static credentialFromError(e){return qe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return qe.credential(t.oauthAccessToken)}catch(n){return null}}}qe.FACEBOOK_SIGN_IN_METHOD="facebook.com",qe.PROVIDER_ID="facebook.com";class ze extends Be{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Oe._fromParams({providerId:ze.PROVIDER_ID,signInMethod:ze.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ze.credentialFromTaggedObject(e)}static credentialFromError(e){return ze.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return ze.credential(n,r)}catch(s){return null}}}ze.GOOGLE_SIGN_IN_METHOD="google.com",ze.PROVIDER_ID="google.com";class Ke extends Be{constructor(){super("github.com")}static credential(e){return Oe._fromParams({providerId:Ke.PROVIDER_ID,signInMethod:Ke.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ke.credentialFromTaggedObject(e)}static credentialFromError(e){return Ke.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ke.credential(t.oauthAccessToken)}catch(n){return null}}}Ke.GITHUB_SIGN_IN_METHOD="github.com",Ke.PROVIDER_ID="github.com";class We extends Be{constructor(){super("twitter.com")}static credential(e,t){return Oe._fromParams({providerId:We.PROVIDER_ID,signInMethod:We.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return We.credentialFromTaggedObject(e)}static credentialFromError(e){return We.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return We.credential(n,r)}catch(s){return null}}}async function He(e,t){return P(e,"POST","/v1/accounts:signUp",C(e,t))}We.TWITTER_SIGN_IN_METHOD="twitter.com",We.PROVIDER_ID="twitter.com";class Ge{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await $._fromIdTokenResponse(e,n,r),i=Qe(n);return new Ge({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Qe(n);return new Ge({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Qe(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Je extends s.g{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Je.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Je(e,t,n,r)}}function Ye(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Je._fromErrorAndOperation(e,n,t,r);throw n})}async function Xe(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await W(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ge._forOperation(e,"link",r)}async function $e(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:s}=e;if((0,r.xZ)(s.app))return Promise.reject(g(s));const i="reauthenticate";try{const r=await W(e,Ye(s,i,t,e),n);v(r.idToken,s,"internal-error");const a=z(r.idToken);v(a,s,"internal-error");const{sub:o}=a;return v(e.uid===o,s,"user-mismatch"),Ge._forOperation(e,i,r)}catch(a){throw(null===a||void 0===a?void 0:a.code)==="auth/".concat("user-not-found")&&f(s,"user-mismatch"),a}}async function Ze(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,r.xZ)(e.app))return Promise.reject(g(e));const s="signIn",i=await Ye(e,s,t),a=await Ge._fromIdTokenResponse(e,s,i);return n||await e._updateCurrentUser(a.user),a}async function et(e,t){return Ze(xe(e),t)}async function tt(e,t){return $e((0,s.Ku)(e),t)}async function nt(e){const t=xe(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function rt(e,t,n){if((0,r.xZ)(e.app))return Promise.reject(g(e));const s=xe(e),i=Ee(s,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",He),a=await i.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&nt(e),t}),o=await Ge._fromIdTokenResponse(s,"signIn",a);return await s._updateCurrentUser(o.user),o}function st(e,t,n){return(0,r.xZ)(e.app)?Promise.reject(g(e)):et((0,s.Ku)(e),Ue.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&nt(e),t})}async function it(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=(0,s.Ku)(e),a={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await W(i,async function(e,t){return I(e,"POST","/v1/accounts:update",t)}(i.auth,a));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const l=i.providerData.find(e=>{let{providerId:t}=e;return"password"===t});l&&(l.displayName=i.displayName,l.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}function at(e,t){return ot((0,s.Ku)(e),null,t)}async function ot(e,t,n){const{auth:r}=e,s={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(s.email=t),n&&(s.password=n);const i=await W(e,async function(e,t){return I(e,"POST","/v1/accounts:update",t)}(r,s));await e._updateTokensIfNecessary(i,!0)}function lt(e,t,n,r){return(0,s.Ku)(e).onAuthStateChanged(t,n,r)}function ct(e){return(0,s.Ku)(e).signOut()}new WeakMap;const ut="__sak";class dt{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ut,"1"),this.storage.removeItem(ut),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class ht extends dt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=me(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);(0,s.lT)()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ht.type="LOCAL";const ft=ht;class mt extends dt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}mt.type="SESSION";const pt=mt;class gt{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new gt(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(!(null===i||void 0===i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(i).map(async e=>e(t.origin,s)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function yt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}gt.receivers=[];class vt{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise((a,o)=>{const l=yt("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(c),clearTimeout(s),o(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function xt(){return window}function bt(){return"undefined"!==typeof xt().WorkerGlobalScope&&"function"===typeof xt().importScripts}const wt="firebaseLocalStorageDb",kt="firebaseLocalStorage",_t="fbase_key";class Nt{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function St(e,t){return e.transaction([kt],t?"readwrite":"readonly").objectStore(kt)}function Et(){const e=indexedDB.open(wt,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(kt,{keyPath:_t})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(kt)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(wt);return new Nt(e).toPromise()}(),t(await Et()))})})}async function At(e,t,n){const r=St(e,!0).put({[_t]:t,value:n});return new Nt(r).toPromise()}function Tt(e,t){const n=St(e,!0).delete(t);return new Nt(n).toPromise()}class Ct{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Et()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bt()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gt._getInstance(bt()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new vt(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Et();return await At(e,ut,"1"),await Tt(e,ut),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>At(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=St(e,!1).get(t),r=await new Nt(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Tt(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=St(e,!1).getAll();return new Nt(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Ct.type="LOCAL";const It=Ct;_e("rcb"),new N(3e4,6e4);const jt="recaptcha";async function Pt(e,t,n){var r;const s=await n.verify();try{let i;if(v("string"===typeof s,e,"argument-error"),v(n.type===jt,e,"argument-error"),i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){v("enroll"===t.type,e,"internal-error");const n=await function(e,t){return I(e,"POST","/v2/accounts/mfaEnrollment:start",C(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:s}});return n.phoneSessionInfo.sessionInfo}{v("signin"===t.type,e,"internal-error");const n=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;v(n,e,"missing-multi-factor-info");const a=await function(e,t){return I(e,"POST","/v2/accounts/mfaSignIn:start",C(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:s}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return I(e,"POST","/v1/accounts:sendVerificationCode",C(e,t))}(e,{phoneNumber:i.phoneNumber,recaptchaToken:s});return t}}finally{n._reset()}}class Dt{constructor(e){this.providerId=Dt.PROVIDER_ID,this.auth=xe(e)}verifyPhoneNumber(e,t){return Pt(this.auth,e,(0,s.Ku)(t))}static credential(e,t){return Me._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Dt.credentialFromTaggedObject(t)}static credentialFromError(e){return Dt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Me._fromTokenResponse(n,r):null}}function Rt(e,t){return t?ee(t):(v(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Dt.PROVIDER_ID="phone",Dt.PHONE_SIGN_IN_METHOD="phone";class Ot extends Ie{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Re(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Re(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Re(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Lt(e){return Ze(e.auth,new Ot(e),e.bypassAuthState)}function Mt(e){const{auth:t,user:n}=e;return v(n,t,"internal-error"),$e(n,new Ot(e),e.bypassAuthState)}async function Ft(e){const{auth:t,user:n}=e;return v(n,t,"internal-error"),Xe(n,new Ot(e),e.bypassAuthState)}class Ut{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:a}=e;if(i)return void this.reject(i);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Lt;case"linkViaPopup":case"linkViaRedirect":return Ft;case"reauthViaPopup":case"reauthViaRedirect":return Mt;default:f(this.auth,"internal-error")}}resolve(e){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Vt=new N(2e3,1e4);class Bt extends Ut{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,Bt.currentPopupAction&&Bt.currentPopupAction.cancel(),Bt.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return v(e,this.auth,"internal-error"),e}async onExecution(){b(1===this.filter.length,"Popup operations only handle one event");const e=yt();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(m(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(m(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bt.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(m(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Vt.get())};e()}}Bt.currentPopupAction=null;const qt=new Map;class zt extends Ut{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=qt.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Ht(t),r=Wt(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}qt.set(this.auth._key(),e)}return this.bypassAuthState||qt.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Kt(e,t){qt.set(e._key(),t)}function Wt(e){return ee(e._redirectPersistence)}function Ht(e){return re("pendingRedirect",e.config.apiKey,e.name)}async function Gt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,r.xZ)(e.app))return Promise.reject(g(e));const s=xe(e),i=Rt(s,t),a=new zt(s,i,n),o=await a.execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,t)),o}class Qt{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yt(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Yt(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(m(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jt(e))}saveEventToCache(e){this.cachedEventUids.add(Jt(e)),this.lastProcessedEventTime=Date.now()}}function Jt(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Yt(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Xt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$t=/^https?/;async function Zt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return I(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(en(r))return}catch(n){}f(e,"unauthorized-domain")}function en(e){const t=w(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!$t.test(n))return!1;if(Xt.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const tn=new N(3e4,6e4);function nn(){const e=xt().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function rn(e){return new Promise((t,n)=>{var r,s,i;function a(){nn(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{nn(),n(m(e,"network-request-failed"))},timeout:tn.get()})}if(null===(s=null===(r=xt().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=xt().gapi)||void 0===i?void 0:i.load)){const t=_e("iframefcb");return xt()[t]=()=>{gapi.load?a():n(m(e,"network-request-failed"))},ke("".concat(we.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}a()}}).catch(e=>{throw sn=null,e})}let sn=null;const an=new N(5e3,15e3),on={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ln=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cn(e){const t=e.config;v(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?S(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),i={apiKey:t.apiKey,appName:e.name,v:r.MF},a=ln.get(e.config.apiHost);a&&(i.eid=a);const o=e._getFrameworks();return o.length&&(i.fw=o.join(",")),"".concat(n,"?").concat((0,s.Am)(i).slice(1))}async function un(e){const t=await function(e){return sn=sn||rn(e),sn}(e),n=xt().gapi;return v(n,e,"internal-error"),t.open({where:document.body,url:cn(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:on,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=m(e,"network-request-failed"),i=xt().setTimeout(()=>{r(s)},an.get());function a(){xt().clearTimeout(i),n(t)}t.ping(a).then(a,()=>{r(s)})}))}const dn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class hn{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function fn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},dn),{width:r.toString(),height:i.toString(),top:a,left:o}),u=(0,s.ZQ)().toLowerCase();n&&(l=le(u)?"_blank":n),ae(u)&&(t=t||"http://localhost",c.scrollbars="yes");const d=Object.entries(c).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return fe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==l)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",l),new hn(null);const h=window.open(t||"",l,d);v(h,e,"popup-blocked");try{h.focus()}catch(f){}return new hn(h)}const mn="__/auth/handler",pn="emulator/auth/handler",gn=encodeURIComponent("fac");async function yn(e,t,n,i,a,o){v(e.config.authDomain,e,"auth-domain-config-required"),v(e.config.apiKey,e,"invalid-api-key");const l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:r.MF,eventId:a};if(t instanceof Ve){t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,s.Im)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))l[e]=t}if(t instanceof Be){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(l.scopes=e.join(","))}e.tenantId&&(l.tid=e.tenantId);const c=l;for(const r of Object.keys(c))void 0===c[r]&&delete c[r];const u=await e._getAppCheckToken(),d=u?"#".concat(gn,"=").concat(encodeURIComponent(u)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(mn);return S(t,pn)}(e),"?").concat((0,s.Am)(c).slice(1)).concat(d)}const vn="webStorageSupport";const xn=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pt,this._completeRedirectFn=Gt,this._overrideRedirectResult=Kt}async _openPopup(e,t,n,r){var s;b(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return fn(e,await yn(e,t,n,w(),r),yt())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){xt().location.href=e}(await yn(e,t,n,w(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(b(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await un(e),n=new Qt(e);return t.register("authEvent",t=>{v(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(vn,{type:vn},n=>{var r;const s=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[vn];void 0!==s&&t(!!s),f(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Zt(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return me()||oe()||fe()}};var bn="@firebase/auth",wn="1.7.9";class kn{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){v(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const _n=(0,s.XA)("authIdTokenMaxAge")||300;let Nn=null;const Sn=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>_n)return;const s=null===n||void 0===n?void 0:n.token;Nn!==s&&(Nn=s,await fetch(e,{method:s?"POST":"DELETE",headers:s?{Authorization:"Bearer ".concat(s)}:{}}))};function En(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)();const t=(0,r.j6)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=(0,r.j6)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if((0,s.bD)(r,null!==t&&void 0!==t?t:{}))return e;f(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:xn,persistence:[It,ft,pt]}),i=(0,s.XA)("authTokenSyncURL");if(i&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(i,location.origin);if(location.origin===e.origin){const t=Sn(e.toString());!function(e,t,n){(0,s.Ku)(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){(0,s.Ku)(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}const a=(0,s.Tj)("auth");return a&&Ae(n,"http://".concat(a)),n}var An;we={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=m("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},An="Browser",(0,r.om)(new o.uA("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;v(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:An,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pe(An)},c=new ve(r,s,i,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ee);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,r.om)(new o.uA("auth-internal",e=>(e=>new kn(e))(xe(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,r.KO)(bn,wn,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(An)),(0,r.KO)(bn,wn,"esm2017")},812:(e,t,n)=>{"use strict";n.d(t,{h1:()=>o,uA:()=>s});var r=n(700);class s{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const i="[DEFAULT]";class a{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.cY;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:i})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===i?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(a){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.component?this.component.multipleInstances?e:i:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class o{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new a(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},958:(e,t,n)=>{"use strict";n.d(t,{auth:()=>l,db:()=>c,I:()=>u});var r=n(150);(0,r.KO)("firebase","10.14.1","app");var s=n(786),i=n(472),a=n(147);const o=(0,r.Wp)({apiKey:"AIzaSyAsFuX2L8ZgzRyf0ThYnKwkHDahqC9i-yE",authDomain:"heaven-project-7bb83.firebaseapp.com",projectId:"heaven-project-7bb83",storageBucket:"heaven-project-7bb83.firebasestorage.app",messagingSenderId:"958216608835",appId:"1:958216608835:web:844f2244c2197a377d08f6"}),l=(0,s.xI)(o),c=(0,i.getFirestore)(o),u=(0,a.c7)(o)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,s){if(1&s&&(r=this(r)),8&s)return r;if("object"===typeof r&&r){if(4&s&&r.__esModule)return r;if(16&s&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&s&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>a[e]=()=>r[e]);return a.default=()=>r,n.d(i,a),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>gg,hasStandardBrowserEnv:()=>vg,hasStandardBrowserWebWorkerEnv:()=>xg,navigator:()=>yg,origin:()=>bg});var t,r=n(43),s=n.t(r,2),i=n(391),a=n(950),o=n.t(a,2);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const c="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function d(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(wn){}}}function h(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,r){return void 0===n&&(n=null),l({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?p(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function m(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function p(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function g(e,n,r,s){void 0===s&&(s={});let{window:i=document.defaultView,v5Compat:a=!1}=s,o=i.history,d=t.Pop,p=null,g=y();function y(){return(o.state||{idx:null}).idx}function v(){d=t.Pop;let e=y(),n=null==e?null:e-g;g=e,p&&p({action:d,location:b.location,delta:n})}function x(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:m(e);return n=n.replace(/ $/,"%20"),u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,o.replaceState(l({},o.state,{idx:g}),""));let b={get action(){return d},get location(){return e(i,o)},listen(e){if(p)throw new Error("A history only accepts one active listener");return i.addEventListener(c,v),p=e,()=>{i.removeEventListener(c,v),p=null}},createHref:e=>n(i,e),createURL:x,encodeLocation(e){let t=x(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){d=t.Push;let s=f(b.location,e,n);r&&r(s,e),g=y()+1;let l=h(s,g),c=b.createHref(s);try{o.pushState(l,"",c)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;i.location.assign(c)}a&&p&&p({action:d,location:b.location,delta:1})},replace:function(e,n){d=t.Replace;let s=f(b.location,e,n);r&&r(s,e),g=y();let i=h(s,g),l=b.createHref(s);o.replaceState(i,"",l),a&&p&&p({action:d,location:b.location,delta:0})},go:e=>o.go(e)};return b}var y;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(y||(y={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(e,t,n){return void 0===n&&(n="/"),x(e,t,n,!1)}function x(e,t,n,r){let s=D(("string"===typeof t?p(t):t).pathname||"/",n);if(null==s)return null;let i=b(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let a=null;for(let o=0;null==a&&o<i.length;++o){let e=P(s);a=I(i[o],e,r)}return a}function b(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let s=(e,s,i)=>{let a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};a.relativePath.startsWith("/")&&(u(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let o=F([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),b(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:C(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of w(e.path))s(e,t,r);else s(e,t)}),t}function w(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return s?[i,""]:[i];let a=w(r.join("/")),o=[];return o.push(...a.map(e=>""===e?i:[i,e].join("/"))),s&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const k=/^:[\w-]+$/,_=3,N=2,S=1,E=10,A=-2,T=e=>"*"===e;function C(e,t){let n=e.split("/"),r=n.length;return n.some(T)&&(r+=A),t&&(r+=N),n.filter(e=>!T(e)).reduce((e,t)=>e+(k.test(t)?_:""===t?S:E),r)}function I(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,s={},i="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===i?t:t.slice(i.length)||"/",u=j({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=j({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(s,u.params),a.push({params:s,pathname:F([i,u.pathname]),pathnameBase:U(F([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=F([i,u.pathnameBase]))}return a}function j(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);d("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let i=new RegExp(s,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1),l=r.reduce((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=o[n]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:i,pathnameBase:a,pattern:e}}function P(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return d(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function D(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function R(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function O(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function L(e,t){let n=O(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function M(e,t,n,r){let s;void 0===r&&(r=!1),"string"===typeof e?s=p(e):(s=l({},e),u(!s.pathname||!s.pathname.includes("?"),R("?","pathname","search",s)),u(!s.pathname||!s.pathname.includes("#"),R("#","pathname","hash",s)),u(!s.search||!s.search.includes("#"),R("#","search","hash",s)));let i,a=""===e||""===s.pathname,o=a?"/":s.pathname;if(null==o)i=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}i=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:s=""}="string"===typeof e?p(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:V(r),hash:B(s)}}(s,i),d=o&&"/"!==o&&o.endsWith("/"),h=(a||"."===o)&&n.endsWith("/");return c.pathname.endsWith("/")||!d&&!h||(c.pathname+="/"),c}const F=e=>e.join("/").replace(/\/\/+/g,"/"),U=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),V=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",B=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function q(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const z=["post","put","patch","delete"],K=(new Set(z),["get",...z]);new Set(K),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}const H=r.createContext(null);const G=r.createContext(null);const Q=r.createContext(null);const J=r.createContext(null);const Y=r.createContext({outlet:null,matches:[],isDataRoute:!1});const X=r.createContext(null);function $(){return null!=r.useContext(J)}function Z(){return $()||u(!1),r.useContext(J).location}function ee(e){r.useContext(Q).static||r.useLayoutEffect(e)}function te(){let{isDataRoute:e}=r.useContext(Y);return e?function(){let{router:e}=he(ue.UseNavigateStable),t=me(de.UseNavigateStable),n=r.useRef(!1);ee(()=>{n.current=!0});let s=r.useCallback(function(r,s){void 0===s&&(s={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,W({fromRouteId:t},s)))},[e,t]);return s}():function(){$()||u(!1);let e=r.useContext(H),{basename:t,future:n,navigator:s}=r.useContext(Q),{matches:i}=r.useContext(Y),{pathname:a}=Z(),o=JSON.stringify(L(i,n.v7_relativeSplatPath)),l=r.useRef(!1);return ee(()=>{l.current=!0}),r.useCallback(function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void s.go(n);let i=M(n,JSON.parse(o),a,"path"===r.relative);null==e&&"/"!==t&&(i.pathname="/"===i.pathname?t:F([t,i.pathname])),(r.replace?s.replace:s.push)(i,r.state,r)},[t,s,o,a,e])}()}const ne=r.createContext(null);function re(e,t){let{relative:n}=void 0===t?{}:t,{future:s}=r.useContext(Q),{matches:i}=r.useContext(Y),{pathname:a}=Z(),o=JSON.stringify(L(i,s.v7_relativeSplatPath));return r.useMemo(()=>M(e,JSON.parse(o),a,"path"===n),[e,o,a,n])}function se(e,n,s,i){$()||u(!1);let{navigator:a}=r.useContext(Q),{matches:o}=r.useContext(Y),l=o[o.length-1],c=l?l.params:{},d=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,f=Z();if(n){var m;let e="string"===typeof n?p(n):n;"/"===d||(null==(m=e.pathname)?void 0:m.startsWith(d))||u(!1),h=e}else h=f;let g=h.pathname||"/",y=g;if("/"!==d){let e=d.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let x=v(e,{pathname:y});let b=ce(x&&x.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:F([d,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:F([d,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,s,i);return n&&b?r.createElement(J.Provider,{value:{location:W({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:t.Pop}},b):b}function ie(){let e=function(){var e;let t=r.useContext(X),n=fe(de.UseRouteError),s=me(de.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[s]}(),t=q(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:s};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:i},n):null,null)}const ae=r.createElement(ie,null);class oe extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(Y.Provider,{value:this.props.routeContext},r.createElement(X.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function le(e){let{routeContext:t,match:n,children:s}=e,i=r.useContext(H);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(Y.Provider,{value:t},s)}function ce(e,t,n,s){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===s&&(s=null),null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=s)&&a.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,l=null==(i=n)?void 0:i.errors;if(null!=l){let e=o.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||u(!1),o=o.slice(0,Math.min(o.length,e+1))}let c=!1,d=-1;if(n&&s&&s.v7_partialHydration)for(let r=0;r<o.length;r++){let e=o[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=r),e.route.id){let{loaderData:t,errors:r}=n,s=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||s){c=!0,o=d>=0?o.slice(0,d+1):[o[0]];break}}}return o.reduceRight((e,s,i)=>{let a,u=!1,h=null,f=null;var m;n&&(a=l&&s.route.id?l[s.route.id]:void 0,h=s.route.errorElement||ae,c&&(d<0&&0===i?(m="route-fallback",!1||pe[m]||(pe[m]=!0),u=!0,f=null):d===i&&(u=!0,f=s.route.hydrateFallbackElement||null)));let p=t.concat(o.slice(0,i+1)),g=()=>{let t;return t=a?h:u?f:s.route.Component?r.createElement(s.route.Component,null):s.route.element?s.route.element:e,r.createElement(le,{match:s,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(s.route.ErrorBoundary||s.route.errorElement||0===i)?r.createElement(oe,{location:n.location,revalidation:n.revalidation,component:h,error:a,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}var ue=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ue||{}),de=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(de||{});function he(e){let t=r.useContext(H);return t||u(!1),t}function fe(e){let t=r.useContext(G);return t||u(!1),t}function me(e){let t=function(){let e=r.useContext(Y);return e||u(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||u(!1),n.route.id}const pe={};function ge(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}s.startTransition;function ye(e){let{to:t,replace:n,state:s,relative:i}=e;$()||u(!1);let{future:a,static:o}=r.useContext(Q),{matches:l}=r.useContext(Y),{pathname:c}=Z(),d=te(),h=M(t,L(l,a.v7_relativeSplatPath),c,"path"===i),f=JSON.stringify(h);return r.useEffect(()=>d(JSON.parse(f),{replace:n,state:s,relative:i}),[d,f,i,n,s]),null}function ve(e){return function(e){let t=r.useContext(Y).outlet;return t?r.createElement(ne.Provider,{value:e},t):t}(e.context)}function xe(e){u(!1)}function be(e){let{basename:n="/",children:s=null,location:i,navigationType:a=t.Pop,navigator:o,static:l=!1,future:c}=e;$()&&u(!1);let d=n.replace(/^\/*/,"/"),h=r.useMemo(()=>({basename:d,navigator:o,static:l,future:W({v7_relativeSplatPath:!1},c)}),[d,c,o,l]);"string"===typeof i&&(i=p(i));let{pathname:f="/",search:m="",hash:g="",state:y=null,key:v="default"}=i,x=r.useMemo(()=>{let e=D(f,d);return null==e?null:{location:{pathname:e,search:m,hash:g,state:y,key:v},navigationType:a}},[d,f,m,g,y,v,a]);return null==x?null:r.createElement(Q.Provider,{value:h},r.createElement(J.Provider,{children:s,value:x}))}function we(e){let{children:t,location:n}=e;return se(ke(t),n)}new Promise(()=>{});r.Component;function ke(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,(e,s)=>{if(!r.isValidElement(e))return;let i=[...t,s];if(e.type===r.Fragment)return void n.push.apply(n,ke(e.props.children,i));e.type!==xe&&u(!1),e.props.index&&e.props.children&&u(!1);let a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=ke(e.props.children,i)),n.push(a)}),n}function _e(){return _e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_e.apply(this,arguments)}function Ne(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Se=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(wn){}new Map;const Ee=s.startTransition;o.flushSync,s.useId;function Ae(e){let{basename:t,children:n,future:s,window:i}=e,a=r.useRef();var o;null==a.current&&(a.current=(void 0===(o={window:i,v5Compat:!0})&&(o={}),g(function(e,t){let{pathname:n,search:r,hash:s}=e.location;return f("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:m(t)},null,o)));let l=a.current,[c,u]=r.useState({action:l.action,location:l.location}),{v7_startTransition:d}=s||{},h=r.useCallback(e=>{d&&Ee?Ee(()=>u(e)):u(e)},[u,d]);return r.useLayoutEffect(()=>l.listen(h),[l,h]),r.useEffect(()=>ge(s),[s]),r.createElement(be,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:s})}const Te="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ce=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ie=r.forwardRef(function(e,t){let n,{onClick:s,relative:i,reloadDocument:a,replace:o,state:l,target:c,to:d,preventScrollReset:h,viewTransition:f}=e,p=Ne(e,Se),{basename:g}=r.useContext(Q),y=!1;if("string"===typeof d&&Ce.test(d)&&(n=d,Te))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),n=D(t.pathname,g);t.origin===e.origin&&null!=n?d=n+t.search+t.hash:y=!0}catch(wn){}let v=function(e,t){let{relative:n}=void 0===t?{}:t;$()||u(!1);let{basename:s,navigator:i}=r.useContext(Q),{hash:a,pathname:o,search:l}=re(e,{relative:n}),c=o;return"/"!==s&&(c="/"===o?s:F([s,o])),i.createHref({pathname:c,search:l,hash:a})}(d,{relative:i}),x=function(e,t){let{target:n,replace:s,state:i,preventScrollReset:a,relative:o,viewTransition:l}=void 0===t?{}:t,c=te(),u=Z(),d=re(e,{relative:o});return r.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==s?s:m(u)===m(d);c(e,{replace:n,state:i,preventScrollReset:a,relative:o,viewTransition:l})}},[u,c,d,s,i,n,e,a,o,l])}(d,{replace:o,state:l,target:c,preventScrollReset:h,relative:i,viewTransition:f});return r.createElement("a",_e({},p,{href:n||v,onClick:y||a?s:function(e){s&&s(e),e.defaultPrevented||x(e)},ref:t,target:c}))});var je,Pe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(je||(je={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Pe||(Pe={}));var De,Re,Oe=n(555);function Le(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Me(e,t,n){Le(e,t),t.set(e,n)}function Fe(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function Ue(e,t){return e.get(Fe(e,t))}function Ve(e,t,n){return e.set(Fe(e,t),n),n}var Be={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},qe=(De=new WeakMap,Re=new WeakMap,class{constructor(){Me(this,De,Be),Me(this,Re,!1)}setTimeoutProvider(e){Ve(De,this,e)}setTimeout(e,t){return Ue(De,this).setTimeout(e,t)}clearTimeout(e){Ue(De,this).clearTimeout(e)}setInterval(e,t){return Ue(De,this).setInterval(e,t)}clearInterval(e){Ue(De,this).clearInterval(e)}}),ze=new qe;var Ke="undefined"===typeof window||"Deno"in globalThis;function We(){}function He(e){return"number"===typeof e&&e>=0&&e!==1/0}function Ge(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Qe(e,t){return"function"===typeof e?e(t):e}function Je(e,t){return"function"===typeof e?e(t):e}function Ye(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:a,stale:o}=e;if(a)if(r){if(t.queryHash!==$e(a,t.options))return!1}else if(!et(t.queryKey,a))return!1;if("all"!==n){const e=t.isActive();if("active"===n&&!e)return!1;if("inactive"===n&&e)return!1}return("boolean"!==typeof o||t.isStale()===o)&&((!s||s===t.state.fetchStatus)&&!(i&&!i(t)))}function Xe(e,t){const{exact:n,status:r,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(Ze(t.options.mutationKey)!==Ze(i))return!1}else if(!et(t.options.mutationKey,i))return!1}return(!r||t.state.status===r)&&!(s&&!s(t))}function $e(e,t){return((null===t||void 0===t?void 0:t.queryKeyHashFn)||Ze)(e)}function Ze(e){return JSON.stringify(e,(e,t)=>it(t)?Object.keys(t).sort().reduce((e,n)=>(e[n]=t[n],e),{}):t)}function et(e,t){return e===t||typeof e===typeof t&&(!(!e||!t||"object"!==typeof e||"object"!==typeof t)&&Object.keys(t).every(n=>et(e[n],t[n])))}var tt=Object.prototype.hasOwnProperty;function nt(e,t){if(e===t)return e;const n=st(e)&&st(t);if(!n&&(!it(e)||!it(t)))return t;const r=(n?e:Object.keys(e)).length,s=n?t:Object.keys(t),i=s.length,a=n?new Array(i):{};let o=0;for(let l=0;l<i;l++){const i=n?l:s[l],c=e[i],u=t[i];if(c===u){a[i]=c,(n?l<r:tt.call(e,i))&&o++;continue}if(null===c||null===u||"object"!==typeof c||"object"!==typeof u){a[i]=u;continue}const d=nt(c,u);a[i]=d,d===c&&o++}return r===i&&o===r?e:a}function rt(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function st(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function it(e){if(!at(e))return!1;const t=e.constructor;if(void 0===t)return!0;const n=t.prototype;return!!at(n)&&(!!n.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype)}function at(e){return"[object Object]"===Object.prototype.toString.call(e)}function ot(e,t,n){return"function"===typeof n.structuralSharing?n.structuralSharing(e,t):!1!==n.structuralSharing?nt(e,t):t}function lt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=[...e,t];return n&&r.length>n?r.slice(1):r}function ct(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var ut=Symbol();function dt(e,t){return!e.queryFn&&null!==t&&void 0!==t&&t.initialPromise?()=>t.initialPromise:e.queryFn&&e.queryFn!==ut?e.queryFn:()=>Promise.reject(new Error("Missing queryFn: '".concat(e.queryHash,"'")))}function ht(e,t){Le(e,t),t.add(e)}var ft=function(e){setTimeout(e,0)};var mt,pt,gt,yt,vt,xt,bt=function(){let e=[],t=0,n=e=>{e()},r=e=>{e()},s=ft;const i=r=>{t?e.push(r):s(()=>{n(r)})};return{batch:i=>{let a;t++;try{a=i()}finally{t--,t||(()=>{const t=e;e=[],t.length&&s(()=>{r(()=>{t.forEach(e=>{n(e)})})})})()}return a},batchCalls:e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];i(()=>{e(...n)})},schedule:i,setNotifyFunction:e=>{n=e},setBatchNotifyFunction:e=>{r=e},setScheduler:e=>{s=e}}}(),wt=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},kt=new(mt=new WeakMap,pt=new WeakMap,gt=new WeakMap,class extends wt{constructor(){super(),Me(this,mt,void 0),Me(this,pt,void 0),Me(this,gt,void 0),Ve(gt,this,e=>{if(!Ke&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){Ue(pt,this)||this.setEventListener(Ue(gt,this))}onUnsubscribe(){var e;this.hasListeners()||(null===(e=Ue(pt,this))||void 0===e||e.call(this),Ve(pt,this,void 0))}setEventListener(e){var t;Ve(gt,this,e),null===(t=Ue(pt,this))||void 0===t||t.call(this),Ve(pt,this,e(e=>{"boolean"===typeof e?this.setFocused(e):this.onFocus()}))}setFocused(e){Ue(mt,this)!==e&&(Ve(mt,this,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return"boolean"===typeof Ue(mt,this)?Ue(mt,this):"hidden"!==(null===(e=globalThis.document)||void 0===e?void 0:e.visibilityState)}}),_t=new(yt=new WeakMap,vt=new WeakMap,xt=new WeakMap,class extends wt{constructor(){super(),Me(this,yt,!0),Me(this,vt,void 0),Me(this,xt,void 0),Ve(xt,this,e=>{if(!Ke&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}})}onSubscribe(){Ue(vt,this)||this.setEventListener(Ue(xt,this))}onUnsubscribe(){var e;this.hasListeners()||(null===(e=Ue(vt,this))||void 0===e||e.call(this),Ve(vt,this,void 0))}setEventListener(e){var t;Ve(xt,this,e),null===(t=Ue(vt,this))||void 0===t||t.call(this),Ve(vt,this,e(this.setOnline.bind(this)))}setOnline(e){Ue(yt,this)!==e&&(Ve(yt,this,e),this.listeners.forEach(t=>{t(e)}))}isOnline(){return Ue(yt,this)}});function Nt(){let e,t;const n=new Promise((n,r)=>{e=n,t=r});function r(e){Object.assign(n,e),delete n.resolve,delete n.reject}return n.status="pending",n.catch(()=>{}),n.resolve=t=>{r({status:"fulfilled",value:t}),e(t)},n.reject=e=>{r({status:"rejected",reason:e}),t(e)},n}function St(e){return Math.min(1e3*2**e,3e4)}function Et(e){return"online"!==(null!==e&&void 0!==e?e:"online")||_t.isOnline()}var At,Tt=class extends Error{constructor(e){super("CancelledError"),this.revert=null===e||void 0===e?void 0:e.revert,this.silent=null===e||void 0===e?void 0:e.silent}};function Ct(e){let t,n=!1,r=0;const s=Nt(),i=()=>"pending"!==s.status,a=()=>kt.isFocused()&&("always"===e.networkMode||_t.isOnline())&&e.canRun(),o=()=>Et(e.networkMode)&&e.canRun(),l=e=>{var n;i()||(null===(n=t)||void 0===n||n(),s.resolve(e))},c=e=>{var n;i()||(null===(n=t)||void 0===n||n(),s.reject(e))},u=()=>new Promise(n=>{var r;t=e=>{(i()||a())&&n(e)},null===(r=e.onPause)||void 0===r||r.call(e)}).then(()=>{var n;(t=void 0,i())||(null===(n=e.onContinue)||void 0===n||n.call(e))}),d=()=>{if(i())return;let t;const s=0===r?e.initialPromise:void 0;try{t=null!==s&&void 0!==s?s:e.fn()}catch(o){t=Promise.reject(o)}Promise.resolve(t).then(l).catch(t=>{var s,o,l;if(i())return;const h=null!==(s=e.retry)&&void 0!==s?s:Ke?0:3,f=null!==(o=e.retryDelay)&&void 0!==o?o:St,m="function"===typeof f?f(r,t):f,p=!0===h||"number"===typeof h&&r<h||"function"===typeof h&&h(r,t);var g;!n&&p?(r++,null===(l=e.onFail)||void 0===l||l.call(e,r,t),(g=m,new Promise(e=>{ze.setTimeout(e,g)})).then(()=>a()?void 0:u()).then(()=>{n?c(t):d()})):c(t)})};return{promise:s,status:()=>s.status,cancel:t=>{if(!i()){var n;const r=new Tt(t);c(r),null===(n=e.onCancel)||void 0===n||n.call(e,r)}},continue:()=>{var e;return null===(e=t)||void 0===e||e(),s},cancelRetry:()=>{n=!0},continueRetry:()=>{n=!1},canStart:o,start:()=>(o()?d():u().then(d),s)}}var It,jt,Pt,Dt,Rt,Ot,Lt,Mt,Ft,Ut=(At=new WeakMap,class{constructor(){Me(this,At,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),He(this.gcTime)&&Ve(At,this,ze.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,null!==e&&void 0!==e?e:Ke?1/0:3e5)}clearGcTimeout(){Ue(At,this)&&(ze.clearTimeout(Ue(At,this)),Ve(At,this,void 0))}}),Vt=(It=new WeakMap,jt=new WeakMap,Pt=new WeakMap,Dt=new WeakMap,Rt=new WeakMap,Ot=new WeakMap,Lt=new WeakMap,Mt=new WeakSet,class extends Ut{constructor(e){var t;super(),ht(this,Mt),Me(this,It,void 0),Me(this,jt,void 0),Me(this,Pt,void 0),Me(this,Dt,void 0),Me(this,Rt,void 0),Me(this,Ot,void 0),Me(this,Lt,void 0),Ve(Lt,this,!1),Ve(Ot,this,e.defaultOptions),this.setOptions(e.options),this.observers=[],Ve(Dt,this,e.client),Ve(Pt,this,Ue(Dt,this).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Ve(It,this,Kt(this.options)),this.state=null!==(t=e.state)&&void 0!==t?t:Ue(It,this),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return null===(e=Ue(Rt,this))||void 0===e?void 0:e.promise}setOptions(e){if(this.options=(0,Oe.A)((0,Oe.A)({},Ue(Ot,this)),e),this.updateGcTime(this.options.gcTime),this.state&&void 0===this.state.data){const e=Kt(this.options);void 0!==e.data&&(this.setState(zt(e.data,e.dataUpdatedAt)),Ve(It,this,e))}}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||Ue(Pt,this).remove(this)}setData(e,t){const n=ot(this.state.data,e,this.options);return Fe(Mt,this,Bt).call(this,{data:n,type:"success",dataUpdatedAt:null===t||void 0===t?void 0:t.updatedAt,manual:null===t||void 0===t?void 0:t.manual}),n}setState(e,t){Fe(Mt,this,Bt).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var t,n;const r=null===(t=Ue(Rt,this))||void 0===t?void 0:t.promise;return null===(n=Ue(Rt,this))||void 0===n||n.cancel(e),r?r.then(We).catch(We):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Ue(It,this))}isActive(){return this.observers.some(e=>!1!==Je(e.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ut||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(e=>"static"===Qe(e.options.staleTime,this))}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return void 0===this.state.data||"static"!==e&&(!!this.state.isInvalidated||!Ge(this.state.dataUpdatedAt,e))}onFocus(){var e;const t=this.observers.find(e=>e.shouldFetchOnWindowFocus());null===t||void 0===t||t.refetch({cancelRefetch:!1}),null===(e=Ue(Rt,this))||void 0===e||e.continue()}onOnline(){var e;const t=this.observers.find(e=>e.shouldFetchOnReconnect());null===t||void 0===t||t.refetch({cancelRefetch:!1}),null===(e=Ue(Rt,this))||void 0===e||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),Ue(Pt,this).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(Ue(Rt,this)&&(Ue(Lt,this)?Ue(Rt,this).cancel({revert:!0}):Ue(Rt,this).cancelRetry()),this.scheduleGc()),Ue(Pt,this).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Fe(Mt,this,Bt).call(this,{type:"invalidate"})}async fetch(e,t){var n,r,s;if("idle"!==this.state.fetchStatus&&"rejected"!==(null===(n=Ue(Rt,this))||void 0===n?void 0:n.status()))if(void 0!==this.state.data&&null!==t&&void 0!==t&&t.cancelRefetch)this.cancel({silent:!0});else if(Ue(Rt,this))return Ue(Rt,this).continueRetry(),Ue(Rt,this).promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}const i=new AbortController,a=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(Ve(Lt,this,!0),i.signal)})},o=()=>{const e=dt(this.options,t),n=(()=>{const e={client:Ue(Dt,this),queryKey:this.queryKey,meta:this.meta};return a(e),e})();return Ve(Lt,this,!1),this.options.persister?this.options.persister(e,n,this):e(n)},l=(()=>{const e={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:Ue(Dt,this),state:this.state,fetchFn:o};return a(e),e})();var c;(null===(r=this.options.behavior)||void 0===r||r.onFetch(l,this),Ve(jt,this,this.state),"idle"===this.state.fetchStatus||this.state.fetchMeta!==(null===(s=l.fetchOptions)||void 0===s?void 0:s.meta))&&Fe(Mt,this,Bt).call(this,{type:"fetch",meta:null===(c=l.fetchOptions)||void 0===c?void 0:c.meta});Ve(Rt,this,Ct({initialPromise:null===t||void 0===t?void 0:t.initialPromise,fn:l.fetchFn,onCancel:e=>{e instanceof Tt&&e.revert&&this.setState((0,Oe.A)((0,Oe.A)({},Ue(jt,this)),{},{fetchStatus:"idle"})),i.abort()},onFail:(e,t)=>{Fe(Mt,this,Bt).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{Fe(Mt,this,Bt).call(this,{type:"pause"})},onContinue:()=>{Fe(Mt,this,Bt).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{var u,d,h,f;const e=await Ue(Rt,this).start();if(void 0===e)throw new Error("".concat(this.queryHash," data is undefined"));return this.setData(e),null===(u=(d=Ue(Pt,this).config).onSuccess)||void 0===u||u.call(d,e,this),null===(h=(f=Ue(Pt,this).config).onSettled)||void 0===h||h.call(f,e,this.state.error,this),e}catch(v){var m,p,g,y;if(v instanceof Tt){if(v.silent)return Ue(Rt,this).promise;if(v.revert){if(void 0===this.state.data)throw v;return this.state.data}}throw Fe(Mt,this,Bt).call(this,{type:"error",error:v}),null===(m=(p=Ue(Pt,this).config).onError)||void 0===m||m.call(p,v,this),null===(g=(y=Ue(Pt,this).config).onSettled)||void 0===g||g.call(y,this.state.data,v,this),v}finally{this.scheduleGc()}}});function Bt(e){this.state=(t=>{var n;switch(e.type){case"failed":return(0,Oe.A)((0,Oe.A)({},t),{},{fetchFailureCount:e.failureCount,fetchFailureReason:e.error});case"pause":return(0,Oe.A)((0,Oe.A)({},t),{},{fetchStatus:"paused"});case"continue":return(0,Oe.A)((0,Oe.A)({},t),{},{fetchStatus:"fetching"});case"fetch":return(0,Oe.A)((0,Oe.A)((0,Oe.A)({},t),qt(t.data,this.options)),{},{fetchMeta:null!==(n=e.meta)&&void 0!==n?n:null});case"success":const r=(0,Oe.A)((0,Oe.A)((0,Oe.A)({},t),zt(e.data,e.dataUpdatedAt)),{},{dataUpdateCount:t.dataUpdateCount+1},!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null});return Ve(jt,this,e.manual?r:void 0),r;case"error":const s=e.error;return(0,Oe.A)((0,Oe.A)({},t),{},{error:s,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"});case"invalidate":return(0,Oe.A)((0,Oe.A)({},t),{},{isInvalidated:!0});case"setState":return(0,Oe.A)((0,Oe.A)({},t),e.state)}})(this.state),bt.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),Ue(Pt,this).notify({query:this,type:"updated",action:e})})}function qt(e,t){return(0,Oe.A)({fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Et(t.networkMode)?"fetching":"paused"},void 0===e&&{error:null,status:"pending"})}function zt(e,t){return{data:e,dataUpdatedAt:null!==t&&void 0!==t?t:Date.now(),error:null,isInvalidated:!1,status:"success"}}function Kt(e){const t="function"===typeof e.initialData?e.initialData():e.initialData,n=void 0!==t,r=n?"function"===typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?null!==r&&void 0!==r?r:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Wt,Ht,Gt,Qt,Jt,Yt,Xt,$t,Zt=(Ft=new WeakMap,class extends wt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),Me(this,Ft,void 0),this.config=e,Ve(Ft,this,new Map)}build(e,t,n){var r;const s=t.queryKey,i=null!==(r=t.queryHash)&&void 0!==r?r:$e(s,t);let a=this.get(i);return a||(a=new Vt({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){Ue(Ft,this).has(e.queryHash)||(Ue(Ft,this).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=Ue(Ft,this).get(e.queryHash);t&&(e.destroy(),t===e&&Ue(Ft,this).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){bt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Ue(Ft,this).get(e)}getAll(){return[...Ue(Ft,this).values()]}find(e){const t=(0,Oe.A)({exact:!0},e);return this.getAll().find(e=>Ye(t,e))}findAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.getAll();return Object.keys(e).length>0?t.filter(t=>Ye(e,t)):t}notify(e){bt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){bt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){bt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}}),en=(Wt=new WeakMap,Ht=new WeakMap,Gt=new WeakMap,Qt=new WeakMap,Jt=new WeakSet,class extends Ut{constructor(e){super(),ht(this,Jt),Me(this,Wt,void 0),Me(this,Ht,void 0),Me(this,Gt,void 0),Me(this,Qt,void 0),Ve(Wt,this,e.client),this.mutationId=e.mutationId,Ve(Gt,this,e.mutationCache),Ve(Ht,this,[]),this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){Ue(Ht,this).includes(e)||(Ue(Ht,this).push(e),this.clearGcTimeout(),Ue(Gt,this).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Ve(Ht,this,Ue(Ht,this).filter(t=>t!==e)),this.scheduleGc(),Ue(Gt,this).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){Ue(Ht,this).length||("pending"===this.state.status?this.scheduleGc():Ue(Gt,this).remove(this))}continue(){var e,t;return null!==(e=null===(t=Ue(Qt,this))||void 0===t?void 0:t.continue())&&void 0!==e?e:this.execute(this.state.variables)}async execute(e){var t;const n=()=>{Fe(Jt,this,tn).call(this,{type:"continue"})},r={client:Ue(Wt,this),meta:this.options.meta,mutationKey:this.options.mutationKey};Ve(Qt,this,Ct({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{Fe(Jt,this,tn).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{Fe(Jt,this,tn).call(this,{type:"pause"})},onContinue:n,retry:null!==(t=this.options.retry)&&void 0!==t?t:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Ue(Gt,this).canRun(this)}));const s="pending"===this.state.status,i=!Ue(Qt,this).canStart();try{var a,o,l,c,u,d,h,f;if(s)n();else{var m,p,g,y;Fe(Jt,this,tn).call(this,{type:"pending",variables:e,isPaused:i}),await(null===(m=(p=Ue(Gt,this).config).onMutate)||void 0===m?void 0:m.call(p,e,this,r));const t=await(null===(g=(y=this.options).onMutate)||void 0===g?void 0:g.call(y,e,r));t!==this.state.context&&Fe(Jt,this,tn).call(this,{type:"pending",context:t,variables:e,isPaused:i})}const t=await Ue(Qt,this).start();return await(null===(a=(o=Ue(Gt,this).config).onSuccess)||void 0===a?void 0:a.call(o,t,e,this.state.context,this,r)),await(null===(l=(c=this.options).onSuccess)||void 0===l?void 0:l.call(c,t,e,this.state.context,r)),await(null===(u=(d=Ue(Gt,this).config).onSettled)||void 0===u?void 0:u.call(d,t,null,this.state.variables,this.state.context,this,r)),await(null===(h=(f=this.options).onSettled)||void 0===h?void 0:h.call(f,t,null,e,this.state.context,r)),Fe(Jt,this,tn).call(this,{type:"success",data:t}),t}catch(E){try{var v,x,b,w,k,_,N,S;throw await(null===(v=(x=Ue(Gt,this).config).onError)||void 0===v?void 0:v.call(x,E,e,this.state.context,this,r)),await(null===(b=(w=this.options).onError)||void 0===b?void 0:b.call(w,E,e,this.state.context,r)),await(null===(k=(_=Ue(Gt,this).config).onSettled)||void 0===k?void 0:k.call(_,void 0,E,this.state.variables,this.state.context,this,r)),await(null===(N=(S=this.options).onSettled)||void 0===N?void 0:N.call(S,void 0,E,e,this.state.context,r)),E}finally{Fe(Jt,this,tn).call(this,{type:"error",error:E})}}finally{Ue(Gt,this).runNext(this)}}});function tn(e){this.state=(t=>{switch(e.type){case"failed":return(0,Oe.A)((0,Oe.A)({},t),{},{failureCount:e.failureCount,failureReason:e.error});case"pause":return(0,Oe.A)((0,Oe.A)({},t),{},{isPaused:!0});case"continue":return(0,Oe.A)((0,Oe.A)({},t),{},{isPaused:!1});case"pending":return(0,Oe.A)((0,Oe.A)({},t),{},{context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()});case"success":return(0,Oe.A)((0,Oe.A)({},t),{},{data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1});case"error":return(0,Oe.A)((0,Oe.A)({},t),{},{data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"})}})(this.state),bt.batch(()=>{Ue(Ht,this).forEach(t=>{t.onMutationUpdate(e)}),Ue(Gt,this).notify({mutation:this,type:"updated",action:e})})}var nn,rn,sn,an,on,ln,cn,un,dn=(Yt=new WeakMap,Xt=new WeakMap,$t=new WeakMap,class extends wt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),Me(this,Yt,void 0),Me(this,Xt,void 0),Me(this,$t,void 0),this.config=e,Ve(Yt,this,new Set),Ve(Xt,this,new Map),Ve($t,this,0)}build(e,t,n){var r;const s=new en({client:e,mutationCache:this,mutationId:Ve($t,this,(r=Ue($t,this),++r)),options:e.defaultMutationOptions(t),state:n});return this.add(s),s}add(e){Ue(Yt,this).add(e);const t=hn(e);if("string"===typeof t){const n=Ue(Xt,this).get(t);n?n.push(e):Ue(Xt,this).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Ue(Yt,this).delete(e)){const t=hn(e);if("string"===typeof t){const n=Ue(Xt,this).get(t);if(n)if(n.length>1){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}else n[0]===e&&Ue(Xt,this).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=hn(e);if("string"===typeof t){const n=Ue(Xt,this).get(t),r=null===n||void 0===n?void 0:n.find(e=>"pending"===e.state.status);return!r||r===e}return!0}runNext(e){const t=hn(e);if("string"===typeof t){var n,r;const s=null===(n=Ue(Xt,this).get(t))||void 0===n?void 0:n.find(t=>t!==e&&t.state.isPaused);return null!==(r=null===s||void 0===s?void 0:s.continue())&&void 0!==r?r:Promise.resolve()}return Promise.resolve()}clear(){bt.batch(()=>{Ue(Yt,this).forEach(e=>{this.notify({type:"removed",mutation:e})}),Ue(Yt,this).clear(),Ue(Xt,this).clear()})}getAll(){return Array.from(Ue(Yt,this))}find(e){const t=(0,Oe.A)({exact:!0},e);return this.getAll().find(e=>Xe(t,e))}findAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.getAll().filter(t=>Xe(e,t))}notify(e){bt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(e=>e.state.isPaused);return bt.batch(()=>Promise.all(e.map(e=>e.continue().catch(We))))}});function hn(e){var t;return null===(t=e.options.scope)||void 0===t?void 0:t.id}function fn(e){return{onFetch:(t,n)=>{var r,s,i;const a=t.options,o=null===(r=t.fetchOptions)||void 0===r||null===(r=r.meta)||void 0===r||null===(r=r.fetchMore)||void 0===r?void 0:r.direction,l=(null===(s=t.state.data)||void 0===s?void 0:s.pages)||[],c=(null===(i=t.state.data)||void 0===i?void 0:i.pageParams)||[];let u={pages:[],pageParams:[]},d=0;const h=async()=>{let n=!1;const r=dt(t.options,t.fetchOptions),s=async(e,s,i)=>{if(n)return Promise.reject();if(null==s&&e.pages.length)return Promise.resolve(e);const a=(()=>{const e={client:t.client,queryKey:t.queryKey,pageParam:s,direction:i?"backward":"forward",meta:t.options.meta};var r;return r=e,Object.defineProperty(r,"signal",{enumerable:!0,get:()=>(t.signal.aborted?n=!0:t.signal.addEventListener("abort",()=>{n=!0}),t.signal)}),e})(),o=await r(a),{maxPages:l}=t.options,c=i?ct:lt;return{pages:c(e.pages,o,l),pageParams:c(e.pageParams,s,l)}};if(o&&l.length){const e="backward"===o,t={pages:l,pageParams:c},n=(e?pn:mn)(a,t);u=await s(t,n,e)}else{const t=null!==e&&void 0!==e?e:l.length;do{var i;const e=0===d?null!==(i=c[0])&&void 0!==i?i:a.initialPageParam:mn(a,u);if(d>0&&null==e)break;u=await s(u,e),d++}while(d<t)}return u};t.options.persister?t.fetchFn=()=>{var e,r;return null===(e=(r=t.options).persister)||void 0===e?void 0:e.call(r,h,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=h}}}function mn(e,t){let{pages:n,pageParams:r}=t;const s=n.length-1;return n.length>0?e.getNextPageParam(n[s],n,r[s],r):void 0}function pn(e,t){var n;let{pages:r,pageParams:s}=t;return r.length>0?null===(n=e.getPreviousPageParam)||void 0===n?void 0:n.call(e,r[0],r,s[0],s):void 0}var gn=(nn=new WeakMap,rn=new WeakMap,sn=new WeakMap,an=new WeakMap,on=new WeakMap,ln=new WeakMap,cn=new WeakMap,un=new WeakMap,class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Me(this,nn,void 0),Me(this,rn,void 0),Me(this,sn,void 0),Me(this,an,void 0),Me(this,on,void 0),Me(this,ln,void 0),Me(this,cn,void 0),Me(this,un,void 0),Ve(nn,this,e.queryCache||new Zt),Ve(rn,this,e.mutationCache||new dn),Ve(sn,this,e.defaultOptions||{}),Ve(an,this,new Map),Ve(on,this,new Map),Ve(ln,this,0)}mount(){var e;Ve(ln,this,(e=Ue(ln,this),e++,e)),1===Ue(ln,this)&&(Ve(cn,this,kt.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ue(nn,this).onFocus())})),Ve(un,this,_t.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ue(nn,this).onOnline())})))}unmount(){var e,t,n;Ve(ln,this,(e=Ue(ln,this),e--,e)),0===Ue(ln,this)&&(null===(t=Ue(cn,this))||void 0===t||t.call(this),Ve(cn,this,void 0),null===(n=Ue(un,this))||void 0===n||n.call(this),Ve(un,this,void 0))}isFetching(e){return Ue(nn,this).findAll((0,Oe.A)((0,Oe.A)({},e),{},{fetchStatus:"fetching"})).length}isMutating(e){return Ue(rn,this).findAll((0,Oe.A)((0,Oe.A)({},e),{},{status:"pending"})).length}getQueryData(e){var t;const n=this.defaultQueryOptions({queryKey:e});return null===(t=Ue(nn,this).get(n.queryHash))||void 0===t?void 0:t.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=Ue(nn,this).build(this,t),r=n.state.data;return void 0===r?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(Qe(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return Ue(nn,this).findAll(e).map(e=>{let{queryKey:t,state:n}=e;return[t,n.data]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=Ue(nn,this).get(r.queryHash),i=function(e,t){return"function"===typeof e?e(t):e}(t,null===s||void 0===s?void 0:s.state.data);if(void 0!==i)return Ue(nn,this).build(this,r).setData(i,(0,Oe.A)((0,Oe.A)({},n),{},{manual:!0}))}setQueriesData(e,t,n){return bt.batch(()=>Ue(nn,this).findAll(e).map(e=>{let{queryKey:r}=e;return[r,this.setQueryData(r,t,n)]}))}getQueryState(e){var t;const n=this.defaultQueryOptions({queryKey:e});return null===(t=Ue(nn,this).get(n.queryHash))||void 0===t?void 0:t.state}removeQueries(e){const t=Ue(nn,this);bt.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){const n=Ue(nn,this);return bt.batch(()=>(n.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries((0,Oe.A)({type:"active"},e),t)))}cancelQueries(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=(0,Oe.A)({revert:!0},t),r=bt.batch(()=>Ue(nn,this).findAll(e).map(e=>e.cancel(n)));return Promise.all(r).then(We).catch(We)}invalidateQueries(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return bt.batch(()=>{var n,r;return Ue(nn,this).findAll(e).forEach(e=>{e.invalidate()}),"none"===(null===e||void 0===e?void 0:e.refetchType)?Promise.resolve():this.refetchQueries((0,Oe.A)((0,Oe.A)({},e),{},{type:null!==(n=null!==(r=null===e||void 0===e?void 0:e.refetchType)&&void 0!==r?r:null===e||void 0===e?void 0:e.type)&&void 0!==n?n:"active"}),t)})}refetchQueries(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=(0,Oe.A)((0,Oe.A)({},n),{},{cancelRefetch:null===(t=n.cancelRefetch)||void 0===t||t}),s=bt.batch(()=>Ue(nn,this).findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let t=e.fetch(void 0,r);return r.throwOnError||(t=t.catch(We)),"paused"===e.state.fetchStatus?Promise.resolve():t}));return Promise.all(s).then(We)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const n=Ue(nn,this).build(this,t);return n.isStaleByTime(Qe(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(We).catch(We)}fetchInfiniteQuery(e){return e.behavior=fn(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(We).catch(We)}ensureInfiniteQueryData(e){return e.behavior=fn(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return _t.isOnline()?Ue(rn,this).resumePausedMutations():Promise.resolve()}getQueryCache(){return Ue(nn,this)}getMutationCache(){return Ue(rn,this)}getDefaultOptions(){return Ue(sn,this)}setDefaultOptions(e){Ve(sn,this,e)}setQueryDefaults(e,t){Ue(an,this).set(Ze(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Ue(an,this).values()],n={};return t.forEach(t=>{et(e,t.queryKey)&&Object.assign(n,t.defaultOptions)}),n}setMutationDefaults(e,t){Ue(on,this).set(Ze(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Ue(on,this).values()],n={};return t.forEach(t=>{et(e,t.mutationKey)&&Object.assign(n,t.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t=(0,Oe.A)((0,Oe.A)((0,Oe.A)((0,Oe.A)({},Ue(sn,this).queries),this.getQueryDefaults(e.queryKey)),e),{},{_defaulted:!0});return t.queryHash||(t.queryHash=$e(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===ut&&(t.enabled=!1),t}defaultMutationOptions(e){return null!==e&&void 0!==e&&e._defaulted?e:(0,Oe.A)((0,Oe.A)((0,Oe.A)((0,Oe.A)({},Ue(sn,this).mutations),(null===e||void 0===e?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey)),e),{},{_defaulted:!0})}clear(){Ue(nn,this).clear(),Ue(rn,this).clear()}}),yn=n(579),vn=r.createContext(void 0),xn=e=>{let{client:t,children:n}=e;return r.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),(0,yn.jsx)(vn.Provider,{value:t,children:n})};function bn(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}let wn={data:""},kn=e=>{if("object"==typeof window){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||wn},_n=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Nn=/\/\*[^]*?\*\/|  +/g,Sn=/\n+/g,En=(e,t)=>{let n="",r="",s="";for(let i in e){let a=e[i];"@"==i[0]?"i"==i[1]?n=i+" "+a+";":r+="f"==i[1]?En(a,i):i+"{"+En(a,"k"==i[1]?"":t)+"}":"object"==typeof a?r+=En(a,t?t.replace(/([^,])+/g,e=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):i):null!=a&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=En.p?En.p(i,a):i+":"+a+";")}return n+(t&&s?t+"{"+s+"}":s)+r},An={},Tn=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+Tn(e[n]);return t}return e},Cn=(e,t,n,r,s)=>{let i=Tn(e),a=An[i]||(An[i]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(i));if(!An[a]){let t=i!==e?e:(e=>{let t,n,r=[{}];for(;t=_n.exec(e.replace(Nn,""));)t[4]?r.shift():t[3]?(n=t[3].replace(Sn," ").trim(),r.unshift(r[0][n]=r[0][n]||{})):r[0][t[1]]=t[2].replace(Sn," ").trim();return r[0]})(e);An[a]=En(s?{["@keyframes "+a]:t}:t,n?"":"."+a)}let o=n&&An.g?An.g:null;return n&&(An.g=An[a]),((e,t,n,r)=>{r?t.data=t.data.replace(r,e):-1===t.data.indexOf(e)&&(t.data=n?e+t.data:t.data+e)})(An[a],t,r,o),a};function In(e){let t=this||{},n=e.call?e(t.p):e;return Cn(n.unshift?n.raw?((e,t,n)=>e.reduce((e,r,s)=>{let i=t[s];if(i&&i.call){let e=i(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;i=t?"."+t:e&&"object"==typeof e?e.props?"":En(e,""):!1===e?"":e}return e+r+(null==i?"":i)},""))(n,[].slice.call(arguments,1),t.p):n.reduce((e,n)=>Object.assign(e,n&&n.call?n(t.p):n),{}):n,kn(t.target),t.g,t.o,t.k)}In.bind({g:1});let jn,Pn,Dn,Rn=In.bind({k:1});function On(e,t){let n=this||{};return function(){let r=arguments;function s(i,a){let o=Object.assign({},i),l=o.className||s.className;n.p=Object.assign({theme:Pn&&Pn()},o),n.o=/ *go\d+/.test(l),o.className=In.apply(n,r)+(l?" "+l:""),t&&(o.ref=a);let c=e;return e[0]&&(c=o.as||e,delete o.as),Dn&&c[0]&&Dn(o),jn(c,o)}return t?t(s):s}}var Ln,Mn,Fn,Un,Vn,Bn,qn,zn,Kn,Wn,Hn,Gn,Qn,Jn,Yn,Xn,$n=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,Zn=(()=>{let e=0;return()=>(++e).toString()})(),er=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),tr="default",nr=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return(0,Oe.A)((0,Oe.A)({},e),{},{toasts:[t.toast,...e.toasts].slice(0,n)});case 1:return(0,Oe.A)((0,Oe.A)({},e),{},{toasts:e.toasts.map(e=>e.id===t.toast.id?(0,Oe.A)((0,Oe.A)({},e),t.toast):e)});case 2:let{toast:r}=t;return nr(e,{type:e.toasts.find(e=>e.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=t;return(0,Oe.A)((0,Oe.A)({},e),{},{toasts:e.toasts.map(e=>e.id===s||void 0===s?(0,Oe.A)((0,Oe.A)({},e),{},{dismissed:!0,visible:!1}):e)});case 4:return void 0===t.toastId?(0,Oe.A)((0,Oe.A)({},e),{},{toasts:[]}):(0,Oe.A)((0,Oe.A)({},e),{},{toasts:e.toasts.filter(e=>e.id!==t.toastId)});case 5:return(0,Oe.A)((0,Oe.A)({},e),{},{pausedAt:t.time});case 6:let i=t.time-(e.pausedAt||0);return(0,Oe.A)((0,Oe.A)({},e),{},{pausedAt:void 0,toasts:e.toasts.map(e=>(0,Oe.A)((0,Oe.A)({},e),{},{pauseDuration:e.pauseDuration+i}))})}},rr=[],sr={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},ir={},ar=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tr;ir[t]=nr(ir[t]||sr,e),rr.forEach(e=>{let[n,r]=e;n===t&&r(ir[t])})},or=e=>Object.keys(ir).forEach(t=>ar(e,t)),lr=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tr;return t=>{ar(t,e)}},cr={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},ur=e=>(t,n)=>{let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",n=arguments.length>2?arguments[2]:void 0;return(0,Oe.A)((0,Oe.A)({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},n),{},{id:(null==n?void 0:n.id)||Zn()})}(t,e,n);return lr(r.toasterId||(e=>Object.keys(ir).find(t=>ir[t].toasts.some(t=>t.id===e)))(r.id))({type:2,toast:r}),r.id},dr=(e,t)=>ur("blank")(e,t);dr.error=ur("error"),dr.success=ur("success"),dr.loading=ur("loading"),dr.custom=ur("custom"),dr.dismiss=(e,t)=>{let n={type:3,toastId:e};t?lr(t)(n):or(n)},dr.dismissAll=e=>dr.dismiss(void 0,e),dr.remove=(e,t)=>{let n={type:4,toastId:e};t?lr(t)(n):or(n)},dr.removeAll=e=>dr.remove(void 0,e),dr.promise=(e,t,n)=>{let r=dr.loading(t.loading,(0,Oe.A)((0,Oe.A)({},n),null==n?void 0:n.loading));return"function"==typeof e&&(e=e()),e.then(e=>{let s=t.success?$n(t.success,e):void 0;return s?dr.success(s,(0,Oe.A)((0,Oe.A)({id:r},n),null==n?void 0:n.success)):dr.dismiss(r),e}).catch(e=>{let s=t.error?$n(t.error,e):void 0;s?dr.error(s,(0,Oe.A)((0,Oe.A)({id:r},n),null==n?void 0:n.error)):dr.dismiss(r)}),e};var hr=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",{toasts:n,pausedAt:s}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tr,[n,s]=(0,r.useState)(ir[t]||sr),i=(0,r.useRef)(ir[t]);(0,r.useEffect)(()=>(i.current!==ir[t]&&s(ir[t]),rr.push([t,s]),()=>{let e=rr.findIndex(e=>{let[n]=e;return n===t});e>-1&&rr.splice(e,1)}),[t]);let a=n.toasts.map(t=>{var n,r,s;return(0,Oe.A)((0,Oe.A)((0,Oe.A)((0,Oe.A)({},e),e[t.type]),t),{},{removeDelay:t.removeDelay||(null==(n=e[t.type])?void 0:n.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(r=e[t.type])?void 0:r.duration)||(null==e?void 0:e.duration)||cr[t.type],style:(0,Oe.A)((0,Oe.A)((0,Oe.A)({},e.style),null==(s=e[t.type])?void 0:s.style),t.style)})});return(0,Oe.A)((0,Oe.A)({},n),{},{toasts:a})}(e,t),i=(0,r.useRef)(new Map).current,a=(0,r.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(i.has(e))return;let n=setTimeout(()=>{i.delete(e),o({type:4,toastId:e})},t);i.set(e,n)},[]);(0,r.useEffect)(()=>{if(s)return;let e=Date.now(),r=n.map(n=>{if(n.duration===1/0)return;let r=(n.duration||0)+n.pauseDuration-(e-n.createdAt);if(!(r<0))return setTimeout(()=>dr.dismiss(n.id,t),r);n.visible&&dr.dismiss(n.id)});return()=>{r.forEach(e=>e&&clearTimeout(e))}},[n,s,t]);let o=(0,r.useCallback)(lr(t),[t]),l=(0,r.useCallback)(()=>{o({type:5,time:Date.now()})},[o]),c=(0,r.useCallback)((e,t)=>{o({type:1,toast:{id:e,height:t}})},[o]),u=(0,r.useCallback)(()=>{s&&o({type:6,time:Date.now()})},[s,o]),d=(0,r.useCallback)((e,t)=>{let{reverseOrder:r=!1,gutter:s=8,defaultPosition:i}=t||{},a=n.filter(t=>(t.position||i)===(e.position||i)&&t.height),o=a.findIndex(t=>t.id===e.id),l=a.filter((e,t)=>t<o&&e.visible).length;return a.filter(e=>e.visible).slice(...r?[l+1]:[0,l]).reduce((e,t)=>e+(t.height||0)+s,0)},[n]);return(0,r.useEffect)(()=>{n.forEach(e=>{if(e.dismissed)a(e.id,e.removeDelay);else{let t=i.get(e.id);t&&(clearTimeout(t),i.delete(e.id))}})},[n,a]),{toasts:n,handlers:{updateHeight:c,startPause:l,endPause:u,calculateOffset:d}}},fr=Rn(Ln||(Ln=bn(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]))),mr=Rn(Mn||(Mn=bn(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),pr=Rn(Fn||(Fn=bn(["\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}"]))),gr=On("div")(Un||(Un=bn(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"])),e=>e.primary||"#ff4b4b",fr,mr,e=>e.secondary||"#fff",pr),yr=Rn(Vn||(Vn=bn(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),vr=On("div")(Bn||(Bn=bn(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"])),e=>e.secondary||"#e0e0e0",e=>e.primary||"#616161",yr),xr=Rn(qn||(qn=bn(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}"]))),br=Rn(zn||(zn=bn(["\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]))),wr=On("div")(Kn||(Kn=bn(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"])),e=>e.primary||"#61d345",xr,br,e=>e.secondary||"#fff"),kr=On("div")(Wn||(Wn=bn(["\n  position: absolute;\n"]))),_r=On("div")(Hn||(Hn=bn(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]))),Nr=Rn(Gn||(Gn=bn(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),Sr=On("div")(Qn||(Qn=bn(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"])),Nr),Er=e=>{let{toast:t}=e,{icon:n,type:s,iconTheme:i}=t;return void 0!==n?"string"==typeof n?r.createElement(Sr,null,n):n:"blank"===s?null:r.createElement(_r,null,r.createElement(vr,(0,Oe.A)({},i)),"loading"!==s&&r.createElement(kr,null,"error"===s?r.createElement(gr,(0,Oe.A)({},i)):r.createElement(wr,(0,Oe.A)({},i))))},Ar=e=>"\n0% {transform: translate3d(0,".concat(-200*e,"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"),Tr=e=>"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,".concat(-150*e,"%,-1px) scale(.6); opacity:0;}\n"),Cr=On("div")(Jn||(Jn=bn(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]))),Ir=On("div")(Yn||(Yn=bn(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"]))),jr=r.memo(e=>{let{toast:t,position:n,style:s,children:i}=e,a=t.height?((e,t)=>{let n=e.includes("top")?1:-1,[r,s]=er()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[Ar(n),Tr(n)];return{animation:t?"".concat(Rn(r)," 0.35s cubic-bezier(.21,1.02,.73,1) forwards"):"".concat(Rn(s)," 0.4s forwards cubic-bezier(.06,.71,.55,1)")}})(t.position||n||"top-center",t.visible):{opacity:0},o=r.createElement(Er,{toast:t}),l=r.createElement(Ir,(0,Oe.A)({},t.ariaProps),$n(t.message,t));return r.createElement(Cr,{className:t.className,style:(0,Oe.A)((0,Oe.A)((0,Oe.A)({},a),s),t.style)},"function"==typeof i?i({icon:o,message:l}):r.createElement(r.Fragment,null,o,l))});!function(e,t,n,r){En.p=t,jn=e,Pn=n,Dn=r}(r.createElement);var Pr=e=>{let{id:t,className:n,style:s,onHeightUpdate:i,children:a}=e,o=r.useCallback(e=>{if(e){let n=()=>{let n=e.getBoundingClientRect().height;i(t,n)};n(),new MutationObserver(n).observe(e,{subtree:!0,childList:!0,characterData:!0})}},[t,i]);return r.createElement("div",{ref:o,className:n,style:s},a)},Dr=In(Xn||(Xn=bn(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"]))),Rr=e=>{let{reverseOrder:t,position:n="top-center",toastOptions:s,gutter:i,children:a,toasterId:o,containerStyle:l,containerClassName:c}=e,{toasts:u,handlers:d}=hr(s,o);return r.createElement("div",{"data-rht-toaster":o||"",style:(0,Oe.A)({position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none"},l),className:c,onMouseEnter:d.startPause,onMouseLeave:d.endPause},u.map(e=>{let s=e.position||n,o=((e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return(0,Oe.A)((0,Oe.A)({left:0,right:0,display:"flex",position:"absolute",transition:er()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:"translateY(".concat(t*(n?1:-1),"px)")},r),s)})(s,d.calculateOffset(e,{reverseOrder:t,gutter:i,defaultPosition:n}));return r.createElement(Pr,{id:e.id,key:e.id,onHeightUpdate:d.updateHeight,className:e.visible?Dr:"",style:o},"custom"===e.type?$n(e.message,e):a?a(e):r.createElement(jr,{toast:e,position:s}))}))},Or=dr,Lr=n(786),Mr=n(472),Fr=(n(147),n(958));function Ur(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var Vr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Br=["color","size","strokeWidth","absoluteStrokeWidth","className","children"],qr=(e,t)=>{const n=(0,r.forwardRef)((n,s)=>{let{color:i="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:c="",children:u}=n,d=Ur(n,Br);return(0,r.createElement)("svg",(0,Oe.A)((0,Oe.A)({ref:s},Vr),{},{width:a,height:a,stroke:i,strokeWidth:l?24*Number(o)/Number(a):o,className:["lucide","lucide-".concat((h=e,h.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim())),c].join(" ")},d),[...t.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...Array.isArray(u)?u:[u]]);var h});return n.displayName="".concat(e),n},zr=qr("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Kr=qr("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Wr=qr("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Hr=e=>e?e instanceof Mr.Timestamp?e.toDate().toISOString():e:null,Gr=(e,t)=>{var n;if(!e&&!t)return null;const r=(null===e||void 0===e?void 0:e.data())||{};return{id:(null===t||void 0===t?void 0:t.uid)||(null===e||void 0===e?void 0:e.id)||r.id,username:r.username||(null===t||void 0===t||null===(n=t.email)||void 0===n?void 0:n.split("@")[0])||"",email:(null===t||void 0===t?void 0:t.email)||r.email||"",firstName:r.firstName||r.first_name||"",lastName:r.lastName||r.last_name||"",role:r.role||"client",phone:r.phone||"",address:r.address||"",createdAt:Hr(r.createdAt)||r.created_at||null}},Qr=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return new Promise((n,r)=>{const s=Date.now(),i=()=>{const a=Fr.auth.currentUser;return a?(console.log("\u2705 Auth state available, user ID:",a.uid),void n(a)):Date.now()-s>e?(console.error("\u274c Auth wait timeout - no authenticated user after",e,"ms"),void r(new Error("Authentication timeout - user not authenticated"))):void setTimeout(i,t)},a=(0,Lr.hg)(Fr.auth,e=>{e&&(console.log("\u2705 Auth state changed - user authenticated:",e.uid),a(),n(e))});i(),setTimeout(()=>{a()},e+1e3)})},Jr=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"operation";const t=Fr.auth.currentUser;if(t)return console.log("\u2705 Auth verified for ".concat(e,", user ID:"),t.uid),t;console.log("\u23f3 Waiting for auth state for ".concat(e,"..."));try{const t=await Qr();return console.log("\u2705 Auth verified after wait for ".concat(e,", user ID:"),t.uid),t}catch(n){throw console.error("\u274c Auth verification failed for ".concat(e,":"),n),new Error("Authentication required for ".concat(e,": ").concat(n.message))}},Yr=async e=>{try{const{username:t,email:n,password:r}=e;let s=n;if(t&&!n){const e=(0,Mr.collection)(Fr.db,"users"),n=(0,Mr.query)(e,(0,Mr.where)("username","==",t)),r=await(0,Mr.getDocs)(n);if(r.empty)throw new Error("Invalid credentials");const i=r.docs[0];if(s=i.data().email,!s)throw new Error("User email not found")}else if(!s)throw new Error("Email or username is required");const i=(await(0,Lr.x9)(Fr.auth,s,r)).user;if(!(await(0,Mr.getDoc)((0,Mr.doc)(Fr.db,"users",i.uid))).exists()){const e=(0,Mr.collection)(Fr.db,"users"),t=(0,Mr.query)(e,(0,Mr.where)("email","==",s)),n=await(0,Mr.getDocs)(t);if(n.empty)throw new Error("User profile not found");{const e=n.docs[0].data();await(0,Mr.setDoc)((0,Mr.doc)(Fr.db,"users",i.uid),(0,Oe.A)((0,Oe.A)({},e),{},{updatedAt:(0,Mr.serverTimestamp)()}))}}const a=await(0,Mr.getDoc)((0,Mr.doc)(Fr.db,"users",i.uid)),o=Gr(a,i);return{token:await i.getIdToken(),user:o}}catch(t){if(console.error("Login error:",t),"auth/user-not-found"===t.code||"auth/wrong-password"===t.code)throw new Error("Invalid credentials");throw new Error(t.message||"Login failed")}},Xr=async e=>{try{var t;const{email:n,password:r,username:s,firstName:i,lastName:a,phone:o,address:l,role:c="client"}=e;console.log("\ud83d\udd10 Starting user registration for:",n);const u=(await(0,Lr.eJ)(Fr.auth,n,r)).user;console.log("\u2705 Firebase Auth user created, UID:",u.uid),await new Promise(e=>setTimeout(e,100)),(null===(t=Fr.auth.currentUser)||void 0===t?void 0:t.uid)!==u.uid&&(console.warn("\u26a0\ufe0f Auth state not immediately available, waiting..."),await Qr(3e3));const d={username:s||n.split("@")[0],email:n,firstName:i,lastName:a,phone:o||"",address:l||"",role:c,isActive:!0,createdAt:(0,Mr.serverTimestamp)(),updatedAt:(0,Mr.serverTimestamp)()};console.log("\ud83d\udcdd Creating user document in Firestore..."),await(0,Mr.setDoc)((0,Mr.doc)(Fr.db,"users",u.uid),d),console.log("\u2705 User document created in Firestore"),await(0,Lr.r7)(u,{displayName:"".concat(i," ").concat(a)});const h=Fr.auth.currentUser;h&&h.uid===u.uid||(console.warn("\u26a0\ufe0f Auth state not set after registration, waiting..."),await Qr(2e3));const f=Fr.auth.currentUser||u,m=Gr({id:f.uid,data:()=>d},f);return console.log("\u2705 Registration complete, user ID:",f.uid),{token:await f.getIdToken(),user:m}}catch(n){throw console.error("\u274c Registration error:",n),new Error(n.message||"Registration failed")}},$r=async()=>{try{return await(0,Lr.CI)(Fr.auth),{success:!0}}catch(e){throw console.error("Logout error:",e),e}},Zr=async()=>{try{const e=Fr.auth.currentUser;if(!e)throw new Error("Not authenticated");const t=(0,Mr.doc)(Fr.db,"users",e.uid);let n=await(0,Mr.getDoc)(t);if(!n.exists()){const r={username:e.email?e.email.split("@")[0]:"",email:e.email||"",firstName:e.displayName?e.displayName.split(" ")[0]:"",lastName:e.displayName?e.displayName.split(" ").slice(1).join(" "):"",role:"client",phone:"",address:"",createdAt:(0,Mr.serverTimestamp)(),updatedAt:(0,Mr.serverTimestamp)()};await(0,Mr.setDoc)(t,r),n=await(0,Mr.getDoc)(t)}return Gr(n,e)}catch(e){throw console.error("Get profile error:",e),e}},es=async e=>{try{const t=Fr.auth.currentUser;if(!t)throw new Error("Not authenticated");const n=(0,Mr.doc)(Fr.db,"users",t.uid),r={firstName:e.firstName||e.first_name,lastName:e.lastName||e.last_name,phone:e.phone||"",address:e.address||"",updatedAt:(0,Mr.serverTimestamp)()};await(0,Mr.updateDoc)(n,r),(e.firstName||e.lastName)&&await(0,Lr.r7)(t,{displayName:"".concat(r.firstName," ").concat(r.lastName)});const s=await(0,Mr.getDoc)(n);return Gr(s,t)}catch(t){throw console.error("Update profile error:",t),t}},ts=async e=>{let{current_password:t,new_password:n}=e;try{const e=Fr.auth.currentUser;if(!e||!e.email)throw new Error("Not authenticated");const r=Lr.IX.credential(e.email,t);return await(0,Lr.kZ)(e,r),await(0,Lr.f3)(e,n),{success:!0,message:"Password changed successfully"}}catch(r){throw console.error("Change password error:",r),new Error(r.message||"Password change failed")}},ns=e=>(0,Lr.hg)(Fr.auth,e),rs=e=>({getAll:async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let n=(0,Mr.query)((0,Mr.collection)(Fr.db,e));Object.entries(t).forEach(e=>{let[t,r]=e;void 0!==r&&null!==r&&""!==r&&(n=(0,Mr.query)(n,(0,Mr.where)(t,"==",r)))}),n=(0,Mr.query)(n,(0,Mr.orderBy)("createdAt","desc"));return{success:!0,data:(await(0,Mr.getDocs)(n)).docs.map(e=>(0,Oe.A)({id:e.id},e.data()))}}catch(n){throw console.error("Error fetching ".concat(e,":"),n),n}},getById:async t=>{try{"bookings"!==e&&"guests"!==e||await Jr("getById(".concat(e,")"));const n=(0,Mr.doc)(Fr.db,e,t),r=await(0,Mr.getDoc)(n);if(!r.exists())throw new Error("".concat(e," not found"));const s=(0,Oe.A)({id:r.id},r.data());if("bookings"===e&&!s.userId){Fr.auth.currentUser&&console.log("\u26a0\ufe0f Booking ".concat(t," does not have userId set, but user is authenticated"))}return{success:!0,data:s}}catch(n){throw console.error("Error fetching ".concat(e,":"),n),n}},create:async t=>{try{const n=Fr.auth.currentUser;if("guests"!==e&&"bookings"!==e&&!n)throw new Error("Not authenticated");const r=(0,Mr.doc)((0,Mr.collection)(Fr.db,e)),s=Object.fromEntries(Object.entries(t||{}).filter(e=>{let[t,n]=e;return void 0!==n})),i=(0,Oe.A)((0,Oe.A)({},s),{},{createdAt:(0,Mr.serverTimestamp)(),updatedAt:(0,Mr.serverTimestamp)(),createdBy:n?n.uid:null});return await(0,Mr.setDoc)(r,i),{success:!0,message:"".concat(e," created successfully"),data:(0,Oe.A)({id:r.id},i)}}catch(n){throw console.error("Error creating ".concat(e,":"),n),n}},update:async(t,n)=>{try{if("bookings"===e||"guests"===e)try{await Jr("update(".concat(e,")"))}catch(s){console.warn("Auth check failed for update, but continuing:",s),await new Promise(e=>setTimeout(e,500))}else await Jr("update(".concat(e,")"));const r=(0,Mr.doc)(Fr.db,e,t),i=(0,Oe.A)((0,Oe.A)({},n),{},{updatedAt:(0,Mr.serverTimestamp)()});return await(0,Mr.updateDoc)(r,i),{success:!0,message:"".concat(e," updated successfully")}}catch(i){var r;if(console.error("Error updating ".concat(e,":"),i),"permission-denied"===(null===i||void 0===i?void 0:i.code)||null!==i&&void 0!==i&&null!==(r=i.message)&&void 0!==r&&r.includes("permission"))return async function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500;for(let l=0;l<n;l++)try{return await e()}catch(i){var a,o;t=i;const c="permission-denied"===(null===i||void 0===i?void 0:i.code)||(null===i||void 0===i||null===(a=i.message)||void 0===a?void 0:a.includes("permission"))||(null===i||void 0===i||null===(o=i.message)||void 0===o?void 0:o.includes("Missing or insufficient permissions"));if(c&&l<n-1){const e=r*Math.pow(2,l);console.log("\u26a0\ufe0f Permission error on attempt ".concat(l+1,", retrying in ").concat(e,"ms...")),await new Promise(t=>setTimeout(t,e));try{await Qr(2e3)}catch(s){console.warn("Auth wait failed during retry:",s)}continue}if(!c||l===n-1)throw i}throw t}(async()=>{await Jr("update(".concat(e,")"));const r=(0,Mr.doc)(Fr.db,e,t),s=(0,Oe.A)((0,Oe.A)({},n),{},{updatedAt:(0,Mr.serverTimestamp)()});return await(0,Mr.updateDoc)(r,s),{success:!0,message:"".concat(e," updated successfully")}});throw i}},delete:async t=>{try{const n=(0,Mr.doc)(Fr.db,e,t);return await(0,Mr.deleteDoc)(n),{success:!0,message:"".concat(e," deleted successfully")}}catch(n){throw console.error("Error deleting ".concat(e,":"),n),n}}}),ss=rs("users"),is=(0,Oe.A)((0,Oe.A)({},rs("bookings")),{},{getBookings:async function(){try{let l=Fr.auth.currentUser;if(!l){console.log("\u23f3 No auth user immediately available, waiting...");try{l=await Qr(3e3)}catch(s){throw console.error("\u274c Authentication timeout:",s),new Error("Not authenticated")}}console.log("\ud83d\udcd6 Fetching bookings for user:",l.uid);let c=[];try{const e=(0,Mr.query)((0,Mr.collection)(Fr.db,"bookings"),(0,Mr.where)("userId","==",l.uid),(0,Mr.orderBy)("createdAt","desc")),t=await(0,Mr.getDocs)(e);c=t.docs.map(e=>(0,Oe.A)({id:e.id},e.data())),console.log("\u2705 Found ".concat(c.length," bookings by userId"))}catch(i){var e,t;const n="permission-denied"===(null===i||void 0===i?void 0:i.code)||(null===i||void 0===i||null===(e=i.message)||void 0===e?void 0:e.includes("permission"));"failed-precondition"===(null===i||void 0===i?void 0:i.code)||(null===i||void 0===i||null===(t=i.message)||void 0===t?void 0:t.includes("index"))?console.warn("\u26a0\ufe0f Index not found for userId query. Deploy Firestore indexes:",i.message):n?console.warn("\u26a0\ufe0f Permission denied for userId query (bookings may not have userId set yet):",i.message):console.warn("\u26a0\ufe0f Could not fetch bookings by userId:",i.message)}try{let e=(0,Mr.query)((0,Mr.collection)(Fr.db,"guests"),(0,Mr.where)("email","==",l.email)),t=await(0,Mr.getDocs)(e);if(t.empty&&(e=(0,Mr.query)((0,Mr.collection)(Fr.db,"guests"),(0,Mr.where)("userId","==",l.uid)),t=await(0,Mr.getDocs)(e)),!t.empty){const e=t.docs.map(e=>e.id);console.log("\ud83d\udccb Found ".concat(e.length," guest(s) for user"));for(const t of e)try{const e=(0,Mr.query)((0,Mr.collection)(Fr.db,"bookings"),(0,Mr.where)("guest_id","==",t),(0,Mr.orderBy)("createdAt","desc")),n=await(0,Mr.getDocs)(e);n.docs.map(e=>(0,Oe.A)({id:e.id},e.data())).forEach(e=>{c.find(t=>t.id===e.id)||c.push(e)})}catch(a){var n,r;const e="permission-denied"===(null===a||void 0===a?void 0:a.code)||(null===a||void 0===a||null===(n=a.message)||void 0===n?void 0:n.includes("permission"));"failed-precondition"===(null===a||void 0===a?void 0:a.code)||(null===a||void 0===a||null===(r=a.message)||void 0===r?void 0:r.includes("index"))?console.warn("\u26a0\ufe0f Index not found for guest_id query on guest ".concat(t,". Deploy Firestore indexes.")):e?console.warn("\u26a0\ufe0f Permission denied for bookings of guest ".concat(t," (guest may not have userId set)")):console.warn("\u26a0\ufe0f Could not fetch bookings for guest ".concat(t,":"),a.message)}}}catch(o){console.warn("\u26a0\ufe0f Could not fetch bookings by guest:",o)}return c.sort((e,t)=>{var n,r;const s=null!==(n=e.createdAt)&&void 0!==n&&n.toDate?e.createdAt.toDate():new Date(e.createdAt||0);return(null!==(r=t.createdAt)&&void 0!==r&&r.toDate?t.createdAt.toDate():new Date(t.createdAt||0))-s}),console.log("\u2705 Returning ".concat(c.length," total bookings")),{success:!0,data:c}}catch(l){throw console.error("\u274c Error fetching bookings:",l),l}},createBooking:async e=>{const t=e.guest_id||e.guestId,n=e.room_id||e.roomId;if(!t)throw new Error("guestId is required to create a booking");if(!n&&0!==n)throw new Error("roomId is required to create a booking");return is.create({guest_id:t,room_id:n,check_in_date:e.check_in_date||e.checkInDate,check_out_date:e.check_out_date||e.checkOutDate,adults:e.adults||1,children:e.children||0,special_requests:e.special_requests||e.specialRequests||"",status:"pending"})},getByGuestId:async e=>{try{const t=(0,Mr.query)((0,Mr.collection)(Fr.db,"bookings"),(0,Mr.where)("guestId","==",e),(0,Mr.orderBy)("createdAt","desc"));return{success:!0,data:(await(0,Mr.getDocs)(t)).docs.map(e=>(0,Oe.A)({id:e.id},e.data()))}}catch(t){throw console.error("Error fetching bookings by guest:",t),t}},getDashboardStats:async()=>{try{const e=new Date;e.setHours(0,0,0,0);const t=new Date(e.getFullYear(),e.getMonth(),1),[n,r]=await Promise.all([(0,Mr.getDocs)((0,Mr.collection)(Fr.db,"bookings")),(0,Mr.getDocs)((0,Mr.collection)(Fr.db,"rooms"))]),s=n.docs.map(e=>(0,Oe.A)({id:e.id},e.data())),i=r.docs.map(e=>(0,Oe.A)({id:e.id},e.data())),a=s.filter(t=>{var n;return(null!==(n=t.createdAt)&&void 0!==n&&n.toDate?t.createdAt.toDate():new Date(t.createdAt))>=e}),o=s.filter(e=>{var n;return(null!==(n=e.createdAt)&&void 0!==n&&n.toDate?e.createdAt.toDate():new Date(e.createdAt))>=t}),l=o.reduce((e,t)=>e+parseFloat(t.total_amount||t.totalAmount||0),0),c=i.filter(e=>"available"===e.status).length,u=i.length,d=u>0?(u-c)/u*100:0,h=s.sort((e,t)=>{var n,r;const s=null!==(n=e.createdAt)&&void 0!==n&&n.toDate?e.createdAt.toDate():new Date(e.createdAt);return(null!==(r=t.createdAt)&&void 0!==r&&r.toDate?t.createdAt.toDate():new Date(t.createdAt))-s}).slice(0,5),f=new Date(e);f.setDate(f.getDate()+7);const m=s.filter(t=>{const n=t.check_in_date||t.checkInDate;if(!n)return!1;const r=n.toDate?n.toDate():new Date(n);return r>=e&&r<=f}).sort((e,t)=>{var n,r;return(null!==(n=e.check_in_date||e.checkInDate)&&void 0!==n&&n.toDate?(e.check_in_date||e.checkInDate).toDate():new Date(e.check_in_date||e.checkInDate))-(null!==(r=t.check_in_date||t.checkInDate)&&void 0!==r&&r.toDate?(t.check_in_date||t.checkInDate).toDate():new Date(t.check_in_date||t.checkInDate))}).slice(0,5);return{success:!0,data:{todayBookings:a.length,monthBookings:o.length,monthRevenue:l,occupancyRate:Math.round(100*d)/100,recentBookings:h,upcomingCheckins:m}}}catch(e){throw console.error("Error fetching booking dashboard stats:",e),e}},checkIn:async e=>{try{const t=(0,Mr.doc)(Fr.db,"bookings",e),n=await(0,Mr.getDoc)(t);if(!n.exists())throw new Error("Booking not found");const r=n.data();if("confirmed"!==r.status)throw new Error("Only confirmed bookings can be checked in");return await(0,Mr.updateDoc)(t,{status:"checked_in",updatedAt:(0,Mr.serverTimestamp)()}),r.roomId&&await(0,Mr.updateDoc)((0,Mr.doc)(Fr.db,"rooms",r.roomId),{status:"occupied",updatedAt:(0,Mr.serverTimestamp)()}),{success:!0,message:"Guest checked in successfully"}}catch(t){throw console.error("Check-in error:",t),t}},checkOut:async e=>{try{const t=(0,Mr.doc)(Fr.db,"bookings",e),n=await(0,Mr.getDoc)(t);if(!n.exists())throw new Error("Booking not found");const r=n.data();if("checked_in"!==r.status)throw new Error("Only checked-in bookings can be checked out");return await(0,Mr.updateDoc)(t,{status:"checked_out",updatedAt:(0,Mr.serverTimestamp)()}),r.roomId&&await(0,Mr.updateDoc)((0,Mr.doc)(Fr.db,"rooms",r.roomId),{status:"available",updatedAt:(0,Mr.serverTimestamp)()}),{success:!0,message:"Guest checked out successfully"}}catch(t){throw console.error("Check-out error:",t),t}}}),as=(0,Oe.A)((0,Oe.A)({},rs("rooms")),{},{getRooms:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return as.getAll(e)}}),os=(0,Oe.A)((0,Oe.A)({},rs("guests")),{},{getGuests:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return os.getAll(e)},createGuest:async e=>os.create({first_name:e.first_name||e.firstName,last_name:e.last_name||e.lastName,email:e.email,phone:e.phone,address:e.address||""})}),ls=(0,Oe.A)((0,Oe.A)({},rs("employees")),{},{getEmployees:async()=>ls.getAll(),getDepartments:async()=>{try{return{success:!0,data:(await(0,Mr.getDocs)((0,Mr.collection)(Fr.db,"departments"))).docs.map(e=>(0,Oe.A)({id:e.id},e.data()))}}catch(e){throw console.error("Error fetching departments:",e),e}},createDepartment:async e=>rs("departments").create(e),getDashboard:async()=>{try{const[e,t]=await Promise.all([(0,Mr.getDocs)((0,Mr.query)((0,Mr.collection)(Fr.db,"employees"),(0,Mr.where)("status","==","active"))),(0,Mr.getDocs)((0,Mr.collection)(Fr.db,"departments"))]),n=e.docs.map(e=>(0,Oe.A)({id:e.id},e.data())),r=t.docs.map(e=>(0,Oe.A)({id:e.id},e.data())).map(e=>({name:e.name,count:n.filter(t=>t.department_id===e.id||t.departmentId===e.id).length}));return{success:!0,data:{totalEmployees:n.length,employeesByDepartment:r}}}catch(e){throw console.error("Error fetching HR dashboard:",e),e}}}),cs=(0,Oe.A)((0,Oe.A)({},rs("attendance")),{},{getAll:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let t=(0,Mr.query)((0,Mr.collection)(Fr.db,"attendance"));e.date&&(t=(0,Mr.query)(t,(0,Mr.where)("date","==",e.date))),(e.employee_id||e.employeeId)&&(t=(0,Mr.query)(t,(0,Mr.where)("employee_id","==",e.employee_id||e.employeeId))),t=(0,Mr.query)(t,(0,Mr.orderBy)("date","desc"));return{success:!0,data:(await(0,Mr.getDocs)(t)).docs.map(e=>(0,Oe.A)({id:e.id},e.data()))}}catch(t){throw console.error("Error fetching attendance:",t),t}}}),us=(0,Oe.A)((0,Oe.A)({},rs("payroll")),{},{getAll:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let t=(0,Mr.query)((0,Mr.collection)(Fr.db,"payroll"));e.month&&(t=(0,Mr.query)(t,(0,Mr.where)("month","==",parseInt(e.month)))),e.year&&(t=(0,Mr.query)(t,(0,Mr.where)("year","==",parseInt(e.year)))),(e.employee_id||e.employeeId)&&(t=(0,Mr.query)(t,(0,Mr.where)("employee_id","==",e.employee_id||e.employeeId))),t=(0,Mr.query)(t,(0,Mr.orderBy)("year","desc"),(0,Mr.orderBy)("month","desc"));return{success:!0,data:(await(0,Mr.getDocs)(t)).docs.map(e=>(0,Oe.A)({id:e.id},e.data()))}}catch(t){throw console.error("Error fetching payroll:",t),t}},generate:async e=>{try{const t=Fr.auth.currentUser;if(!t)throw new Error("Not authenticated");const n={employee_id:e.employee_id||e.employeeId,month:e.month,year:e.year,status:"pending",createdAt:(0,Mr.serverTimestamp)(),updatedAt:(0,Mr.serverTimestamp)(),createdBy:t.uid},r=(0,Mr.doc)((0,Mr.collection)(Fr.db,"payroll"));return await(0,Mr.setDoc)(r,n),{success:!0,message:"Payroll generated successfully",data:(0,Oe.A)({id:r.id},n)}}catch(t){throw console.error("Error generating payroll:",t),t}}}),ds=(0,Oe.A)((0,Oe.A)({},rs("payments")),{},{createCheckoutSession:async e=>{throw console.warn("Stripe checkout requires backend - consider using Firebase Functions"),new Error("Payment processing requires backend setup")}}),hs=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let t=(0,Mr.query)((0,Mr.collection)(Fr.db,"users"));e.role&&"all"!==e.role&&(t=(0,Mr.query)(t,(0,Mr.where)("role","==",e.role))),void 0!==e.is_active&&(t=(0,Mr.query)(t,(0,Mr.where)("isActive","==","true"===e.is_active))),e.search,t=(0,Mr.query)(t,(0,Mr.orderBy)("createdAt","desc"));const n=parseInt(e.page)||1,r=parseInt(e.limit)||10;t=(0,Mr.query)(t,(0,Mr.limit)(r));let s=(await(0,Mr.getDocs)(t)).docs.map(e=>(0,Oe.A)({id:e.id},e.data()));if(e.search){const t=e.search.toLowerCase();s=s.filter(e=>{var n,r,s,i;return(null===(n=e.firstName)||void 0===n?void 0:n.toLowerCase().includes(t))||(null===(r=e.lastName)||void 0===r?void 0:r.toLowerCase().includes(t))||(null===(s=e.email)||void 0===s?void 0:s.toLowerCase().includes(t))||(null===(i=e.username)||void 0===i?void 0:i.toLowerCase().includes(t))})}const i=s.length,a=Math.ceil(i/r);return{success:!0,data:{users:s.slice((n-1)*r,n*r),pagination:{page:n,limit:r,total:i,pages:a}}}}catch(t){throw console.error("Error fetching users:",t),t}},fs=async e=>ss.create(e),ms=async(e,t)=>ss.update(e,t),ps=async e=>ss.delete(e),gs=async()=>{try{return{success:!0,data:(await(0,Mr.getDocs)((0,Mr.collection)(Fr.db,"privileges"))).docs.map(e=>(0,Oe.A)({id:e.id},e.data()))}}catch(e){throw console.error("Error fetching privileges:",e),e}},ys=async e=>{try{const t=(0,Mr.query)((0,Mr.collection)(Fr.db,"user_privileges"),(0,Mr.where)("userId","==",e));return{success:!0,data:(await(0,Mr.getDocs)(t)).docs.map(e=>(0,Oe.A)({id:e.id},e.data()))}}catch(t){throw console.error("Error fetching user privileges:",t),t}},vs=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;try{const[t,n,r]=await Promise.all([(0,Mr.getDocs)((0,Mr.query)((0,Mr.collection)(Fr.db,"users"),(0,Mr.orderBy)("createdAt","desc"),(0,Mr.limit)(e))),(0,Mr.getDocs)((0,Mr.query)((0,Mr.collection)(Fr.db,"bookings"),(0,Mr.orderBy)("createdAt","desc"),(0,Mr.limit)(e))),(0,Mr.getDocs)((0,Mr.query)((0,Mr.collection)(Fr.db,"payments"),(0,Mr.orderBy)("createdAt","desc"),(0,Mr.limit)(e)))]),s=[];return t.docs.forEach(e=>{const t=e.data();s.push({type:"user_signup",message:"New user signed up: ".concat(t.firstName||""," ").concat(t.lastName||"").trim(),time:Hr(t.createdAt)||(new Date).toISOString(),icon:zr,color:"bg-green-500"})}),n.docs.forEach(e=>{const t=e.data();s.push({type:"booking",message:"New booking by ".concat(t.guest_name||t.guest_id||"Guest"),time:Hr(t.createdAt)||(new Date).toISOString(),icon:Kr,color:"bg-blue-500"})}),r.docs.forEach(e=>{const t=e.data();s.push({type:"payment",message:"Payment received: $".concat(t.amount||"0"),time:Hr(t.createdAt)||(new Date).toISOString(),icon:Wr,color:"bg-yellow-500"})}),s.sort((e,t)=>new Date(t.time)-new Date(e.time)),{success:!0,data:s.slice(0,e)}}catch(t){throw console.error("Error fetching recent activity:",t),t}},xs=async(e,t)=>{try{const n=Fr.auth.currentUser;if(!n)throw new Error("Not authenticated");const r=(0,Mr.query)((0,Mr.collection)(Fr.db,"user_privileges"),(0,Mr.where)("userId","==",e),(0,Mr.where)("privilege","==",t));if(!(await(0,Mr.getDocs)(r)).empty)throw new Error("Privilege already granted");return await(0,Mr.setDoc)((0,Mr.doc)((0,Mr.collection)(Fr.db,"user_privileges")),{userId:e,privilege:t,grantedAt:(0,Mr.serverTimestamp)(),grantedBy:n.uid}),{success:!0,message:"Privilege granted successfully"}}catch(n){throw console.error("Error granting privilege:",n),n}},bs=async(e,t)=>{try{const n=(0,Mr.query)((0,Mr.collection)(Fr.db,"user_privileges"),(0,Mr.where)("userId","==",e),(0,Mr.where)("privilege","==",t)),r=await(0,Mr.getDocs)(n);if(r.empty)throw new Error("Privilege not found");return await(0,Mr.deleteDoc)(r.docs[0].ref),{success:!0,message:"Privilege revoked successfully"}}catch(n){throw console.error("Error revoking privilege:",n),n}},ws=async()=>{try{const[e,t,n,r]=await Promise.all([(0,Mr.getDocs)((0,Mr.collection)(Fr.db,"bookings")),(0,Mr.getDocs)((0,Mr.collection)(Fr.db,"rooms")),(0,Mr.getDocs)((0,Mr.collection)(Fr.db,"users")),(0,Mr.getDocs)((0,Mr.collection)(Fr.db,"payments"))]);return{success:!0,data:{totalBookings:e.size,totalRooms:t.size,totalUsers:n.size,totalRevenue:r.docs.reduce((e,t)=>{const n=t.data();return e+parseFloat(n.amount||0)},0)}}}catch(e){throw console.error("Error fetching dashboard stats:",e),e}},ks=rs("pricing"),_s=(rs("cabins"),(0,Oe.A)((0,Oe.A)({},rs("notifications")),{},{getNotificationCount:async()=>{try{const e=Fr.auth.currentUser;if(!e)return{success:!0,count:0};const t=(0,Mr.query)((0,Mr.collection)(Fr.db,"notifications"),(0,Mr.where)("userId","==",e.uid),(0,Mr.where)("read","==",!1));return{success:!0,count:(await(0,Mr.getDocs)(t)).size}}catch(e){throw console.error("Error getting notification count:",e),e}},markAsRead:async e=>{try{return await(0,Mr.updateDoc)((0,Mr.doc)(Fr.db,"notifications",e),{read:!0,updatedAt:(0,Mr.serverTimestamp)()}),{success:!0}}catch(t){throw console.error("Error marking notification as read:",t),t}},markAllAsRead:async()=>{try{const e=Fr.auth.currentUser;if(!e)throw new Error("Not authenticated");const t=(0,Mr.query)((0,Mr.collection)(Fr.db,"notifications"),(0,Mr.where)("userId","==",e.uid),(0,Mr.where)("read","==",!1)),n=(await(0,Mr.getDocs)(t)).docs.map(e=>(0,Mr.updateDoc)(e.ref,{read:!0,updatedAt:(0,Mr.serverTimestamp)()}));return await Promise.all(n),{success:!0}}catch(e){throw console.error("Error marking all notifications as read:",e),e}}}),async e=>{try{return{success:!0,data:(await(0,Mr.getDocs)((0,Mr.collection)(Fr.db,"bookings"))).docs.map(e=>(0,Oe.A)({id:e.id},e.data()))}}catch(t){throw console.error("Error fetching booking stats:",t),t}}),Ns=async e=>{try{const e=(await(0,Mr.getDocs)((0,Mr.collection)(Fr.db,"payments"))).docs.map(e=>e.data());return{success:!0,data:{total:e.reduce((e,t)=>e+parseFloat(t.amount||0),0),count:e.length}}}catch(t){throw console.error("Error fetching revenue stats:",t),t}},Ss=async e=>{try{const[e,t]=await Promise.all([(0,Mr.getDocs)((0,Mr.collection)(Fr.db,"rooms")),(0,Mr.getDocs)((0,Mr.query)((0,Mr.collection)(Fr.db,"bookings"),(0,Mr.where)("status","in",["confirmed","checked_in"])))]),n=e.size,r=t.size;return{success:!0,data:{totalRooms:n,occupiedRooms:r,occupancyRate:n>0?r/n*100:0}}}catch(t){throw console.error("Error fetching occupancy stats:",t),t}},Es=(0,r.createContext)(void 0),As=()=>{const e=(0,r.useContext)(Es);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e},Ts=e=>{let{children:t}=e;const[n,s]=(0,r.useState)(null),[i,a]=(0,r.useState)(!0),o=!!n;(0,r.useEffect)(()=>{const e=ns(async e=>{try{if(e)try{const e=await Zr();s(e),localStorage.setItem("user",JSON.stringify(e))}catch(wn){var t;console.error("Error fetching user profile:",wn),s({id:e.uid,email:e.email,username:(null===(t=e.email)||void 0===t?void 0:t.split("@")[0])||""})}else s(null),localStorage.removeItem("token"),localStorage.removeItem("user")}catch(n){console.error("Auth state change error:",n),s(null),localStorage.removeItem("token"),localStorage.removeItem("user")}finally{a(!1)}});return()=>e()},[]);const l={user:n,isAuthenticated:o,isLoading:i,login:async(e,t)=>{try{a(!0),console.log("\ud83d\ude80 AuthContext: Starting login process");const n=await Yr({email:e,password:t});if(console.log("\u2705 AuthContext: Login service response:",n),!n.user)throw console.error("\u274c AuthContext: Invalid response structure:",n),new Error("Invalid response from server");n.token&&localStorage.setItem("token",n.token),localStorage.setItem("user",JSON.stringify(n.user)),s(n.user),console.log("\ud83d\udcbe AuthContext: User data saved to localStorage and state"),Or.success("Login successful!")}catch(n){console.error("\ud83d\udca5 AuthContext: Login error:",n);const e=n.message||"Login failed";throw Or.error(e),n}finally{a(!1)}},logout:async()=>{try{await $r()}catch(e){console.error("Logout error:",e)}finally{s(null),localStorage.removeItem("token"),localStorage.removeItem("user"),Or.success("Logged out successfully")}},updateProfile:async e=>{try{const t=await es(e);s(t),localStorage.setItem("user",JSON.stringify(t)),Or.success("Profile updated successfully")}catch(t){const e=t.message||"Profile update failed";throw Or.error(e),t}},refreshUser:async()=>{try{if(Fr.auth.currentUser){const e=await Zr();s(e),localStorage.setItem("user",JSON.stringify(e))}}catch(e){s(null),localStorage.removeItem("token"),localStorage.removeItem("user")}}};return(0,yn.jsx)(Es.Provider,{value:l,children:t})},Cs=["_f"],Is=["name"],js=["_f"],Ps=["ref","message","type"],Ds=["formControl"];var Rs=e=>"checkbox"===e.type,Os=e=>e instanceof Date,Ls=e=>null==e;const Ms=e=>"object"===typeof e;var Fs=e=>!Ls(e)&&!Array.isArray(e)&&Ms(e)&&!Os(e),Us=e=>Fs(e)&&e.target?Rs(e.target)?e.target.checked:e.target.value:e,Vs=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),Bs="undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement&&"undefined"!==typeof document;function qs(e){let t;const n=Array.isArray(e),r="undefined"!==typeof FileList&&e instanceof FileList;if(e instanceof Date)t=new Date(e);else{if(Bs&&(e instanceof Blob||r)||!n&&!Fs(e))return e;if(t=n?[]:Object.create(Object.getPrototypeOf(e)),n||(e=>{const t=e.constructor&&e.constructor.prototype;return Fs(t)&&t.hasOwnProperty("isPrototypeOf")})(e))for(const n in e)e.hasOwnProperty(n)&&(t[n]=qs(e[n]));else t=e}return t}var zs=e=>/^\w*$/.test(e),Ks=e=>void 0===e,Ws=e=>Array.isArray(e)?e.filter(Boolean):[],Hs=e=>Ws(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Gs=(e,t,n)=>{if(!t||!Fs(e))return n;const r=(zs(t)?[t]:Hs(t)).reduce((e,t)=>Ls(e)?e:e[t],e);return Ks(r)||r===e?Ks(e[t])?n:e[t]:r},Qs=e=>"boolean"===typeof e,Js=(e,t,n)=>{let r=-1;const s=zs(t)?[t]:Hs(t),i=s.length,a=i-1;for(;++r<i;){const t=s[r];let i=n;if(r!==a){const n=e[t];i=Fs(n)||Array.isArray(n)?n:isNaN(+s[r+1])?{}:[]}if("__proto__"===t||"constructor"===t||"prototype"===t)return;e[t]=i,e=e[t]}};const Ys="blur",Xs="focusout",$s="onBlur",Zs="onChange",ei="onSubmit",ti="onTouched",ni="all",ri="max",si="min",ii="maxLength",ai="minLength",oi="pattern",li="required",ci="validate",ui=r.createContext(null);ui.displayName="HookFormContext";var di=function(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const s={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(s,i,{get:()=>{const s=i;return t._proxyFormState[s]!==ni&&(t._proxyFormState[s]=!r||ni),n&&(n[s]=!0),e[s]}});return s};const hi="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;var fi=e=>"string"===typeof e,mi=(e,t,n,r,s)=>fi(e)?(r&&t.watch.add(e),Gs(n,e,s)):Array.isArray(e)?e.map(e=>(r&&t.watch.add(e),Gs(n,e))):(r&&(t.watchAll=!0),n),pi=e=>Ls(e)||!Ms(e);function gi(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new WeakSet;if(pi(e)||pi(t))return e===t;if(Os(e)&&Os(t))return e.getTime()===t.getTime();const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const i of r){const r=e[i];if(!s.includes(i))return!1;if("ref"!==i){const e=t[i];if(Os(r)&&Os(e)||Fs(r)&&Fs(e)||Array.isArray(r)&&Array.isArray(e)?!gi(r,e,n):r!==e)return!1}}return!0}var yi=(e,t,n,r,s)=>t?(0,Oe.A)((0,Oe.A)({},n[e]),{},{types:(0,Oe.A)((0,Oe.A)({},n[e]&&n[e].types?n[e].types:{}),{},{[r]:s||!0})}):{},vi=e=>Array.isArray(e)?e:[e],xi=()=>{let e=[];return{get observers(){return e},next:t=>{for(const n of e)n.next&&n.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(e=>e!==t)}}),unsubscribe:()=>{e=[]}}};function bi(e,t){const n={};for(const r in e)if(e.hasOwnProperty(r)){const s=e[r],i=t[r];if(s&&Fs(s)&&i){const e=bi(s,i);Fs(e)&&(n[r]=e)}else e[r]&&(n[r]=i)}return n}var wi=e=>Fs(e)&&!Object.keys(e).length,ki=e=>"file"===e.type,_i=e=>"function"===typeof e,Ni=e=>{if(!Bs)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Si=e=>"select-multiple"===e.type,Ei=e=>"radio"===e.type,Ai=e=>Ni(e)&&e.isConnected;function Ti(e,t){const n=Array.isArray(t)?t:zs(t)?[t]:Hs(t),r=1===n.length?e:function(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=Ks(e)?r++:e[t[r++]];return e}(e,n),s=n.length-1,i=n[s];return r&&delete r[i],0!==s&&(Fs(r)&&wi(r)||Array.isArray(r)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!Ks(e[t]))return!1;return!0}(r))&&Ti(e,n.slice(0,-1)),e}function Ci(e){return Array.isArray(e)||Fs(e)&&!(e=>{for(const t in e)if(_i(e[t]))return!0;return!1})(e)}function Ii(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const n in e)Ci(e[n])?(t[n]=Array.isArray(e[n])?[]:{},Ii(e[n],t[n])):Ks(e[n])||(t[n]=!0);return t}function ji(e,t,n){n||(n=Ii(t));for(const r in e)Ci(e[r])?Ks(t)||pi(n[r])?n[r]=Ii(e[r],Array.isArray(e[r])?[]:{}):ji(e[r],Ls(t)?{}:t[r],n[r]):n[r]=!gi(e[r],t[r]);return n}const Pi={value:!1,isValid:!1},Di={value:!0,isValid:!0};var Ri=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Ks(e[0].attributes.value)?Ks(e[0].value)||""===e[0].value?Di:{value:e[0].value,isValid:!0}:Di:Pi}return Pi},Oi=(e,t)=>{let{valueAsNumber:n,valueAsDate:r,setValueAs:s}=t;return Ks(e)?e:n?""===e?NaN:e?+e:e:r&&fi(e)?new Date(e):s?s(e):e};const Li={isValid:!1,value:null};var Mi=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,Li):Li;function Fi(e){const t=e.ref;return ki(t)?t.files:Ei(t)?Mi(e.refs).value:Si(t)?[...t.selectedOptions].map(e=>{let{value:t}=e;return t}):Rs(t)?Ri(e.refs).value:Oi(Ks(t.value)?e.ref.value:t.value,e)}var Ui=e=>e instanceof RegExp,Vi=e=>Ks(e)?e:Ui(e)?e.source:Fs(e)?Ui(e.value)?e.value.source:e.value:e,Bi=e=>({isOnSubmit:!e||e===ei,isOnBlur:e===$s,isOnChange:e===Zs,isOnAll:e===ni,isOnTouch:e===ti});const qi="AsyncFunction";var zi=e=>!!e&&!!e.validate&&!!(_i(e.validate)&&e.validate.constructor.name===qi||Fs(e.validate)&&Object.values(e.validate).find(e=>e.constructor.name===qi)),Ki=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));const Wi=(e,t,n,r)=>{for(const s of n||Object.keys(e)){const n=Gs(e,s);if(n){const{_f:e}=n,i=Ur(n,Cs);if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],s)&&!r)return!0;if(e.ref&&t(e.ref,e.name)&&!r)return!0;if(Wi(i,t))break}else if(Fs(i)&&Wi(i,t))break}}};function Hi(e,t,n){const r=Gs(e,n);if(r||zs(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const r=s.join("."),i=Gs(t,r),a=Gs(e,r);if(i&&!Array.isArray(i)&&n!==r)return{name:n};if(a&&a.type)return{name:r,error:a};if(a&&a.root&&a.root.type)return{name:"".concat(r,".root"),error:a.root};s.pop()}return{name:n}}var Gi=(e,t,n)=>{const r=vi(Gs(e,n));return Js(r,"root",t[n]),Js(e,n,r),e};function Qi(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"validate";if(fi(e)||Array.isArray(e)&&e.every(fi)||Qs(e)&&!e)return{type:n,message:fi(e)?e:"",ref:t}}var Ji=e=>Fs(e)&&!Ui(e)?e:{value:e,message:""},Yi=async(e,t,n,r,s,i)=>{const{ref:a,refs:o,required:l,maxLength:c,minLength:u,min:d,max:h,pattern:f,validate:m,name:p,valueAsNumber:g,mount:y}=e._f,v=Gs(n,p);if(!y||t.has(p))return{};const x=o?o[0]:a,b=e=>{s&&x.reportValidity&&(x.setCustomValidity(Qs(e)?"":e||""),x.reportValidity())},w={},k=Ei(a),_=Rs(a),N=k||_,S=(g||ki(a))&&Ks(a.value)&&Ks(v)||Ni(a)&&""===a.value||""===v||Array.isArray(v)&&!v.length,E=yi.bind(null,p,r,w),A=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ii,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ai;const i=e?t:n;w[p]=(0,Oe.A)({type:e?r:s,message:i,ref:a},E(e?r:s,i))};if(i?!Array.isArray(v)||!v.length:l&&(!N&&(S||Ls(v))||Qs(v)&&!v||_&&!Ri(o).isValid||k&&!Mi(o).isValid)){const{value:e,message:t}=fi(l)?{value:!!l,message:l}:Ji(l);if(e&&(w[p]=(0,Oe.A)({type:li,message:t,ref:x},E(li,t)),!r))return b(t),w}if(!S&&(!Ls(d)||!Ls(h))){let e,t;const n=Ji(h),s=Ji(d);if(Ls(v)||isNaN(v)){const r=a.valueAsDate||new Date(v),i=e=>new Date((new Date).toDateString()+" "+e),o="time"==a.type,l="week"==a.type;fi(n.value)&&v&&(e=o?i(v)>i(n.value):l?v>n.value:r>new Date(n.value)),fi(s.value)&&v&&(t=o?i(v)<i(s.value):l?v<s.value:r<new Date(s.value))}else{const r=a.valueAsNumber||(v?+v:v);Ls(n.value)||(e=r>n.value),Ls(s.value)||(t=r<s.value)}if((e||t)&&(A(!!e,n.message,s.message,ri,si),!r))return b(w[p].message),w}if((c||u)&&!S&&(fi(v)||i&&Array.isArray(v))){const e=Ji(c),t=Ji(u),n=!Ls(e.value)&&v.length>+e.value,s=!Ls(t.value)&&v.length<+t.value;if((n||s)&&(A(n,e.message,t.message),!r))return b(w[p].message),w}if(f&&!S&&fi(v)){const{value:e,message:t}=Ji(f);if(Ui(e)&&!v.match(e)&&(w[p]=(0,Oe.A)({type:oi,message:t,ref:a},E(oi,t)),!r))return b(t),w}if(m)if(_i(m)){const e=Qi(await m(v,n),x);if(e&&(w[p]=(0,Oe.A)((0,Oe.A)({},e),E(ci,e.message)),!r))return b(e.message),w}else if(Fs(m)){let e={};for(const t in m){if(!wi(e)&&!r)break;const s=Qi(await m[t](v,n),x,t);s&&(e=(0,Oe.A)((0,Oe.A)({},s),E(t,s.message)),b(s.message),r&&(w[p]=e))}if(!wi(e)&&(w[p]=(0,Oe.A)({ref:x},e),!r))return w}return b(!0),w};const Xi={mode:ei,reValidateMode:Zs,shouldFocusError:!0};function $i(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,Oe.A)((0,Oe.A)({},Xi),t),r={submitCount:0,isDirty:!1,isReady:!1,isLoading:_i(n.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1},s={},i=(Fs(n.defaultValues)||Fs(n.values))&&qs(n.defaultValues||n.values)||{},a=n.shouldUnregister?{}:qs(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let d=(0,Oe.A)({},u);const h={array:xi(),state:xi()},f=n.criteriaMode===ni,m=async e=>{if(!n.disabled&&(u.isValid||d.isValid||e)){const e=n.resolver?wi((await x()).errors):await b(s,!0);e!==r.isValid&&h.state.next({isValid:e})}},p=(e,t)=>{!n.disabled&&(u.isValidating||u.validatingFields||d.isValidating||d.validatingFields)&&((e||Array.from(l.mount)).forEach(e=>{e&&(t?Js(r.validatingFields,e,t):Ti(r.validatingFields,e))}),h.state.next({validatingFields:r.validatingFields,isValidating:!wi(r.validatingFields)}))},g=(e,t,n,r)=>{const l=Gs(s,e);if(l){const s=Gs(a,e,Ks(n)?Gs(i,e):n);Ks(s)||r&&r.defaultChecked||t?Js(a,e,t?s:Fi(l._f)):_(e,s),o.mount&&m()}},y=(e,t,s,a,o)=>{let l=!1,c=!1;const f={name:e};if(!n.disabled){if(!s||a){(u.isDirty||d.isDirty)&&(c=r.isDirty,r.isDirty=f.isDirty=w(),l=c!==f.isDirty);const n=gi(Gs(i,e),t);c=!!Gs(r.dirtyFields,e),n?Ti(r.dirtyFields,e):Js(r.dirtyFields,e,!0),f.dirtyFields=r.dirtyFields,l=l||(u.dirtyFields||d.dirtyFields)&&c!==!n}if(s){const t=Gs(r.touchedFields,e);t||(Js(r.touchedFields,e,s),f.touchedFields=r.touchedFields,l=l||(u.touchedFields||d.touchedFields)&&t!==s)}l&&o&&h.state.next(f)}return l?f:{}},v=(t,s,i,a)=>{const o=Gs(r.errors,t),l=(u.isValid||d.isValid)&&Qs(s)&&r.isValid!==s;var f;if(n.delayError&&i?(f=()=>((e,t)=>{Js(r.errors,e,t),h.state.next({errors:r.errors})})(t,i),e=e=>{clearTimeout(c),c=setTimeout(f,e)},e(n.delayError)):(clearTimeout(c),e=null,i?Js(r.errors,t,i):Ti(r.errors,t)),(i?!gi(o,i):o)||!wi(a)||l){const e=(0,Oe.A)((0,Oe.A)((0,Oe.A)({},a),l&&Qs(s)?{isValid:s}:{}),{},{errors:r.errors,name:t});r=(0,Oe.A)((0,Oe.A)({},r),e),h.state.next(e)}},x=async e=>{p(e,!0);const t=await n.resolver(a,n.context,((e,t,n,r)=>{const s={};for(const i of e){const e=Gs(t,i);e&&Js(s,i,e._f)}return{criteriaMode:n,names:[...e],fields:s,shouldUseNativeValidation:r}})(e||l.mount,s,n.criteriaMode,n.shouldUseNativeValidation));return p(e),t},b=async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{valid:!0};for(const i in e){const o=e[i];if(o){const{_f:e}=o,i=Ur(o,js);if(e){const i=l.array.has(e.name),c=o._f&&zi(o._f);c&&u.validatingFields&&p([e.name],!0);const d=await Yi(o,l.disabled,a,f,n.shouldUseNativeValidation&&!t,i);if(c&&u.validatingFields&&p([e.name]),d[e.name]&&(s.valid=!1,t))break;!t&&(Gs(d,e.name)?i?Gi(r.errors,d,e.name):Js(r.errors,e.name,d[e.name]):Ti(r.errors,e.name))}!wi(i)&&await b(i,t,s)}}return s.valid},w=(e,t)=>!n.disabled&&(e&&t&&Js(a,e,t),!gi(C(),i)),k=(e,t,n)=>mi(e,l,(0,Oe.A)({},o.mount?a:Ks(t)?i:fi(e)?{[e]:t}:t),n,t),_=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=Gs(s,e);let i=t;if(r){const n=r._f;n&&(!n.disabled&&Js(a,e,Oi(t,n)),i=Ni(n.ref)&&Ls(t)?"":t,Si(n.ref)?[...n.ref.options].forEach(e=>e.selected=i.includes(e.value)):n.refs?Rs(n.ref)?n.refs.forEach(e=>{e.defaultChecked&&e.disabled||(Array.isArray(i)?e.checked=!!i.find(t=>t===e.value):e.checked=i===e.value||!!i)}):n.refs.forEach(e=>e.checked=e.value===i):ki(n.ref)?n.ref.value="":(n.ref.value=i,n.ref.type||h.state.next({name:e,values:qs(a)})))}(n.shouldDirty||n.shouldTouch)&&y(e,i,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&T(e)},N=(e,t,n)=>{for(const r in t){if(!t.hasOwnProperty(r))return;const i=t[r],a=e+"."+r,o=Gs(s,a);(l.array.has(e)||Fs(i)||o&&!o._f)&&!Os(i)?N(a,i,n):_(a,i,n)}},S=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const c=Gs(s,e),f=l.array.has(e),m=qs(t);Js(a,e,m),f?(h.array.next({name:e,values:qs(a)}),(u.isDirty||u.dirtyFields||d.isDirty||d.dirtyFields)&&n.shouldDirty&&h.state.next({name:e,dirtyFields:ji(i,a),isDirty:w(e,m)})):!c||c._f||Ls(m)?_(e,m,n):N(e,m,n),Ki(e,l)&&h.state.next((0,Oe.A)((0,Oe.A)({},r),{},{name:e})),h.state.next({name:o.mount?e:void 0,values:qs(a)})},E=async t=>{o.mount=!0;const i=t.target;let c=i.name,g=!0;const w=Gs(s,c),k=e=>{g=Number.isNaN(e)||Os(e)&&isNaN(e.getTime())||gi(e,Gs(a,c,e))},_=Bi(n.mode),N=Bi(n.reValidateMode);if(w){let o,E;const A=i.type?Fi(w._f):Us(t),C=t.type===Ys||t.type===Xs,I=!((S=w._f).mount&&(S.required||S.min||S.max||S.maxLength||S.minLength||S.pattern||S.validate))&&!n.resolver&&!Gs(r.errors,c)&&!w._f.deps||((e,t,n,r,s)=>!s.isOnAll&&(!n&&s.isOnTouch?!(t||e):(n?r.isOnBlur:s.isOnBlur)?!e:!(n?r.isOnChange:s.isOnChange)||e))(C,Gs(r.touchedFields,c),r.isSubmitted,N,_),j=Ki(c,l,C);Js(a,c,A),C?i&&i.readOnly||(w._f.onBlur&&w._f.onBlur(t),e&&e(0)):w._f.onChange&&w._f.onChange(t);const P=y(c,A,C),D=!wi(P)||j;if(!C&&h.state.next({name:c,type:t.type,values:qs(a)}),I)return(u.isValid||d.isValid)&&("onBlur"===n.mode?C&&m():C||m()),D&&h.state.next((0,Oe.A)({name:c},j?{}:P));if(!C&&j&&h.state.next((0,Oe.A)({},r)),n.resolver){const{errors:e}=await x([c]);if(k(A),g){const t=Hi(r.errors,s,c),n=Hi(e,s,t.name||c);o=n.error,c=n.name,E=wi(e)}}else p([c],!0),o=(await Yi(w,l.disabled,a,f,n.shouldUseNativeValidation))[c],p([c]),k(A),g&&(o?E=!1:(u.isValid||d.isValid)&&(E=await b(s,!0)));g&&(w._f.deps&&(!Array.isArray(w._f.deps)||w._f.deps.length>0)&&T(w._f.deps),v(c,E,o,P))}var S},A=(e,t)=>{if(Gs(r.errors,t)&&e.focus)return e.focus(),1},T=async function(e){let t,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=vi(e);if(n.resolver){const n=await(async e=>{const{errors:t}=await x(e);if(e)for(const n of e){const e=Gs(t,n);e?Js(r.errors,n,e):Ti(r.errors,n)}else r.errors=t;return t})(Ks(e)?e:o);t=wi(n),i=e?!o.some(e=>Gs(n,e)):t}else e?(i=(await Promise.all(o.map(async e=>{const t=Gs(s,e);return await b(t&&t._f?{[e]:t}:t)}))).every(Boolean),(i||r.isValid)&&m()):i=t=await b(s);return h.state.next((0,Oe.A)((0,Oe.A)((0,Oe.A)({},!fi(e)||(u.isValid||d.isValid)&&t!==r.isValid?{}:{name:e}),n.resolver||!e?{isValid:t}:{}),{},{errors:r.errors})),a.shouldFocus&&!i&&Wi(s,A,e?o:l.mount),i},C=(e,t)=>{let n=(0,Oe.A)({},o.mount?a:i);return t&&(n=bi(t.dirtyFields?r.dirtyFields:r.touchedFields,n)),Ks(e)?n:fi(e)?Gs(n,e):e.map(e=>Gs(n,e))},I=(e,t)=>({invalid:!!Gs((t||r).errors,e),isDirty:!!Gs((t||r).dirtyFields,e),error:Gs((t||r).errors,e),isValidating:!!Gs(r.validatingFields,e),isTouched:!!Gs((t||r).touchedFields,e)}),j=(e,t,n)=>{const i=(Gs(s,e,{_f:{}})._f||{}).ref,a=Gs(r.errors,e)||{},{ref:o,message:l,type:c}=a,u=Ur(a,Ps);Js(r.errors,e,(0,Oe.A)((0,Oe.A)((0,Oe.A)({},u),t),{},{ref:i})),h.state.next({name:e,errors:r.errors,isValid:!1}),n&&n.shouldFocus&&i&&i.focus&&i.focus()},P=e=>h.state.subscribe({next:t=>{var n,s,o;n=e.name,s=t.name,o=e.exact,n&&s&&n!==s&&!vi(n).some(e=>e&&(o?e===s:e.startsWith(s)||s.startsWith(e)))||!((e,t,n,r)=>{n(e);const{name:s}=e,i=Ur(e,Is);return wi(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(e=>t[e]===(!r||ni))})(t,e.formState||u,V,e.reRenderRoot)||e.callback((0,Oe.A)((0,Oe.A)((0,Oe.A)({values:(0,Oe.A)({},a)},r),t),{},{defaultValues:i}))}}).unsubscribe,D=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const o of e?vi(e):l.mount)l.mount.delete(o),l.array.delete(o),t.keepValue||(Ti(s,o),Ti(a,o)),!t.keepError&&Ti(r.errors,o),!t.keepDirty&&Ti(r.dirtyFields,o),!t.keepTouched&&Ti(r.touchedFields,o),!t.keepIsValidating&&Ti(r.validatingFields,o),!n.shouldUnregister&&!t.keepDefaultValue&&Ti(i,o);h.state.next({values:qs(a)}),h.state.next((0,Oe.A)((0,Oe.A)({},r),t.keepDirty?{isDirty:w()}:{})),!t.keepIsValid&&m()},R=e=>{let{disabled:t,name:n}=e;(Qs(t)&&o.mount||t||l.disabled.has(n))&&(t?l.disabled.add(n):l.disabled.delete(n))},O=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Gs(s,e);const a=Qs(t.disabled)||Qs(n.disabled);return Js(s,e,(0,Oe.A)((0,Oe.A)({},r||{}),{},{_f:(0,Oe.A)((0,Oe.A)({},r&&r._f?r._f:{ref:{name:e}}),{},{name:e,mount:!0},t)})),l.mount.add(e),r?R({disabled:Qs(t.disabled)?t.disabled:n.disabled,name:e}):g(e,!0,t.value),(0,Oe.A)((0,Oe.A)((0,Oe.A)({},a?{disabled:t.disabled||n.disabled}:{}),n.progressive?{required:!!t.required,min:Vi(t.min),max:Vi(t.max),minLength:Vi(t.minLength),maxLength:Vi(t.maxLength),pattern:Vi(t.pattern)}:{}),{},{name:e,onChange:E,onBlur:E,ref:a=>{if(a){O(e,t),r=Gs(s,e);const n=Ks(a.value)&&a.querySelectorAll&&a.querySelectorAll("input,select,textarea")[0]||a,o=(e=>Ei(e)||Rs(e))(n),l=r._f.refs||[];if(o?l.find(e=>e===n):n===r._f.ref)return;Js(s,e,{_f:(0,Oe.A)((0,Oe.A)({},r._f),o?{refs:[...l.filter(Ai),n,...Array.isArray(Gs(i,e))?[{}]:[]],ref:{type:n.type,name:e}}:{ref:n})}),g(e,!1,void 0,n)}else r=Gs(s,e,{}),r._f&&(r._f.mount=!1),(n.shouldUnregister||t.shouldUnregister)&&(!Vs(l.array,e)||!o.action)&&l.unMount.add(e)}})},L=()=>n.shouldFocusError&&Wi(s,A,l.mount),M=(e,t)=>async i=>{let o;i&&(i.preventDefault&&i.preventDefault(),i.persist&&i.persist());let c=qs(a);if(h.state.next({isSubmitting:!0}),n.resolver){const{errors:e,values:t}=await x();r.errors=e,c=qs(t)}else await b(s);if(l.disabled.size)for(const e of l.disabled)Ti(c,e);if(Ti(r.errors,"root"),wi(r.errors)){h.state.next({errors:{}});try{await e(c,i)}catch(u){o=u}}else t&&await t((0,Oe.A)({},r.errors),i),L(),setTimeout(L);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:wi(r.errors)&&!o,submitCount:r.submitCount+1,errors:r.errors}),o)throw o},F=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const c=e?qs(e):i,d=qs(c),f=wi(e),m=f?i:d;if(t.keepDefaultValues||(i=c),!t.keepValues){if(t.keepDirtyValues){const e=new Set([...l.mount,...Object.keys(ji(i,a))]);for(const t of Array.from(e))Gs(r.dirtyFields,t)?Js(m,t,Gs(a,t)):S(t,Gs(m,t))}else{if(Bs&&Ks(e))for(const e of l.mount){const t=Gs(s,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(Ni(e)){const t=e.closest("form");if(t){t.reset();break}}}}if(t.keepFieldsRef)for(const e of l.mount)S(e,Gs(m,e));else s={}}a=n.shouldUnregister?t.keepDefaultValues?qs(i):{}:qs(m),h.array.next({values:(0,Oe.A)({},m)}),h.state.next({values:(0,Oe.A)({},m)})}l={mount:t.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!t.keepIsValid||!!t.keepDirtyValues||!n.shouldUnregister&&!wi(m),o.watch=!!n.shouldUnregister,h.state.next({submitCount:t.keepSubmitCount?r.submitCount:0,isDirty:!f&&(t.keepDirty?r.isDirty:!(!t.keepDefaultValues||gi(e,i))),isSubmitted:!!t.keepIsSubmitted&&r.isSubmitted,dirtyFields:f?{}:t.keepDirtyValues?t.keepDefaultValues&&a?ji(i,a):r.dirtyFields:t.keepDefaultValues&&e?ji(i,e):t.keepDirty?r.dirtyFields:{},touchedFields:t.keepTouched?r.touchedFields:{},errors:t.keepErrors?r.errors:{},isSubmitSuccessful:!!t.keepIsSubmitSuccessful&&r.isSubmitSuccessful,isSubmitting:!1,defaultValues:i})},U=(e,t)=>F(_i(e)?e(a):e,t),V=e=>{r=(0,Oe.A)((0,Oe.A)({},r),e)},B={control:{register:O,unregister:D,getFieldState:I,handleSubmit:M,setError:j,_subscribe:P,_runSchema:x,_focusError:L,_getWatch:k,_getDirty:w,_setValid:m,_setFieldArray:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,f=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],m=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(c&&l&&!n.disabled){if(o.action=!0,m&&Array.isArray(Gs(s,e))){const t=l(Gs(s,e),c.argA,c.argB);f&&Js(s,e,t)}if(m&&Array.isArray(Gs(r.errors,e))){const t=l(Gs(r.errors,e),c.argA,c.argB);f&&Js(r.errors,e,t),((e,t)=>{!Ws(Gs(e,t)).length&&Ti(e,t)})(r.errors,e)}if((u.touchedFields||d.touchedFields)&&m&&Array.isArray(Gs(r.touchedFields,e))){const t=l(Gs(r.touchedFields,e),c.argA,c.argB);f&&Js(r.touchedFields,e,t)}(u.dirtyFields||d.dirtyFields)&&(r.dirtyFields=ji(i,a)),h.state.next({name:e,isDirty:w(e,t),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Js(a,e,t)},_setDisabledField:R,_setErrors:e=>{r.errors=e,h.state.next({errors:r.errors,isValid:!1})},_getFieldArray:e=>Ws(Gs(o.mount?a:i,e,n.shouldUnregister?Gs(i,e,[]):[])),_reset:F,_resetDefaultValues:()=>_i(n.defaultValues)&&n.defaultValues().then(e=>{U(e,n.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:()=>{for(const e of l.unMount){const t=Gs(s,e);t&&(t._f.refs?t._f.refs.every(e=>!Ai(e)):!Ai(t._f.ref))&&D(e)}l.unMount=new Set},_disableForm:e=>{Qs(e)&&(h.state.next({disabled:e}),Wi(s,(t,n)=>{const r=Gs(s,n);r&&(t.disabled=r._f.disabled||e,Array.isArray(r._f.refs)&&r._f.refs.forEach(t=>{t.disabled=r._f.disabled||e}))},0,!1))},_subjects:h,_proxyFormState:u,get _fields(){return s},get _formValues(){return a},get _state(){return o},set _state(e){o=e},get _defaultValues(){return i},get _names(){return l},set _names(e){l=e},get _formState(){return r},get _options(){return n},set _options(e){n=(0,Oe.A)((0,Oe.A)({},n),e)}},subscribe:e=>(o.mount=!0,d=(0,Oe.A)((0,Oe.A)({},d),e.formState),P((0,Oe.A)((0,Oe.A)({},e),{},{formState:d}))),trigger:T,register:O,handleSubmit:M,watch:(e,t)=>_i(e)?h.state.subscribe({next:n=>"values"in n&&e(k(void 0,t),n)}):k(e,t,!0),setValue:S,getValues:C,reset:U,resetField:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Gs(s,e)&&(Ks(t.defaultValue)?S(e,qs(Gs(i,e))):(S(e,t.defaultValue),Js(i,e,qs(t.defaultValue))),t.keepTouched||Ti(r.touchedFields,e),t.keepDirty||(Ti(r.dirtyFields,e),r.isDirty=t.defaultValue?w(e,qs(Gs(i,e))):w()),t.keepError||(Ti(r.errors,e),u.isValid&&m()),h.state.next((0,Oe.A)({},r)))},clearErrors:e=>{e&&vi(e).forEach(e=>Ti(r.errors,e)),h.state.next({errors:e?r.errors:{}})},unregister:D,setError:j,setFocus:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Gs(s,e),r=n&&n._f;if(r){const e=r.refs?r.refs[0]:r.ref;e.focus&&(e.focus(),t.shouldSelect&&_i(e.select)&&e.select())}},getFieldState:I};return(0,Oe.A)((0,Oe.A)({},B),{},{formControl:B})}function Zi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=r.useRef(void 0),n=r.useRef(void 0),[s,i]=r.useState({isDirty:!1,isValidating:!1,isLoading:_i(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:_i(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current=(0,Oe.A)((0,Oe.A)({},e.formControl),{},{formState:s}),e.defaultValues&&!_i(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const n=$i(e),{formControl:r}=n,i=Ur(n,Ds);t.current=(0,Oe.A)((0,Oe.A)({},i),{},{formState:s})}const a=t.current.control;return a._options=e,hi(()=>{const e=a._subscribe({formState:a._proxyFormState,callback:()=>i((0,Oe.A)({},a._formState)),reRenderRoot:!0});return i(e=>(0,Oe.A)((0,Oe.A)({},e),{},{isReady:!0})),a._formState.isReady=!0,e},[a]),r.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),r.useEffect(()=>{e.mode&&(a._options.mode=e.mode),e.reValidateMode&&(a._options.reValidateMode=e.reValidateMode)},[a,e.mode,e.reValidateMode]),r.useEffect(()=>{e.errors&&(a._setErrors(e.errors),a._focusError())},[a,e.errors]),r.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,e.shouldUnregister]),r.useEffect(()=>{if(a._proxyFormState.isDirty){const e=a._getDirty();e!==s.isDirty&&a._subjects.state.next({isDirty:e})}},[a,s.isDirty]),r.useEffect(()=>{e.values&&!gi(e.values,n.current)?(a._reset(e.values,(0,Oe.A)({keepFieldsRef:!0},a._options.resetOptions)),n.current=e.values,i(e=>(0,Oe.A)({},e))):a._resetDefaultValues()},[a,e.values]),r.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next((0,Oe.A)({},a._formState))),a._removeUnmounted()}),t.current.formState=di(s,a),t.current}const ea=qr("Hotel",[["path",{d:"M18 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2Z",key:"p9z69c"}],["path",{d:"m9 16 .348-.24c1.465-1.013 3.84-1.013 5.304 0L15 16",key:"1bvcvh"}],["path",{d:"M8 7h.01",key:"1vti4s"}],["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M12 7h.01",key:"1ivr5q"}],["path",{d:"M12 11h.01",key:"z322tv"}],["path",{d:"M16 11h.01",key:"xkw8gn"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M10 22v-6.5m4 0V22",key:"16gs4s"}]]),ta=qr("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),na=qr("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ra=()=>{const[e,t]=r.useState(!1),{login:n,refreshUser:s,isAuthenticated:i,user:a}=As(),o=te(),[l,c]=r.useState(!1),{register:u,handleSubmit:d,formState:{errors:h}}=Zi();return r.useEffect(()=>{if(i){var e;const t=(null===a||void 0===a?void 0:a.role)||(null===(e=JSON.parse(localStorage.getItem("user")||"{}"))||void 0===e?void 0:e.role);"super_admin"===t?o("/super-admin"):["admin","manager","staff"].includes(t)?o("/admin"):o("/client")}},[i,a,o]),(0,yn.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,yn.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-blue-100",children:(0,yn.jsx)(ea,{className:"h-6 w-6 text-blue-600"})}),(0,yn.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Hotel Management System"}),(0,yn.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Sign in to your account"})]}),(0,yn.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:d(async e=>{try{c(!0),await n(e.email,e.password),await s();const t=localStorage.getItem("user"),r=t?JSON.parse(t).role:null;"super_admin"===r?o("/super-admin"):["admin","manager","staff"].includes(r)?o("/admin"):o("/client")}catch(t){console.error("Login error:",t)}finally{c(!1)}}),children:[(0,yn.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),(0,yn.jsx)("input",(0,Oe.A)((0,Oe.A)({},u("email",{required:"Email is required",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Enter a valid email address"}})),{},{id:"email",name:"email",type:"email",autoComplete:"email",className:"appearance-none rounded-none relative block w-full px-3 py-2 border ".concat(h.email?"border-red-300":"border-gray-300"," placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm"),placeholder:"Email address"})),h.email&&(0,yn.jsx)("p",{className:"mt-1 text-sm text-red-600",children:h.email.message})]}),(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,yn.jsx)("input",(0,Oe.A)((0,Oe.A)({},u("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}})),{},{id:"password",name:"password",type:e?"text":"password",autoComplete:"current-password",className:"appearance-none rounded-none relative block w-full px-3 py-2 pr-10 border ".concat(h.password?"border-red-300":"border-gray-300"," placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm"),placeholder:"Password"})),(0,yn.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>t(!e),children:e?(0,yn.jsx)(ta,{className:"h-5 w-5 text-gray-400"}):(0,yn.jsx)(na,{className:"h-5 w-5 text-gray-400"})}),h.password&&(0,yn.jsx)("p",{className:"mt-1 text-sm text-red-600",children:h.password.message})]})]}),(0,yn.jsx)("div",{children:(0,yn.jsx)("button",{type:"submit",disabled:l,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:l?(0,yn.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):"Sign in"})}),(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("p",{className:"text-sm text-gray-600",children:"Demo Credentials:"}),(0,yn.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[(0,yn.jsxs)("p",{children:[(0,yn.jsx)("strong",{children:"Admin:"})," admin@hotel.com | admin123"]}),(0,yn.jsxs)("p",{children:[(0,yn.jsx)("strong",{children:"Client:"})," Register new account"]})]})]})]})]})})},sa=qr("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),ia=qr("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),aa=qr("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),oa=()=>{const{isAuthenticated:e,user:t}=As(),n=te(),s=Z();r.useEffect(()=>{"/"===s.pathname&&e||e&&(["admin","manager","staff"].includes(null===t||void 0===t?void 0:t.role)?n("/admin",{replace:!0}):n("/client",{replace:!0}))},[e,t,n,s.pathname]);return(0,yn.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,yn.jsxs)("div",{className:"relative overflow-hidden",children:[(0,yn.jsx)("div",{className:"absolute inset-0",children:(0,yn.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50 to-indigo-100"})}),(0,yn.jsx)("div",{className:"relative pt-16 pb-24 sm:pt-24",children:(0,yn.jsx)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"mx-auto h-16 w-16 flex items-center justify-center rounded-2xl bg-blue-600 shadow-lg",children:(0,yn.jsx)(sa,{className:"h-8 w-8 text-white"})}),(0,yn.jsx)("h1",{className:"mt-6 text-4xl font-extrabold tracking-tight text-gray-900 sm:text-5xl md:text-6xl",children:"Welcome to Our Hotel"}),(0,yn.jsx)("p",{className:"mx-auto mt-6 max-w-2xl text-xl text-gray-600",children:"Experience comfort and luxury. Book your stay with ease or manage hotel operations with a powerful admin suite."}),(0,yn.jsxs)("div",{className:"mt-10 flex justify-center gap-4",children:[(0,yn.jsxs)("button",{onClick:()=>{if(e)return["admin","manager","staff"].includes(null===t||void 0===t?void 0:t.role)?void n("/admin"):void n("/client");n("/login")},className:"inline-flex items-center rounded-md bg-blue-600 px-6 py-3 text-white shadow hover:bg-blue-700",children:["Admin Portal",(0,yn.jsx)(ia,{className:"ml-2 h-5 w-5"})]}),(0,yn.jsxs)("button",{onClick:()=>{n("/client")},className:"inline-flex items-center rounded-md bg-white px-6 py-3 text-blue-700 ring-1 ring-inset ring-blue-200 hover:bg-blue-50",children:["Client Portal",(0,yn.jsx)(ia,{className:"ml-2 h-5 w-5"})]})]}),(0,yn.jsxs)("div",{className:"mt-6 flex justify-center gap-6 text-sm text-gray-600",children:[(0,yn.jsxs)(Ie,{to:"/login",className:"inline-flex items-center hover:text-gray-800",children:[(0,yn.jsx)(aa,{className:"mr-2 h-4 w-4"})," Sign in"]}),(0,yn.jsxs)(Ie,{to:"/login",className:"inline-flex items-center hover:text-gray-800",children:[(0,yn.jsx)(aa,{className:"mr-2 h-4 w-4"})," Sign in"]})]})]})})})]}),(0,yn.jsx)("div",{className:"mx-auto max-w-7xl py-12 px-4 sm:px-6 lg:px-8",children:(0,yn.jsxs)("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-3",children:[(0,yn.jsxs)("div",{className:"rounded-xl bg-white p-6 shadow",children:[(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Modern Rooms"}),(0,yn.jsx)("p",{className:"mt-2 text-gray-600",children:"Comfortable, well-appointed rooms with all the amenities you need."})]}),(0,yn.jsxs)("div",{className:"rounded-xl bg-white p-6 shadow",children:[(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Prime Location"}),(0,yn.jsx)("p",{className:"mt-2 text-gray-600",children:"Close to business hubs and attractions for convenience."})]}),(0,yn.jsxs)("div",{className:"rounded-xl bg-white p-6 shadow",children:[(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Great Service"}),(0,yn.jsx)("p",{className:"mt-2 text-gray-600",children:"Friendly staff ready to help 24/7 for a seamless stay."})]})]})})]})},la=qr("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),ca=qr("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]),ua=qr("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]),da=qr("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),ha=qr("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),fa=qr("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),ma=qr("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),pa=()=>{const{user:e,logout:t,isAuthenticated:n}=As(),[s,i]=(0,r.useState)([]),[a,o]=(0,r.useState)(!0);(0,r.useEffect)(()=>{l()},[]);const l=async()=>{try{var e;o(!0);const t=await as.getRooms();i((null===(e=t.data)||void 0===e?void 0:e.slice(0,6))||[])}catch(t){Or.error("Failed to load rooms"),console.error("Load rooms error:",t)}finally{o(!1)}},c=[{icon:la,title:"Free WiFi",description:"High-speed internet throughout the hotel"},{icon:ca,title:"Free Parking",description:"Complimentary parking for all guests"},{icon:ua,title:"Room Service",description:"24/7 room service available"},{icon:da,title:"Luxury Amenities",description:"Premium amenities in every room"}];return a&&n?(0,yn.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,yn.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):(0,yn.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,yn.jsx)("header",{className:"bg-white shadow",children:(0,yn.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,yn.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"h-8 w-8 bg-blue-600 rounded-lg flex items-center justify-center",children:(0,yn.jsx)("span",{className:"text-white font-bold",children:"H"})}),(0,yn.jsx)("span",{className:"ml-2 text-xl font-semibold text-gray-900",children:"Hotel Management"})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)(ha,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,yn.jsx)("input",{type:"text",placeholder:"Search rooms...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n?(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)("div",{className:"h-8 w-8 bg-gray-300 rounded-full flex items-center justify-center",children:(0,yn.jsx)(fa,{className:"h-4 w-4 text-gray-600"})}),(0,yn.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[null===e||void 0===e?void 0:e.firstName," ",null===e||void 0===e?void 0:e.lastName]}),(0,yn.jsx)("button",{onClick:async()=>{await t()},className:"p-2 text-gray-500 hover:text-gray-900",title:"Logout",children:(0,yn.jsx)(ma,{className:"h-4 w-4"})})]}):(0,yn.jsx)(Ie,{to:"/login",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Sign In"})]})]})})}),(0,yn.jsx)("section",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white py-20",children:(0,yn.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[(0,yn.jsx)("h1",{className:"text-4xl font-bold mb-4",children:n?"Welcome back, ".concat(null===e||void 0===e?void 0:e.firstName,"!"):"Welcome to Our Hotel"}),(0,yn.jsx)("p",{className:"text-xl mb-8",children:n?"Ready for your next luxurious stay?":"Experience comfort and luxury. Book your stay with ease."}),n&&(0,yn.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,yn.jsx)(Ie,{to:"/client/bookings",className:"bg-white text-blue-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors",children:"View My Bookings"}),(0,yn.jsx)(Ie,{to:"/client/profile",className:"bg-transparent border-2 border-white text-white px-8 py-3 rounded-lg font-semibold hover:bg-white hover:text-blue-600 transition-colors",children:"My Profile"})]})]})}),(0,yn.jsx)("section",{className:"py-12 bg-gray-50",children:(0,yn.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,yn.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,yn.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Available Rooms"}),n&&(0,yn.jsx)(Ie,{to:"/client/bookings",className:"text-blue-600 hover:text-blue-800 font-medium",children:"View My Bookings"})]}),a?(0,yn.jsx)("div",{className:"flex justify-center py-12",children:(0,yn.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):0===s.length?(0,yn.jsxs)("div",{className:"text-center py-12",children:[(0,yn.jsx)(sa,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No rooms available"}),(0,yn.jsx)("p",{className:"text-gray-500",children:"Please check back later for available rooms."})]}):(0,yn.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(e=>{var t,n;return(0,yn.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,yn.jsx)("div",{className:"h-48 bg-gray-200 flex items-center justify-center",children:(0,yn.jsx)(sa,{className:"h-12 w-12 text-gray-400"})}),(0,yn.jsxs)("div",{className:"p-6",children:[(0,yn.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:["Room ",e.room_number]}),(0,yn.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:(null===(t=e.room_type)||void 0===t?void 0:t.name)||"Standard Room"}),(0,yn.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,yn.jsxs)("span",{className:"text-2xl font-bold text-blue-600",children:["$",(null===(n=e.room_type)||void 0===n?void 0:n.base_price)||e.price||100,"/night"]})}),(0,yn.jsx)(Ie,{to:"/book/".concat(e.id),className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-center block",children:"Book Now"})]})]},e.id)})})]})}),(0,yn.jsx)("section",{className:"py-12 bg-white",children:(0,yn.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,yn.jsx)("h2",{className:"text-2xl font-bold text-gray-900 text-center mb-12",children:"Why Choose Our Hotel?"}),(0,yn.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:c.map((e,t)=>(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"h-16 w-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,yn.jsx)(e.icon,{className:"h-8 w-8 text-blue-600"})}),(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.title}),(0,yn.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]},t))})]})}),(0,yn.jsx)("footer",{className:"bg-gray-800 text-white py-12",children:(0,yn.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Hotel Management"}),(0,yn.jsx)("p",{className:"text-gray-400",children:"Your gateway to luxury and comfort. Book your perfect stay with us."})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Quick Links"}),(0,yn.jsxs)("ul",{className:"space-y-2",children:[(0,yn.jsx)("li",{children:(0,yn.jsx)(Ie,{to:"/",className:"text-gray-400 hover:text-white",children:"Home"})}),n?(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsx)("li",{children:(0,yn.jsx)(Ie,{to:"/client/bookings",className:"text-gray-400 hover:text-white",children:"My Bookings"})}),(0,yn.jsx)("li",{children:(0,yn.jsx)(Ie,{to:"/client/profile",className:"text-gray-400 hover:text-white",children:"Profile"})})]}):(0,yn.jsx)("li",{children:(0,yn.jsx)(Ie,{to:"/login",className:"text-gray-400 hover:text-white",children:"Sign In"})})]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Contact"}),(0,yn.jsx)("p",{className:"text-gray-400",children:"Email: info@hotel.com"}),(0,yn.jsx)("p",{className:"text-gray-400",children:"Phone: +1 (555) 123-4567"})]})]})})})]})},ga=()=>{const{roomId:e}=function(){let{matches:e}=r.useContext(Y),t=e[e.length-1];return t?t.params:{}}(),{register:t,handleSubmit:n,formState:{errors:s}}=Zi(),[i,a]=r.useState([]),{isAuthenticated:o,user:l}=As(),[c,u]=r.useState(!1),d=te();r.useEffect(()=>{(async()=>{try{const e=await as.getRooms(),t=(null===e||void 0===e?void 0:e.data)||e;a(t||[])}catch(wn){Or.error("Failed to load rooms")}})()},[e]);return(0,yn.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,yn.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Book a Room"}),(0,yn.jsxs)("form",{className:"mt-6 space-y-4",onSubmit:n(async e=>{try{var t;let n;if(u(!0),o&&l){const t=await os.createGuest({first_name:e.firstName,last_name:e.lastName,email:e.email,phone:e.phone,address:e.address||null}),r=(null===t||void 0===t?void 0:t.data)||t;if(null===r||void 0===r||!r.id)throw new Error("Could not create guest");n=r.id}else{const t=await os.createGuest({first_name:e.firstName,last_name:e.lastName,email:e.email,phone:e.phone,address:e.address||null}),r=(null===t||void 0===t?void 0:t.data)||t;if(null===r||void 0===r||!r.id)throw new Error("Could not create guest");n=r.id}const r=await is.createBooking({guest_id:n,room_id:e.roomId,check_in_date:e.checkIn,check_out_date:e.checkOut,adults:parseInt(e.adults,10),children:parseInt(e.children||"0",10),special_requests:e.requests||null});if(!1===(null===r||void 0===r?void 0:r.success))throw new Error((null===r||void 0===r?void 0:r.message)||"Booking failed");Or.success("Booking created successfully");const s=(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.id)||(null===r||void 0===r?void 0:r.id)||null,a=i.find(t=>t.id===e.roomId)||{},c=parseFloat(a.price||a.base_price||a.basePrice||a.rate||10);s&&d("/payments",{state:{bookingId:s,amount:c,guestData:{email:e.email,firstName:e.firstName,lastName:e.lastName,phone:e.phone,address:e.address||"",password:"Temp".concat(Date.now(),"!")},roomId:e.roomId}})}catch(wn){Or.error(wn.message||"Failed to create booking")}finally{u(!1)}}),children:[(0,yn.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"First name"}),(0,yn.jsx)("input",(0,Oe.A)((0,Oe.A)({},t("firstName",{required:"Required"})),{},{className:"mt-1 block w-full rounded-md border ".concat(s.firstName?"border-red-300":"border-gray-300"," px-3 py-2")}))]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Last name"}),(0,yn.jsx)("input",(0,Oe.A)((0,Oe.A)({},t("lastName",{required:"Required"})),{},{className:"mt-1 block w-full rounded-md border ".concat(s.lastName?"border-red-300":"border-gray-300"," px-3 py-2")}))]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,yn.jsx)("input",(0,Oe.A)((0,Oe.A)({},t("email",{required:"Required"})),{},{className:"mt-1 block w-full rounded-md border ".concat(s.email?"border-red-300":"border-gray-300"," px-3 py-2")}))]}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),(0,yn.jsx)("input",(0,Oe.A)((0,Oe.A)({},t("phone",{required:"Required"})),{},{className:"mt-1 block w-full rounded-md border ".concat(s.phone?"border-red-300":"border-gray-300"," px-3 py-2")}))]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Address (optional)"}),(0,yn.jsx)("input",(0,Oe.A)((0,Oe.A)({},t("address")),{},{className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2"}))]})]}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Room"}),(0,yn.jsxs)("select",(0,Oe.A)((0,Oe.A)({},t("roomId",{required:"Required"})),{},{defaultValue:e||"",className:"mt-1 block w-full rounded-md border ".concat(s.roomId?"border-red-300":"border-gray-300"," px-3 py-2"),children:[(0,yn.jsx)("option",{value:"",children:"Select room"}),i.map(e=>(0,yn.jsxs)("option",{value:e.id,children:["Room ",e.room_number]},e.id))]}))]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Check-in"}),(0,yn.jsx)("input",(0,Oe.A)((0,Oe.A)({type:"date"},t("checkIn",{required:"Required"})),{},{className:"mt-1 block w-full rounded-md border ".concat(s.checkIn?"border-red-300":"border-gray-300"," px-3 py-2")}))]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Check-out"}),(0,yn.jsx)("input",(0,Oe.A)((0,Oe.A)({type:"date"},t("checkOut",{required:"Required"})),{},{className:"mt-1 block w-full rounded-md border ".concat(s.checkOut?"border-red-300":"border-gray-300"," px-3 py-2")}))]})]}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Adults"}),(0,yn.jsx)("input",(0,Oe.A)((0,Oe.A)({type:"number",min:"1",defaultValue:1},t("adults",{required:"Required",min:1})),{},{className:"mt-1 block w-full rounded-md border ".concat(s.adults?"border-red-300":"border-gray-300"," px-3 py-2")}))]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Children"}),(0,yn.jsx)("input",(0,Oe.A)((0,Oe.A)({type:"number",min:"0",defaultValue:0},t("children",{min:0})),{},{className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2"}))]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Requests (optional)"}),(0,yn.jsx)("input",(0,Oe.A)((0,Oe.A)({},t("requests")),{},{className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2"}))]})]}),(0,yn.jsx)("button",{type:"submit",disabled:c,className:"rounded-md bg-blue-600 px-4 py-2 text-white hover:bg-blue-700 disabled:opacity-50",children:c?"Booking...":"Create booking"})]})]})},ya=qr("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),va=qr("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),xa=qr("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),ba=qr("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),wa=qr("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),ka=qr("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),_a=qr("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),Na=()=>{const{user:e,updateProfile:t}=As(),[n,s]=(0,r.useState)(!1),[i,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!1),{register:c,handleSubmit:u,formState:{errors:d},reset:h}=Zi({defaultValues:{first_name:(null===e||void 0===e?void 0:e.firstName)||"",last_name:(null===e||void 0===e?void 0:e.lastName)||"",email:(null===e||void 0===e?void 0:e.email)||"",phone:(null===e||void 0===e?void 0:e.phone)||"",address:(null===e||void 0===e?void 0:e.address)||""}}),{register:f,handleSubmit:m,formState:{errors:p},reset:g,watch:y}=Zi();(0,r.useEffect)(()=>{e&&h({first_name:e.firstName||"",last_name:e.lastName||"",email:e.email||"",phone:e.phone||"",address:e.address||""})},[e,h]);const v=async e=>{try{l(!0),await t(e),s(!1),Or.success("Profile updated successfully")}catch(n){Or.error("Failed to update profile"),console.error("Profile update error:",n)}finally{l(!1)}};return(0,yn.jsxs)("div",{className:"min-h-screen bg-gray-50 py-8",children:[(0,yn.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,yn.jsx)("div",{className:"bg-white shadow rounded-lg mb-6",children:(0,yn.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Profile Settings"}),(0,yn.jsx)("div",{className:"flex space-x-3",children:n?(0,yn.jsxs)("div",{className:"flex space-x-2",children:[(0,yn.jsxs)("button",{onClick:()=>{h(),s(!1)},className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 flex items-center",children:[(0,yn.jsx)(va,{className:"h-4 w-4 mr-2"}),"Cancel"]}),(0,yn.jsxs)("button",{onClick:u(v),disabled:o,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center disabled:opacity-50",children:[(0,yn.jsx)(xa,{className:"h-4 w-4 mr-2"}),o?"Saving...":"Save Changes"]})]}):(0,yn.jsxs)("button",{onClick:()=>s(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center",children:[(0,yn.jsx)(ya,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})})]})})}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,yn.jsx)("div",{className:"lg:col-span-2",children:(0,yn.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,yn.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,yn.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Personal Information"})}),(0,yn.jsx)("div",{className:"p-6",children:(0,yn.jsxs)("form",{onSubmit:u(v),className:"space-y-6",children:[(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),(0,yn.jsx)("input",(0,Oe.A)((0,Oe.A)({},c("first_name",{required:"First name is required"})),{},{disabled:!n,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(n?"bg-white":"bg-gray-50 text-gray-500"," ").concat(d.first_name?"border-red-300":"border-gray-300")})),d.first_name&&(0,yn.jsx)("p",{className:"mt-1 text-sm text-red-600",children:d.first_name.message})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),(0,yn.jsx)("input",(0,Oe.A)((0,Oe.A)({},c("last_name",{required:"Last name is required"})),{},{disabled:!n,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(n?"bg-white":"bg-gray-50 text-gray-500"," ").concat(d.last_name?"border-red-300":"border-gray-300")})),d.last_name&&(0,yn.jsx)("p",{className:"mt-1 text-sm text-red-600",children:d.last_name.message})]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)(ba,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,yn.jsx)("input",(0,Oe.A)((0,Oe.A)({},c("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}})),{},{disabled:!n,className:"w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(n?"bg-white":"bg-gray-50 text-gray-500"," ").concat(d.email?"border-red-300":"border-gray-300")}))]}),d.email&&(0,yn.jsx)("p",{className:"mt-1 text-sm text-red-600",children:d.email.message})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)(wa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,yn.jsx)("input",(0,Oe.A)((0,Oe.A)({},c("phone")),{},{disabled:!n,className:"w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(n?"bg-white":"bg-gray-50 text-gray-500")}))]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)(ka,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,yn.jsx)("textarea",(0,Oe.A)((0,Oe.A)({},c("address")),{},{disabled:!n,rows:3,className:"w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none ".concat(n?"bg-white":"bg-gray-50 text-gray-500")}))]})]})]})})]})}),(0,yn.jsxs)("div",{className:"space-y-6",children:[(0,yn.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,yn.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,yn.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Profile Summary"})}),(0,yn.jsxs)("div",{className:"p-6",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,yn.jsx)("div",{className:"h-16 w-16 bg-blue-100 rounded-full flex items-center justify-center",children:(0,yn.jsx)(fa,{className:"h-8 w-8 text-blue-600"})}),(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:[null===e||void 0===e?void 0:e.firstName," ",null===e||void 0===e?void 0:e.lastName]}),(0,yn.jsx)("p",{className:"text-sm text-gray-500",children:"Client Account"})]})]}),(0,yn.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[(0,yn.jsxs)("p",{children:[(0,yn.jsx)("strong",{children:"Member since:"})," ",new Date(null===e||void 0===e?void 0:e.createdAt).toLocaleDateString()]}),(0,yn.jsxs)("p",{children:[(0,yn.jsx)("strong",{children:"Account status:"})," ",(0,yn.jsx)("span",{className:"text-green-600",children:"Active"})]})]})]})]}),(0,yn.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,yn.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,yn.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Security"})}),(0,yn.jsx)("div",{className:"p-6",children:(0,yn.jsxs)("button",{onClick:()=>a(!0),className:"w-full bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 flex items-center justify-center",children:[(0,yn.jsx)(_a,{className:"h-4 w-4 mr-2"}),"Change Password"]})})]}),(0,yn.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,yn.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,yn.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Notifications"})}),(0,yn.jsx)("div",{className:"p-6",children:(0,yn.jsxs)("div",{className:"space-y-4",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-700",children:"Booking confirmations"}),(0,yn.jsx)("button",{className:"bg-blue-600 text-white px-3 py-1 rounded-full text-xs",children:"On"})]}),(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-700",children:"Email updates"}),(0,yn.jsx)("button",{className:"bg-gray-300 text-gray-700 px-3 py-1 rounded-full text-xs",children:"Off"})]}),(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-700",children:"SMS notifications"}),(0,yn.jsx)("button",{className:"bg-gray-300 text-gray-700 px-3 py-1 rounded-full text-xs",children:"Off"})]})]})})]})]})]})]}),i&&(0,yn.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,yn.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,yn.jsxs)("div",{className:"mt-3",children:[(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Change Password"}),(0,yn.jsxs)("form",{onSubmit:m(async e=>{try{l(!0),await ts({current_password:e.currentPassword,new_password:e.newPassword}),a(!1),g(),Or.success("Password changed successfully")}catch(r){var t,n;Or.error((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to change password"),console.error("Password change error:",r)}finally{l(!1)}}),className:"space-y-4",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),(0,yn.jsx)("input",(0,Oe.A)((0,Oe.A)({},f("currentPassword",{required:"Current password is required"})),{},{type:"password",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),p.currentPassword&&(0,yn.jsx)("p",{className:"mt-1 text-sm text-red-600",children:p.currentPassword.message})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),(0,yn.jsx)("input",(0,Oe.A)((0,Oe.A)({},f("newPassword",{required:"New password is required",minLength:{value:6,message:"Password must be at least 6 characters"}})),{},{type:"password",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),p.newPassword&&(0,yn.jsx)("p",{className:"mt-1 text-sm text-red-600",children:p.newPassword.message})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),(0,yn.jsx)("input",(0,Oe.A)((0,Oe.A)({},f("confirmPassword",{required:"Please confirm your password",validate:e=>e===y("newPassword")||"Passwords do not match"})),{},{type:"password",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),p.confirmPassword&&(0,yn.jsx)("p",{className:"mt-1 text-sm text-red-600",children:p.confirmPassword.message})]}),(0,yn.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,yn.jsx)("button",{type:"button",onClick:()=>{g(),a(!1)},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,yn.jsx)("button",{type:"submit",disabled:o,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:o?"Changing...":"Change Password"})]})]})]})})})]})},Sa=qr("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Ea=qr("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Aa=qr("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Ta=qr("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Ca=()=>{var e,t,n,s,i;const{user:a,isAuthenticated:o,isLoading:l}=As(),c=te(),[u,d]=(0,r.useState)([]),[h,f]=(0,r.useState)(!0),[m,p]=(0,r.useState)(""),[g,y]=(0,r.useState)("all"),[v,x]=(0,r.useState)(null),[b,w]=(0,r.useState)(!1),k=(0,r.useCallback)(async()=>{try{var e;f(!0),console.log("\ud83d\udcd6 Loading bookings for authenticated user...");const t=await is.getBookings();d(t.data||[]),console.log("\u2705 Loaded ".concat((null===(e=t.data)||void 0===e?void 0:e.length)||0," bookings"))}catch(t){if("Not authenticated"===t.message)return console.log("User not authenticated, will redirect"),void c("/client");Or.error("Failed to load bookings"),console.error("Load bookings error:",t)}finally{f(!1)}},[c]);(0,r.useEffect)(()=>{if(!l)return o?void k():(console.log("User not authenticated, redirecting..."),void c("/client"))},[o,l,a,c,k]);const _=u.filter(e=>{var t,n;const r=(e.booking_number||"").toLowerCase().includes(m.toLowerCase())||((null===(t=e.guest)||void 0===t?void 0:t.first_name)||"").toLowerCase().includes(m.toLowerCase())||((null===(n=e.guest)||void 0===n?void 0:n.last_name)||"").toLowerCase().includes(m.toLowerCase()),s="all"===g||e.status===g;return r&&s}),N=e=>{const t={confirmed:{color:"bg-green-100 text-green-800",text:"Confirmed"},pending:{color:"bg-yellow-100 text-yellow-800",text:"Pending"},cancelled:{color:"bg-red-100 text-red-800",text:"Cancelled"},completed:{color:"bg-blue-100 text-blue-800",text:"Completed"}}[e]||{color:"bg-gray-100 text-gray-800",text:e};return(0,yn.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(t.color),children:t.text})},S=()=>{x(null),w(!1)};return l||h?(0,yn.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),(0,yn.jsx)("p",{className:"mt-4 text-gray-600",children:l?"Checking authentication...":"Loading bookings..."})]})}):o?(0,yn.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,yn.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,yn.jsx)("div",{className:"bg-white shadow rounded-lg mb-6",children:(0,yn.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,yn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"My Bookings"}),(0,yn.jsx)("p",{className:"text-gray-600",children:"Manage your hotel reservations"})]}),(0,yn.jsxs)("button",{onClick:()=>{const e=[["Booking Number","Check-in","Check-out","Guests","Total Amount","Status"],..._.map(e=>[e.booking_number,new Date(e.check_in_date).toLocaleDateString(),new Date(e.check_out_date).toLocaleDateString(),"".concat(e.adults," adults, ").concat(e.children," children"),"$".concat(e.total_amount),e.status])].map(e=>e.join(",")).join("\n"),t=new Blob([e],{type:"text/csv"}),n=window.URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="my-bookings.csv",r.click(),window.URL.revokeObjectURL(n)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center",children:[(0,yn.jsx)(Sa,{className:"h-4 w-4 mr-2"}),"Export"]})]})})}),(0,yn.jsx)("div",{className:"bg-white shadow rounded-lg mb-6",children:(0,yn.jsx)("div",{className:"p-4",children:(0,yn.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,yn.jsx)("div",{className:"flex-1",children:(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)(ha,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,yn.jsx)("input",{type:"text",placeholder:"Search bookings...",value:m,onChange:e=>p(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full"})]})}),(0,yn.jsxs)("div",{className:"flex gap-2",children:[(0,yn.jsxs)("select",{value:g,onChange:e=>y(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,yn.jsx)("option",{value:"all",children:"All Status"}),(0,yn.jsx)("option",{value:"confirmed",children:"Confirmed"}),(0,yn.jsx)("option",{value:"pending",children:"Pending"}),(0,yn.jsx)("option",{value:"cancelled",children:"Cancelled"}),(0,yn.jsx)("option",{value:"completed",children:"Completed"})]}),(0,yn.jsxs)("button",{className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center",children:[(0,yn.jsx)(Ea,{className:"h-4 w-4 mr-2"}),"Filter"]})]})]})})}),(0,yn.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:0===_.length?(0,yn.jsxs)("div",{className:"text-center py-12",children:[(0,yn.jsx)(Kr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No bookings found"}),(0,yn.jsx)("p",{className:"text-gray-500",children:"You haven't made any bookings yet."})]}):(0,yn.jsx)("div",{className:"overflow-x-auto",children:(0,yn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,yn.jsx)("thead",{className:"bg-gray-50",children:(0,yn.jsxs)("tr",{children:[(0,yn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Booking"}),(0,yn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dates"}),(0,yn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Guests"}),(0,yn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,yn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,yn.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,yn.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map(e=>{var t;return(0,yn.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,yn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["#",e.booking_number]}),(0,yn.jsxs)("div",{className:"text-sm text-gray-500",children:["Room ",null===(t=e.room)||void 0===t?void 0:t.room_number]})]})}),(0,yn.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,yn.jsx)("div",{className:"text-sm text-gray-900",children:new Date(e.check_in_date).toLocaleDateString()}),(0,yn.jsxs)("div",{className:"text-sm text-gray-500",children:["to ",new Date(e.check_out_date).toLocaleDateString()]})]}),(0,yn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yn.jsxs)("div",{className:"flex items-center text-sm text-gray-900",children:[(0,yn.jsx)(Aa,{className:"h-4 w-4 mr-1 text-gray-400"}),e.adults," adults, ",e.children," children"]})}),(0,yn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yn.jsxs)("div",{className:"flex items-center text-sm font-medium text-gray-900",children:[(0,yn.jsx)(Ta,{className:"h-4 w-4 mr-1 text-gray-400"}),"$",e.total_amount]})}),(0,yn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:N(e.status)}),(0,yn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,yn.jsx)("button",{onClick:()=>(e=>{x(e),w(!0)})(e),className:"text-blue-600 hover:text-blue-900 mr-3",children:(0,yn.jsx)(na,{className:"h-4 w-4"})})})]},e.id)})})]})})}),b&&v&&(0,yn.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,yn.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white",children:(0,yn.jsxs)("div",{className:"mt-3",children:[(0,yn.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,yn.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["Booking Details - #",v.booking_number]}),(0,yn.jsx)("button",{onClick:S,className:"text-gray-400 hover:text-gray-600",children:(0,yn.jsx)(va,{className:"h-6 w-6"})})]}),(0,yn.jsxs)("div",{className:"space-y-6",children:[(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Check-in Date"}),(0,yn.jsx)("p",{className:"text-sm text-gray-900",children:new Date(v.check_in_date).toLocaleDateString()})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Check-out Date"}),(0,yn.jsx)("p",{className:"text-sm text-gray-900",children:new Date(v.check_out_date).toLocaleDateString()})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Room Number"}),(0,yn.jsx)("p",{className:"text-sm text-gray-900",children:(null===(e=v.room)||void 0===e?void 0:e.room_number)||"N/A"})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Status"}),N(v.status)]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Guest Information"}),(0,yn.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,yn.jsxs)("p",{className:"text-sm text-gray-900",children:[(0,yn.jsx)("strong",{children:"Name:"})," ",null===(t=v.guest)||void 0===t?void 0:t.first_name," ",null===(n=v.guest)||void 0===n?void 0:n.last_name]}),(0,yn.jsxs)("p",{className:"text-sm text-gray-900",children:[(0,yn.jsx)("strong",{children:"Email:"})," ",(null===(s=v.guest)||void 0===s?void 0:s.email)||"N/A"]}),(0,yn.jsxs)("p",{className:"text-sm text-gray-900",children:[(0,yn.jsx)("strong",{children:"Phone:"})," ",(null===(i=v.guest)||void 0===i?void 0:i.phone)||"N/A"]})]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Booking Details"}),(0,yn.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[(0,yn.jsxs)("p",{className:"text-sm text-gray-900",children:[(0,yn.jsx)("strong",{children:"Adults:"})," ",v.adults]}),(0,yn.jsxs)("p",{className:"text-sm text-gray-900",children:[(0,yn.jsx)("strong",{children:"Children:"})," ",v.children]}),(0,yn.jsxs)("p",{className:"text-sm text-gray-900",children:[(0,yn.jsx)("strong",{children:"Total Amount:"})," $",v.total_amount]}),v.special_requests&&(0,yn.jsxs)("p",{className:"text-sm text-gray-900",children:[(0,yn.jsx)("strong",{children:"Special Requests:"})," ",v.special_requests]})]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Booking Date"}),(0,yn.jsx)("p",{className:"text-sm text-gray-900",children:new Date(v.created_at).toLocaleString()})]})]}),(0,yn.jsx)("div",{className:"flex justify-end pt-4",children:(0,yn.jsx)("button",{onClick:S,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Close"})})]})})})]})}):null},Ia=()=>{const{user:e}=As(),[t,n]=(0,r.useState)({bookings:{today:0,month:0,revenue:0,occupancy:0},hr:{totalEmployees:0,attendance:{present:0,absent:0}},rooms:{total:0,available:0,occupied:0},guests:{total:0}}),[s,i]=(0,r.useState)([]),[a,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(!0);(0,r.useEffect)(()=>{u()},[]);const u=async()=>{try{c(!0);const e=await is.getDashboardStats();e.success&&(n(t=>(0,Oe.A)((0,Oe.A)({},t),{},{bookings:{today:e.data.todayBookings,month:e.data.monthBookings,revenue:e.data.monthRevenue,occupancy:e.data.occupancyRate}})),i(e.data.recentBookings||[]),o(e.data.upcomingCheckins||[]));const t=await ls.getDashboard();t.success&&n(e=>(0,Oe.A)((0,Oe.A)({},e),{},{hr:{totalEmployees:t.data.totalEmployees,attendance:{present:0,absent:0}}}));const r=await as.getRooms();if(r.success){const e=r.data||[],t=e.filter(e=>"available"===e.status).length,s=e.filter(e=>"occupied"===e.status).length;n(n=>(0,Oe.A)((0,Oe.A)({},n),{},{rooms:{total:e.length,available:t,occupied:s}}))}const s=await os.getGuests();s.success&&n(e=>{var t;return(0,Oe.A)((0,Oe.A)({},e),{},{guests:{total:(null===(t=s.data)||void 0===t?void 0:t.length)||0}})})}catch(e){console.error("Error fetching dashboard data:",e),Or.error("Failed to load dashboard data")}finally{c(!1)}};return l?(0,yn.jsxs)("div",{className:"space-y-6",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Dashboard"}),(0,yn.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Welcome to your hotel management dashboard"})]}),(0,yn.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,yn.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})})]}):(0,yn.jsxs)("div",{className:"space-y-6",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Dashboard"}),(0,yn.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["Welcome back, ",null===e||void 0===e?void 0:e.first_name,"! Here's your hotel management overview."]})]}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[(0,yn.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,yn.jsx)("div",{className:"p-5",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"flex-shrink-0",children:(0,yn.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center",children:(0,yn.jsx)("span",{className:"text-white font-semibold",children:"B"})})}),(0,yn.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,yn.jsxs)("dl",{children:[(0,yn.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Today's Bookings"}),(0,yn.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:t.bookings.today})]})})]})})}),(0,yn.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,yn.jsx)("div",{className:"p-5",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"flex-shrink-0",children:(0,yn.jsx)("div",{className:"w-8 h-8 bg-green-500 rounded-md flex items-center justify-center",children:(0,yn.jsx)("span",{className:"text-white font-semibold",children:"R"})})}),(0,yn.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,yn.jsxs)("dl",{children:[(0,yn.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Available Rooms"}),(0,yn.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:t.rooms.available})]})})]})})}),(0,yn.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,yn.jsx)("div",{className:"p-5",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"flex-shrink-0",children:(0,yn.jsx)("div",{className:"w-8 h-8 bg-yellow-500 rounded-md flex items-center justify-center",children:(0,yn.jsx)("span",{className:"text-white font-semibold",children:"E"})})}),(0,yn.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,yn.jsxs)("dl",{children:[(0,yn.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Employees"}),(0,yn.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:t.hr.totalEmployees})]})})]})})}),(0,yn.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,yn.jsx)("div",{className:"p-5",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"flex-shrink-0",children:(0,yn.jsx)("div",{className:"w-8 h-8 bg-purple-500 rounded-md flex items-center justify-center",children:(0,yn.jsx)("span",{className:"text-white font-semibold",children:"$"})})}),(0,yn.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,yn.jsxs)("dl",{children:[(0,yn.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Monthly Revenue"}),(0,yn.jsxs)("dd",{className:"text-lg font-medium text-gray-900",children:["$",t.bookings.revenue.toLocaleString()]})]})})]})})})]}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 gap-5 lg:grid-cols-2",children:[(0,yn.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,yn.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,yn.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Recent Bookings"}),(0,yn.jsx)("div",{className:"mt-5",children:(0,yn.jsx)("div",{className:"flow-root",children:(0,yn.jsx)("ul",{className:"-mb-8",children:s.slice(0,5).map((e,t)=>(0,yn.jsx)("li",{children:(0,yn.jsxs)("div",{className:"relative pb-8",children:[t!==s.length-1&&(0,yn.jsx)("span",{className:"absolute top-4 left-4 -ml-px h-full w-0.5 bg-gray-200"}),(0,yn.jsxs)("div",{className:"relative flex space-x-3",children:[(0,yn.jsx)("div",{children:(0,yn.jsx)("span",{className:"h-8 w-8 rounded-full bg-blue-500 flex items-center justify-center ring-8 ring-white",children:(0,yn.jsx)("span",{className:"text-white text-sm font-medium",children:"B"})})}),(0,yn.jsxs)("div",{className:"min-w-0 flex-1 pt-1.5 flex justify-between space-x-4",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("p",{className:"text-sm text-gray-500",children:["New booking for ",(0,yn.jsxs)("span",{className:"font-medium text-gray-900",children:[e.first_name," ",e.last_name]})]}),(0,yn.jsxs)("p",{className:"text-xs text-gray-400",children:["Room ",e.room_number," \u2022 ",e.check_in_date," to ",e.check_out_date]})]}),(0,yn.jsx)("div",{className:"text-right text-sm whitespace-nowrap text-gray-500",children:(0,yn.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("confirmed"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.status})})]})]})]})},e.id))})})})]})}),(0,yn.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,yn.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,yn.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Upcoming Check-ins"}),(0,yn.jsx)("div",{className:"mt-5",children:(0,yn.jsx)("div",{className:"flow-root",children:(0,yn.jsx)("ul",{className:"-mb-8",children:a.slice(0,5).map((e,t)=>(0,yn.jsx)("li",{children:(0,yn.jsxs)("div",{className:"relative pb-8",children:[t!==a.length-1&&(0,yn.jsx)("span",{className:"absolute top-4 left-4 -ml-px h-full w-0.5 bg-gray-200"}),(0,yn.jsxs)("div",{className:"relative flex space-x-3",children:[(0,yn.jsx)("div",{children:(0,yn.jsx)("span",{className:"h-8 w-8 rounded-full bg-green-500 flex items-center justify-center ring-8 ring-white",children:(0,yn.jsx)("span",{className:"text-white text-sm font-medium",children:"C"})})}),(0,yn.jsxs)("div",{className:"min-w-0 flex-1 pt-1.5 flex justify-between space-x-4",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("p",{className:"text-sm text-gray-500",children:["Check-in for ",(0,yn.jsxs)("span",{className:"font-medium text-gray-900",children:[e.first_name," ",e.last_name]})]}),(0,yn.jsxs)("p",{className:"text-xs text-gray-400",children:["Room ",e.room_number," \u2022 ",e.check_in_date]})]}),(0,yn.jsx)("div",{className:"text-right text-sm whitespace-nowrap text-gray-500",children:(0,yn.jsxs)("span",{className:"text-xs text-gray-400",children:["$",e.total_amount]})})]})]})]})},e.id))})})})]})})]}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-3",children:[(0,yn.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,yn.jsx)("div",{className:"p-5",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"flex-shrink-0",children:(0,yn.jsx)("div",{className:"w-8 h-8 bg-indigo-500 rounded-md flex items-center justify-center",children:(0,yn.jsx)("span",{className:"text-white font-semibold",children:"O"})})}),(0,yn.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,yn.jsxs)("dl",{children:[(0,yn.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Occupancy Rate"}),(0,yn.jsxs)("dd",{className:"text-lg font-medium text-gray-900",children:[t.bookings.occupancy,"%"]})]})})]})})}),(0,yn.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,yn.jsx)("div",{className:"p-5",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"flex-shrink-0",children:(0,yn.jsx)("div",{className:"w-8 h-8 bg-red-500 rounded-md flex items-center justify-center",children:(0,yn.jsx)("span",{className:"text-white font-semibold",children:"R"})})}),(0,yn.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,yn.jsxs)("dl",{children:[(0,yn.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Occupied Rooms"}),(0,yn.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:t.rooms.occupied})]})})]})})}),(0,yn.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,yn.jsx)("div",{className:"p-5",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"flex-shrink-0",children:(0,yn.jsx)("div",{className:"w-8 h-8 bg-teal-500 rounded-md flex items-center justify-center",children:(0,yn.jsx)("span",{className:"text-white font-semibold",children:"G"})})}),(0,yn.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,yn.jsxs)("dl",{children:[(0,yn.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Guests"}),(0,yn.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:t.guests.total})]})})]})})})]})]})},ja=qr("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),Pa=qr("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),Da=qr("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Ra=qr("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Oa=qr("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),La=()=>{const[e,t]=(0,r.useState)({totalUsers:0,totalAdmins:0,totalBookings:0,totalRevenue:0,activeUsers:0,pendingBookings:0,totalRooms:0}),[n,s]=(0,r.useState)([]),[i,a]=(0,r.useState)(!0),[o,l]=(0,r.useState)(null),[c,u]=(0,r.useState)([]),[d,h]=(0,r.useState)(!1);(0,r.useEffect)(()=>{f()},[]);const f=async()=>{try{var e,n;a(!0);const[r,i,o,l,c,u]=await Promise.all([ws(),ss.getAll(),is.getAll(),ds.getAll(),as.getAll(),vs()]),d=(null===r||void 0===r?void 0:r.data)||{},h=Array.isArray(null===i||void 0===i?void 0:i.data)?i.data:(null===i||void 0===i||null===(e=i.data)||void 0===e?void 0:e.users)||[],f=Array.isArray(null===o||void 0===o?void 0:o.data)?o.data:(null===o||void 0===o?void 0:o.data)||[],m=Array.isArray(null===l||void 0===l?void 0:l.data)?l.data:(null===l||void 0===l?void 0:l.data)||[],p=Array.isArray(null===c||void 0===c?void 0:c.data)?c.data:(null===c||void 0===c||null===(n=c.data)||void 0===n?void 0:n.rooms)||[],g=h.length,y=h.filter(e=>"admin"===(e.role||"").toLowerCase()||"super_admin"===(e.role||"").toLowerCase()).length,v=h.filter(e=>void 0===e.isActive||!!e.isActive).length,x=f.filter(e=>"pending"===(e.status||"").toLowerCase()).length;t({totalUsers:g||d.totalUsers||d.total_users||0,totalAdmins:y||d.totalAdmins||0,totalBookings:d.totalBookings||f.length||0,totalRevenue:d.totalRevenue||m.reduce((e,t)=>e+parseFloat(t.amount||t.total||0),0),activeUsers:v||d.activeUsers||0,pendingBookings:x||d.pendingBookings||0,totalRooms:d.totalRooms||p.length||0}),s((null===u||void 0===u?void 0:u.data)||[])}catch(r){Or.error("Failed to load dashboard data"),console.error("Dashboard error:",r)}finally{a(!1)}},[m,p]=(0,r.useState)(!1),[g,y]=(0,r.useState)({email:"",password:"",firstName:"",lastName:""}),[v,x]=(0,r.useState)({open:!1,user:null,availablePrivileges:[],userPrivileges:[]}),b=e=>e?e.success&&e.data?Array.isArray(e.data)?e.data:e.data.users?e.data.users:e.data:Array.isArray(e)?e:e.data&&Array.isArray(e.data)?e.data:[]:[],w=e=>{if(!e)return"-";if(e.toDate&&"function"===typeof e.toDate)return e.toDate().toLocaleString();try{return new Date(e).toLocaleString()}catch(wn){return String(e)}},k=[{key:"totalUsers",title:"Total Users",value:e.totalUsers,icon:Aa,color:"bg-blue-500",change:"+12%",changeType:"positive"},{key:"adminUsers",title:"Admin Users",value:e.totalAdmins,icon:ja,color:"bg-purple-500",change:"+3",changeType:"positive"},{key:"totalBookings",title:"Total Bookings",value:e.totalBookings,icon:Kr,color:"bg-green-500",change:"+8%",changeType:"positive"},{key:"revenue",title:"Revenue",value:"$".concat(Number(e.totalRevenue||0).toLocaleString()),icon:Wr,color:"bg-yellow-500",change:"+15%",changeType:"positive"},{key:"activeUsers",title:"Active Users",value:e.activeUsers,icon:Pa,color:"bg-indigo-500",change:"+5%",changeType:"positive"},{key:"pendingBookings",title:"Pending Bookings",value:e.pendingBookings,icon:Da,color:"bg-red-500",change:"-2",changeType:"negative"},{key:"totalRooms",title:"Total Rooms",value:e.totalRooms,icon:Ra,color:"bg-orange-500",change:"+1",changeType:"positive"}];return i?(0,yn.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,yn.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):(0,yn.jsxs)("div",{className:"space-y-6",children:[(0,yn.jsx)("div",{className:"bg-white shadow rounded-lg p-6",children:(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Super Admin Dashboard"}),(0,yn.jsx)("p",{className:"mt-2 text-gray-600",children:"Manage your hotel management system"})]}),(0,yn.jsxs)("div",{className:"flex space-x-3",children:[(0,yn.jsxs)("button",{onClick:()=>p(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center",children:[(0,yn.jsx)(zr,{className:"h-4 w-4 mr-2"}),"Add Admin"]}),(0,yn.jsxs)("button",{onClick:async()=>{try{var e;const t=await ss.getAll({role:"admin"}),n=(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.users)||(null===t||void 0===t?void 0:t.data)||[];if(0===n.length)return void Or("No admin users found");(async e=>{try{x(t=>(0,Oe.A)((0,Oe.A)({},t),{},{open:!0,user:e}));const[t,n]=await Promise.all([gs(),ys(e.id)]);x({open:!0,user:e,availablePrivileges:t.data||[],userPrivileges:n.data||[]})}catch(t){console.error("Open privileges error:",t),Or.error("Failed to load privileges")}})(n[0])}catch(t){console.error("Open manage privileges error:",t),Or.error("Failed to open privileges")}},className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 flex items-center",children:[(0,yn.jsx)(_a,{className:"h-4 w-4 mr-2"}),"Manage Privileges"]})]})]})}),(0,yn.jsx)("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3",children:k.map((e,t)=>(0,yn.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg cursor-pointer",onClick:()=>(async e=>{try{let t;switch(l(e),h(!0),u([]),e){case"totalUsers":t=await ss.getAll(),u(b(t));break;case"adminUsers":t=await ss.getAll({role:"admin"}),u(b(t));break;case"totalBookings":t=await is.getAll(),u(b(t));break;case"revenue":t=await ds.getAll(),u(b(t));break;case"activeUsers":t=await ss.getAll({isActive:!0}),u(b(t));break;case"pendingBookings":t=await is.getAll({status:"pending"}),u(b(t));break;case"totalRooms":t=await as.getAll(),u(b(t));break;default:u([])}}catch(t){console.error("Error loading list:",t),Or.error("Failed to load list"),u([])}finally{h(!1)}})(e.key),children:(0,yn.jsx)("div",{className:"p-5",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"flex-shrink-0",children:(0,yn.jsx)("div",{className:"w-8 h-8 ".concat(e.color," rounded-md flex items-center justify-center"),children:(0,yn.jsx)(e.icon,{className:"h-5 w-5 text-white"})})}),(0,yn.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,yn.jsxs)("dl",{children:[(0,yn.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:e.title}),(0,yn.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:e.value})]})}),(0,yn.jsx)("div",{className:"ml-4 flex-shrink-0",children:(0,yn.jsx)("div",{className:"text-sm font-medium ".concat("positive"===e.changeType?"text-green-600":"text-red-600"),children:e.change})})]})})},t))}),o&&(0,yn.jsx)("div",{className:"bg-white shadow rounded-lg mt-6",children:(0,yn.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,yn.jsxs)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:["totalUsers"===o&&"All Users","adminUsers"===o&&"Admin Users","totalBookings"===o&&"Bookings","revenue"===o&&"Payments","activeUsers"===o&&"Active Users","pendingBookings"===o&&"Pending Bookings","totalRooms"===o&&"Rooms"]}),(0,yn.jsx)("button",{className:"text-sm text-blue-600",onClick:()=>{l(null),u([])},children:"Close"})]}),d?(0,yn.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,yn.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,yn.jsx)("div",{className:"overflow-x-auto",children:(0,yn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,yn.jsx)("thead",{className:"bg-gray-50",children:(0,yn.jsxs)("tr",{children:[(0,yn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"#"}),(0,yn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),(0,yn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Details"}),(0,yn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),(0,yn.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:c&&c.length>0?c.map((e,t)=>(0,yn.jsxs)("tr",{children:[(0,yn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t+1}),(0,yn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:o.includes("Users")||"totalUsers"===o||"adminUsers"===o||"activeUsers"===o?"".concat(e.firstName||""," ").concat(e.lastName||"").trim()||e.email||e.username:"totalBookings"===o||"pendingBookings"===o?"Booking: ".concat(e.room_id||e.roomNumber||e.id):"revenue"===o?"Payment: $".concat(e.amount||"0"):""}),(0,yn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:o.includes("Users")||"totalUsers"===o||"adminUsers"===o||"activeUsers"===o?e.email||e.username||"":"totalBookings"===o||"pendingBookings"===o?"Guest: ".concat(e.guest_name||e.guest_id||e.guestId||"N/A"):"revenue"===o?"User: ".concat(e.userId||e.email||"N/A"):""}),(0,yn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:w(e.createdAt||e.time)})]},e.id||t)):(0,yn.jsx)("tr",{children:(0,yn.jsx)("td",{colSpan:"4",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No records found"})})})]})})]})}),(0,yn.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,yn.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,yn.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Quick Actions"}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,yn.jsxs)("button",{className:"bg-blue-50 hover:bg-blue-100 p-4 rounded-lg text-left transition-colors",children:[(0,yn.jsx)(Aa,{className:"h-8 w-8 text-blue-600 mb-2"}),(0,yn.jsx)("h4",{className:"font-medium text-gray-900",children:"Manage Users"}),(0,yn.jsx)("p",{className:"text-sm text-gray-500",children:"View and manage all users"})]}),(0,yn.jsxs)("button",{className:"bg-purple-50 hover:bg-purple-100 p-4 rounded-lg text-left transition-colors",children:[(0,yn.jsx)(ja,{className:"h-8 w-8 text-purple-600 mb-2"}),(0,yn.jsx)("h4",{className:"font-medium text-gray-900",children:"Admin Management"}),(0,yn.jsx)("p",{className:"text-sm text-gray-500",children:"Add and manage admin users"})]}),(0,yn.jsxs)("button",{className:"bg-green-50 hover:bg-green-100 p-4 rounded-lg text-left transition-colors",children:[(0,yn.jsx)(_a,{className:"h-8 w-8 text-green-600 mb-2"}),(0,yn.jsx)("h4",{className:"font-medium text-gray-900",children:"Privileges"}),(0,yn.jsx)("p",{className:"text-sm text-gray-500",children:"Manage admin privileges"})]}),(0,yn.jsxs)("button",{className:"bg-yellow-50 hover:bg-yellow-100 p-4 rounded-lg text-left transition-colors",children:[(0,yn.jsx)(Oa,{className:"h-8 w-8 text-yellow-600 mb-2"}),(0,yn.jsx)("h4",{className:"font-medium text-gray-900",children:"System Settings"}),(0,yn.jsx)("p",{className:"text-sm text-gray-500",children:"Configure system settings"})]})]})]})}),(0,yn.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,yn.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,yn.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Recent Activity"}),(0,yn.jsx)("div",{className:"flow-root",children:(0,yn.jsx)("ul",{className:"-mb-8",children:n.map((e,t)=>(0,yn.jsx)("li",{children:(0,yn.jsxs)("div",{className:"relative pb-8",children:[t!==n.length-1&&(0,yn.jsx)("span",{className:"absolute top-4 left-4 -ml-px h-full w-0.5 bg-gray-200"}),(0,yn.jsxs)("div",{className:"relative flex space-x-3",children:[(0,yn.jsx)("div",{children:(0,yn.jsx)("span",{className:"h-8 w-8 rounded-full ".concat(e.color," flex items-center justify-center ring-8 ring-white"),children:(0,yn.jsx)(e.icon,{className:"h-4 w-4 text-white"})})}),(0,yn.jsxs)("div",{className:"min-w-0 flex-1 pt-1.5 flex justify-between space-x-4",children:[(0,yn.jsx)("div",{children:(0,yn.jsx)("p",{className:"text-sm text-gray-500",children:e.message})}),(0,yn.jsx)("div",{className:"text-right text-sm whitespace-nowrap text-gray-500",children:(0,yn.jsx)("time",{children:e.time})})]})]})]})},t))})})]})}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,yn.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,yn.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,yn.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"User Distribution"}),(0,yn.jsxs)("div",{className:"space-y-3",children:[(0,yn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-600",children:"Clients"}),(0,yn.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.totalUsers-e.totalAdmins})]}),(0,yn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-600",children:"Admins"}),(0,yn.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.totalAdmins})]}),(0,yn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-600",children:"Active Users"}),(0,yn.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.activeUsers})]})]})]})}),(0,yn.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,yn.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,yn.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"System Health"}),(0,yn.jsxs)("div",{className:"space-y-3",children:[(0,yn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-600",children:"Database Status"}),(0,yn.jsx)("span",{className:"text-sm font-medium text-green-600",children:"Healthy"})]}),(0,yn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-600",children:"API Status"}),(0,yn.jsx)("span",{className:"text-sm font-medium text-green-600",children:"Online"})]}),(0,yn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-600",children:"Last Backup"}),(0,yn.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"2 hours ago"})]})]})]})})]}),m&&(0,yn.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:(0,yn.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,yn.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Add Admin"}),(0,yn.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e={email:g.email,password:g.password,username:g.email?g.email.split("@")[0]:"",firstName:g.firstName,lastName:g.lastName,role:"admin"};await Xr(e),Or.success("Admin user created"),p(!1),y({email:"",password:"",firstName:"",lastName:""}),f()}catch(t){console.error("Create admin error:",t),Or.error(t.message||"Failed to create admin")}},className:"space-y-3",children:[(0,yn.jsx)("input",{required:!0,placeholder:"First name",value:g.firstName,onChange:e=>y(t=>(0,Oe.A)((0,Oe.A)({},t),{},{firstName:e.target.value})),className:"w-full border px-3 py-2 rounded"}),(0,yn.jsx)("input",{required:!0,placeholder:"Last name",value:g.lastName,onChange:e=>y(t=>(0,Oe.A)((0,Oe.A)({},t),{},{lastName:e.target.value})),className:"w-full border px-3 py-2 rounded"}),(0,yn.jsx)("input",{required:!0,type:"email",placeholder:"Email",value:g.email,onChange:e=>y(t=>(0,Oe.A)((0,Oe.A)({},t),{},{email:e.target.value})),className:"w-full border px-3 py-2 rounded"}),(0,yn.jsx)("input",{required:!0,type:"password",placeholder:"Password",value:g.password,onChange:e=>y(t=>(0,Oe.A)((0,Oe.A)({},t),{},{password:e.target.value})),className:"w-full border px-3 py-2 rounded"}),(0,yn.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,yn.jsx)("button",{type:"button",onClick:()=>p(!1),className:"px-3 py-2 bg-gray-100 rounded",children:"Cancel"}),(0,yn.jsx)("button",{type:"submit",className:"px-3 py-2 bg-blue-600 text-white rounded",children:"Create"})]})]})]})}),v.open&&v.user&&(0,yn.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:(0,yn.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,yn.jsxs)("h3",{className:"text-lg font-medium",children:["Manage Privileges \u2014 ",v.user.firstName||v.user.email]}),(0,yn.jsx)("button",{onClick:()=>x({open:!1,user:null,availablePrivileges:[],userPrivileges:[]}),className:"text-sm text-gray-500",children:"Close"})]}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h4",{className:"font-medium mb-2",children:"Available Privileges"}),(0,yn.jsx)("ul",{className:"space-y-2",children:v.availablePrivileges.map(e=>(0,yn.jsxs)("li",{className:"flex items-center justify-between border px-3 py-2 rounded",children:[(0,yn.jsx)("span",{children:e.name||e.privilege||e.title}),(0,yn.jsx)("button",{onClick:()=>(async e=>{try{await xs(v.user.id,e),Or.success("Privilege granted");const t=await ys(v.user.id);x(e=>(0,Oe.A)((0,Oe.A)({},e),{},{userPrivileges:t.data||[]}))}catch(t){console.error("Grant error:",t),Or.error(t.message||"Failed to grant")}})(e.privilege||e.name),className:"text-sm text-green-600",children:"Grant"})]},e.id||e.name))})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h4",{className:"font-medium mb-2",children:"Granted Privileges"}),(0,yn.jsx)("ul",{className:"space-y-2",children:v.userPrivileges.map(e=>(0,yn.jsxs)("li",{className:"flex items-center justify-between border px-3 py-2 rounded",children:[(0,yn.jsx)("span",{children:e.privilege}),(0,yn.jsx)("button",{onClick:()=>(async e=>{try{await bs(v.user.id,e),Or.success("Privilege revoked");const t=await ys(v.user.id);x(e=>(0,Oe.A)((0,Oe.A)({},e),{},{userPrivileges:t.data||[]}))}catch(t){console.error("Revoke error:",t),Or.error(t.message||"Failed to revoke")}})(e.privilege),className:"text-sm text-red-600",children:"Revoke"})]},e.id||e.privilege))})]})]})]})})]})},Ma=qr("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Fa=qr("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Ua=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(!0),[i,a]=(0,r.useState)(""),[o,l]=(0,r.useState)("all"),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(!1),[f,m]=(0,r.useState)(null),[p,g]=(0,r.useState)({page:1,limit:10,total:0,pages:0}),[y,v]=(0,r.useState)({username:"",email:"",password:"",first_name:"",last_name:"",role:"admin",phone:"",address:""}),[x,b]=(0,r.useState)([]),[w,k]=(0,r.useState)([]),_=(0,r.useCallback)(async()=>{try{s(!0);const e=await hs({page:p.page,limit:p.limit,role:"all"===o?void 0:o,search:i||void 0});t(e.data.users),g(t=>(0,Oe.A)((0,Oe.A)({},t),{},{total:e.data.pagination.total,pages:e.data.pagination.pages}))}catch(e){Or.error("Failed to load admins"),console.error("Load admins error:",e)}finally{s(!1)}},[p.page,p.limit,o,i]),N=(0,r.useCallback)(async()=>{try{const e=await gs();k(e.data)}catch(e){console.error("Load privileges error:",e)}},[]);(0,r.useEffect)(()=>{_(),N()},[_,N]);const S=async e=>{try{const t=await ys(e);b(t.data)}catch(t){Or.error("Failed to load privileges"),console.error("Load privileges error:",t)}},E=e.filter(e=>{const t=e.first_name.toLowerCase().includes(i.toLowerCase())||e.last_name.toLowerCase().includes(i.toLowerCase())||e.email.toLowerCase().includes(i.toLowerCase())||e.username.toLowerCase().includes(i.toLowerCase()),n="all"===o||e.role===o;return t&&n}),A=e=>{switch(e){case"super_admin":return"bg-red-100 text-red-800";case"admin":return"bg-purple-100 text-purple-800";case"manager":return"bg-blue-100 text-blue-800";case"staff":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return(0,yn.jsxs)("div",{className:"space-y-6",children:[(0,yn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Management"}),(0,yn.jsx)("p",{className:"text-gray-600",children:"Manage admin users and their privileges"})]}),(0,yn.jsxs)("button",{onClick:()=>u(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center",children:[(0,yn.jsx)(Ma,{className:"h-4 w-4 mr-2"}),"Add Admin"]})]}),(0,yn.jsx)("div",{className:"bg-white shadow rounded-lg p-4",children:(0,yn.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,yn.jsx)("div",{className:"flex-1",children:(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)(ha,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,yn.jsx)("input",{type:"text",placeholder:"Search admins...",value:i,onChange:e=>a(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full"})]})}),(0,yn.jsxs)("div",{className:"flex gap-2",children:[(0,yn.jsxs)("select",{value:o,onChange:e=>l(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,yn.jsx)("option",{value:"all",children:"All Roles"}),(0,yn.jsx)("option",{value:"admin",children:"Admin"}),(0,yn.jsx)("option",{value:"manager",children:"Manager"}),(0,yn.jsx)("option",{value:"staff",children:"Staff"})]}),(0,yn.jsxs)("button",{className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center",children:[(0,yn.jsx)(Ea,{className:"h-4 w-4 mr-2"}),"Filter"]}),(0,yn.jsxs)("button",{className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center",children:[(0,yn.jsx)(Sa,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})}),(0,yn.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,yn.jsx)("div",{className:"overflow-x-auto",children:(0,yn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,yn.jsx)("thead",{className:"bg-gray-50",children:(0,yn.jsxs)("tr",{children:[(0,yn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Admin"}),(0,yn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,yn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),(0,yn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,yn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,yn.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,yn.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n?(0,yn.jsx)("tr",{children:(0,yn.jsx)("td",{colSpan:"6",className:"px-6 py-4 text-center",children:(0,yn.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})})}):0===E.length?(0,yn.jsx)("tr",{children:(0,yn.jsx)("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No admins found"})}):E.map(e=>(0,yn.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,yn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,yn.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:(0,yn.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[e.first_name[0],e.last_name[0]]})})}),(0,yn.jsxs)("div",{className:"ml-4",children:[(0,yn.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),(0,yn.jsxs)("div",{className:"text-sm text-gray-500",children:["@",e.username]})]})]})}),(0,yn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yn.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(A(e.role)),children:e.role.replace("_"," ").toUpperCase()})}),(0,yn.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,yn.jsx)("div",{className:"text-sm text-gray-900",children:e.email}),(0,yn.jsx)("div",{className:"text-sm text-gray-500",children:e.phone||"No phone"})]}),(0,yn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yn.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?"Active":"Inactive"})}),(0,yn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()}),(0,yn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,yn.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,yn.jsx)("button",{onClick:()=>(e=>{m(e),h(!0),S(e.id)})(e),className:"text-purple-600 hover:text-purple-900",title:"Manage Privileges",children:(0,yn.jsx)(_a,{className:"h-4 w-4"})}),(0,yn.jsx)("button",{onClick:()=>(async(e,t)=>{try{await ms(e,t),Or.success("Admin updated successfully"),_()}catch(s){var n,r;Or.error((null===(n=s.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)||"Failed to update admin")}})(e.id,{is_active:!e.is_active}),className:"text-blue-600 hover:text-blue-900",title:e.is_active?"Deactivate":"Activate",children:(0,yn.jsx)(ja,{className:"h-4 w-4"})}),(0,yn.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this admin?"))try{await ps(e),Or.success("Admin deleted successfully"),_()}catch(r){var t,n;Or.error((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to delete admin")}})(e.id),className:"text-red-600 hover:text-red-900",title:"Delete Admin",children:(0,yn.jsx)(Fa,{className:"h-4 w-4"})})]})})]},e.id))})]})}),p.pages>1&&(0,yn.jsxs)("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[(0,yn.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,yn.jsx)("button",{onClick:()=>g(e=>(0,Oe.A)((0,Oe.A)({},e),{},{page:Math.max(1,e.page-1)})),disabled:1===p.page,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),(0,yn.jsx)("button",{onClick:()=>g(e=>(0,Oe.A)((0,Oe.A)({},e),{},{page:Math.min(e.pages,e.page+1)})),disabled:p.page===p.pages,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),(0,yn.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,yn.jsx)("div",{children:(0,yn.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing"," ",(0,yn.jsx)("span",{className:"font-medium",children:(p.page-1)*p.limit+1})," ","to"," ",(0,yn.jsx)("span",{className:"font-medium",children:Math.min(p.page*p.limit,p.total)})," ","of"," ",(0,yn.jsx)("span",{className:"font-medium",children:p.total})," ","results"]})}),(0,yn.jsx)("div",{children:(0,yn.jsx)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:Array.from({length:p.pages},(e,t)=>t+1).map(e=>(0,yn.jsx)("button",{onClick:()=>g(t=>(0,Oe.A)((0,Oe.A)({},t),{},{page:e})),className:"relative inline-flex items-center px-4 py-2 border text-sm font-medium ".concat(e===p.page?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"),children:e},e))})})]})]})]}),c&&(0,yn.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,yn.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,yn.jsxs)("div",{className:"mt-3",children:[(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Add New Admin"}),(0,yn.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await fs(y),Or.success("Admin created successfully"),u(!1),v({username:"",email:"",password:"",first_name:"",last_name:"",role:"admin",phone:"",address:""}),_()}catch(r){var t,n;Or.error((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to create admin")}},className:"space-y-4",children:[(0,yn.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"First Name"}),(0,yn.jsx)("input",{type:"text",required:!0,value:y.first_name,onChange:e=>v(t=>(0,Oe.A)((0,Oe.A)({},t),{},{first_name:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Last Name"}),(0,yn.jsx)("input",{type:"text",required:!0,value:y.last_name,onChange:e=>v(t=>(0,Oe.A)((0,Oe.A)({},t),{},{last_name:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Username"}),(0,yn.jsx)("input",{type:"text",required:!0,value:y.username,onChange:e=>v(t=>(0,Oe.A)((0,Oe.A)({},t),{},{username:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,yn.jsx)("input",{type:"email",required:!0,value:y.email,onChange:e=>v(t=>(0,Oe.A)((0,Oe.A)({},t),{},{email:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,yn.jsx)("input",{type:"password",required:!0,value:y.password,onChange:e=>v(t=>(0,Oe.A)((0,Oe.A)({},t),{},{password:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Role"}),(0,yn.jsxs)("select",{value:y.role,onChange:e=>v(t=>(0,Oe.A)((0,Oe.A)({},t),{},{role:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,yn.jsx)("option",{value:"admin",children:"Admin"}),(0,yn.jsx)("option",{value:"manager",children:"Manager"}),(0,yn.jsx)("option",{value:"staff",children:"Staff"})]})]}),(0,yn.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,yn.jsx)("button",{type:"button",onClick:()=>u(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,yn.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Create Admin"})]})]})]})})}),d&&f&&(0,yn.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,yn.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,yn.jsxs)("div",{className:"mt-3",children:[(0,yn.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Manage Privileges - ",f.first_name," ",f.last_name]}),(0,yn.jsxs)("div",{className:"space-y-4",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Current Privileges"}),(0,yn.jsxs)("div",{className:"space-y-2",children:[x.map(e=>(0,yn.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-700",children:e.privilege}),(0,yn.jsx)("button",{onClick:()=>(async(e,t)=>{try{await bs(e,t),Or.success("Privilege revoked successfully"),S(e)}catch(s){var n,r;Or.error((null===(n=s.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)||"Failed to revoke privilege")}})(f.id,e.privilege),className:"text-red-600 hover:text-red-800",children:(0,yn.jsx)(Fa,{className:"h-4 w-4"})})]},e.privilege)),0===x.length&&(0,yn.jsx)("p",{className:"text-sm text-gray-500",children:"No privileges assigned"})]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Available Privileges"}),(0,yn.jsx)("div",{className:"space-y-2",children:w.filter(e=>!x.some(t=>t.privilege===e)).map(e=>(0,yn.jsxs)("div",{className:"flex items-center justify-between bg-blue-50 p-2 rounded",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-700",children:e}),(0,yn.jsx)("button",{onClick:()=>(async(e,t)=>{try{await xs(e,t),Or.success("Privilege granted successfully"),S(e)}catch(s){var n,r;Or.error((null===(n=s.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)||"Failed to grant privilege")}})(f.id,e),className:"text-blue-600 hover:text-blue-800",children:(0,yn.jsx)(Ma,{className:"h-4 w-4"})})]},e))})]})]}),(0,yn.jsx)("div",{className:"flex justify-end pt-4",children:(0,yn.jsx)("button",{onClick:()=>h(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Close"})})]})})})]})},Va=qr("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Ba=qr("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),qa=qr("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),za=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)([]),[i,a]=(0,r.useState)(!0),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(null),[f,m]=(0,r.useState)({room_type_id:"",date_from:"",date_to:""}),[p,g]=(0,r.useState)({room_type_id:"",base_price:"",seasonal_multiplier:1,weekend_multiplier:1.2,holiday_multiplier:1.5,demand_multiplier:1,effective_date:(new Date).toISOString().split("T")[0]}),y=(0,r.useCallback)(async()=>{try{var e,n,r,s;a(!0);const i=await ks.getPriceTracking(f),o=null!==(e=null!==(n=null===i||void 0===i?void 0:i.data)&&void 0!==n?n:i)&&void 0!==e?e:[];t(Array.isArray(o)?o:null!==(r=null!==(s=o.rows)&&void 0!==s?s:o.items)&&void 0!==r?r:[])}catch(i){Or.error("Failed to load price data"),console.error("Load price data error:",i)}finally{a(!1)}},[f]),v=(0,r.useCallback)(async()=>{try{var e,t,n,r;const i=await ks.getRoomTypes(),a=null!==(e=null!==(t=null===i||void 0===i?void 0:i.data)&&void 0!==t?t:i)&&void 0!==e?e:[];s(Array.isArray(a)?a:null!==(n=null!==(r=a.rows)&&void 0!==r?r:a.items)&&void 0!==n?n:[])}catch(i){console.error("Load room types error:",i)}},[]);(0,r.useEffect)(()=>{y(),v()},[y,v]);const x=e=>e>0?(0,yn.jsx)(Va,{className:"h-4 w-4"}):e<0?(0,yn.jsx)(Ba,{className:"h-4 w-4"}):null;return i?(0,yn.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,yn.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):(0,yn.jsxs)("div",{className:"space-y-6",children:[(0,yn.jsx)("div",{className:"bg-white shadow rounded-lg p-6",children:(0,yn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Price Tracking"}),(0,yn.jsx)("p",{className:"text-gray-600",children:"Manage dynamic pricing and seasonal rates"})]}),(0,yn.jsxs)("div",{className:"flex space-x-3",children:[(0,yn.jsxs)("button",{onClick:y,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center",children:[(0,yn.jsx)(qa,{className:"h-4 w-4 mr-2"}),"Refresh"]}),(0,yn.jsxs)("button",{onClick:()=>l(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[(0,yn.jsx)(Ma,{className:"h-4 w-4 mr-2"}),"Add Price"]})]})]})}),(0,yn.jsx)("div",{className:"bg-white shadow rounded-lg p-4",children:(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Room Type"}),(0,yn.jsxs)("select",{value:f.room_type_id,onChange:e=>m(t=>(0,Oe.A)((0,Oe.A)({},t),{},{room_type_id:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,yn.jsx)("option",{value:"",children:"All Room Types"}),n.map(e=>(0,yn.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,yn.jsx)("input",{type:"date",value:f.date_from,onChange:e=>m(t=>(0,Oe.A)((0,Oe.A)({},t),{},{date_from:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,yn.jsx)("input",{type:"date",value:f.date_to,onChange:e=>m(t=>(0,Oe.A)((0,Oe.A)({},t),{},{date_to:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,yn.jsx)("div",{className:"flex items-end",children:(0,yn.jsx)("button",{onClick:()=>m({room_type_id:"",date_from:"",date_to:""}),className:"w-full bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400",children:"Clear Filters"})})]})}),(0,yn.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:(0,yn.jsx)("div",{className:"overflow-x-auto",children:(0,yn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,yn.jsx)("thead",{className:"bg-gray-50",children:(0,yn.jsxs)("tr",{children:[(0,yn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Room Type"}),(0,yn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Base Price"}),(0,yn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Multipliers"}),(0,yn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Final Price"}),(0,yn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Effective Date"}),(0,yn.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,yn.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map((t,n)=>{const r=n>0?e[n-1]:null,s=(i=t.final_price,(a=null===r||void 0===r?void 0:r.final_price)?((i-a)/a*100).toFixed(2):0);var i,a,o;return(0,yn.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,yn.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,yn.jsx)("div",{className:"text-sm font-medium text-gray-900",children:t.room_type_name}),(0,yn.jsx)("div",{className:"text-sm text-gray-500",children:t.description})]}),(0,yn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yn.jsxs)("div",{className:"text-sm text-gray-900",children:["$",t.base_price.toFixed(2)]})}),(0,yn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yn.jsxs)("div",{className:"text-sm text-gray-900 space-y-1",children:[(0,yn.jsxs)("div",{children:["Seasonal: ",t.seasonal_multiplier,"x"]}),(0,yn.jsxs)("div",{children:["Weekend: ",t.weekend_multiplier,"x"]}),(0,yn.jsxs)("div",{children:["Holiday: ",t.holiday_multiplier,"x"]}),(0,yn.jsxs)("div",{children:["Demand: ",t.demand_multiplier,"x"]})]})}),(0,yn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["$",t.final_price.toFixed(2)]}),0!==s&&(0,yn.jsxs)("span",{className:"ml-2 flex items-center ".concat((o=s,o>0?"text-green-600":o<0?"text-red-600":"text-gray-600")),children:[x(s),(0,yn.jsxs)("span",{className:"ml-1 text-xs",children:[s>0?"+":"",s,"%"]})]})]})}),(0,yn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(t.effective_date).toLocaleDateString()}),(0,yn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,yn.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,yn.jsx)("button",{onClick:()=>(e=>{h((0,Oe.A)({},e)),u(!0)})(t),className:"text-blue-600 hover:text-blue-900",title:"Edit Price",children:(0,yn.jsx)(ya,{className:"h-4 w-4"})}),(0,yn.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this price entry?"))try{await ks.deletePriceTracking(e),Or.success("Price tracking entry deleted successfully"),y()}catch(r){var t,n;Or.error((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to delete price entry")}})(t.id),className:"text-red-600 hover:text-red-900",title:"Delete Price",children:(0,yn.jsx)(Fa,{className:"h-4 w-4"})})]})})]},t.id)})})]})})}),o&&(0,yn.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,yn.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,yn.jsxs)("div",{className:"mt-3",children:[(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Add Price Tracking Entry"}),(0,yn.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await ks.createPriceTracking(p),Or.success("Price tracking entry created successfully"),l(!1),g({room_type_id:"",base_price:"",seasonal_multiplier:1,weekend_multiplier:1.2,holiday_multiplier:1.5,demand_multiplier:1,effective_date:(new Date).toISOString().split("T")[0]}),y()}catch(r){var t,n;Or.error((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to create price entry")}},className:"space-y-4",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Room Type"}),(0,yn.jsxs)("select",{required:!0,value:p.room_type_id,onChange:e=>g(t=>(0,Oe.A)((0,Oe.A)({},t),{},{room_type_id:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,yn.jsx)("option",{value:"",children:"Select Room Type"}),n.map(e=>(0,yn.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Base Price"}),(0,yn.jsx)("input",{type:"number",step:"0.01",required:!0,value:p.base_price,onChange:e=>g(t=>(0,Oe.A)((0,Oe.A)({},t),{},{base_price:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,yn.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Seasonal Multiplier"}),(0,yn.jsx)("input",{type:"number",step:"0.01",value:p.seasonal_multiplier,onChange:e=>g(t=>(0,Oe.A)((0,Oe.A)({},t),{},{seasonal_multiplier:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Weekend Multiplier"}),(0,yn.jsx)("input",{type:"number",step:"0.01",value:p.weekend_multiplier,onChange:e=>g(t=>(0,Oe.A)((0,Oe.A)({},t),{},{weekend_multiplier:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,yn.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Holiday Multiplier"}),(0,yn.jsx)("input",{type:"number",step:"0.01",value:p.holiday_multiplier,onChange:e=>g(t=>(0,Oe.A)((0,Oe.A)({},t),{},{holiday_multiplier:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Demand Multiplier"}),(0,yn.jsx)("input",{type:"number",step:"0.01",value:p.demand_multiplier,onChange:e=>g(t=>(0,Oe.A)((0,Oe.A)({},t),{},{demand_multiplier:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Effective Date"}),(0,yn.jsx)("input",{type:"date",required:!0,value:p.effective_date,onChange:e=>g(t=>(0,Oe.A)((0,Oe.A)({},t),{},{effective_date:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,yn.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,yn.jsx)("button",{type:"button",onClick:()=>l(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,yn.jsx)("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Add Price"})]})]})]})})}),c&&d&&(0,yn.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,yn.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,yn.jsxs)("div",{className:"mt-3",children:[(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Edit Price Tracking Entry"}),(0,yn.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await ks.updatePriceTracking(d.id,d),Or.success("Price tracking entry updated successfully"),u(!1),h(null),y()}catch(r){var t,n;Or.error((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to update price entry")}},className:"space-y-4",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Base Price"}),(0,yn.jsx)("input",{type:"number",step:"0.01",required:!0,value:d.base_price,onChange:e=>h(t=>(0,Oe.A)((0,Oe.A)({},t),{},{base_price:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,yn.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Seasonal Multiplier"}),(0,yn.jsx)("input",{type:"number",step:"0.01",value:d.seasonal_multiplier,onChange:e=>h(t=>(0,Oe.A)((0,Oe.A)({},t),{},{seasonal_multiplier:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Weekend Multiplier"}),(0,yn.jsx)("input",{type:"number",step:"0.01",value:d.weekend_multiplier,onChange:e=>h(t=>(0,Oe.A)((0,Oe.A)({},t),{},{weekend_multiplier:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,yn.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Holiday Multiplier"}),(0,yn.jsx)("input",{type:"number",step:"0.01",value:d.holiday_multiplier,onChange:e=>h(t=>(0,Oe.A)((0,Oe.A)({},t),{},{holiday_multiplier:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Demand Multiplier"}),(0,yn.jsx)("input",{type:"number",step:"0.01",value:d.demand_multiplier,onChange:e=>h(t=>(0,Oe.A)((0,Oe.A)({},t),{},{demand_multiplier:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Effective Date"}),(0,yn.jsx)("input",{type:"date",required:!0,value:d.effective_date,onChange:e=>h(t=>(0,Oe.A)((0,Oe.A)({},t),{},{effective_date:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,yn.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,yn.jsx)("button",{type:"button",onClick:()=>u(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,yn.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Update Price"})]})]})]})})})]})},Ka="undefined"!==typeof document,Wa=Ka?r.useLayoutEffect:r.useEffect;function Ha(){const e=(0,r.useRef)(!1);return Wa(()=>(e.current=!0,()=>{e.current=!1}),[]),e}const Ga=e=>e;class Qa{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);-1!==t&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}const Ja=["prepare","read","update","preRender","render","postRender"];const{schedule:Ya,cancel:Xa,state:$a,steps:Za}=function(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=Ja.reduce((e,t)=>(e[t]=function(e){let t=new Qa,n=new Qa,r=0,s=!1,i=!1;const a=new WeakSet,o={schedule:function(e){const i=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&s,o=i?t:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&a.add(e),o.add(e)&&i&&s&&(r=t.order.length),e},cancel:e=>{n.remove(e),a.delete(e)},process:l=>{if(s)i=!0;else{if(s=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let n=0;n<r;n++){const r=t.order[n];r(l),a.has(r)&&(o.schedule(r),e())}s=!1,i&&(i=!1,o.process(l))}}};return o}(()=>n=!0),e),{}),a=e=>i[e].process(s),o=()=>{const i=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(i-s.timestamp,40),1),s.timestamp=i,s.isProcessing=!0,Ja.forEach(a),s.isProcessing=!1,n&&t&&(r=!1,e(o))},l=Ja.reduce((t,a)=>{const l=i[a];return t[a]=function(t){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,r=!0,s.isProcessing||e(o)),l.schedule(t,i,a)},t},{});return{schedule:l,cancel:e=>Ja.forEach(t=>i[t].cancel(e)),state:s,steps:i}}("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:Ga,!0);const eo=(0,r.createContext)(null);function to(e){const t=(0,r.useRef)(null);return null===t.current&&(t.current=e()),t.current}class no extends r.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function ro(e){let{children:t,isPresent:n}=e;const s=(0,r.useId)(),i=(0,r.useRef)(null),a=(0,r.useRef)({width:0,height:0,top:0,left:0});return(0,r.useInsertionEffect)(()=>{const{width:e,height:t,top:r,left:o}=a.current;if(n||!i.current||!e||!t)return;i.current.dataset.motionPopId=s;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule('\n          [data-motion-pop-id="'.concat(s,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(r,"px !important;\n            left: ").concat(o,"px !important;\n          }\n        ")),()=>{document.head.removeChild(l)}},[n]),r.createElement(no,{isPresent:n,childRef:i,sizeRef:a},r.cloneElement(t,{ref:i}))}const so=e=>{let{children:t,initial:n,isPresent:s,onExitComplete:i,custom:a,presenceAffectsLayout:o,mode:l}=e;const c=to(io),u=(0,r.useId)(),d=(0,r.useMemo)(()=>({id:u,initial:n,isPresent:s,custom:a,onExitComplete:e=>{c.set(e,!0);for(const t of c.values())if(!t)return;i&&i()},register:e=>(c.set(e,!1),()=>c.delete(e))}),o?void 0:[s]);return(0,r.useMemo)(()=>{c.forEach((e,t)=>c.set(t,!1))},[s]),r.useEffect(()=>{!s&&!c.size&&i&&i()},[s]),"popLayout"===l&&(t=r.createElement(ro,{isPresent:s},t)),r.createElement(eo.Provider,{value:d},t)};function io(){return new Map}const ao=(0,r.createContext)({});let oo=Ga,lo=Ga;const co=e=>e.key||"";const uo=e=>{let{children:t,custom:n,initial:s=!0,onExitComplete:i,exitBeforeEnter:a,presenceAffectsLayout:o=!0,mode:l="sync"}=e;lo(!a,"Replace exitBeforeEnter with mode='wait'");const c=(0,r.useContext)(ao).forceRender||function(){const e=Ha(),[t,n]=(0,r.useState)(0),s=(0,r.useCallback)(()=>{e.current&&n(t+1)},[t]);return[(0,r.useCallback)(()=>Ya.postRender(s),[s]),t]}()[0],u=Ha(),d=function(e){const t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}(t);let h=d;const f=(0,r.useRef)(new Map).current,m=(0,r.useRef)(h),p=(0,r.useRef)(new Map).current,g=(0,r.useRef)(!0);var y;if(Wa(()=>{g.current=!1,function(e,t){e.forEach(e=>{const n=co(e);t.set(n,e)})}(d,p),m.current=h}),y=()=>{g.current=!0,p.clear(),f.clear()},(0,r.useEffect)(()=>()=>y(),[]),g.current)return r.createElement(r.Fragment,null,h.map(e=>r.createElement(so,{key:co(e),isPresent:!0,initial:!!s&&void 0,presenceAffectsLayout:o,mode:l},e)));h=[...h];const v=m.current.map(co),x=d.map(co),b=v.length;for(let r=0;r<b;r++){const e=v[r];-1!==x.indexOf(e)||f.has(e)||f.set(e,void 0)}return"wait"===l&&f.size&&(h=[]),f.forEach((e,t)=>{if(-1!==x.indexOf(t))return;const s=p.get(t);if(!s)return;const a=v.indexOf(t);let g=e;if(!g){const e=()=>{f.delete(t);const e=Array.from(p.keys()).filter(e=>!x.includes(e));if(e.forEach(e=>p.delete(e)),m.current=d.filter(n=>{const r=co(n);return r===t||e.includes(r)}),!f.size){if(!1===u.current)return;c(),i&&i()}};g=r.createElement(so,{key:co(s),isPresent:!1,onExitComplete:e,custom:n,presenceAffectsLayout:o,mode:l},s),f.set(t,g)}h.splice(a,0,g)}),h=h.map(e=>{const t=e.key;return f.has(t)?e:r.createElement(so,{key:co(e),isPresent:!0,presenceAffectsLayout:o,mode:l},e)}),r.createElement(r.Fragment,null,f.size?h:h.map(e=>(0,r.cloneElement)(e)))},ho=(0,r.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),fo=(0,r.createContext)({}),mo=(0,r.createContext)({strict:!1}),po=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),go="data-"+po("framerAppearId");function yo(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function vo(e){return"string"===typeof e||Array.isArray(e)}function xo(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}const bo=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],wo=["initial",...bo];function ko(e){return xo(e.animate)||wo.some(t=>vo(e[t]))}function _o(e){return Boolean(ko(e)||e.variants)}function No(e){const{initial:t,animate:n}=function(e,t){if(ko(e)){const{initial:t,animate:n}=e;return{initial:!1===t||vo(t)?t:void 0,animate:vo(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,r.useContext)(fo));return(0,r.useMemo)(()=>({initial:t,animate:n}),[So(t),So(n)])}function So(e){return Array.isArray(e)?e.join(" "):e}const Eo={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ao={};for(const n in Eo)Ao[n]={isEnabled:e=>Eo[n].some(t=>!!e[t])};const To=(0,r.createContext)({}),Co=Symbol.for("motionComponentSymbol");function Io(e){let{preloadedFeatures:t,createVisualElement:n,useRender:s,useVisualState:i,Component:a}=e;t&&function(e){for(const t in e)Ao[t]=(0,Oe.A)((0,Oe.A)({},Ao[t]),e[t])}(t);const o=(0,r.forwardRef)(function(e,o){let l;const c=(0,Oe.A)((0,Oe.A)((0,Oe.A)({},(0,r.useContext)(ho)),e),{},{layoutId:jo(e)}),{isStatic:u}=c,d=No(e),h=i(e,u);if(!u&&Ka){d.visualElement=function(e,t,n,s){const{visualElement:i}=(0,r.useContext)(fo),a=(0,r.useContext)(mo),o=(0,r.useContext)(eo),l=(0,r.useContext)(ho).reducedMotion,c=(0,r.useRef)();s=s||a.renderer,!c.current&&s&&(c.current=s(e,{visualState:t,parent:i,props:n,presenceContext:o,blockInitialAnimation:!!o&&!1===o.initial,reducedMotionConfig:l}));const u=c.current;(0,r.useInsertionEffect)(()=>{u&&u.update(n,o)});const d=(0,r.useRef)(Boolean(n[go]&&!window.HandoffComplete));return Wa(()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())}),(0,r.useEffect)(()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),u}(a,h,c,n);const e=(0,r.useContext)(To),s=(0,r.useContext)(mo).strict;d.visualElement&&(l=d.visualElement.loadFeatures(c,s,t,e))}return r.createElement(fo.Provider,{value:d},l&&d.visualElement?r.createElement(l,(0,Oe.A)({visualElement:d.visualElement},c)):null,s(a,e,function(e,t,n){return(0,r.useCallback)(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&("function"===typeof n?n(r):yo(n)&&(n.current=r))},[t])}(h,d.visualElement,o),h,u,d.visualElement))});return o[Co]=a,o}function jo(e){let{layoutId:t}=e;const n=(0,r.useContext)(ao).id;return n&&void 0!==t?n+"-"+t:t}function Po(e){function t(t){return Io(e(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}if("undefined"===typeof Proxy)return t;const n=new Map;return new Proxy(t,{get:(e,r)=>(n.has(r)||n.set(r,t(r)),n.get(r))})}const Do=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ro(e){return"string"===typeof e&&!e.includes("-")&&!!(Do.indexOf(e)>-1||/[A-Z]/.test(e))}const Oo={};const Lo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Mo=new Set(Lo);function Fo(e,t){let{layout:n,layoutId:r}=t;return Mo.has(e)||e.startsWith("origin")||(n||void 0!==r)&&(!!Oo[e]||"opacity"===e)}const Uo=e=>Boolean(e&&e.getVelocity),Vo={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Bo=Lo.length;const qo=e=>t=>"string"===typeof t&&t.startsWith(e),zo=qo("--"),Ko=qo("var(--"),Wo=(e,t)=>t&&"number"===typeof e?t.transform(e):e,Ho=(e,t,n)=>Math.min(Math.max(n,e),t),Go={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},Qo=(0,Oe.A)((0,Oe.A)({},Go),{},{transform:e=>Ho(0,1,e)}),Jo=(0,Oe.A)((0,Oe.A)({},Go),{},{default:1}),Yo=e=>Math.round(1e5*e)/1e5,Xo=/(-)?([\d]*\.?[\d])+/g,$o=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Zo=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function el(e){return"string"===typeof e}const tl=e=>({test:t=>el(t)&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),nl=tl("deg"),rl=tl("%"),sl=tl("px"),il=tl("vh"),al=tl("vw"),ol=(0,Oe.A)((0,Oe.A)({},rl),{},{parse:e=>rl.parse(e)/100,transform:e=>rl.transform(100*e)}),ll=(0,Oe.A)((0,Oe.A)({},Go),{},{transform:Math.round}),cl={borderWidth:sl,borderTopWidth:sl,borderRightWidth:sl,borderBottomWidth:sl,borderLeftWidth:sl,borderRadius:sl,radius:sl,borderTopLeftRadius:sl,borderTopRightRadius:sl,borderBottomRightRadius:sl,borderBottomLeftRadius:sl,width:sl,maxWidth:sl,height:sl,maxHeight:sl,size:sl,top:sl,right:sl,bottom:sl,left:sl,padding:sl,paddingTop:sl,paddingRight:sl,paddingBottom:sl,paddingLeft:sl,margin:sl,marginTop:sl,marginRight:sl,marginBottom:sl,marginLeft:sl,rotate:nl,rotateX:nl,rotateY:nl,rotateZ:nl,scale:Jo,scaleX:Jo,scaleY:Jo,scaleZ:Jo,skew:nl,skewX:nl,skewY:nl,distance:sl,translateX:sl,translateY:sl,translateZ:sl,x:sl,y:sl,z:sl,perspective:sl,transformPerspective:sl,opacity:Qo,originX:ol,originY:ol,originZ:sl,zIndex:ll,fillOpacity:Qo,strokeOpacity:Qo,numOctaves:ll};function ul(e,t,n,r){const{style:s,vars:i,transform:a,transformOrigin:o}=e;let l=!1,c=!1,u=!0;for(const d in t){const e=t[d];if(zo(d)){i[d]=e;continue}const n=cl[d],r=Wo(e,n);if(Mo.has(d)){if(l=!0,a[d]=r,!u)continue;e!==(n.default||0)&&(u=!1)}else d.startsWith("origin")?(c=!0,o[d]=r):s[d]=r}if(t.transform||(l||r?s.transform=function(e,t,n,r){let{enableHardwareAcceleration:s=!0,allowTransformNone:i=!0}=t,a="";for(let o=0;o<Bo;o++){const t=Lo[o];void 0!==e[t]&&(a+="".concat(Vo[t]||t,"(").concat(e[t],") "))}return s&&!e.z&&(a+="translateZ(0)"),a=a.trim(),r?a=r(e,n?"":a):i&&n&&(a="none"),a}(e.transform,n,u,r):s.transform&&(s.transform="none")),c){const{originX:e="50%",originY:t="50%",originZ:n=0}=o;s.transformOrigin="".concat(e," ").concat(t," ").concat(n)}}const dl=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function hl(e,t,n){for(const r in t)Uo(t[r])||Fo(r,n)||(e[r]=t[r])}function fl(e,t,n){const s={};return hl(s,e.style||{},e),Object.assign(s,function(e,t,n){let{transformTemplate:s}=e;return(0,r.useMemo)(()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return ul(e,t,{enableHardwareAcceleration:!n},s),Object.assign({},e.vars,e.style)},[t])}(e,t,n)),e.transformValues?e.transformValues(s):s}function ml(e,t,n){const r={},s=fl(e,t,n);return e.drag&&!1!==e.dragListener&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=s,r}const pl=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function gl(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||pl.has(e)}let yl=e=>!gl(e);try{(vl=require("@emotion/is-prop-valid").default)&&(yl=e=>e.startsWith("on")?!gl(e):vl(e))}catch(Gy){}var vl;function xl(e,t,n){return"string"===typeof e?e:sl.transform(t+n*e)}const bl={offset:"stroke-dashoffset",array:"stroke-dasharray"},wl={offset:"strokeDashoffset",array:"strokeDasharray"};const kl=["attrX","attrY","attrScale","originX","originY","pathLength","pathSpacing","pathOffset"];function _l(e,t,n,r,s){let{attrX:i,attrY:a,attrScale:o,originX:l,originY:c,pathLength:u,pathSpacing:d=1,pathOffset:h=0}=t;if(ul(e,Ur(t,kl),n,s),r)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:f,style:m,dimensions:p}=e;f.transform&&(p&&(m.transform=f.transform),delete f.transform),p&&(void 0!==l||void 0!==c||m.transform)&&(m.transformOrigin=function(e,t,n){const r=xl(t,e.x,e.width),s=xl(n,e.y,e.height);return"".concat(r," ").concat(s)}(p,void 0!==l?l:.5,void 0!==c?c:.5)),void 0!==i&&(f.x=i),void 0!==a&&(f.y=a),void 0!==o&&(f.scale=o),void 0!==u&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const i=s?bl:wl;e[i.offset]=sl.transform(-r);const a=sl.transform(t),o=sl.transform(n);e[i.array]="".concat(a," ").concat(o)}(f,u,d,h,!1)}const Nl=()=>(0,Oe.A)((0,Oe.A)({},{style:{},transform:{},transformOrigin:{},vars:{}}),{},{attrs:{}}),Sl=e=>"string"===typeof e&&"svg"===e.toLowerCase();function El(e,t,n,s){const i=(0,r.useMemo)(()=>{const n=Nl();return _l(n,t,{enableHardwareAcceleration:!1},Sl(s),e.transformTemplate),(0,Oe.A)((0,Oe.A)({},n.attrs),{},{style:(0,Oe.A)({},n.style)})},[t]);if(e.style){const t={};hl(t,e.style,e),i.style=(0,Oe.A)((0,Oe.A)({},t),i.style)}return i}function Al(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(t,n,s,i,a)=>{let{latestValues:o}=i;const l=(Ro(t)?El:ml)(n,o,a,t),c=function(e,t,n){const r={};for(const s in e)"values"===s&&"object"===typeof e.values||(yl(s)||!0===n&&gl(s)||!t&&!gl(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}(n,"string"===typeof t,e),u=(0,Oe.A)((0,Oe.A)((0,Oe.A)({},c),l),{},{ref:s}),{children:d}=n,h=(0,r.useMemo)(()=>Uo(d)?d.get():d,[d]);return(0,r.createElement)(t,(0,Oe.A)((0,Oe.A)({},u),{},{children:h}))}}function Tl(e,t,n,r){let{style:s,vars:i}=t;Object.assign(e.style,s,r&&r.getProjectionStyles(n));for(const a in i)e.style.setProperty(a,i[a])}const Cl=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Il(e,t,n,r){Tl(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(Cl.has(s)?s:po(s),t.attrs[s])}function jl(e,t){const{style:n}=e,r={};for(const s in n)(Uo(n[s])||t.style&&Uo(t.style[s])||Fo(s,e))&&(r[s]=n[s]);return r}function Pl(e,t){const n=jl(e,t);for(const r in e)if(Uo(e[r])||Uo(t[r])){n[-1!==Lo.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]}return n}function Dl(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return"function"===typeof t&&(t=t(void 0!==n?n:e.custom,r,s)),"string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t&&(t=t(void 0!==n?n:e.custom,r,s)),t}const Rl=e=>Array.isArray(e),Ol=e=>Rl(e)?e[e.length-1]||0:e;function Ll(e){const t=Uo(e)?e.get():e;return(e=>Boolean(e&&"object"===typeof e&&e.mix&&e.toValue))(t)?t.toValue():t}const Ml=["transitionEnd","transition"];const Fl=e=>(t,n)=>{const s=(0,r.useContext)(fo),i=(0,r.useContext)(eo),a=()=>function(e,t,n,r){let{scrapeMotionValuesFromProps:s,createRenderState:i,onMount:a}=e;const o={latestValues:Ul(t,n,r,s),renderState:i()};return a&&(o.mount=e=>a(t,e,o)),o}(e,t,s,i);return n?a():to(a)};function Ul(e,t,n,r){const s={},i=r(e,{});for(const h in i)s[h]=Ll(i[h]);let{initial:a,animate:o}=e;const l=ko(e),c=_o(e);t&&c&&!l&&!1!==e.inherit&&(void 0===a&&(a=t.initial),void 0===o&&(o=t.animate));let u=!!n&&!1===n.initial;u=u||!1===a;const d=u?o:a;if(d&&"boolean"!==typeof d&&!xo(d)){(Array.isArray(d)?d:[d]).forEach(t=>{const n=Dl(e,t);if(!n)return;const{transitionEnd:r,transition:i}=n,a=Ur(n,Ml);for(const e in a){let t=a[e];if(Array.isArray(t)){t=t[u?t.length-1:0]}null!==t&&(s[e]=t)}for(const e in r)s[e]=r[e]})}return s}const Vl={useVisualState:Fl({scrapeMotionValuesFromProps:Pl,createRenderState:Nl,onMount:(e,t,n)=>{let{renderState:r,latestValues:s}=n;Ya.read(()=>{try{r.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(wn){r.dimensions={x:0,y:0,width:0,height:0}}}),Ya.render(()=>{_l(r,s,{enableHardwareAcceleration:!1},Sl(t.tagName),e.transformTemplate),Il(t,r)})}})},Bl={useVisualState:Fl({scrapeMotionValuesFromProps:jl,createRenderState:dl})};function ql(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const zl=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function Kl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{point:{x:e[t+"X"],y:e[t+"Y"]}}}function Wl(e,t,n,r){return ql(e,t,(e=>t=>zl(t)&&e(t,Kl(t)))(n),r)}const Hl=(e,t)=>n=>t(e(n)),Gl=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(Hl)};function Ql(e){let t=null;return()=>{const n=()=>{t=null};return null===t&&(t=e,n)}}const Jl=Ql("dragHorizontal"),Yl=Ql("dragVertical");function Xl(e){let t=!1;if("y"===e)t=Yl();else if("x"===e)t=Jl();else{const e=Jl(),n=Yl();e&&n?t=()=>{e(),n()}:(e&&e(),n&&n())}return t}function $l(){const e=Xl(!0);return!e||(e(),!1)}class Zl{constructor(e){this.isMounted=!1,this.node=e}update(){}}function ec(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End");return Wl(e.current,n,(n,s)=>{if("touch"===n.pointerType||$l())return;const i=e.getProps();e.animationState&&i.whileHover&&e.animationState.setActive("whileHover",t),i[r]&&Ya.update(()=>i[r](n,s))},{passive:!e.getProps()[r]})}const tc=(e,t)=>!!t&&(e===t||tc(e,t.parentElement));function nc(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Kl(n))}const rc=["root"],sc=new WeakMap,ic=new WeakMap,ac=e=>{const t=sc.get(e.target);t&&t(e)},oc=e=>{e.forEach(ac)};function lc(e,t,n){const r=function(e){let{root:t}=e,n=Ur(e,rc);const r=t||document;ic.has(r)||ic.set(r,{});const s=ic.get(r),i=JSON.stringify(n);return s[i]||(s[i]=new IntersectionObserver(oc,(0,Oe.A)({root:t},n))),s[i]}(t);return sc.set(e,n),r.observe(e),()=>{sc.delete(e),r.unobserve(e)}}const cc={some:0,all:1};const uc={inView:{Feature:class extends Zl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:s}=e,i={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof r?r:cc[r]};return lc(this.node.current,i,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,s&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),i=t?n:r;i&&i(e)})}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends Zl{constructor(){super(...arguments),this.removeStartListeners=Ga,this.removeEndListeners=Ga,this.removeAccessibleListeners=Ga,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),r=Wl(window,"pointerup",(e,t)=>{if(!this.checkPressEnd())return;const{onTap:n,onTapCancel:r,globalTapTarget:s}=this.node.getProps();Ya.update(()=>{s||tc(this.node.current,e.target)?n&&n(e,t):r&&r(e,t)})},{passive:!(n.onTap||n.onPointerUp)}),s=Wl(window,"pointercancel",(e,t)=>this.cancelPress(e,t),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=Gl(r,s),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=ql(this.node.current,"keydown",e=>{if("Enter"!==e.key||this.isPressing)return;this.removeEndListeners(),this.removeEndListeners=ql(this.node.current,"keyup",e=>{"Enter"===e.key&&this.checkPressEnd()&&nc("up",(e,t)=>{const{onTap:n}=this.node.getProps();n&&Ya.update(()=>n(e,t))})}),nc("down",(e,t)=>{this.startPress(e,t)})}),t=ql(this.node.current,"blur",()=>{this.isPressing&&nc("cancel",(e,t)=>this.cancelPress(e,t))});this.removeAccessibleListeners=Gl(e,t)}}startPress(e,t){this.isPressing=!0;const{onTapStart:n,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Ya.update(()=>n(e,t))}checkPressEnd(){this.removeEndListeners(),this.isPressing=!1;return this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!$l()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Ya.update(()=>n(e,t))}mount(){const e=this.node.getProps(),t=Wl(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=ql(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Gl(t,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}},focus:{Feature:class extends Zl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(wn){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Gl(ql(this.node.current,"focus",()=>this.onFocus()),ql(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends Zl{mount(){this.unmount=Gl(ec(this.node,!0),ec(this.node,!1))}unmount(){}}}};function dc(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function hc(e,t,n){const r=e.getProps();return Dl(r,t,void 0!==n?n:r.custom,function(e){const t={};return e.values.forEach((e,n)=>t[n]=e.get()),t}(e),function(e){const t={};return e.values.forEach((e,n)=>t[n]=e.getVelocity()),t}(e))}const fc=e=>1e3*e,mc=e=>e/1e3,pc=!1,gc=e=>Array.isArray(e)&&"number"===typeof e[0];function yc(e){return Boolean(!e||"string"===typeof e&&xc[e]||gc(e)||Array.isArray(e)&&e.every(yc))}const vc=e=>{let[t,n,r,s]=e;return"cubic-bezier(".concat(t,", ").concat(n,", ").concat(r,", ").concat(s,")")},xc={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:vc([0,.65,.55,1]),circOut:vc([.55,0,1,.45]),backIn:vc([.31,.01,.66,-.59]),backOut:vc([.33,1.53,.69,.99])};function bc(e){if(e)return gc(e)?vc(e):Array.isArray(e)?e.map(bc):xc[e]}const wc=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function kc(e,t,n,r){if(e===t&&n===r)return Ga;const s=t=>function(e,t,n,r,s){let i,a,o=0;do{a=t+(n-t)/2,i=wc(a,r,s)-e,i>0?n=a:t=a}while(Math.abs(i)>1e-7&&++o<12);return a}(t,0,1,e,n);return e=>0===e||1===e?e:wc(s(e),t,r)}const _c=kc(.42,0,1,1),Nc=kc(0,0,.58,1),Sc=kc(.42,0,.58,1),Ec=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Ac=e=>t=>1-e(1-t),Tc=e=>1-Math.sin(Math.acos(e)),Cc=Ac(Tc),Ic=Ec(Tc),jc=kc(.33,1.53,.69,.99),Pc=Ac(jc),Dc=Ec(Pc),Rc={linear:Ga,easeIn:_c,easeInOut:Sc,easeOut:Nc,circIn:Tc,circInOut:Ic,circOut:Cc,backIn:Pc,backInOut:Dc,backOut:jc,anticipate:e=>(e*=2)<1?.5*Pc(e):.5*(2-Math.pow(2,-10*(e-1)))},Oc=e=>{if(Array.isArray(e)){lo(4===e.length,"Cubic bezier arrays must contain four numerical values.");const[t,n,r,s]=e;return kc(t,n,r,s)}return"string"===typeof e?(lo(void 0!==Rc[e],"Invalid easing type '".concat(e,"'")),Rc[e]):e},Lc=(e,t)=>n=>Boolean(el(n)&&Zo.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),Mc=(e,t,n)=>r=>{if(!el(r))return r;const[s,i,a,o]=r.match(Xo);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(a),alpha:void 0!==o?parseFloat(o):1}},Fc=(0,Oe.A)((0,Oe.A)({},Go),{},{transform:e=>Math.round((e=>Ho(0,255,e))(e))}),Uc={test:Lc("rgb","red"),parse:Mc("red","green","blue"),transform:e=>{let{red:t,green:n,blue:r,alpha:s=1}=e;return"rgba("+Fc.transform(t)+", "+Fc.transform(n)+", "+Fc.transform(r)+", "+Yo(Qo.transform(s))+")"}};const Vc={test:Lc("#"),parse:function(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}},transform:Uc.transform},Bc={test:Lc("hsl","hue"),parse:Mc("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:r,alpha:s=1}=e;return"hsla("+Math.round(t)+", "+rl.transform(Yo(n))+", "+rl.transform(Yo(r))+", "+Yo(Qo.transform(s))+")"}},qc={test:e=>Uc.test(e)||Vc.test(e)||Bc.test(e),parse:e=>Uc.test(e)?Uc.parse(e):Bc.test(e)?Bc.parse(e):Vc.parse(e),transform:e=>el(e)?e:e.hasOwnProperty("red")?Uc.transform(e):Bc.transform(e)},zc=(e,t,n)=>-n*e+n*t+e;function Kc(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}const Wc=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},Hc=[Vc,Uc,Bc];function Gc(e){const t=(e=>Hc.find(t=>t.test(e)))(e);lo(Boolean(t),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."));let n=t.parse(e);return t===Bc&&(n=function(e){let{hue:t,saturation:n,lightness:r,alpha:s}=e;t/=360,n/=100,r/=100;let i=0,a=0,o=0;if(n){const e=r<.5?r*(1+n):r+n-r*n,s=2*r-e;i=Kc(s,e,t+1/3),a=Kc(s,e,t),o=Kc(s,e,t-1/3)}else i=a=o=r;return{red:Math.round(255*i),green:Math.round(255*a),blue:Math.round(255*o),alpha:s}}(n)),n}const Qc=(e,t)=>{const n=Gc(e),r=Gc(t),s=(0,Oe.A)({},n);return e=>(s.red=Wc(n.red,r.red,e),s.green=Wc(n.green,r.green,e),s.blue=Wc(n.blue,r.blue,e),s.alpha=zc(n.alpha,r.alpha,e),Uc.transform(s))};const Jc={regex:/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,countKey:"Vars",token:"${v}",parse:Ga},Yc={regex:$o,countKey:"Colors",token:"${c}",parse:qc.parse},Xc={regex:Xo,countKey:"Numbers",token:"${n}",parse:Go.parse};function $c(e,t){let{regex:n,countKey:r,token:s,parse:i}=t;const a=e.tokenised.match(n);a&&(e["num"+r]=a.length,e.tokenised=e.tokenised.replace(n,s),e.values.push(...a.map(i)))}function Zc(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&$c(n,Jc),$c(n,Yc),$c(n,Xc),n}function eu(e){return Zc(e).values}function tu(e){const{values:t,numColors:n,numVars:r,tokenised:s}=Zc(e),i=t.length;return e=>{let t=s;for(let s=0;s<i;s++)t=s<r?t.replace(Jc.token,e[s]):s<r+n?t.replace(Yc.token,qc.transform(e[s])):t.replace(Xc.token,Yo(e[s]));return t}}const nu=e=>"number"===typeof e?0:e;const ru={test:function(e){var t,n;return isNaN(e)&&el(e)&&((null===(t=e.match(Xo))||void 0===t?void 0:t.length)||0)+((null===(n=e.match($o))||void 0===n?void 0:n.length)||0)>0},parse:eu,createTransformer:tu,getAnimatableNone:function(e){const t=eu(e);return tu(e)(t.map(nu))}},su=(e,t)=>n=>"".concat(n>0?t:e);function iu(e,t){return"number"===typeof e?n=>zc(e,t,n):qc.test(e)?Qc(e,t):e.startsWith("var(")?su(e,t):lu(e,t)}const au=(e,t)=>{const n=[...e],r=n.length,s=e.map((e,n)=>iu(e,t[n]));return e=>{for(let t=0;t<r;t++)n[t]=s[t](e);return n}},ou=(e,t)=>{const n=(0,Oe.A)((0,Oe.A)({},e),t),r={};for(const s in n)void 0!==e[s]&&void 0!==t[s]&&(r[s]=iu(e[s],t[s]));return e=>{for(const t in r)n[t]=r[t](e);return n}},lu=(e,t)=>{const n=ru.createTransformer(t),r=Zc(e),s=Zc(t);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?Gl(au(r.values,s.values),n):(oo(!0,"Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.")),su(e,t))},cu=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r},uu=(e,t)=>n=>zc(e,t,n);function du(e,t,n){const r=[],s=n||function(e){return"number"===typeof e?uu:"string"===typeof e?qc.test(e)?Qc:lu:Array.isArray(e)?au:"object"===typeof e?ou:uu}(e[0]),i=e.length-1;for(let a=0;a<i;a++){let n=s(e[a],e[a+1]);if(t){const e=Array.isArray(t)?t[a]||Ga:t;n=Gl(e,n)}r.push(n)}return r}function hu(e,t){let{clamp:n=!0,ease:r,mixer:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.length;if(lo(i===t.length,"Both input and output ranges must be the same length"),1===i)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=du(t,r,s),o=a.length,l=t=>{let n=0;if(o>1)for(;n<e.length-2&&!(t<e[n+1]);n++);const r=cu(e[n],e[n+1],t);return a[n](r)};return n?t=>l(Ho(e[0],e[i-1],t)):l}function fu(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=cu(0,t,r);e.push(zc(n,1,s))}}(t,e.length-1),t}function mu(e){let{duration:t=300,keyframes:n,times:r,ease:s="easeInOut"}=e;const i=(e=>Array.isArray(e)&&"number"!==typeof e[0])(s)?s.map(Oc):Oc(s),a={done:!1,value:n[0]},o=function(e,t){return e.map(e=>e*t)}(r&&r.length===n.length?r:fu(n),t),l=hu(o,n,{ease:Array.isArray(i)?i:(c=n,u=i,c.map(()=>u||Sc).splice(0,c.length-1))});var c,u;return{calculatedDuration:t,next:e=>(a.value=l(e),a.done=e>=t,a)}}function pu(e,t){return t?e*(1e3/t):0}function gu(e,t,n){const r=Math.max(t-5,0);return pu(n-e(r),t-r)}const yu=.001;function vu(e){let t,n,{duration:r=800,bounce:s=.25,velocity:i=0,mass:a=1}=e;oo(r<=fc(10),"Spring duration must be 10 seconds or less");let o=1-s;o=Ho(.05,1,o),r=Ho(.01,10,mc(r)),o<1?(t=e=>{const t=e*o,n=t*r,s=t-i,a=bu(e,o),l=Math.exp(-n);return yu-s/a*l},n=e=>{const n=e*o*r,s=n*i+i,a=Math.pow(o,2)*Math.pow(e,2)*r,l=Math.exp(-n),c=bu(Math.pow(e,2),o);return(-t(e)+yu>0?-1:1)*((s-a)*l)/c}):(t=e=>Math.exp(-e*r)*((e-i)*r+1)-.001,n=e=>Math.exp(-e*r)*(r*r*(i-e)));const l=function(e,t,n){let r=n;for(let s=1;s<xu;s++)r-=e(r)/t(r);return r}(t,n,5/r);if(r=fc(r),isNaN(l))return{stiffness:100,damping:10,duration:r};{const e=Math.pow(l,2)*a;return{stiffness:e,damping:2*o*Math.sqrt(a*e),duration:r}}}const xu=12;function bu(e,t){return e*Math.sqrt(1-t*t)}const wu=["keyframes","restDelta","restSpeed"],ku=["duration","bounce"],_u=["stiffness","damping","mass"];function Nu(e,t){return t.some(t=>void 0!==e[t])}function Su(e){let{keyframes:t,restDelta:n,restSpeed:r}=e,s=Ur(e,wu);const i=t[0],a=t[t.length-1],o={done:!1,value:i},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=function(e){let t=(0,Oe.A)({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!Nu(e,_u)&&Nu(e,ku)){const n=vu(e);t=(0,Oe.A)((0,Oe.A)((0,Oe.A)({},t),n),{},{mass:1}),t.isResolvedFromDuration=!0}return t}((0,Oe.A)((0,Oe.A)({},s),{},{velocity:-mc(s.velocity||0)})),m=h||0,p=c/(2*Math.sqrt(l*u)),g=a-i,y=mc(Math.sqrt(l/u)),v=Math.abs(g)<5;let x;if(r||(r=v?.01:2),n||(n=v?.005:.5),p<1){const e=bu(y,p);x=t=>{const n=Math.exp(-p*y*t);return a-n*((m+p*y*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===p)x=e=>a-Math.exp(-y*e)*(g+(m+y*g)*e);else{const e=y*Math.sqrt(p*p-1);x=t=>{const n=Math.exp(-p*y*t),r=Math.min(e*t,300);return a-n*((m+p*y*g)*Math.sinh(r)+e*g*Math.cosh(r))/e}}return{calculatedDuration:f&&d||null,next:e=>{const t=x(e);if(f)o.done=e>=d;else{let s=m;0!==e&&(s=p<1?gu(x,e,t):0);const i=Math.abs(s)<=r,l=Math.abs(a-t)<=n;o.done=i&&l}return o.value=o.done?a:t,o}}}function Eu(e){let{keyframes:t,velocity:n=0,power:r=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}=e;const h=t[0],f={done:!1,value:h},m=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let p=r*n;const g=h+p,y=void 0===o?g:o(g);y!==g&&(p=y-h);const v=e=>-p*Math.exp(-e/s),x=e=>y+v(e),b=e=>{const t=v(e),n=x(e);f.done=Math.abs(t)<=u,f.value=f.done?y:n};let w,k;const _=e=>{(e=>void 0!==l&&e<l||void 0!==c&&e>c)(f.value)&&(w=e,k=Su({keyframes:[f.value,m(f.value)],velocity:gu(x,e,f.value),damping:i,stiffness:a,restDelta:u,restSpeed:d}))};return _(0),{calculatedDuration:null,next:e=>{let t=!1;return k||void 0!==w||(t=!0,b(e),_(e)),void 0!==w&&e>w?k.next(e-w):(!t&&b(e),f)}}}const Au=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:()=>Ya.update(t,!0),stop:()=>Xa(t),now:()=>$a.isProcessing?$a.timestamp:performance.now()}};function Tu(e){let t=0;let n=e.next(t);for(;!n.done&&t<2e4;)t+=50,n=e.next(t);return t>=2e4?1/0:t}const Cu=["autoplay","delay","driver","keyframes","type","repeat","repeatDelay","repeatType","onPlay","onStop","onComplete","onUpdate"],Iu={decay:Eu,inertia:Eu,tween:mu,keyframes:mu,spring:Su};function ju(e){let t,n,{autoplay:r=!0,delay:s=0,driver:i=Au,keyframes:a,type:o="keyframes",repeat:l=0,repeatDelay:c=0,repeatType:u="loop",onPlay:d,onStop:h,onComplete:f,onUpdate:m}=e,p=Ur(e,Cu),g=1,y=!1;const v=()=>{n=new Promise(e=>{t=e})};let x;v();const b=Iu[o]||mu;let w;b!==mu&&"number"!==typeof a[0]&&(w=hu([0,100],a,{clamp:!1}),a=[0,100]);const k=b((0,Oe.A)((0,Oe.A)({},p),{},{keyframes:a}));let _;"mirror"===u&&(_=b((0,Oe.A)((0,Oe.A)({},p),{},{keyframes:[...a].reverse(),velocity:-(p.velocity||0)})));let N="idle",S=null,E=null,A=null;null===k.calculatedDuration&&l&&(k.calculatedDuration=Tu(k));const{calculatedDuration:T}=k;let C=1/0,I=1/0;null!==T&&(C=T+c,I=C*(l+1)-c);let j=0;const P=e=>{if(null===E)return;g>0&&(E=Math.min(E,e)),g<0&&(E=Math.min(e-I/g,E)),j=null!==S?S:Math.round(e-E)*g;const t=j-s*(g>=0?1:-1),n=g>=0?t<0:t>I;j=Math.max(t,0),"finished"===N&&null===S&&(j=I);let r=j,i=k;if(l){const e=Math.min(j,I)/C;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,l+1);Boolean(t%2)&&("reverse"===u?(n=1-n,c&&(n-=c/C)):"mirror"===u&&(i=_)),r=Ho(0,1,n)*C}const o=n?{done:!1,value:a[0]}:i.next(r);w&&(o.value=w(o.value));let{done:d}=o;n||null===T||(d=g>=0?j>=I:j<=0);const h=null===S&&("finished"===N||"running"===N&&d);return m&&m(o.value),h&&O(),o},D=()=>{x&&x.stop(),x=void 0},R=()=>{N="idle",D(),t(),v(),E=A=null},O=()=>{N="finished",f&&f(),D(),t()},L=()=>{if(y)return;x||(x=i(P));const e=x.now();d&&d(),null!==S?E=e-S:E&&"finished"!==N||(E=e),"finished"===N&&v(),A=E,S=null,N="running",x.start()};r&&L();const M={then:(e,t)=>n.then(e,t),get time(){return mc(j)},set time(e){e=fc(e),j=e,null===S&&x&&0!==g?E=x.now()-e/g:S=e},get duration(){const e=null===k.calculatedDuration?Tu(k):k.calculatedDuration;return mc(e)},get speed(){return g},set speed(e){e!==g&&x&&(g=e,M.time=mc(j))},get state(){return N},play:L,pause:()=>{N="paused",S=j},stop:()=>{y=!0,"idle"!==N&&(N="idle",h&&h(),R())},cancel:()=>{null!==A&&P(A),R()},complete:()=>{N="finished"},sample:e=>(E=0,P(e))};return M}const Pu=["onUpdate","onComplete"],Du=function(e){let t;return()=>(void 0===t&&(t=e()),t)}(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Ru=new Set(["opacity","clipPath","filter","transform","backgroundColor"]);function Ou(e,t,n){let{onUpdate:r,onComplete:s}=n,i=Ur(n,Pu);if(!(Du()&&Ru.has(t)&&!i.repeatDelay&&"mirror"!==i.repeatType&&0!==i.damping&&"inertia"!==i.type))return!1;let a,o,l=!1,c=!1;const u=()=>{o=new Promise(e=>{a=e})};u();let{keyframes:d,duration:h=300,ease:f,times:m}=i;if(((e,t)=>"spring"===t.type||"backgroundColor"===e||!yc(t.ease))(t,i)){const e=ju((0,Oe.A)((0,Oe.A)({},i),{},{repeat:0,delay:0}));let t={done:!1,value:d[0]};const n=[];let r=0;for(;!t.done&&r<2e4;)t=e.sample(r),n.push(t.value),r+=10;m=void 0,d=n,h=r-10,f="linear"}const p=function(e,t,n){let{delay:r=0,duration:s,repeat:i=0,repeatType:a="loop",ease:o,times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const c={[t]:n};l&&(c.offset=l);const u=bc(o);return Array.isArray(u)&&(c.easing=u),e.animate(c,{delay:r,duration:s,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:"reverse"===a?"alternate":"normal"})}(e.owner.current,t,d,(0,Oe.A)((0,Oe.A)({},i),{},{duration:h,ease:f,times:m})),g=()=>{c=!1,p.cancel()},y=()=>{c=!0,Ya.update(g),a(),u()};p.onfinish=()=>{c||(e.set(function(e,t){let{repeat:n,repeatType:r="loop"}=t;return e[n&&"loop"!==r&&n%2===1?0:e.length-1]}(d,i)),s&&s(),y())};return{then:(e,t)=>o.then(e,t),attachTimeline:e=>(p.timeline=e,p.onfinish=null,Ga),get time(){return mc(p.currentTime||0)},set time(e){p.currentTime=fc(e)},get speed(){return p.playbackRate},set speed(e){p.playbackRate=e},get duration(){return mc(h)},play:()=>{l||(p.play(),Xa(g))},pause:()=>p.pause(),stop:()=>{if(l=!0,"idle"===p.playState)return;const{currentTime:t}=p;if(t){const n=ju((0,Oe.A)((0,Oe.A)({},i),{},{autoplay:!1}));e.setWithVelocity(n.sample(t-10).value,n.sample(t).value,10)}y()},complete:()=>{c||p.finish()},cancel:y}}const Lu={type:"spring",stiffness:500,damping:25,restSpeed:10},Mu={type:"keyframes",duration:.8},Fu={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Uu=(e,t)=>{let{keyframes:n}=t;return n.length>2?Mu:Mo.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:Lu:Fu},Vu=(e,t)=>"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!ru.test(t)&&"0"!==t||t.startsWith("url("))),Bu=new Set(["brightness","contrast","saturate","opacity"]);function qu(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(Xo)||[];if(!r)return e;const s=n.replace(r,"");let i=Bu.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const zu=/([a-z-]*)\(.*?\)/g,Ku=(0,Oe.A)((0,Oe.A)({},ru),{},{getAnimatableNone:e=>{const t=e.match(zu);return t?t.map(qu).join(" "):e}}),Wu=(0,Oe.A)((0,Oe.A)({},cl),{},{color:qc,backgroundColor:qc,outlineColor:qc,fill:qc,stroke:qc,borderColor:qc,borderTopColor:qc,borderRightColor:qc,borderBottomColor:qc,borderLeftColor:qc,filter:Ku,WebkitFilter:Ku}),Hu=e=>Wu[e];function Gu(e,t){let n=Hu(e);return n!==Ku&&(n=ru),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Qu=e=>/^0[^.\s]+$/.test(e);function Ju(e){return"number"===typeof e?0===e:null!==e?"none"===e||"0"===e||Qu(e):void 0}const Yu=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"];function Xu(e,t){return e[t]||e.default||e}const $u=!1,Zu=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return s=>{const i=Xu(r,e)||{},a=i.delay||r.delay||0;let{elapsed:o=0}=r;o-=fc(a);const l=function(e,t,n,r){const s=Vu(t,n);let i;i=Array.isArray(n)?[...n]:[null,n];const a=void 0!==r.from?r.from:e.get();let o;const l=[];for(let c=0;c<i.length;c++)null===i[c]&&(i[c]=0===c?a:i[c-1]),Ju(i[c])&&l.push(c),"string"===typeof i[c]&&"none"!==i[c]&&"0"!==i[c]&&(o=i[c]);if(s&&l.length&&o)for(let c=0;c<l.length;c++)i[l[c]]=Gu(t,o);return i}(t,e,n,i),c=l[0],u=l[l.length-1],d=Vu(e,c),h=Vu(e,u);oo(d===h,"You are trying to animate ".concat(e,' from "').concat(c,'" to "').concat(u,'". ').concat(c," is not an animatable value - to enable this animation set ").concat(c," to a value animatable to ").concat(u," via the `style` property."));let f=(0,Oe.A)((0,Oe.A)({keyframes:l,velocity:t.getVelocity(),ease:"easeOut"},i),{},{delay:-o,onUpdate:e=>{t.set(e),i.onUpdate&&i.onUpdate(e)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}});if(function(e){let{when:t,delay:n,delayChildren:r,staggerChildren:s,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:l,from:c,elapsed:u}=e,d=Ur(e,Yu);return!!Object.keys(d).length}(i)||(f=(0,Oe.A)((0,Oe.A)({},f),Uu(e,f))),f.duration&&(f.duration=fc(f.duration)),f.repeatDelay&&(f.repeatDelay=fc(f.repeatDelay)),!d||!h||pc||!1===i.type||$u)return function(e){let{keyframes:t,delay:n,onUpdate:r,onComplete:s}=e;const i=()=>(r&&r(t[t.length-1]),s&&s(),{time:0,speed:1,duration:0,play:Ga,pause:Ga,stop:Ga,then:e=>(e(),Promise.resolve()),cancel:Ga,complete:Ga});return n?ju({keyframes:[0,1],duration:0,delay:n,onComplete:i}):i()}(pc?(0,Oe.A)((0,Oe.A)({},f),{},{delay:0}):f);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const n=Ou(t,e,f);if(n)return n}return ju(f)}};function ed(e){return Boolean(Uo(e)&&e.add)}const td=e=>/^\-?\d*\.?\d+$/.test(e);function nd(e,t){-1===e.indexOf(t)&&e.push(t)}function rd(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class sd{constructor(){this.subscriptions=[]}add(e){return nd(this.subscriptions,e),()=>rd(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let s=0;s<r;s++){const r=this.subscriptions[s];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const id={current:void 0};class ad{constructor(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.prev=t.current,t.current=e;const{delta:r,timestamp:s}=$a;t.lastUpdated!==s&&(t.timeDelta=r,t.lastUpdated=s,Ya.postRender(t.scheduleVelocityCheck)),t.prev!==t.current&&t.events.change&&t.events.change.notify(t.current),t.events.velocityChange&&t.events.velocityChange.notify(t.getVelocity()),n&&t.events.renderRequest&&t.events.renderRequest.notify(t.current)},this.scheduleVelocityCheck=()=>Ya.postRender(this.velocityCheck),this.velocityCheck=e=>{let{timestamp:t}=e;t!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=(r=this.current,!isNaN(parseFloat(r))),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new sd);const n=this.events[e].add(t);return"change"===e?()=>{n(),Ya.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=e,this.timeDelta=n}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return id.current&&id.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?pu(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function od(e,t){return new ad(e,t)}const ld=e=>t=>t.test(e),cd=[Go,sl,rl,nl,al,il,{test:e=>"auto"===e,parse:e=>e}],ud=e=>cd.find(ld(e)),dd=[...cd,qc,ru],hd=e=>dd.find(ld(e)),fd=["transitionEnd","transition"];function md(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,od(n))}function pd(e,t){const n=hc(e,t);let r=n?e.makeTargetAnimatable(n,!1):{},{transitionEnd:s={},transition:i={}}=r,a=Ur(r,fd);a=(0,Oe.A)((0,Oe.A)({},a),s);for(const o in a){md(e,o,Ol(a[o]))}}function gd(e,t){if(!t)return;return(t[e]||t.default||t).from}const yd=["transition","transitionEnd"];function vd(e,t){let{protectedKeys:n,needsAnimating:r}=e;const s=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,s}function xd(e,t){const n=e.get();if(!Array.isArray(t))return n!==t;for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}function bd(e,t){let{delay:n=0,transitionOverride:r,type:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.makeTargetAnimatable(t),{transition:a=e.getDefaultTransition(),transitionEnd:o}=i,l=Ur(i,yd);const c=e.getValue("willChange");r&&(a=r);const u=[],d=s&&e.animationState&&e.animationState.getState()[s];for(const h in l){const t=e.getValue(h),r=l[h];if(!t||void 0===r||d&&vd(d,h))continue;const s=(0,Oe.A)({delay:n,elapsed:0},Xu(a||{},h));if(window.HandoffAppearAnimations){const n=e.getProps()[go];if(n){const e=window.HandoffAppearAnimations(n,h,t,Ya);null!==e&&(s.elapsed=e,s.isHandoff=!0)}}let i=!s.isHandoff&&!xd(t,r);if("spring"===s.type&&(t.getVelocity()||s.velocity)&&(i=!1),t.animation&&(i=!1),i)continue;t.start(Zu(h,t,r,e.shouldReduceMotion&&Mo.has(h)?{type:!1}:s));const o=t.animation;ed(c)&&(c.add(h),o.then(()=>c.remove(h))),u.push(o)}return o&&Promise.all(u).then(()=>{o&&pd(e,o)}),u}function wd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=hc(e,t,n.custom);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(bd(e,r,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:i=0,staggerChildren:a,staggerDirection:o}=s;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5?arguments[5]:void 0;const a=[],o=(e.variantChildren.size-1)*r,l=1===s?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r}:function(){return o-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r};return Array.from(e.variantChildren).sort(kd).forEach((e,r)=>{e.notify("AnimationStart",t),a.push(wd(e,t,(0,Oe.A)((0,Oe.A)({},i),{},{delay:n+l(r)})).then(()=>e.notify("AnimationComplete",t)))}),Promise.all(a)}(e,t,i+r,a,o,n)}:()=>Promise.resolve(),{when:o}=s;if(o){const[e,t]="beforeChildren"===o?[i,a]:[a,i];return e().then(()=>t())}return Promise.all([i(),a(n.delay)])}function kd(e,t){return e.sortNodePosition(t)}const _d=["transition","transitionEnd"],Nd=[...bo].reverse(),Sd=bo.length;function Ed(e){return t=>Promise.all(t.map(t=>{let{animation:n,options:r}=t;return function(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const s=t.map(t=>wd(e,t,r));n=Promise.all(s)}else if("string"===typeof t)n=wd(e,t,r);else{const s="function"===typeof t?hc(e,t,r.custom):t;n=Promise.all(bd(e,s,r))}return n.then(()=>e.notify("AnimationComplete",t))}(e,n,r)}))}function Ad(e){let t=Ed(e);const n={animate:Cd(!0),whileInView:Cd(),whileHover:Cd(),whileTap:Cd(),whileDrag:Cd(),whileFocus:Cd(),exit:Cd()};let r=!0;const s=(t,n)=>{const r=hc(e,n);if(r){const{transition:e,transitionEnd:n}=r,s=Ur(r,_d);t=(0,Oe.A)((0,Oe.A)((0,Oe.A)({},t),s),n)}return t};function i(i,a){const o=e.getProps(),l=e.getVariantContext(!0)||{},c=[],u=new Set;let d={},h=1/0;for(let t=0;t<Sd;t++){const f=Nd[t],m=n[f],p=void 0!==o[f]?o[f]:l[f],g=vo(p),y=f===a?m.isActive:null;!1===y&&(h=t);let v=p===l[f]&&p!==o[f]&&g;if(v&&r&&e.manuallyAnimateOnMount&&(v=!1),m.protectedKeys=(0,Oe.A)({},d),!m.isActive&&null===y||!p&&!m.prevProp||xo(p)||"boolean"===typeof p)continue;let x=Td(m.prevProp,p)||f===a&&m.isActive&&!v&&g||t>h&&g,b=!1;const w=Array.isArray(p)?p:[p];let k=w.reduce(s,{});!1===y&&(k={});const{prevResolvedValues:_={}}=m,N=(0,Oe.A)((0,Oe.A)({},_),k),S=e=>{x=!0,u.has(e)&&(b=!0,u.delete(e)),m.needsAnimating[e]=!0};for(const e in N){const t=k[e],n=_[e];if(d.hasOwnProperty(e))continue;let r=!1;r=Rl(t)&&Rl(n)?!dc(t,n):t!==n,r?void 0!==t?S(e):u.add(e):void 0!==t&&u.has(e)?S(e):m.protectedKeys[e]=!0}m.prevProp=p,m.prevResolvedValues=k,m.isActive&&(d=(0,Oe.A)((0,Oe.A)({},d),k)),r&&e.blockInitialAnimation&&(x=!1),!x||v&&!b||c.push(...w.map(e=>({animation:e,options:(0,Oe.A)({type:f},i)})))}if(u.size){const t={};u.forEach(n=>{const r=e.getBaseTarget(n);void 0!==r&&(t[n]=r)}),c.push({animation:t})}let f=Boolean(c.length);return!r||!1!==o.initial&&o.initial!==o.animate||e.manuallyAnimateOnMount||(f=!1),r=!1,f?t(c):Promise.resolve()}return{animateChanges:i,setActive:function(t,r,s){var a;if(n[t].isActive===r)return Promise.resolve();null===(a=e.variantChildren)||void 0===a||a.forEach(e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)}),n[t].isActive=r;const o=i(s,t);for(const e in n)n[e].protectedKeys={};return o},setAnimateFunction:function(n){t=n(e)},getState:()=>n}}function Td(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!dc(t,e)}function Cd(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}let Id=0;const jd={animation:{Feature:class extends Zl{constructor(e){super(e),e.animationState||(e.animationState=Ad(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),xo(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}},exit:{Feature:class extends Zl{constructor(){super(...arguments),this.id=Id++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e,{custom:null!==n&&void 0!==n?n:this.node.getProps().custom});t&&!e&&s.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}}},Pd=(e,t)=>Math.abs(e-t);class Dd{constructor(e,t){let{transformPagePoint:n,contextWindow:r,dragSnapToOrigin:s=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=Ld(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=Pd(e.x,t.x),r=Pd(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!n)return;const{point:r}=e,{timestamp:s}=$a;this.history.push((0,Oe.A)((0,Oe.A)({},r),{},{timestamp:s}));const{onStart:i,onMove:a}=this.handlers;t||(i&&i(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),a&&a(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=Rd(t,this.transformPagePoint),Ya.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:s}=this.handlers;if(this.dragSnapToOrigin&&s&&s(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const i=Ld("pointercancel"===e.type?this.lastMoveEventInfo:Rd(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,i),r&&r(e,i)},!zl(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=n,this.contextWindow=r||window;const i=Rd(Kl(e),this.transformPagePoint),{point:a}=i,{timestamp:o}=$a;this.history=[(0,Oe.A)((0,Oe.A)({},a),{},{timestamp:o})];const{onSessionStart:l}=t;l&&l(e,Ld(i,this.history)),this.removeListeners=Gl(Wl(this.contextWindow,"pointermove",this.handlePointerMove),Wl(this.contextWindow,"pointerup",this.handlePointerUp),Wl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Xa(this.updatePoint)}}function Rd(e,t){return t?{point:t(e.point)}:e}function Od(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Ld(e,t){let{point:n}=e;return{point:n,delta:Od(n,Fd(t)),offset:Od(n,Md(t)),velocity:Ud(t,.1)}}function Md(e){return e[0]}function Fd(e){return e[e.length-1]}function Ud(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=Fd(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>fc(t)));)n--;if(!r)return{x:0,y:0};const i=mc(s.timestamp-r.timestamp);if(0===i)return{x:0,y:0};const a={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Vd(e){return e.max-e.min}function Bd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return Math.abs(e-t)<=n}function qd(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=r,e.originPoint=zc(t.min,t.max,e.origin),e.scale=Vd(n)/Vd(t),(Bd(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=zc(n.min,n.max,e.origin)-e.originPoint,(Bd(e.translate)||isNaN(e.translate))&&(e.translate=0)}function zd(e,t,n,r){qd(e.x,t.x,n.x,r?r.originX:void 0),qd(e.y,t.y,n.y,r?r.originY:void 0)}function Kd(e,t,n){e.min=n.min+t.min,e.max=e.min+Vd(t)}function Wd(e,t,n){e.min=t.min-n.min,e.max=e.min+Vd(t)}function Hd(e,t,n){Wd(e.x,t.x,n.x),Wd(e.y,t.y,n.y)}function Gd(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function Qd(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const Jd=.35;function Yd(e,t,n){return{min:Xd(e,t),max:Xd(e,n)}}function Xd(e,t){return"number"===typeof e?e:e[t]||0}const $d=()=>({x:{min:0,max:0},y:{min:0,max:0}});function Zd(e){return[e("x"),e("y")]}function eh(e){let{top:t,left:n,right:r,bottom:s}=e;return{x:{min:n,max:r},y:{min:t,max:s}}}function th(e){return void 0===e||1===e}function nh(e){let{scale:t,scaleX:n,scaleY:r}=e;return!th(t)||!th(n)||!th(r)}function rh(e){return nh(e)||sh(e)||e.z||e.rotate||e.rotateX||e.rotateY}function sh(e){return ih(e.x)||ih(e.y)}function ih(e){return e&&"0%"!==e}function ah(e,t,n){return n+t*(e-n)}function oh(e,t,n,r,s){return void 0!==s&&(e=ah(e,s,r)),ah(e,n,r)+t}function lh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;e.min=oh(e.min,t,n,r,s),e.max=oh(e.max,t,n,r,s)}function ch(e,t){let{x:n,y:r}=t;lh(e.x,n.translate,n.scale,n.originPoint),lh(e.y,r.translate,r.scale,r.originPoint)}function uh(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function dh(e,t){e.min=e.min+t,e.max=e.max+t}function hh(e,t,n){let[r,s,i]=n;const a=void 0!==t[i]?t[i]:.5,o=zc(e.min,e.max,a);lh(e,t[r],t[s],o,t.scale)}const fh=["x","scaleX","originX"],mh=["y","scaleY","originY"];function ph(e,t){hh(e.x,t,fh),hh(e.y,t,mh)}function gh(e,t){return eh(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const yh=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},vh=new WeakMap;class xh{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}start(e){let{snapToCursor:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:r}=this.getProps();this.panSession=new Dd(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Kl(e,"page").point)},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:s}=this.getProps();if(n&&!r&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Xl(n),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Zd(e=>{let t=this.getAxisMotionValue(e).get()||0;if(rl.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=Vd(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),s&&Ya.update(()=>s(e,t),!1,!0);const{animationState:i}=this.visualElement;i&&i.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:s,onDrag:i}=this.getProps();if(!n&&!this.openGlobalLock)return;const{offset:a}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(a),void(null!==this.currentDirection&&s&&s(this.currentDirection));this.updateAxis("x",t.point,a),this.updateAxis("y",t.point,a),this.visualElement.render(),i&&i(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>Zd(e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r,contextWindow:yh(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&Ya.update(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!bh(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let i=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(i=function(e,t,n){let{min:r,max:s}=t;return void 0!==r&&e<r?e=n?zc(r,e,n.min):Math.max(e,r):void 0!==s&&e>s&&(e=n?zc(s,e,n.max):Math.min(e,s)),e}(i,this.constraints[e],this.elastic[e])),s.set(i)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,s=this.constraints;t&&yo(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!r)&&function(e,t){let{top:n,left:r,bottom:s,right:i}=t;return{x:Gd(e.x,r,i),y:Gd(e.y,n,s)}}(r.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jd;return!1===e?e=0:!0===e&&(e=Jd),{x:Yd(e,"left","right"),y:Yd(e,"top","bottom")}}(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Zd(e=>{this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(r.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!yo(e))return!1;const n=e.current;lo(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=function(e,t,n){const r=gh(e,n),{scroll:s}=t;return s&&(dh(r.x,s.offset.x),dh(r.y,s.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let i=function(e,t){return{x:Qd(e.x,t.x),y:Qd(e.y,t.y)}}(r.layout.layoutBox,s);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(i));this.hasMutatedConstraints=!!e,e&&(i=eh(e))}return i}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:s,dragSnapToOrigin:i,onDragTransitionEnd:a}=this.getProps(),o=this.constraints||{},l=Zd(a=>{if(!bh(a,t,this.currentDirection))return;let l=o&&o[a]||{};i&&(l={min:0,max:0});const c=r?200:1e6,u=r?40:1e7,d=(0,Oe.A)((0,Oe.A)({type:"inertia",velocity:n?e[a]:0,bounceStiffness:c,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10},s),l);return this.startAxisValueAnimation(a,d)});return Promise.all(l).then(a)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return n.start(Zu(e,n,0,t))}stopAnimation(){Zd(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Zd(e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()})}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Zd(t=>{const{drag:n}=this.getProps();if(!bh(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:i}=r.layout.layoutBox[t];s.set(e[t]-zc(n,i,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!yo(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Zd(e=>{const t=this.getAxisMotionValue(e);if(t){const n=t.get();r[e]=function(e,t){let n=.5;const r=Vd(e),s=Vd(t);return s>r?n=cu(t.min,t.max-r,e.min):r>s&&(n=cu(e.min,e.max-s,t.min)),Ho(0,1,n)}({min:n,max:n},this.constraints[e])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Zd(t=>{if(!bh(t,e,null))return;const n=this.getAxisMotionValue(t),{min:s,max:i}=this.constraints[t];n.set(zc(s,i,r[t]))})}addListeners(){if(!this.visualElement.current)return;vh.set(this.visualElement,this);const e=Wl(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();yo(e)&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),t();const s=ql(window,"resize",()=>this.scalePositionWithinConstraints()),i=n.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(Zd(e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))}),this.visualElement.render())});return()=>{s(),e(),r(),i&&i()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:i=Jd,dragMomentum:a=!0}=e;return(0,Oe.A)((0,Oe.A)({},e),{},{drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:s,dragElastic:i,dragMomentum:a})}}function bh(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const wh=e=>(t,n)=>{e&&Ya.update(()=>e(t,n))};const kh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function _h(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Nh={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!sl.test(e))return e;e=parseFloat(e)}const n=_h(e,t.target.x),r=_h(e,t.target.y);return"".concat(n,"% ").concat(r,"%")}},Sh={correct:(e,t)=>{let{treeScale:n,projectionDelta:r}=t;const s=e,i=ru.parse(e);if(i.length>5)return s;const a=ru.createTransformer(e),o="number"!==typeof i[0]?1:0,l=r.x.scale*n.x,c=r.y.scale*n.y;i[0+o]/=l,i[1+o]/=c;const u=zc(l,c,.5);return"number"===typeof i[2+o]&&(i[2+o]/=u),"number"===typeof i[3+o]&&(i[3+o]/=u),a(i)}};class Eh extends r.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:s}=e;var i;i=Th,Object.assign(Oo,i),s&&(t.group&&t.group.add(s),n&&n.register&&r&&n.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions((0,Oe.A)((0,Oe.A)({},s.options),{},{onExitComplete:()=>this.safeToRemove()}))),kh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:s}=this.props,i=n.projection;return i?(i.isPresent=s,r||e.layoutDependency!==t||void 0===t?i.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?i.promote():i.relegate()||Ya.postRender(()=>{const e=i.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Ah(e){const[t,n]=function(){const e=(0,r.useContext)(eo);if(null===e)return[!0,null];const{isPresent:t,onExitComplete:n,register:s}=e,i=(0,r.useId)();return(0,r.useEffect)(()=>s(i),[]),!t&&n?[!1,()=>n&&n(i)]:[!0]}(),s=(0,r.useContext)(ao);return r.createElement(Eh,(0,Oe.A)((0,Oe.A)({},e),{},{layoutGroup:s,switchLayoutGroup:(0,r.useContext)(To),isPresent:t,safeToRemove:n}))}const Th={borderRadius:(0,Oe.A)((0,Oe.A)({},Nh),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:Nh,borderTopRightRadius:Nh,borderBottomLeftRadius:Nh,borderBottomRightRadius:Nh,boxShadow:Sh},Ch=["TopLeft","TopRight","BottomLeft","BottomRight"],Ih=Ch.length,jh=e=>"string"===typeof e?parseFloat(e):e,Ph=e=>"number"===typeof e||sl.test(e);function Dh(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const Rh=Lh(0,.5,Cc),Oh=Lh(.5,.95,Ga);function Lh(e,t,n){return r=>r<e?0:r>t?1:n(cu(e,t,r))}function Mh(e,t){e.min=t.min,e.max=t.max}function Fh(e,t){Mh(e.x,t.x),Mh(e.y,t.y)}function Uh(e,t,n,r,s){return e=ah(e-=t,1/n,r),void 0!==s&&(e=ah(e,1/s,r)),e}function Vh(e,t,n,r,s){let[i,a,o]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,s=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;rl.test(t)&&(t=parseFloat(t),t=zc(a.min,a.max,t/100)-a.min);if("number"!==typeof t)return;let o=zc(i.min,i.max,r);e===i&&(o-=t),e.min=Uh(e.min,t,n,o,s),e.max=Uh(e.max,t,n,o,s)}(e,t[i],t[a],t[o],t.scale,r,s)}const Bh=["x","scaleX","originX"],qh=["y","scaleY","originY"];function zh(e,t,n,r){Vh(e.x,t,Bh,n?n.x:void 0,r?r.x:void 0),Vh(e.y,t,qh,n?n.y:void 0,r?r.y:void 0)}function Kh(e){return 0===e.translate&&1===e.scale}function Wh(e){return Kh(e.x)&&Kh(e.y)}function Hh(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function Gh(e){return Vd(e.x)/Vd(e.y)}class Qh{constructor(){this.members=[]}add(e){nd(this.members,e),e.scheduleRender()}remove(e){if(rd(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Jh(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y;if((s||i)&&(r="translate3d(".concat(s,"px, ").concat(i,"px, 0) ")),1===t.x&&1===t.y||(r+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),n){const{rotate:e,rotateX:t,rotateY:s}=n;e&&(r+="rotate(".concat(e,"deg) ")),t&&(r+="rotateX(".concat(t,"deg) ")),s&&(r+="rotateY(".concat(s,"deg) "))}const a=e.x.scale*t.x,o=e.y.scale*t.y;return 1===a&&1===o||(r+="scale(".concat(a,", ").concat(o,")")),r||"none"}const Yh=(e,t)=>e.depth-t.depth;class Xh{constructor(){this.children=[],this.isDirty=!1}add(e){nd(this.children,e),this.isDirty=!0}remove(e){rd(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Yh),this.isDirty=!1,this.children.forEach(e)}}const $h=["","X","Y","Z"],Zh={visibility:"hidden"};let ef=0;const tf={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function nf(e){let{attachResizeListener:t,defaultParent:n,measureScroll:r,checkIsScrollRoot:s,resetTransform:i}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();this.id=ef++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,tf.totalNodes=tf.resolvedTargetDeltas=tf.recalculatedProjection=0,this.nodes.forEach(af),this.nodes.forEach(ff),this.nodes.forEach(mf),this.nodes.forEach(of),function(e){window.MotionDebug&&window.MotionDebug.record(e)}(tf)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new Xh)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new sd),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];t&&t.notify(...r)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root.hasTreeAnimated;if(this.instance)return;var r;this.isSVG=(r=e)instanceof SVGElement&&"svg"!==r.tagName,this.instance=e;const{layoutId:s,layout:i,visualElement:a}=this.options;if(a&&!a.current&&a.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(i||s)&&(this.isLayoutDirty=!0),t){let n;const r=()=>this.root.updateBlockedByResize=!1;t(e,()=>{this.root.updateBlockedByResize=!0,n&&n(),n=function(e,t){const n=performance.now(),r=s=>{let{timestamp:i}=s;const a=i-n;a>=t&&(Xa(r),e(a-t))};return Ya.read(r,!0),()=>Xa(r)}(r,250),kh.hasAnimatedSinceResize&&(kh.hasAnimatedSinceResize=!1,this.nodes.forEach(hf))})}s&&this.root.registerSharedNode(s,this),!1!==this.options.animate&&a&&(s||i)&&this.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n,hasRelativeTargetChanged:r,layout:s}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const i=this.options.transition||a.getDefaultTransition()||bf,{onLayoutAnimationStart:o,onLayoutAnimationComplete:l}=a.getProps(),c=!this.targetLayout||!Hh(this.targetLayout,s)||r,u=!n&&r;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||u||n&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(t,u);const e=(0,Oe.A)((0,Oe.A)({},Xu(i,"layout")),{},{onPlay:o,onComplete:l});(a.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e)}else n||hf(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=s})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Xa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(pf),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let s=0;s<this.path.length;s++){const e=this.path[s];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(cf);this.isUpdating||this.nodes.forEach(uf),this.isUpdating=!1,this.nodes.forEach(df),this.nodes.forEach(rf),this.nodes.forEach(sf),this.clearAllSnapshots();const e=performance.now();$a.delta=Ho(0,1e3/60,e-$a.timestamp),$a.timestamp=e,$a.isProcessing=!0,Za.update.process($a),Za.preRender.process($a),Za.render.process($a),$a.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(lf),this.sharedNodes.forEach(gf)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ya.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ya.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&(this.scroll={animationId:this.root.animationId,phase:e,isRoot:s(this.instance),offset:r(this.instance)})}resetTransform(){if(!i)return;const e=this.isLayoutDirty||this.shouldResetTransform,t=this.projectionDelta&&!Wh(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,s=r!==this.prevTransformTemplateValue;e&&(t||rh(this.latestValues)||s)&&(i(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),_f((r=n).x),_f(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:e}=this.options;if(!e)return{x:{min:0,max:0},y:{min:0,max:0}};const t=e.measureViewportBox(),{scroll:n}=this.root;return n&&(dh(t.x,n.offset.x),dh(t.y,n.offset.y)),t}removeElementScroll(e){const t={x:{min:0,max:0},y:{min:0,max:0}};Fh(t,e);for(let n=0;n<this.path.length;n++){const r=this.path[n],{scroll:s,options:i}=r;if(r!==this.root&&s&&i.layoutScroll){if(s.isRoot){Fh(t,e);const{scroll:n}=this.root;n&&(dh(t.x,-n.offset.x),dh(t.y,-n.offset.y))}dh(t.x,s.offset.x),dh(t.y,s.offset.y)}}return t}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={x:{min:0,max:0},y:{min:0,max:0}};Fh(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&ph(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),rh(e.latestValues)&&ph(n,e.latestValues)}return rh(this.latestValues)&&ph(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};Fh(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!rh(e.latestValues))continue;nh(e.latestValues)&&e.updateSnapshot();const r=$d();Fh(r,e.measurePageBox()),zh(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return rh(this.latestValues)&&zh(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options=(0,Oe.A)((0,Oe.A)((0,Oe.A)({},this.options),e),{},{crossfade:void 0===e.crossfade||e.crossfade})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==$a.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==n;if(!(e||r&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget))return;const{layout:s,layoutId:i}=this.options;if(this.layout&&(s||i)){if(this.resolvedRelativeTargetAt=$a.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Hd(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),Fh(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var a,o,l;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),a=this.target,o=this.relativeTarget,l=this.relativeParent.target,Kd(a.x,o.x,l.x),Kd(a.y,o.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):Fh(this.target,this.layout.layoutBox),ch(this.target,this.targetDelta)):Fh(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Hd(this.relativeTargetOrigin,this.target,e.target),Fh(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}tf.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!nh(this.parent.latestValues)&&!sh(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let r=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===$a.timestamp&&(r=!1),r)return;const{layout:s,layoutId:i}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!s&&!i)return;Fh(this.layoutCorrected,this.layout.layoutBox);const a=this.treeScale.x,o=this.treeScale.y;!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=n.length;if(!s)return;let i,a;t.x=t.y=1;for(let o=0;o<s;o++){i=n[o],a=i.projectionDelta;const s=i.instance;s&&s.style&&"contents"===s.style.display||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ph(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,ch(e,a)),r&&rh(i.latestValues)&&ph(e,i.latestValues))}t.x=uh(t.x),t.y=uh(t.y)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox);const{target:l}=t;if(!l)return void(this.projectionTransform&&(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionTransform="none",this.scheduleRender()));this.projectionDelta||(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}});const c=this.projectionTransform;zd(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.projectionTransform=Jh(this.projectionDelta,this.treeScale),this.projectionTransform===c&&this.treeScale.x===a&&this.treeScale.y===o||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),tf.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.options.scheduleRender&&this.options.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,r=n?n.latestValues:{},s=(0,Oe.A)({},this.latestValues),i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const a={x:{min:0,max:0},y:{min:0,max:0}},o=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,u=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some(xf));let d;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;yf(i.x,e.x,n),yf(i.y,e.y,n),this.setTargetDelta(i),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Hd(a,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(e,t,n,r){vf(e.x,t.x,n.x,r),vf(e.y,t.y,n.y,r)}(this.relativeTarget,this.relativeTargetOrigin,a,n),d&&function(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}(this.relativeTarget,d)&&(this.isProjectionDirty=!1),d||(d={x:{min:0,max:0},y:{min:0,max:0}}),Fh(d,this.relativeTarget)),o&&(this.animationValues=s,function(e,t,n,r,s,i){s?(e.opacity=zc(0,void 0!==n.opacity?n.opacity:1,Rh(r)),e.opacityExit=zc(void 0!==t.opacity?t.opacity:1,0,Oh(r))):i&&(e.opacity=zc(void 0!==t.opacity?t.opacity:1,void 0!==n.opacity?n.opacity:1,r));for(let a=0;a<Ih;a++){const s="border".concat(Ch[a],"Radius");let i=Dh(t,s),o=Dh(n,s);void 0===i&&void 0===o||(i||(i=0),o||(o=0),0===i||0===o||Ph(i)===Ph(o)?(e[s]=Math.max(zc(jh(i),jh(o),r),0),(rl.test(o)||rl.test(i))&&(e[s]+="%")):e[s]=o)}(t.rotate||n.rotate)&&(e.rotate=zc(t.rotate||0,n.rotate||0,r))}(s,r,this.latestValues,n,u,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Xa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ya.update(()=>{kh.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,n){const r=Uo(e)?e:od(e);return r.start(Zu("",r,t,n)),r.animation}(0,1e3,(0,Oe.A)((0,Oe.A)({},e),{},{onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:s}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&Nf(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=Vd(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=Vd(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}Fh(t,n),ph(t,s),zd(this.projectionDeltaWithTransform,this.layoutCorrected,t,s)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new Qh);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.rotate||n.rotateX||n.rotateY||n.rotateZ)&&(t=!0),!t)return;const r={};for(let s=0;s<$h.length;s++){const t="rotate"+$h[s];n[t]&&(r[t]=n[t],e.setStaticValue(t,0))}e.render();for(const s in r)e.setStaticValue(s,r[s]);e.scheduleRender()}getProjectionStyles(e){var t,n;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Zh;const r={visibility:""},s=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,r.opacity="",r.pointerEvents=Ll(null===e||void 0===e?void 0:e.pointerEvents)||"",r.transform=s?s(this.latestValues,""):"none",r;const i=this.getLead();if(!this.projectionDelta||!this.layout||!i.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=Ll(null===e||void 0===e?void 0:e.pointerEvents)||""),this.hasProjected&&!rh(this.latestValues)&&(t.transform=s?s({},""):"none",this.hasProjected=!1),t}const a=i.animationValues||i.latestValues;this.applyTransformsToTarget(),r.transform=Jh(this.projectionDeltaWithTransform,this.treeScale,a),s&&(r.transform=s(a,r.transform));const{x:o,y:l}=this.projectionDelta;r.transformOrigin="".concat(100*o.origin,"% ").concat(100*l.origin,"% 0"),i.animationValues?r.opacity=i===this?null!==(n=null!==(t=a.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:a.opacityExit:r.opacity=i===this?void 0!==a.opacity?a.opacity:"":void 0!==a.opacityExit?a.opacityExit:0;for(const c in Oo){if(void 0===a[c])continue;const{correct:e,applyTo:t}=Oo[c],n="none"===r.transform?a[c]:e(a[c],i);if(t){const e=t.length;for(let s=0;s<e;s++)r[t[s]]=n}else r[c]=n}return this.options.layoutId&&(r.pointerEvents=i===this?Ll(null===e||void 0===e?void 0:e.pointerEvents)||"":"none"),r}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()}),this.root.nodes.forEach(cf),this.root.sharedNodes.clear()}}}function rf(e){e.updateLayout()}function sf(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=e.layout,{animationType:s}=e.options,i=n.source!==e.layout.source;"size"===s?Zd(e=>{const r=i?n.measuredBox[e]:n.layoutBox[e],s=Vd(r);r.min=t[e].min,r.max=r.min+s}):Nf(s,n.layoutBox,t)&&Zd(r=>{const s=i?n.measuredBox[r]:n.layoutBox[r],a=Vd(t[r]);s.max=s.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+a)});const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};zd(a,t,n.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};i?zd(o,e.applyTransform(r,!0),n.measuredBox):zd(o,t,n.layoutBox);const l=!Wh(a);let c=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:s,layout:i}=r;if(s&&i){const a={x:{min:0,max:0},y:{min:0,max:0}};Hd(a,n.layoutBox,s.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};Hd(o,t,i.layoutBox),Hh(a,o)||(c=!0),r.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=a,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:o,layoutDelta:a,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function af(e){tf.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function of(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function lf(e){e.clearSnapshot()}function cf(e){e.clearMeasurements()}function uf(e){e.isLayoutDirty=!1}function df(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function hf(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function ff(e){e.resolveTargetDelta()}function mf(e){e.calcProjection()}function pf(e){e.resetRotation()}function gf(e){e.removeLeadSnapshot()}function yf(e,t,n){e.translate=zc(t.translate,0,n),e.scale=zc(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function vf(e,t,n,r){e.min=zc(t.min,n.min,r),e.max=zc(t.max,n.max,r)}function xf(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const bf={duration:.45,ease:[.4,0,.1,1]},wf=e=>"undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().includes(e),kf=wf("applewebkit/")&&!wf("chrome/")?Math.round:Ga;function _f(e){e.min=kf(e.min),e.max=kf(e.max)}function Nf(e,t,n){return"position"===e||"preserve-aspect"===e&&!Bd(Gh(t),Gh(n),.2)}const Sf=nf({attachResizeListener:(e,t)=>ql(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ef={current:void 0},Af=nf({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Ef.current){const e=new Sf({});e.mount(window),e.setOptions({layoutScroll:!0}),Ef.current=e}return Ef.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),Tf={pan:{Feature:class extends Zl{constructor(){super(...arguments),this.removePointerDownListener=Ga}onPointerDown(e){this.session=new Dd(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:yh(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:wh(e),onStart:wh(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&Ya.update(()=>r(e,t))}}}mount(){this.removePointerDownListener=Wl(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends Zl{constructor(e){super(e),this.removeGroupControls=Ga,this.removeListeners=Ga,this.controls=new xh(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ga}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:Af,MeasureLayout:Ah}};function Cf(e){if(null==e)throw new TypeError("Cannot destructure "+e)}const If=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function jf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;lo(n<=4,'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.'));const[r,s]=function(e){const t=If.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const e=i.trim();return td(e)?parseFloat(e):e}return Ko(s)?jf(s,t,n+1):s}const Pf=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Df=e=>Pf.has(e),Rf=e=>e===Go||e===sl,Of=(e,t)=>parseFloat(e.split(", ")[t]),Lf=(e,t)=>(n,r)=>{let{transform:s}=r;if("none"===s||!s)return 0;const i=s.match(/^matrix3d\((.+)\)$/);if(i)return Of(i[1],t);{const t=s.match(/^matrix\((.+)\)$/);return t?Of(t[1],e):0}},Mf=new Set(["x","y","z"]),Ff=Lo.filter(e=>!Mf.has(e));const Uf={width:(e,t)=>{let{x:n}=e,{paddingLeft:r="0",paddingRight:s="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(s)},height:(e,t)=>{let{y:n}=e,{paddingTop:r="0",paddingBottom:s="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(s)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:r}=t;return parseFloat(r)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:r}=t;return parseFloat(r)+(n.max-n.min)},x:Lf(4,13),y:Lf(5,14)};Uf.translateX=Uf.x,Uf.translateY=Uf.y;const Vf=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t=(0,Oe.A)({},t),r=(0,Oe.A)({},r);const s=Object.keys(t).filter(Df);let i=[],a=!1;const o=[];if(s.forEach(s=>{const l=e.getValue(s);if(!e.hasValue(s))return;let c=n[s],u=ud(c);const d=t[s];let h;if(Rl(d)){const e=d.length,t=null===d[0]?1:0;c=d[t],u=ud(c);for(let n=t;n<e&&null!==d[n];n++)h?lo(ud(d[n])===h,"All keyframes must be of the same type"):(h=ud(d[n]),lo(h===u||Rf(u)&&Rf(h),"Keyframes must be of the same dimension as the current value"))}else h=ud(d);if(u!==h)if(Rf(u)&&Rf(h)){const e=l.get();"string"===typeof e&&l.set(parseFloat(e)),"string"===typeof d?t[s]=parseFloat(d):Array.isArray(d)&&h===sl&&(t[s]=d.map(parseFloat))}else(null===u||void 0===u?void 0:u.transform)&&(null===h||void 0===h?void 0:h.transform)&&(0===c||0===d)?0===c?l.set(h.transform(c)):t[s]=u.transform(d):(a||(i=function(e){const t=[];return Ff.forEach(n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}(e),a=!0),o.push(s),r[s]=void 0!==r[s]?r[s]:t[s],l.jump(d))}),o.length){const n=o.indexOf("height")>=0?window.pageYOffset:null,s=((e,t,n)=>{const r=t.measureViewportBox(),s=t.current,i=getComputedStyle(s),{display:a}=i,o={};"none"===a&&t.setStaticValue("display",e.display||"block"),n.forEach(e=>{o[e]=Uf[e](r,i)}),t.render();const l=t.measureViewportBox();return n.forEach(n=>{const r=t.getValue(n);r&&r.jump(o[n]),e[n]=Uf[n](l,i)}),e})(t,e,o);return i.length&&i.forEach(t=>{let[n,r]=t;e.getValue(n).set(r)}),e.render(),Ka&&null!==n&&window.scrollTo({top:n}),{target:s,transitionEnd:r}}return{target:t,transitionEnd:r}};function Bf(e,t,n,r){return(e=>Object.keys(e).some(Df))(t)?Vf(e,t,n,r):{target:t,transitionEnd:r}}const qf=(e,t,n,r)=>{const s=function(e,t,n){let r=Object.assign({},(Cf(t),t));const s=e.current;if(!(s instanceof Element))return{target:r,transitionEnd:n};n&&(n=(0,Oe.A)({},n)),e.values.forEach(e=>{const t=e.get();if(!Ko(t))return;const n=jf(t,s);n&&e.set(n)});for(const i in r){const e=r[i];if(!Ko(e))continue;const t=jf(e,s);t&&(r[i]=t,n||(n={}),void 0===n[i]&&(n[i]=e))}return{target:r,transitionEnd:n}}(e,t,r);return Bf(e,t=s.target,n,r=s.transitionEnd)},zf={current:null},Kf={current:!1};const Wf=new WeakMap,Hf=["willChange"],Gf=["children"],Qf=Object.keys(Ao),Jf=Qf.length,Yf=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Xf=wo.length;class $f{constructor(e){let{parent:t,props:n,presenceContext:r,reducedMotionConfig:s,visualState:i}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ya.render(this.render,!1,!0);const{latestValues:o,renderState:l}=i;this.latestValues=o,this.baseTarget=(0,Oe.A)({},o),this.initialValues=n.initial?(0,Oe.A)({},o):{},this.renderState=l,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.isControllingVariants=ko(n),this.isVariantNode=_o(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const c=this.scrapeMotionValuesFromProps(n,{}),{willChange:u}=c,d=Ur(c,Hf);for(const h in d){const e=d[h];void 0!==o[h]&&Uo(e)&&(e.set(o[h],!1),ed(u)&&u.add(h))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,Wf.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),Kf.current||function(){if(Kf.current=!0,Ka)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>zf.current=e.matches;e.addListener(t),t()}else zf.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||zf.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Wf.delete(this.current),this.projection&&this.projection.unmount(),Xa(this.notifyUpdate),Xa(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const n=Mo.has(e),r=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&Ya.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),s()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}loadFeatures(e,t,n,r){let s,i,{children:a}=e,o=Ur(e,Gf);for(let l=0;l<Jf;l++){const e=Qf[l],{isEnabled:t,Feature:n,ProjectionNode:r,MeasureLayout:a}=Ao[e];r&&(s=r),t(o)&&(!this.features[e]&&n&&(this.features[e]=new n(this)),a&&(i=a))}if(("html"===this.type||"svg"===this.type)&&!this.projection&&s){this.projection=new s(this.latestValues,this.parent&&this.parent.projection);const{layoutId:e,layout:t,drag:n,dragConstraints:i,layoutScroll:a,layoutRoot:l}=o;this.projection.setOptions({layoutId:e,layout:t,alwaysMeasureLayout:Boolean(n)||i&&yo(i),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:"string"===typeof t?t:"both",initialPromotionConfig:r,layoutScroll:a,layoutRoot:l})}return i}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<Yf.length;n++){const t=Yf[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){const{willChange:r}=t;for(const s in t){const i=t[s],a=n[s];if(Uo(i))e.addValue(s,i),ed(r)&&r.add(s);else if(Uo(a))e.addValue(s,od(i,{owner:e})),ed(r)&&r.remove(s);else if(a!==i)if(e.hasValue(s)){const t=e.getValue(s);!t.hasAnimated&&t.set(i)}else{const t=e.getStaticValue(s);e.addValue(s,od(void 0!==t?t:i,{owner:e}))}}for(const s in n)void 0===t[s]&&e.removeValue(s);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const e=this.parent&&this.parent.getVariantContext()||{};return void 0!==this.props.initial&&(e.initial=this.props.initial),e}const e={};for(let t=0;t<Xf;t++){const n=wo[t],r=this.props[n];(vo(r)||!1===r)&&(e[n]=r)}return e}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=od(t,{owner:this}),this.addValue(e,n)),n}readValue(e){var t;return void 0===this.latestValues[e]&&this.current?null!==(t=this.getBaseTargetFromProps(this.props,e))&&void 0!==t?t:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e]}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props,r="string"===typeof n||"object"===typeof n?null===(t=Dl(this.props,n))||void 0===t?void 0:t[e]:void 0;if(n&&void 0!==r)return r;const s=this.getBaseTargetFromProps(this.props,e);return void 0===s||Uo(s)?void 0!==this.initialValues[e]&&void 0===r?void 0:this.baseTarget[e]:s}on(e,t){return this.events[e]||(this.events[e]=new sd),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.events[e].notify(...n)}}}const Zf=["transition","transitionEnd"];class em extends $f{sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:r}=t;delete n[e],delete r[e]}makeTargetAnimatableFromInstance(e,t,n){let{transition:r,transitionEnd:s}=e,i=Ur(e,Zf),{transformValues:a}=t,o=function(e,t,n){const r={};for(const s in e){const e=gd(s,t);if(void 0!==e)r[s]=e;else{const e=n.getValue(s);e&&(r[s]=e.get())}}return r}(i,r||{},this);if(a&&(s&&(s=a(s)),i&&(i=a(i)),o&&(o=a(o))),n){!function(e,t,n){var r,s;const i=Object.keys(t).filter(t=>!e.hasValue(t)),a=i.length;if(a)for(let o=0;o<a;o++){const a=i[o],l=t[a];let c=null;Array.isArray(l)&&(c=l[0]),null===c&&(c=null!==(s=null!==(r=n[a])&&void 0!==r?r:e.readValue(a))&&void 0!==s?s:t[a]),void 0!==c&&null!==c&&("string"===typeof c&&(td(c)||Qu(c))?c=parseFloat(c):!hd(c)&&ru.test(l)&&(c=Gu(a,l)),e.addValue(a,od(c,{owner:e})),void 0===n[a]&&(n[a]=c),null!==c&&e.setBaseTarget(a,c))}}(this,i,o);const e=qf(this,i,o,s);s=e.transitionEnd,i=e.target}return(0,Oe.A)({transition:r,transitionEnd:s},i)}}class tm extends em{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(Mo.has(t)){const e=Hu(t);return e&&e.default||0}{const r=(n=e,window.getComputedStyle(n)),s=(zo(t)?r.getPropertyValue(t):r[t])||0;return"string"===typeof s?s.trim():s}var n}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return gh(e,n)}build(e,t,n,r){ul(e,t,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,t){return jl(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Uo(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent="".concat(e))}))}renderInstance(e,t,n,r){Tl(e,t,n,r)}}class nm extends em{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Mo.has(t)){const e=Hu(t);return e&&e.default||0}return t=Cl.has(t)?t:po(t),e.getAttribute(t)}measureInstanceViewportBox(){return{x:{min:0,max:0},y:{min:0,max:0}}}scrapeMotionValuesFromProps(e,t){return Pl(e,t)}build(e,t,n,r){_l(e,t,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,n,r){Il(e,t,0,r)}mount(e){this.isSVGTag=Sl(e.tagName),super.mount(e)}}const rm=(e,t)=>Ro(e)?new nm(t,{enableHardwareAcceleration:!1}):new tm(t,{enableHardwareAcceleration:!0}),sm={layout:{ProjectionNode:Af,MeasureLayout:Ah}},im=(0,Oe.A)((0,Oe.A)((0,Oe.A)((0,Oe.A)({},jd),uc),Tf),sm),am=Po((e,t)=>function(e,t,n,r){let{forwardMotionProps:s=!1}=t;const i=Ro(e)?Vl:Bl;return(0,Oe.A)((0,Oe.A)({},i),{},{preloadedFeatures:n,useRender:Al(s),createVisualElement:r,Component:e})}(e,t,im,rm));const om=qr("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),lm=qr("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),cm=qr("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),um=qr("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),dm=qr("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),hm=()=>{const[e,t]=(0,r.useState)(!1),{user:n,logout:s}=As(),i=te(),a=Z(),o=(e=>{const t=[{name:"Dashboard",href:"super_admin"===e?"/super-admin":"/admin",icon:Ra},{name:"Bookings",href:"super_admin"===e?"/super-admin/bookings":"/admin/bookings",icon:Kr},{name:"Rooms",href:"super_admin"===e?"/super-admin/rooms":"/admin/rooms",icon:sa},{name:"Cabins",href:"super_admin"===e?"/super-admin/cabins":"/admin/cabins",icon:om},{name:"Price Tracking",href:"super_admin"===e?"/super-admin/pricing":"/admin/pricing",icon:Va},{name:"Guests",href:"super_admin"===e?"/super-admin/guests":"/admin/guests",icon:Aa},{name:"HR",href:"super_admin"===e?"/super-admin/hr":"/admin/hr",icon:lm},{name:"Payments",href:"super_admin"===e?"/super-admin/payments":"/admin/payments",icon:Wr},{name:"Payment Gateway",href:"super_admin"===e?"/super-admin/payment-gateway":"/admin/payment-gateway",icon:Ta},{name:"Reports",href:"super_admin"===e?"/super-admin/reports":"/admin/reports",icon:cm},{name:"Users",href:"super_admin"===e?"/super-admin/users":"/admin/users",icon:Oa}];return"super_admin"===e&&t.splice(1,0,{name:"Admin Management",href:"/super-admin/admins",icon:ja}),t})(null===n||void 0===n?void 0:n.role),l=async()=>{await s(),i("/login")},c=e=>{i(e),t(!1)};return(0,yn.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,yn.jsx)(uo,{children:e&&(0,yn.jsxs)(am.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 lg:hidden",children:[(0,yn.jsx)(am.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>t(!1)}),(0,yn.jsxs)(am.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",damping:20,stiffness:100},className:"relative flex-1 flex flex-col max-w-xs w-full bg-white shadow-xl",children:[(0,yn.jsxs)("div",{className:"flex-1 h-0 pt-5 pb-4 overflow-y-auto",children:[(0,yn.jsxs)("div",{className:"flex-shrink-0 flex items-center px-4",children:[(0,yn.jsx)("div",{className:"h-8 w-8 bg-blue-600 rounded-lg flex items-center justify-center",children:(0,yn.jsx)(sa,{className:"h-5 w-5 text-white"})}),(0,yn.jsx)("span",{className:"ml-2 text-xl font-semibold text-gray-900",children:"Hotel MS"})]}),(0,yn.jsx)("nav",{className:"mt-5 px-2 space-y-1",children:o.map(e=>{const t=a.pathname===e.href;return(0,yn.jsxs)("button",{onClick:()=>c(e.href),className:"group flex items-center px-2 py-2 text-base font-medium rounded-md w-full ".concat(t?"bg-blue-100 text-blue-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,yn.jsx)(e.icon,{className:"mr-4 h-6 w-6 ".concat(t?"text-blue-500":"text-gray-400 group-hover:text-gray-500")}),e.name]},e.name)})})]}),(0,yn.jsx)("div",{className:"flex-shrink-0 flex border-t border-gray-200 p-4",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("div",{className:"text-base font-medium text-gray-700",children:[null===n||void 0===n?void 0:n.firstName," ",null===n||void 0===n?void 0:n.lastName]}),(0,yn.jsx)("div",{className:"text-sm font-medium text-gray-500",children:null===n||void 0===n?void 0:n.email})]}),(0,yn.jsx)("button",{onClick:l,className:"ml-auto bg-gray-100 flex-shrink-0 p-1 rounded-full text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:(0,yn.jsx)(ma,{className:"h-6 w-6"})})]})})]})]})}),(0,yn.jsx)("div",{className:"hidden lg:flex lg:w-64 lg:flex-col lg:fixed lg:inset-y-0",children:(0,yn.jsxs)("div",{className:"flex-1 flex flex-col min-h-0 bg-white border-r border-gray-200",children:[(0,yn.jsxs)("div",{className:"flex-1 flex flex-col pt-5 pb-4 overflow-y-auto",children:[(0,yn.jsxs)("div",{className:"flex items-center flex-shrink-0 px-4",children:[(0,yn.jsx)("div",{className:"h-8 w-8 bg-blue-600 rounded-lg flex items-center justify-center",children:(0,yn.jsx)(sa,{className:"h-5 w-5 text-white"})}),(0,yn.jsx)("span",{className:"ml-2 text-xl font-semibold text-gray-900",children:"Hotel MS"})]}),(0,yn.jsx)("nav",{className:"mt-5 flex-1 px-2 space-y-1",children:o.map(e=>{const t=a.pathname===e.href;return(0,yn.jsxs)("button",{onClick:()=>c(e.href),className:"group flex items-center px-2 py-2 text-sm font-medium rounded-md w-full ".concat(t?"bg-blue-100 text-blue-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,yn.jsx)(e.icon,{className:"mr-3 h-5 w-5 ".concat(t?"text-blue-500":"text-gray-400 group-hover:text-gray-500")}),e.name]},e.name)})})]}),(0,yn.jsx)("div",{className:"flex-shrink-0 flex border-t border-gray-200 p-4",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("div",{className:"text-sm font-medium text-gray-700",children:[null===n||void 0===n?void 0:n.firstName," ",null===n||void 0===n?void 0:n.lastName]}),(0,yn.jsx)("div",{className:"text-xs font-medium text-gray-500",children:null===n||void 0===n?void 0:n.email})]}),(0,yn.jsx)("button",{onClick:l,className:"ml-auto bg-gray-100 flex-shrink-0 p-1 rounded-full text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:(0,yn.jsx)(ma,{className:"h-5 w-5"})})]})})]})}),(0,yn.jsxs)("div",{className:"lg:pl-64 flex flex-col flex-1",children:[(0,yn.jsxs)("div",{className:"sticky top-0 z-10 flex-shrink-0 flex h-16 bg-white shadow",children:[(0,yn.jsxs)("button",{type:"button",className:"px-4 border-r border-gray-200 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500 lg:hidden",onClick:()=>t(!0),children:[(0,yn.jsx)("span",{className:"sr-only",children:"Open sidebar"}),(0,yn.jsx)(um,{className:"h-6 w-6"})]}),(0,yn.jsxs)("div",{className:"flex-1 px-4 flex justify-between",children:[(0,yn.jsx)("div",{className:"flex-1 flex",children:(0,yn.jsxs)("form",{className:"w-full flex md:ml-0",action:"#",method:"GET",children:[(0,yn.jsx)("label",{htmlFor:"search-field",className:"sr-only",children:"Search"}),(0,yn.jsxs)("div",{className:"relative w-full text-gray-400 focus-within:text-gray-600",children:[(0,yn.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pointer-events-none",children:(0,yn.jsx)(ha,{className:"h-5 w-5"})}),(0,yn.jsx)("input",{id:"search-field",className:"block w-full h-full pl-8 pr-3 py-2 border-transparent text-gray-900 placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-0 focus:border-transparent sm:text-sm",placeholder:"Search",type:"search",name:"search"})]})]})}),(0,yn.jsxs)("div",{className:"ml-4 flex items-center md:ml-6",children:[(0,yn.jsxs)("button",{type:"button",className:"bg-white p-1 rounded-full text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,yn.jsx)("span",{className:"sr-only",children:"View notifications"}),(0,yn.jsx)(dm,{className:"h-6 w-6"})]}),(0,yn.jsx)("div",{className:"ml-3 relative",children:(0,yn.jsx)("div",{children:(0,yn.jsxs)("button",{type:"button",className:"max-w-xs bg-white flex items-center text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,yn.jsx)("span",{className:"sr-only",children:"Open user menu"}),(0,yn.jsx)("div",{className:"h-8 w-8 rounded-full bg-blue-600 flex items-center justify-center",children:(0,yn.jsx)(fa,{className:"h-5 w-5 text-white"})})]})})})]})]})]}),(0,yn.jsx)("main",{className:"flex-1",children:(0,yn.jsx)("div",{className:"py-6",children:(0,yn.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8",children:(0,yn.jsx)(ve,{})})})})]})]})};var fm,mm,pm,gm,ym,vm,xm,bm,wm,km,_m,Nm,Sm,Em,Am,Tm,Cm=(fm=new WeakMap,mm=new WeakMap,pm=new WeakMap,gm=new WeakMap,ym=new WeakMap,vm=new WeakMap,xm=new WeakMap,bm=new WeakMap,wm=new WeakMap,km=new WeakMap,_m=new WeakMap,Nm=new WeakMap,Sm=new WeakMap,Em=new WeakMap,Am=new WeakMap,Tm=new WeakSet,class extends wt{constructor(e,t){super(),ht(this,Tm),Me(this,fm,void 0),Me(this,mm,void 0),Me(this,pm,void 0),Me(this,gm,void 0),Me(this,ym,void 0),Me(this,vm,void 0),Me(this,xm,void 0),Me(this,bm,void 0),Me(this,wm,void 0),Me(this,km,void 0),Me(this,_m,void 0),Me(this,Nm,void 0),Me(this,Sm,void 0),Me(this,Em,void 0),Me(this,Am,new Set),this.options=t,Ve(fm,this,e),Ve(bm,this,null),Ve(xm,this,Nt()),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(Ue(mm,this).addObserver(this),Um(Ue(mm,this),this.options)?Fe(Tm,this,Im).call(this):this.updateResult(),Fe(Tm,this,Rm).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Vm(Ue(mm,this),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Vm(Ue(mm,this),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Fe(Tm,this,Om).call(this),Fe(Tm,this,Lm).call(this),Ue(mm,this).removeObserver(this)}setOptions(e){const t=this.options,n=Ue(mm,this);if(this.options=Ue(fm,this).defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!==typeof this.options.enabled&&"function"!==typeof this.options.enabled&&"boolean"!==typeof Je(this.options.enabled,Ue(mm,this)))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Fe(Tm,this,Mm).call(this),Ue(mm,this).setOptions(this.options),t._defaulted&&!rt(this.options,t)&&Ue(fm,this).getQueryCache().notify({type:"observerOptionsUpdated",query:Ue(mm,this),observer:this});const r=this.hasListeners();r&&Bm(Ue(mm,this),n,this.options,t)&&Fe(Tm,this,Im).call(this),this.updateResult(),!r||Ue(mm,this)===n&&Je(this.options.enabled,Ue(mm,this))===Je(t.enabled,Ue(mm,this))&&Qe(this.options.staleTime,Ue(mm,this))===Qe(t.staleTime,Ue(mm,this))||Fe(Tm,this,jm).call(this);const s=Fe(Tm,this,Pm).call(this);!r||Ue(mm,this)===n&&Je(this.options.enabled,Ue(mm,this))===Je(t.enabled,Ue(mm,this))&&s===Ue(Em,this)||Fe(Tm,this,Dm).call(this,s)}getOptimisticResult(e){const t=Ue(fm,this).getQueryCache().build(Ue(fm,this),e),n=this.createResult(t,e);return function(e,t){if(!rt(e.getCurrentResult(),t))return!0;return!1}(this,n)&&(Ve(gm,this,n),Ve(vm,this,this.options),Ve(ym,this,Ue(mm,this).state)),n}getCurrentResult(){return Ue(gm,this)}trackResult(e,t){return new Proxy(e,{get:(e,n)=>(this.trackProp(n),null===t||void 0===t||t(n),"promise"===n&&(this.trackProp("data"),this.options.experimental_prefetchInRender||"pending"!==Ue(xm,this).status||Ue(xm,this).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(e,n))})}trackProp(e){Ue(Am,this).add(e)}getCurrentQuery(){return Ue(mm,this)}refetch(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},(Cf(e),e));return this.fetch((0,Oe.A)({},t))}fetchOptimistic(e){const t=Ue(fm,this).defaultQueryOptions(e),n=Ue(fm,this).getQueryCache().build(Ue(fm,this),t);return n.fetch().then(()=>this.createResult(n,t))}fetch(e){var t;return Fe(Tm,this,Im).call(this,(0,Oe.A)((0,Oe.A)({},e),{},{cancelRefetch:null===(t=e.cancelRefetch)||void 0===t||t})).then(()=>(this.updateResult(),Ue(gm,this)))}createResult(e,t){const n=Ue(mm,this),r=this.options,s=Ue(gm,this),i=Ue(ym,this),a=Ue(vm,this),o=e!==n?e.state:Ue(pm,this),{state:l}=e;let c,u=(0,Oe.A)({},l),d=!1;if(t._optimisticResults){const s=this.hasListeners(),i=!s&&Um(e,t),a=s&&Bm(e,n,t,r);(i||a)&&(u=(0,Oe.A)((0,Oe.A)({},u),qt(l.data,e.options))),"isRestoring"===t._optimisticResults&&(u.fetchStatus="idle")}let{error:h,errorUpdatedAt:f,status:m}=u;c=u.data;let p=!1;if(void 0!==t.placeholderData&&void 0===c&&"pending"===m){let e;var g;if(null!==s&&void 0!==s&&s.isPlaceholderData&&t.placeholderData===(null===a||void 0===a?void 0:a.placeholderData))e=s.data,p=!0;else e="function"===typeof t.placeholderData?t.placeholderData(null===(g=Ue(_m,this))||void 0===g?void 0:g.state.data,Ue(_m,this)):t.placeholderData;void 0!==e&&(m="success",c=ot(null===s||void 0===s?void 0:s.data,e,t),d=!0)}if(t.select&&void 0!==c&&!p)if(s&&c===(null===i||void 0===i?void 0:i.data)&&t.select===Ue(wm,this))c=Ue(km,this);else try{Ve(wm,this,t.select),c=t.select(c),c=ot(null===s||void 0===s?void 0:s.data,c,t),Ve(km,this,c),Ve(bm,this,null)}catch(_){Ve(bm,this,_)}Ue(bm,this)&&(h=Ue(bm,this),c=Ue(km,this),f=Date.now(),m="error");const y="fetching"===u.fetchStatus,v="pending"===m,x="error"===m,b=v&&y,w=void 0!==c,k={status:m,fetchStatus:u.fetchStatus,isPending:v,isSuccess:"success"===m,isError:x,isInitialLoading:b,isLoading:b,data:c,dataUpdatedAt:u.dataUpdatedAt,error:h,errorUpdatedAt:f,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>o.dataUpdateCount||u.errorUpdateCount>o.errorUpdateCount,isFetching:y,isRefetching:y&&!v,isLoadingError:x&&!w,isPaused:"paused"===u.fetchStatus,isPlaceholderData:d,isRefetchError:x&&w,isStale:qm(e,t),refetch:this.refetch,promise:Ue(xm,this),isEnabled:!1!==Je(t.enabled,e)};if(this.options.experimental_prefetchInRender){const t=e=>{"error"===k.status?e.reject(k.error):void 0!==k.data&&e.resolve(k.data)},r=()=>{const e=Ve(xm,this,k.promise=Nt());t(e)},s=Ue(xm,this);switch(s.status){case"pending":e.queryHash===n.queryHash&&t(s);break;case"fulfilled":"error"!==k.status&&k.data===s.value||r();break;case"rejected":"error"===k.status&&k.error===s.reason||r()}}return k}updateResult(){const e=Ue(gm,this),t=this.createResult(Ue(mm,this),this.options);if(Ve(ym,this,Ue(mm,this).state),Ve(vm,this,this.options),void 0!==Ue(ym,this).data&&Ve(_m,this,Ue(mm,this)),rt(t,e))return;Ve(gm,this,t);Fe(Tm,this,Fm).call(this,{listeners:(()=>{if(!e)return!0;const{notifyOnChangeProps:t}=this.options,n="function"===typeof t?t():t;if("all"===n||!n&&!Ue(Am,this).size)return!0;const r=new Set(null!==n&&void 0!==n?n:Ue(Am,this));return this.options.throwOnError&&r.add("error"),Object.keys(Ue(gm,this)).some(t=>{const n=t;return Ue(gm,this)[n]!==e[n]&&r.has(n)})})()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Fe(Tm,this,Rm).call(this)}});function Im(e){Fe(Tm,this,Mm).call(this);let t=Ue(mm,this).fetch(this.options,e);return null!==e&&void 0!==e&&e.throwOnError||(t=t.catch(We)),t}function jm(){Fe(Tm,this,Om).call(this);const e=Qe(this.options.staleTime,Ue(mm,this));if(Ke||Ue(gm,this).isStale||!He(e))return;const t=Ge(Ue(gm,this).dataUpdatedAt,e)+1;Ve(Nm,this,ze.setTimeout(()=>{Ue(gm,this).isStale||this.updateResult()},t))}function Pm(){var e;return null!==(e="function"===typeof this.options.refetchInterval?this.options.refetchInterval(Ue(mm,this)):this.options.refetchInterval)&&void 0!==e&&e}function Dm(e){Fe(Tm,this,Lm).call(this),Ve(Em,this,e),!Ke&&!1!==Je(this.options.enabled,Ue(mm,this))&&He(Ue(Em,this))&&0!==Ue(Em,this)&&Ve(Sm,this,ze.setInterval(()=>{(this.options.refetchIntervalInBackground||kt.isFocused())&&Fe(Tm,this,Im).call(this)},Ue(Em,this)))}function Rm(){Fe(Tm,this,jm).call(this),Fe(Tm,this,Dm).call(this,Fe(Tm,this,Pm).call(this))}function Om(){Ue(Nm,this)&&(ze.clearTimeout(Ue(Nm,this)),Ve(Nm,this,void 0))}function Lm(){Ue(Sm,this)&&(ze.clearInterval(Ue(Sm,this)),Ve(Sm,this,void 0))}function Mm(){const e=Ue(fm,this).getQueryCache().build(Ue(fm,this),this.options);if(e===Ue(mm,this))return;const t=Ue(mm,this);Ve(mm,this,e),Ve(pm,this,e.state),this.hasListeners()&&(null===t||void 0===t||t.removeObserver(this),e.addObserver(this))}function Fm(e){bt.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(Ue(gm,this))}),Ue(fm,this).getQueryCache().notify({query:Ue(mm,this),type:"observerResultsUpdated"})})}function Um(e,t){return function(e,t){return!1!==Je(t.enabled,e)&&void 0===e.state.data&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||void 0!==e.state.data&&Vm(e,t,t.refetchOnMount)}function Vm(e,t,n){if(!1!==Je(t.enabled,e)&&"static"!==Qe(t.staleTime,e)){const r="function"===typeof n?n(e):n;return"always"===r||!1!==r&&qm(e,t)}return!1}function Bm(e,t,n,r){return(e!==t||!1===Je(r.enabled,e))&&(!n.suspense||"error"!==e.state.status)&&qm(e,n)}function qm(e,t){return!1!==Je(t.enabled,e)&&e.isStaleByTime(Qe(t.staleTime,e))}function zm(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Km=r.createContext(zm()),Wm=r.createContext(!1),Hm=(Wm.Provider,(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()}));function Gm(e,t,n){var s,i,a,o;const l=r.useContext(Wm),c=r.useContext(Km),u=(e=>{const t=r.useContext(vn);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t})(n),d=u.defaultQueryOptions(e);null===(s=u.getDefaultOptions().queries)||void 0===s||null===(i=s._experimental_beforeQuery)||void 0===i||i.call(s,d),d._optimisticResults=l?"isRestoring":"optimistic",(e=>{if(e.suspense){const t=1e3,n=e=>"static"===e?e:Math.max(null!==e&&void 0!==e?e:t,t),r=e.staleTime;e.staleTime="function"===typeof r?function(){return n(r(...arguments))}:n(r),"number"===typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,t))}})(d),((e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))})(d,c),(e=>{r.useEffect(()=>{e.clearReset()},[e])})(c);const h=!u.getQueryCache().get(d.queryHash),[f]=r.useState(()=>new t(u,d)),m=f.getOptimisticResult(d),p=!l&&!1!==e.subscribed;if(r.useSyncExternalStore(r.useCallback(e=>{const t=p?f.subscribe(bt.batchCalls(e)):We;return f.updateResult(),t},[f,p]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),r.useEffect(()=>{f.setOptions(d)},[d,f]),((e,t)=>(null===e||void 0===e?void 0:e.suspense)&&t.isPending)(d,m))throw Hm(d,f,c);if((e=>{let{result:t,errorResetBoundary:n,throwOnError:r,query:s,suspense:i}=e;return t.isError&&!n.isReset()&&!t.isFetching&&s&&(i&&void 0===t.data||function(e,t){return"function"===typeof e?e(...t):!!e}(r,[t.error,s]))})({result:m,errorResetBoundary:c,throwOnError:d.throwOnError,query:u.getQueryCache().get(d.queryHash),suspense:d.suspense}))throw m.error;if(null===(a=u.getDefaultOptions().queries)||void 0===a||null===(o=a._experimental_afterQuery)||void 0===o||o.call(a,d,m),d.experimental_prefetchInRender&&!Ke&&((e,t)=>e.isLoading&&e.isFetching&&!t)(m,l)){var g;const e=h?Hm(d,f,c):null===(g=u.getQueryCache().get(d.queryHash))||void 0===g?void 0:g.promise;null===e||void 0===e||e.catch(We).finally(()=>{f.updateResult()})}return d.notifyOnChangeProps?m:f.trackResult(m)}function Qm(e,t){return Gm(e,Cm,t)}const Jm=()=>{const{data:e,isLoading:t,isError:n,error:r,refetch:s}=Qm({queryKey:["bookings",{page:1}],queryFn:async()=>{const e=await is.getBookings();return(null===e||void 0===e?void 0:e.data)||e}});return(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Bookings"}),(0,yn.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage hotel bookings and reservations"}),(0,yn.jsxs)("div",{className:"mt-6 bg-white shadow rounded-lg p-6",children:[t&&(0,yn.jsx)("div",{className:"text-gray-500",children:"Loading bookings..."}),n&&(0,yn.jsxs)("div",{className:"text-red-600",children:["Failed to load bookings: ",r.message]}),!t&&!n&&(0,yn.jsx)("div",{className:"overflow-x-auto",children:(0,yn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,yn.jsx)("thead",{className:"bg-gray-50",children:(0,yn.jsxs)("tr",{children:[(0,yn.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Booking #"}),(0,yn.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Guest"}),(0,yn.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Room"}),(0,yn.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Check-in"}),(0,yn.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Check-out"}),(0,yn.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),(0,yn.jsx)("th",{className:"px-4 py-2"})]})}),(0,yn.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:((null===e||void 0===e?void 0:e.data)||e||[]).map(e=>(0,yn.jsxs)("tr",{children:[(0,yn.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:e.booking_number}),(0,yn.jsxs)("td",{className:"px-4 py-2 text-sm text-gray-700",children:[e.first_name," ",e.last_name]}),(0,yn.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700",children:e.room_number}),(0,yn.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700",children:new Date(e.check_in_date).toLocaleDateString()}),(0,yn.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700",children:new Date(e.check_out_date).toLocaleDateString()}),(0,yn.jsxs)("td",{className:"px-4 py-2 text-sm text-gray-700",children:["$",e.total_amount]}),(0,yn.jsx)("td",{className:"px-4 py-2 text-right",children:(0,yn.jsx)("button",{onClick:()=>s(),className:"text-blue-600 hover:underline text-sm",children:"Refresh"})})]},e.id))})]})})]})]})},Ym=()=>{const{data:e,isLoading:t,isError:n,error:r}=Qm({queryKey:["rooms"],queryFn:async()=>{const e=await as.getRooms();return(null===e||void 0===e?void 0:e.data)||e}});return(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Rooms"}),(0,yn.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage hotel rooms and availability"}),(0,yn.jsxs)("div",{className:"mt-6 bg-white shadow rounded-lg p-6",children:[t&&(0,yn.jsx)("div",{className:"text-gray-500",children:"Loading rooms..."}),n&&(0,yn.jsxs)("div",{className:"text-red-600",children:["Failed to load rooms: ",r.message]}),!t&&!n&&(0,yn.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:((null===e||void 0===e?void 0:e.data)||e||[]).map(e=>(0,yn.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,yn.jsx)("div",{className:"text-sm text-gray-500",children:"Room"}),(0,yn.jsx)("div",{className:"text-xl font-semibold text-gray-900",children:e.room_number}),(0,yn.jsxs)("div",{className:"mt-2 text-gray-600",children:["Type: ",e.room_type||e.room_type_id]}),(0,yn.jsxs)("div",{className:"mt-1 text-gray-600",children:["Floor: ",e.floor]}),(0,yn.jsxs)("div",{className:"mt-1 text-gray-600",children:["Status: ",e.status]})]},e.id))})]})]})},Xm=()=>{const{data:e,isLoading:t,isError:n,error:r}=Qm({queryKey:["guests"],queryFn:async()=>{const e=await os.getGuests();return(null===e||void 0===e?void 0:e.data)||e}});return(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Guests"}),(0,yn.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage guest information and profiles"}),(0,yn.jsxs)("div",{className:"mt-6 bg-white shadow rounded-lg p-6",children:[t&&(0,yn.jsx)("div",{className:"text-gray-500",children:"Loading guests..."}),n&&(0,yn.jsxs)("div",{className:"text-red-600",children:["Failed to load guests: ",r.message]}),!t&&!n&&(0,yn.jsx)("div",{className:"overflow-x-auto",children:(0,yn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,yn.jsx)("thead",{className:"bg-gray-50",children:(0,yn.jsxs)("tr",{children:[(0,yn.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,yn.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,yn.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"})]})}),(0,yn.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:((null===e||void 0===e?void 0:e.data)||e||[]).map(e=>(0,yn.jsxs)("tr",{children:[(0,yn.jsxs)("td",{className:"px-4 py-2 text-sm text-gray-900",children:[e.first_name," ",e.last_name]}),(0,yn.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700",children:e.email}),(0,yn.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700",children:e.phone})]},e.id))})]})})]})]})},$m=()=>{As();const[e,t]=(0,r.useState)("employees"),[n,s]=(0,r.useState)([]),[i,a]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[c,u]=(0,r.useState)([]),[d,h]=(0,r.useState)(!1),[f,m]=(0,r.useState)(!1),[p,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)(!1),[x,b]=(0,r.useState)(!1),[w,k]=(0,r.useState)({first_name:"",last_name:"",email:"",phone:"",department_id:"",position:"",salary:"",hire_date:""}),[_,N]=(0,r.useState)({name:"",description:"",manager_id:""}),[S,E]=(0,r.useState)({employee_id:"",date:(new Date).toISOString().split("T")[0],status:"present",check_in_time:"",check_out_time:"",notes:""}),[A,T]=(0,r.useState)({employee_id:"",month:(new Date).getMonth()+1,year:(new Date).getFullYear()});(0,r.useEffect)(()=>{C(),I(),j(),P()},[]);const C=async()=>{try{const e=await ls.getEmployees();s(e.data||[])}catch(e){Or.error("Failed to fetch employees")}},I=async()=>{try{const e=await ls.getDepartments();a(e.data||[])}catch(e){Or.error("Failed to fetch departments")}},j=async()=>{try{const e=await cs.getAll();l(e.data||[])}catch(e){Or.error("Failed to fetch attendance")}},P=async()=>{try{const e=await us.getAll();u(e.data||[])}catch(e){Or.error("Failed to fetch payroll")}},D=e=>{switch(e){case"present":return"bg-green-100 text-green-800";case"absent":return"bg-red-100 text-red-800";case"late":return"bg-yellow-100 text-yellow-800";case"on_leave":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},R=e=>{switch(e){case"paid":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return(0,yn.jsxs)("div",{className:"space-y-6",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"HR Management"}),(0,yn.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage employees, attendance, and payroll"})]}),(0,yn.jsx)("div",{className:"border-b border-gray-200",children:(0,yn.jsx)("nav",{className:"-mb-px flex space-x-8",children:[{id:"employees",name:"Employees"},{id:"attendance",name:"Attendance"},{id:"payroll",name:"Payroll"}].map(n=>(0,yn.jsx)("button",{onClick:()=>t(n.id),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat(e===n.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:n.name},n.id))})}),"employees"===e&&(0,yn.jsxs)("div",{className:"space-y-6",children:[(0,yn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yn.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Employees"}),(0,yn.jsx)("button",{onClick:()=>m(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Add Employee"})]}),(0,yn.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:(0,yn.jsx)("ul",{className:"divide-y divide-gray-200",children:n.map(e=>{var t,n,r;return(0,yn.jsx)("li",{children:(0,yn.jsxs)("div",{className:"px-4 py-4 flex items-center justify-between",children:[(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,yn.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:(0,yn.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[null===(t=e.first_name)||void 0===t?void 0:t[0],null===(n=e.last_name)||void 0===n?void 0:n[0]]})})}),(0,yn.jsxs)("div",{className:"ml-4",children:[(0,yn.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),(0,yn.jsxs)("div",{className:"text-sm text-gray-500",children:[e.position," \u2022 ",e.department_name]})]})]}),(0,yn.jsxs)("div",{className:"text-right",children:[(0,yn.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["$",null===(r=e.salary)||void 0===r?void 0:r.toLocaleString()]}),(0,yn.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e.employee_id]})]})]})},e.id)})})})]}),"attendance"===e&&(0,yn.jsxs)("div",{className:"space-y-6",children:[(0,yn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yn.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Attendance"}),(0,yn.jsx)("button",{onClick:()=>v(!0),className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700",children:"Mark Attendance"})]}),(0,yn.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:(0,yn.jsx)("ul",{className:"divide-y divide-gray-200",children:o.map(e=>{var t,n;return(0,yn.jsx)("li",{children:(0,yn.jsxs)("div",{className:"px-4 py-4 flex items-center justify-between",children:[(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,yn.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:(0,yn.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[null===(t=e.first_name)||void 0===t?void 0:t[0],null===(n=e.last_name)||void 0===n?void 0:n[0]]})})}),(0,yn.jsxs)("div",{className:"ml-4",children:[(0,yn.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),(0,yn.jsxs)("div",{className:"text-sm text-gray-500",children:[e.date," \u2022 ",e.department_name]})]})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,yn.jsx)("div",{className:"text-right",children:(0,yn.jsxs)("div",{className:"text-sm text-gray-500",children:[e.check_in_time," - ",e.check_out_time||"N/A"]})}),(0,yn.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(D(e.status)),children:e.status})]})]})},e.id)})})})]}),"payroll"===e&&(0,yn.jsxs)("div",{className:"space-y-6",children:[(0,yn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yn.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Payroll"}),(0,yn.jsx)("button",{onClick:()=>b(!0),className:"bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700",children:"Generate Payroll"})]}),(0,yn.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:(0,yn.jsx)("ul",{className:"divide-y divide-gray-200",children:c.map(e=>{var t,n,r;return(0,yn.jsx)("li",{children:(0,yn.jsxs)("div",{className:"px-4 py-4 flex items-center justify-between",children:[(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,yn.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:(0,yn.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[null===(t=e.first_name)||void 0===t?void 0:t[0],null===(n=e.last_name)||void 0===n?void 0:n[0]]})})}),(0,yn.jsxs)("div",{className:"ml-4",children:[(0,yn.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),(0,yn.jsxs)("div",{className:"text-sm text-gray-500",children:[e.month,"/",e.year," \u2022 ",e.department_name]})]})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,yn.jsxs)("div",{className:"text-right",children:[(0,yn.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["$",null===(r=e.net_salary)||void 0===r?void 0:r.toLocaleString()]}),(0,yn.jsxs)("div",{className:"text-sm text-gray-500",children:[e.days_worked," days worked"]})]}),(0,yn.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(R(e.status)),children:e.status})]})]})},e.id)})})})]}),f&&(0,yn.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,yn.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,yn.jsxs)("div",{className:"mt-3",children:[(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Add Employee"}),(0,yn.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),h(!0);try{await ls.create(w),Or.success("Employee added successfully"),m(!1),k({first_name:"",last_name:"",email:"",phone:"",department_id:"",position:"",salary:"",hire_date:""}),C()}catch(t){Or.error(t.message||"Failed to add employee")}h(!1)},className:"space-y-4",children:[(0,yn.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,yn.jsx)("input",{type:"text",placeholder:"First Name",value:w.first_name,onChange:e=>k((0,Oe.A)((0,Oe.A)({},w),{},{first_name:e.target.value})),className:"border rounded-md px-3 py-2",required:!0}),(0,yn.jsx)("input",{type:"text",placeholder:"Last Name",value:w.last_name,onChange:e=>k((0,Oe.A)((0,Oe.A)({},w),{},{last_name:e.target.value})),className:"border rounded-md px-3 py-2",required:!0})]}),(0,yn.jsx)("input",{type:"email",placeholder:"Email",value:w.email,onChange:e=>k((0,Oe.A)((0,Oe.A)({},w),{},{email:e.target.value})),className:"border rounded-md px-3 py-2 w-full",required:!0}),(0,yn.jsx)("input",{type:"tel",placeholder:"Phone",value:w.phone,onChange:e=>k((0,Oe.A)((0,Oe.A)({},w),{},{phone:e.target.value})),className:"border rounded-md px-3 py-2 w-full"}),(0,yn.jsxs)("div",{className:"flex space-x-2",children:[(0,yn.jsxs)("select",{value:w.department_id,onChange:e=>k((0,Oe.A)((0,Oe.A)({},w),{},{department_id:e.target.value})),className:"border rounded-md px-3 py-2 flex-1",required:!0,children:[(0,yn.jsx)("option",{value:"",children:"Select Department"}),i.map(e=>(0,yn.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,yn.jsx)("button",{type:"button",onClick:()=>g(!0),className:"px-3 py-2 bg-gray-100 rounded-md border hover:bg-gray-200",title:"Add Department",children:"+ Dept"})]}),(0,yn.jsx)("input",{type:"text",placeholder:"Position",value:w.position,onChange:e=>k((0,Oe.A)((0,Oe.A)({},w),{},{position:e.target.value})),className:"border rounded-md px-3 py-2 w-full",required:!0}),(0,yn.jsx)("input",{type:"number",placeholder:"Salary",value:w.salary,onChange:e=>k((0,Oe.A)((0,Oe.A)({},w),{},{salary:e.target.value})),className:"border rounded-md px-3 py-2 w-full",required:!0}),(0,yn.jsx)("input",{type:"date",placeholder:"Hire Date",value:w.hire_date,onChange:e=>k((0,Oe.A)((0,Oe.A)({},w),{},{hire_date:e.target.value})),className:"border rounded-md px-3 py-2 w-full",required:!0}),(0,yn.jsxs)("div",{className:"flex space-x-3",children:[(0,yn.jsx)("button",{type:"submit",disabled:d,className:"flex-1 bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700 disabled:opacity-50",children:d?"Adding...":"Add Employee"}),(0,yn.jsx)("button",{type:"button",onClick:()=>m(!1),className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-md hover:bg-gray-400",children:"Cancel"})]})]})]})})}),y&&(0,yn.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,yn.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,yn.jsxs)("div",{className:"mt-3",children:[(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Mark Attendance"}),(0,yn.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),h(!0);try{await cs.create(S),Or.success("Attendance marked successfully"),v(!1),E({employee_id:"",date:(new Date).toISOString().split("T")[0],status:"present",check_in_time:"",check_out_time:"",notes:""}),j()}catch(t){Or.error(t.message||"Failed to mark attendance")}h(!1)},className:"space-y-4",children:[(0,yn.jsxs)("select",{value:S.employee_id,onChange:e=>E((0,Oe.A)((0,Oe.A)({},S),{},{employee_id:e.target.value})),className:"border rounded-md px-3 py-2 w-full",required:!0,children:[(0,yn.jsx)("option",{value:"",children:"Select Employee"}),n.map(e=>(0,yn.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name]},e.id))]}),(0,yn.jsx)("input",{type:"date",value:S.date,onChange:e=>E((0,Oe.A)((0,Oe.A)({},S),{},{date:e.target.value})),className:"border rounded-md px-3 py-2 w-full",required:!0}),(0,yn.jsxs)("select",{value:S.status,onChange:e=>E((0,Oe.A)((0,Oe.A)({},S),{},{status:e.target.value})),className:"border rounded-md px-3 py-2 w-full",required:!0,children:[(0,yn.jsx)("option",{value:"present",children:"Present"}),(0,yn.jsx)("option",{value:"absent",children:"Absent"}),(0,yn.jsx)("option",{value:"late",children:"Late"}),(0,yn.jsx)("option",{value:"on_leave",children:"On Leave"})]}),(0,yn.jsx)("input",{type:"time",placeholder:"Check In Time",value:S.check_in_time,onChange:e=>E((0,Oe.A)((0,Oe.A)({},S),{},{check_in_time:e.target.value})),className:"border rounded-md px-3 py-2 w-full"}),(0,yn.jsx)("input",{type:"time",placeholder:"Check Out Time",value:S.check_out_time,onChange:e=>E((0,Oe.A)((0,Oe.A)({},S),{},{check_out_time:e.target.value})),className:"border rounded-md px-3 py-2 w-full"}),(0,yn.jsx)("textarea",{placeholder:"Notes",value:S.notes,onChange:e=>E((0,Oe.A)((0,Oe.A)({},S),{},{notes:e.target.value})),className:"border rounded-md px-3 py-2 w-full",rows:"3"}),(0,yn.jsxs)("div",{className:"flex space-x-3",children:[(0,yn.jsx)("button",{type:"submit",disabled:d,className:"flex-1 bg-green-600 text-white py-2 rounded-md hover:bg-green-700 disabled:opacity-50",children:d?"Marking...":"Mark Attendance"}),(0,yn.jsx)("button",{type:"button",onClick:()=>v(!1),className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-md hover:bg-gray-400",children:"Cancel"})]})]})]})})}),x&&(0,yn.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,yn.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,yn.jsxs)("div",{className:"mt-3",children:[(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Generate Payroll"}),(0,yn.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),h(!0);try{await us.generate(A),Or.success("Payroll generated successfully"),b(!1),T({employee_id:"",month:(new Date).getMonth()+1,year:(new Date).getFullYear()}),P()}catch(t){Or.error(t.message||"Failed to generate payroll")}h(!1)},className:"space-y-4",children:[(0,yn.jsxs)("select",{value:A.employee_id,onChange:e=>T((0,Oe.A)((0,Oe.A)({},A),{},{employee_id:e.target.value})),className:"border rounded-md px-3 py-2 w-full",required:!0,children:[(0,yn.jsx)("option",{value:"",children:"Select Employee"}),n.map(e=>(0,yn.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name]},e.id))]}),(0,yn.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,yn.jsx)("select",{value:A.month,onChange:e=>T((0,Oe.A)((0,Oe.A)({},A),{},{month:parseInt(e.target.value)})),className:"border rounded-md px-3 py-2",required:!0,children:Array.from({length:12},(e,t)=>(0,yn.jsx)("option",{value:t+1,children:new Date(0,t).toLocaleString("default",{month:"long"})},t+1))}),(0,yn.jsx)("select",{value:A.year,onChange:e=>T((0,Oe.A)((0,Oe.A)({},A),{},{year:parseInt(e.target.value)})),className:"border rounded-md px-3 py-2",required:!0,children:Array.from({length:5},(e,t)=>{const n=(new Date).getFullYear()-2+t;return(0,yn.jsx)("option",{value:n,children:n},n)})})]}),(0,yn.jsxs)("div",{className:"flex space-x-3",children:[(0,yn.jsx)("button",{type:"submit",disabled:d,className:"flex-1 bg-purple-600 text-white py-2 rounded-md hover:bg-purple-700 disabled:opacity-50",children:d?"Generating...":"Generate Payroll"}),(0,yn.jsx)("button",{type:"button",onClick:()=>b(!1),className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-md hover:bg-gray-400",children:"Cancel"})]})]})]})})}),p&&(0,yn.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,yn.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,yn.jsxs)("div",{className:"mt-3",children:[(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Add Department"}),(0,yn.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),h(!0);try{var t;const e={name:_.name,description:_.description};_.manager_id&&(e.manager_id=_.manager_id);const n=await ls.createDepartment(e);Or.success("Department created"),g(!1),N({name:"",description:"",manager_id:""}),await I();const r=null===(t=n.data)||void 0===t?void 0:t.id;r&&k(e=>(0,Oe.A)((0,Oe.A)({},e),{},{department_id:r}))}catch(n){const e=n.message||"Failed to create department";Or.error(e)}h(!1)},className:"space-y-4",children:[(0,yn.jsx)("input",{type:"text",placeholder:"Department Name",value:_.name,onChange:e=>N((0,Oe.A)((0,Oe.A)({},_),{},{name:e.target.value})),className:"border rounded-md px-3 py-2 w-full",required:!0}),(0,yn.jsx)("textarea",{placeholder:"Description (optional)",value:_.description,onChange:e=>N((0,Oe.A)((0,Oe.A)({},_),{},{description:e.target.value})),className:"border rounded-md px-3 py-2 w-full",rows:3}),(0,yn.jsxs)("div",{className:"flex space-x-3",children:[(0,yn.jsx)("button",{type:"submit",disabled:d,className:"flex-1 bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700 disabled:opacity-50",children:d?"Adding...":"Add Department"}),(0,yn.jsx)("button",{type:"button",onClick:()=>g(!1),className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-md hover:bg-gray-400",children:"Cancel"})]})]})]})})})]})};var Zm,ep="https://js.stripe.com/v3",tp=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,np="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",rp=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(ep).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n},sp=null,ip=null,ap=null,op=function(e){return null!==sp?sp:(sp=new Promise(function(t,n){if("undefined"!==typeof window&&"undefined"!==typeof document)if(window.Stripe&&e&&console.warn(np),window.Stripe)t(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(ep,'"]')),t=0;t<e.length;t++){var n=e[t];if(tp.test(n.src))return n}return null}();if(r&&e)console.warn(np);else if(r){if(r&&null!==ap&&null!==ip){var s;r.removeEventListener("load",ap),r.removeEventListener("error",ip),null===(s=r.parentNode)||void 0===s||s.removeChild(r),r=rp(e)}}else r=rp(e);ap=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,n),ip=function(e){return function(){e(new Error("Failed to load Stripe.js"))}}(n),r.addEventListener("load",ap),r.addEventListener("error",ip)}catch(i){return void n(i)}else t(null)}),sp.catch(function(e){return sp=null,Promise.reject(e)}))},lp=!1,cp=function(){return Zm||(Zm=op(null).catch(function(e){return Zm=null,Promise.reject(e)}))};Promise.resolve().then(function(){return cp()}).catch(function(e){lp||console.warn(e)});var up=n(393);function dp(e,t){return function(){return e.apply(t,arguments)}}const{toString:hp}=Object.prototype,{getPrototypeOf:fp}=Object,{iterator:mp,toStringTag:pp}=Symbol,gp=(yp=Object.create(null),e=>{const t=hp.call(e);return yp[t]||(yp[t]=t.slice(8,-1).toLowerCase())});var yp;const vp=e=>(e=e.toLowerCase(),t=>gp(t)===e),xp=e=>t=>typeof t===e,{isArray:bp}=Array,wp=xp("undefined");function kp(e){return null!==e&&!wp(e)&&null!==e.constructor&&!wp(e.constructor)&&Sp(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const _p=vp("ArrayBuffer");const Np=xp("string"),Sp=xp("function"),Ep=xp("number"),Ap=e=>null!==e&&"object"===typeof e,Tp=e=>{if("object"!==gp(e))return!1;const t=fp(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(pp in e)&&!(mp in e)},Cp=vp("Date"),Ip=vp("File"),jp=vp("Blob"),Pp=vp("FileList"),Dp=vp("URLSearchParams"),[Rp,Op,Lp,Mp]=["ReadableStream","Request","Response","Headers"].map(vp);function Fp(e,t){let n,r,{allOwnKeys:s=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),bp(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{if(kp(e))return;const r=s?Object.getOwnPropertyNames(e):Object.keys(e),i=r.length;let a;for(n=0;n<i;n++)a=r[n],t.call(null,e[a],a,e)}}function Up(e,t){if(kp(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r,s=n.length;for(;s-- >0;)if(r=n[s],t===r.toLowerCase())return r;return null}const Vp="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Bp=e=>!wp(e)&&e!==Vp;const qp=(zp="undefined"!==typeof Uint8Array&&fp(Uint8Array),e=>zp&&e instanceof zp);var zp;const Kp=vp("HTMLFormElement"),Wp=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),Hp=vp("RegExp"),Gp=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Fp(n,(n,s)=>{let i;!1!==(i=t(n,s,e))&&(r[s]=i||n)}),Object.defineProperties(e,r)};const Qp=vp("AsyncFunction"),Jp=((e,t)=>{return e?setImmediate:t?(n="axios@".concat(Math.random()),r=[],Vp.addEventListener("message",e=>{let{source:t,data:s}=e;t===Vp&&s===n&&r.length&&r.shift()()},!1),e=>{r.push(e),Vp.postMessage(n,"*")}):e=>setTimeout(e);var n,r})("function"===typeof setImmediate,Sp(Vp.postMessage)),Yp="undefined"!==typeof queueMicrotask?queueMicrotask.bind(Vp):"undefined"!==typeof process&&process.nextTick||Jp,Xp={isArray:bp,isArrayBuffer:_p,isBuffer:kp,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||Sp(e.append)&&("formdata"===(t=gp(e))||"object"===t&&Sp(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&_p(e.buffer),t},isString:Np,isNumber:Ep,isBoolean:e=>!0===e||!1===e,isObject:Ap,isPlainObject:Tp,isEmptyObject:e=>{if(!Ap(e)||kp(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(wn){return!1}},isReadableStream:Rp,isRequest:Op,isResponse:Lp,isHeaders:Mp,isUndefined:wp,isDate:Cp,isFile:Ip,isBlob:jp,isRegExp:Hp,isFunction:Sp,isStream:e=>Ap(e)&&Sp(e.pipe),isURLSearchParams:Dp,isTypedArray:qp,isFileList:Pp,forEach:Fp,merge:function e(){const{caseless:t,skipUndefined:n}=Bp(this)&&this||{},r={},s=(s,i)=>{const a=t&&Up(r,i)||i;Tp(r[a])&&Tp(s)?r[a]=e(r[a],s):Tp(s)?r[a]=e({},s):bp(s)?r[a]=s.slice():n&&wp(s)||(r[a]=s)};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&Fp(arguments[i],s);return r},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Fp(t,(t,r)=>{n&&Sp(t)?e[r]=dp(t,n):e[r]=t},{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let s,i,a;const o={};if(t=t||{},null==e)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)a=s[i],r&&!r(a,e,t)||o[a]||(t[a]=e[a],o[a]=!0);e=!1!==n&&fp(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:gp,kindOfTest:vp,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(bp(e))return e;let t=e.length;if(!Ep(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[mp]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Kp,hasOwnProperty:Wp,hasOwnProp:Wp,reduceDescriptors:Gp,freezeMethods:e=>{Gp(e,(t,n)=>{if(Sp(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];Sp(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach(e=>{n[e]=!0})};return bp(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Up,global:Vp,isContextDefined:Bp,isSpecCompliantForm:function(e){return!!(e&&Sp(e.append)&&"FormData"===e[pp]&&e[mp])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(Ap(e)){if(t.indexOf(e)>=0)return;if(kp(e))return e;if(!("toJSON"in e)){t[r]=e;const s=bp(e)?[]:{};return Fp(e,(e,t)=>{const i=n(e,r+1);!wp(i)&&(s[t]=i)}),t[r]=void 0,s}}return e};return n(e,0)},isAsyncFn:Qp,isThenable:e=>e&&(Ap(e)||Sp(e))&&Sp(e.then)&&Sp(e.catch),setImmediate:Jp,asap:Yp,isIterable:e=>null!=e&&Sp(e[mp])};function $p(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}Xp.inherits($p,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Xp.toJSONObject(this.config),code:this.code,status:this.status}}});const Zp=$p.prototype,eg={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{eg[e]={value:e}}),Object.defineProperties($p,eg),Object.defineProperty(Zp,"isAxiosError",{value:!0}),$p.from=(e,t,n,r,s,i)=>{const a=Object.create(Zp);Xp.toFlatObject(e,a,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const o=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return $p.call(a,o,l,n,r,s),e&&null==a.cause&&Object.defineProperty(a,"cause",{value:e,configurable:!0}),a.name=e&&e.name||"Error",i&&Object.assign(a,i),a};const tg=$p;function ng(e){return Xp.isPlainObject(e)||Xp.isArray(e)}function rg(e){return Xp.endsWith(e,"[]")?e.slice(0,-2):e}function sg(e,t,n){return e?e.concat(t).map(function(e,t){return e=rg(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}const ig=Xp.toFlatObject(Xp,{},null,function(e){return/^is[A-Z]/.test(e)});const ag=function(e,t,n){if(!Xp.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=Xp.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!Xp.isUndefined(t[e])})).metaTokens,s=n.visitor||c,i=n.dots,a=n.indexes,o=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Xp.isSpecCompliantForm(t);if(!Xp.isFunction(s))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Xp.isDate(e))return e.toISOString();if(Xp.isBoolean(e))return e.toString();if(!o&&Xp.isBlob(e))throw new tg("Blob is not supported. Use a Buffer instead.");return Xp.isArrayBuffer(e)||Xp.isTypedArray(e)?o&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,s){let o=e;if(e&&!s&&"object"===typeof e)if(Xp.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(Xp.isArray(e)&&function(e){return Xp.isArray(e)&&!e.some(ng)}(e)||(Xp.isFileList(e)||Xp.endsWith(n,"[]"))&&(o=Xp.toArray(e)))return n=rg(n),o.forEach(function(e,r){!Xp.isUndefined(e)&&null!==e&&t.append(!0===a?sg([n],r,i):null===a?n:n+"[]",l(e))}),!1;return!!ng(e)||(t.append(sg(s,n,i),l(e)),!1)}const u=[],d=Object.assign(ig,{defaultVisitor:c,convertValue:l,isVisitable:ng});if(!Xp.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Xp.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),Xp.forEach(n,function(n,i){!0===(!(Xp.isUndefined(n)||null===n)&&s.call(t,n,Xp.isString(i)?i.trim():i,r,d))&&e(n,r?r.concat(i):[i])}),u.pop()}}(e),t};function og(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function lg(e,t){this._pairs=[],e&&ag(e,this,t)}const cg=lg.prototype;cg.append=function(e,t){this._pairs.push([e,t])},cg.toString=function(e){const t=e?function(t){return e.call(this,t,og)}:og;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const ug=lg;function dg(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function hg(e,t,n){if(!t)return e;const r=n&&n.encode||dg;Xp.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(i=s?s(t,n):Xp.isURLSearchParams(t)?t.toString():new ug(t,n).toString(r),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}const fg=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Xp.forEach(this.handlers,function(t){null!==t&&e(t)})}},mg={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},pg={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:ug,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},gg="undefined"!==typeof window&&"undefined"!==typeof document,yg="object"===typeof navigator&&navigator||void 0,vg=gg&&(!yg||["ReactNative","NativeScript","NS"].indexOf(yg.product)<0),xg="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,bg=gg&&window.location.href||"http://localhost",wg=(0,Oe.A)((0,Oe.A)({},e),pg);const kg=function(e){function t(e,n,r,s){let i=e[s++];if("__proto__"===i)return!0;const a=Number.isFinite(+i),o=s>=e.length;if(i=!i&&Xp.isArray(r)?r.length:i,o)return Xp.hasOwnProp(r,i)?r[i]=[r[i],n]:r[i]=n,!a;r[i]&&Xp.isObject(r[i])||(r[i]=[]);return t(e,n,r[i],s)&&Xp.isArray(r[i])&&(r[i]=function(e){const t={},n=Object.keys(e);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],t[i]=e[i];return t}(r[i])),!a}if(Xp.isFormData(e)&&Xp.isFunction(e.entries)){const n={};return Xp.forEachEntry(e,(e,r)=>{t(function(e){return Xp.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),r,n,0)}),n}return null};const _g={transitional:mg,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,s=Xp.isObject(e);s&&Xp.isHTMLForm(e)&&(e=new FormData(e));if(Xp.isFormData(e))return r?JSON.stringify(kg(e)):e;if(Xp.isArrayBuffer(e)||Xp.isBuffer(e)||Xp.isStream(e)||Xp.isFile(e)||Xp.isBlob(e)||Xp.isReadableStream(e))return e;if(Xp.isArrayBufferView(e))return e.buffer;if(Xp.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return ag(e,new wg.classes.URLSearchParams,(0,Oe.A)({visitor:function(e,t,n,r){return wg.isNode&&Xp.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=Xp.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return ag(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||r?(t.setContentType("application/json",!1),function(e,t,n){if(Xp.isString(e))try{return(t||JSON.parse)(e),Xp.trim(e)}catch(wn){if("SyntaxError"!==wn.name)throw wn}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||_g.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(Xp.isResponse(e)||Xp.isReadableStream(e))return e;if(e&&Xp.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e,this.parseReviver)}catch(wn){if(n){if("SyntaxError"===wn.name)throw tg.from(wn,tg.ERR_BAD_RESPONSE,this,null,this.response);throw wn}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:wg.classes.FormData,Blob:wg.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Xp.forEach(["delete","get","head","post","put","patch"],e=>{_g.headers[e]={}});const Ng=_g,Sg=Xp.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Eg=Symbol("internals");function Ag(e){return e&&String(e).trim().toLowerCase()}function Tg(e){return!1===e||null==e?e:Xp.isArray(e)?e.map(Tg):String(e)}function Cg(e,t,n,r,s){return Xp.isFunction(r)?r.call(this,t,n):(s&&(t=n),Xp.isString(t)?Xp.isString(r)?-1!==t.indexOf(r):Xp.isRegExp(r)?r.test(t):void 0:void 0)}class Ig{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function s(e,t,n){const s=Ag(t);if(!s)throw new Error("header name must be a non-empty string");const i=Xp.findKey(r,s);(!i||void 0===r[i]||!0===n||void 0===n&&!1!==r[i])&&(r[i||t]=Tg(e))}const i=(e,t)=>Xp.forEach(e,(e,n)=>s(e,n,t));if(Xp.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(Xp.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let n,r,s;return e&&e.split("\n").forEach(function(e){s=e.indexOf(":"),n=e.substring(0,s).trim().toLowerCase(),r=e.substring(s+1).trim(),!n||t[n]&&Sg[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t})(e),t);else if(Xp.isObject(e)&&Xp.isIterable(e)){let n,r,s={};for(const t of e){if(!Xp.isArray(t))throw TypeError("Object iterator must return a key-value pair");s[r=t[0]]=(n=s[r])?Xp.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}i(s,t)}else null!=e&&s(t,e,n);return this}get(e,t){if(e=Ag(e)){const n=Xp.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(Xp.isFunction(t))return t.call(this,e,n);if(Xp.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ag(e)){const n=Xp.findKey(this,e);return!(!n||void 0===this[n]||t&&!Cg(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function s(e){if(e=Ag(e)){const s=Xp.findKey(n,e);!s||t&&!Cg(0,n[s],s,t)||(delete n[s],r=!0)}}return Xp.isArray(e)?e.forEach(s):s(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const s=t[n];e&&!Cg(0,this[s],s,e,!0)||(delete this[s],r=!0)}return r}normalize(e){const t=this,n={};return Xp.forEach(this,(r,s)=>{const i=Xp.findKey(n,s);if(i)return t[i]=Tg(r),void delete t[s];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(s):String(s).trim();a!==s&&delete t[s],t[a]=Tg(r),n[a]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Xp.forEach(this,(n,r)=>{null!=n&&!1!==n&&(t[r]=e&&Xp.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,n]=e;return t+": "+n}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[Eg]=this[Eg]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=Ag(e);t[r]||(!function(e,t){const n=Xp.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(e,n,s){return this[r].call(this,t,e,n,s)},configurable:!0})})}(n,e),t[r]=!0)}return Xp.isArray(e)?e.forEach(r):r(e),this}}Ig.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Xp.reduceDescriptors(Ig.prototype,(e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}}),Xp.freezeMethods(Ig);const jg=Ig;function Pg(e,t){const n=this||Ng,r=t||n,s=jg.from(r.headers);let i=r.data;return Xp.forEach(e,function(e){i=e.call(n,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function Dg(e){return!(!e||!e.__CANCEL__)}function Rg(e,t,n){tg.call(this,null==e?"canceled":e,tg.ERR_CANCELED,t,n),this.name="CanceledError"}Xp.inherits(Rg,tg,{__CANCEL__:!0});const Og=Rg;function Lg(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new tg("Request failed with status code "+n.status,[tg.ERR_BAD_REQUEST,tg.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const Mg=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s,i=0,a=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=r[a];s||(s=l),n[i]=o,r[i]=l;let u=a,d=0;for(;u!==i;)d+=n[u++],u%=e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),l-s<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}};const Fg=function(e,t){let n,r,s=0,i=1e3/t;const a=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();s=i,n=null,r&&(clearTimeout(r),r=null),e(...t)};return[function(){const e=Date.now(),t=e-s;for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];t>=i?a(l,e):(n=l,r||(r=setTimeout(()=>{r=null,a(n)},i-t)))},()=>n&&a(n)]},Ug=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const s=Mg(50,250);return Fg(n=>{const i=n.loaded,a=n.lengthComputable?n.total:void 0,o=i-r,l=s(o);r=i;e({loaded:i,total:a,progress:a?i/a:void 0,bytes:o,rate:l||void 0,estimated:l&&a&&i<=a?(a-i)/l:void 0,event:n,lengthComputable:null!=a,[t?"download":"upload"]:!0})},n)},Vg=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Bg=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Xp.asap(()=>e(...n))},qg=wg.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,wg.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(wg.origin),wg.navigator&&/(msie|trident)/i.test(wg.navigator.userAgent)):()=>!0,zg=wg.hasStandardBrowserEnv?{write(e,t,n,r,s,i,a){if("undefined"===typeof document)return;const o=["".concat(e,"=").concat(encodeURIComponent(t))];Xp.isNumber(n)&&o.push("expires=".concat(new Date(n).toUTCString())),Xp.isString(r)&&o.push("path=".concat(r)),Xp.isString(s)&&o.push("domain=".concat(s)),!0===i&&o.push("secure"),Xp.isString(a)&&o.push("SameSite=".concat(a)),document.cookie=o.join("; ")},read(e){if("undefined"===typeof document)return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function Kg(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Wg=e=>e instanceof jg?(0,Oe.A)({},e):e;function Hg(e,t){t=t||{};const n={};function r(e,t,n,r){return Xp.isPlainObject(e)&&Xp.isPlainObject(t)?Xp.merge.call({caseless:r},e,t):Xp.isPlainObject(t)?Xp.merge({},t):Xp.isArray(t)?t.slice():t}function s(e,t,n,s){return Xp.isUndefined(t)?Xp.isUndefined(e)?void 0:r(void 0,e,0,s):r(e,t,0,s)}function i(e,t){if(!Xp.isUndefined(t))return r(void 0,t)}function a(e,t){return Xp.isUndefined(t)?Xp.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function o(n,s,i){return i in t?r(n,s):i in e?r(void 0,n):void 0}const l={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(e,t,n)=>s(Wg(e),Wg(t),0,!0)};return Xp.forEach(Object.keys((0,Oe.A)((0,Oe.A)({},e),t)),function(r){const i=l[r]||s,a=i(e[r],t[r],r);Xp.isUndefined(a)&&i!==o||(n[r]=a)}),n}const Gg=e=>{const t=Hg({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:a,auth:o}=t;if(t.headers=a=jg.from(a),t.url=hg(Kg(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),Xp.isFormData(n))if(wg.hasStandardBrowserEnv||wg.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(Xp.isFunction(n.getHeaders)){const e=n.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(e=>{let[n,r]=e;t.includes(n.toLowerCase())&&a.set(n,r)})}if(wg.hasStandardBrowserEnv&&(r&&Xp.isFunction(r)&&(r=r(t)),r||!1!==r&&qg(t.url))){const e=s&&i&&zg.read(i);e&&a.set(s,e)}return t},Qg="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){const r=Gg(e);let s=r.data;const i=jg.from(r.headers).normalize();let a,o,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:f}=r;function m(){c&&c(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(a),r.signal&&r.signal.removeEventListener("abort",a)}let p=new XMLHttpRequest;function g(){if(!p)return;const r=jg.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders());Lg(function(e){t(e),m()},function(e){n(e),m()},{data:d&&"text"!==d&&"json"!==d?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:r,config:e,request:p}),p=null}p.open(r.method.toUpperCase(),r.url,!0),p.timeout=r.timeout,"onloadend"in p?p.onloadend=g:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(g)},p.onabort=function(){p&&(n(new tg("Request aborted",tg.ECONNABORTED,e,p)),p=null)},p.onerror=function(t){const r=t&&t.message?t.message:"Network Error",s=new tg(r,tg.ERR_NETWORK,e,p);s.event=t||null,n(s),p=null},p.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const s=r.transitional||mg;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new tg(t,s.clarifyTimeoutError?tg.ETIMEDOUT:tg.ECONNABORTED,e,p)),p=null},void 0===s&&i.setContentType(null),"setRequestHeader"in p&&Xp.forEach(i.toJSON(),function(e,t){p.setRequestHeader(t,e)}),Xp.isUndefined(r.withCredentials)||(p.withCredentials=!!r.withCredentials),d&&"json"!==d&&(p.responseType=r.responseType),f&&([l,u]=Ug(f,!0),p.addEventListener("progress",l)),h&&p.upload&&([o,c]=Ug(h),p.upload.addEventListener("progress",o),p.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(a=t=>{p&&(n(!t||t.type?new Og(null,e,p):t),p.abort(),p=null)},r.cancelToken&&r.cancelToken.subscribe(a),r.signal&&(r.signal.aborted?a():r.signal.addEventListener("abort",a)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);y&&-1===wg.protocols.indexOf(y)?n(new tg("Unsupported protocol "+y+":",tg.ERR_BAD_REQUEST,e)):p.send(s||null)})},Jg=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const s=function(e){if(!n){n=!0,a();const t=e instanceof Error?e:this.reason;r.abort(t instanceof tg?t:new Og(t instanceof Error?t.message:t))}};let i=t&&setTimeout(()=>{i=null,s(new tg("timeout ".concat(t," of ms exceeded"),tg.ETIMEDOUT))},t);const a=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(s):e.removeEventListener("abort",s)}),e=null)};e.forEach(e=>e.addEventListener("abort",s));const{signal:o}=r;return o.unsubscribe=()=>Xp.asap(a),o}};function Yg(e,t){this.v=e,this.k=t}function Xg(e){return function(){return new $g(e.apply(this,arguments))}}function $g(e){var t,n;function r(t,n){try{var i=e[t](n),a=i.value,o=a instanceof Yg;Promise.resolve(o?a.v:a).then(function(n){if(o){var l="return"===t?"return":"next";if(!a.k||n.done)return r(l,n);n=e[l](n).value}s(i.done?"return":"normal",n)},function(e){r("throw",e)})}catch(e){s("throw",e)}}function s(e,s){switch(e){case"return":t.resolve({value:s,done:!0});break;case"throw":t.reject(s);break;default:t.resolve({value:s,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,s){return new Promise(function(i,a){var o={key:e,arg:s,resolve:i,reject:a,next:null};n?n=n.next=o:(t=n=o,r(e,s))})},"function"!=typeof e.return&&(this.return=void 0)}function Zg(e){return new Yg(e,0)}function ey(e){var t={},n=!1;function r(t,r){return n=!0,r=new Promise(function(n){n(e[t](r))}),{done:!1,value:new Yg(r,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}function ty(e){var t,n,r,s=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);s--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new ny(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function ny(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return ny=function(e){this.s=e,this.n=e.next},ny.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new ny(e)}$g.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},$g.prototype.next=function(e){return this._invoke("next",e)},$g.prototype.throw=function(e){return this._invoke("throw",e)},$g.prototype.return=function(e){return this._invoke("return",e)};const ry=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,s=0;for(;s<n;)r=s+t,yield e.slice(s,r),s=r},sy=function(){var e=Xg(function*(e,t){var n,r=!1,s=!1;try{for(var i,a=ty(iy(e));r=!(i=yield Zg(a.next())).done;r=!1){const e=i.value;yield*ey(ty(ry(e,t)))}}catch(o){s=!0,n=o}finally{try{r&&null!=a.return&&(yield Zg(a.return()))}finally{if(s)throw n}}});return function(t,n){return e.apply(this,arguments)}}(),iy=function(){var e=Xg(function*(e){if(e[Symbol.asyncIterator])return void(yield*ey(ty(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield Zg(t.read());if(e)break;yield n}}finally{yield Zg(t.cancel())}});return function(t){return e.apply(this,arguments)}}(),ay=(e,t,n,r)=>{const s=sy(e,t);let i,a=0,o=e=>{i||(i=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await s.next();if(t)return o(),void e.close();let i=r.byteLength;if(n){let e=a+=i;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw o(t),t}},cancel:e=>(o(e),s.return())},{highWaterMark:2})},{isFunction:oy}=Xp,ly=(e=>{let{Request:t,Response:n}=e;return{Request:t,Response:n}})(Xp.global),{ReadableStream:cy,TextEncoder:uy}=Xp.global,dy=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(wn){return!1}},hy=e=>{e=Xp.merge.call({skipUndefined:!0},ly,e);const{fetch:t,Request:n,Response:r}=e,s=t?oy(t):"function"===typeof fetch,i=oy(n),a=oy(r);if(!s)return!1;const o=s&&oy(cy),l=s&&("function"===typeof uy?(c=new uy,e=>c.encode(e)):async e=>new Uint8Array(await new n(e).arrayBuffer()));var c;const u=i&&o&&dy(()=>{let e=!1;const t=new n(wg.origin,{body:new cy,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),d=a&&o&&dy(()=>Xp.isReadableStream(new r("").body)),h={stream:d&&(e=>e.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!h[e]&&(h[e]=(t,n)=>{let r=t&&t[e];if(r)return r.call(t);throw new tg("Response type '".concat(e,"' is not supported"),tg.ERR_NOT_SUPPORT,n)})});const f=async(e,t)=>{const r=Xp.toFiniteNumber(e.getContentLength());return null==r?(async e=>{if(null==e)return 0;if(Xp.isBlob(e))return e.size;if(Xp.isSpecCompliantForm(e)){const t=new n(wg.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Xp.isArrayBufferView(e)||Xp.isArrayBuffer(e)?e.byteLength:(Xp.isURLSearchParams(e)&&(e+=""),Xp.isString(e)?(await l(e)).byteLength:void 0)})(t):r};return async e=>{let{url:s,method:a,data:o,signal:l,cancelToken:c,timeout:m,onDownloadProgress:p,onUploadProgress:g,responseType:y,headers:v,withCredentials:x="same-origin",fetchOptions:b}=Gg(e),w=t||fetch;y=y?(y+"").toLowerCase():"text";let k=Jg([l,c&&c.toAbortSignal()],m),_=null;const N=k&&k.unsubscribe&&(()=>{k.unsubscribe()});let S;try{if(g&&u&&"get"!==a&&"head"!==a&&0!==(S=await f(v,o))){let e,t=new n(s,{method:"POST",body:o,duplex:"half"});if(Xp.isFormData(o)&&(e=t.headers.get("content-type"))&&v.setContentType(e),t.body){const[e,n]=Vg(S,Ug(Bg(g)));o=ay(t.body,65536,e,n)}}Xp.isString(x)||(x=x?"include":"omit");const t=i&&"credentials"in n.prototype,l=(0,Oe.A)((0,Oe.A)({},b),{},{signal:k,method:a.toUpperCase(),headers:v.normalize().toJSON(),body:o,duplex:"half",credentials:t?x:void 0});_=i&&new n(s,l);let c=await(i?w(_,b):w(s,l));const m=d&&("stream"===y||"response"===y);if(d&&(p||m&&N)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=c[t]});const t=Xp.toFiniteNumber(c.headers.get("content-length")),[n,s]=p&&Vg(t,Ug(Bg(p),!0))||[];c=new r(ay(c.body,65536,n,()=>{s&&s(),N&&N()}),e)}y=y||"text";let E=await h[Xp.findKey(h,y)||"text"](c,e);return!m&&N&&N(),await new Promise((t,n)=>{Lg(t,n,{data:E,headers:jg.from(c.headers),status:c.status,statusText:c.statusText,config:e,request:_})})}catch(E){if(N&&N(),E&&"TypeError"===E.name&&/Load failed|fetch/i.test(E.message))throw Object.assign(new tg("Network Error",tg.ERR_NETWORK,e,_),{cause:E.cause||E});throw tg.from(E,E&&E.code,e,_)}}},fy=new Map,my=e=>{let t=e&&e.env||{};const{fetch:n,Request:r,Response:s}=t,i=[r,s,n];let a,o,l=i.length,c=fy;for(;l--;)a=i[l],o=c.get(a),void 0===o&&c.set(a,o=l?new Map:hy(t)),c=o;return o},py=(my(),{http:null,xhr:Qg,fetch:{get:my}});Xp.forEach(py,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(wn){}Object.defineProperty(e,"adapterName",{value:t})}});const gy=e=>"- ".concat(e),yy=e=>Xp.isFunction(e)||null===e||!1===e;const vy={getAdapter:function(e,t){e=Xp.isArray(e)?e:[e];const{length:n}=e;let r,s;const i={};for(let a=0;a<n;a++){let n;if(r=e[a],s=r,!yy(r)&&(s=py[(n=String(r)).toLowerCase()],void 0===s))throw new tg("Unknown adapter '".concat(n,"'"));if(s&&(Xp.isFunction(s)||(s=s.get(t))))break;i[n||"#"+a]=s}if(!s){const e=Object.entries(i).map(e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")});let t=n?e.length>1?"since :\n"+e.map(gy).join("\n"):" "+gy(e[0]):"as no adapter specified";throw new tg("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return s},adapters:py};function xy(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Og(null,e)}function by(e){xy(e),e.headers=jg.from(e.headers),e.data=Pg.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return vy.getAdapter(e.adapter||Ng.adapter,e)(e).then(function(t){return xy(e),t.data=Pg.call(e,e.transformResponse,t),t.headers=jg.from(t.headers),t},function(t){return Dg(t)||(xy(e),t&&t.response&&(t.response.data=Pg.call(e,e.transformResponse,t.response),t.response.headers=jg.from(t.response.headers))),Promise.reject(t)})}const wy="1.13.2",ky={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ky[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const _y={};ky.transitional=function(e,t,n){function r(e,t){return"[Axios v"+wy+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,s,i)=>{if(!1===e)throw new tg(r(s," has been removed"+(t?" in "+t:"")),tg.ERR_DEPRECATED);return t&&!_y[s]&&(_y[s]=!0,console.warn(r(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,s,i)}},ky.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};const Ny={assertOptions:function(e,t,n){if("object"!==typeof e)throw new tg("options must be an object",tg.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const i=r[s],a=t[i];if(a){const t=e[i],n=void 0===t||a(t,i,e);if(!0!==n)throw new tg("option "+i+" must be "+n,tg.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new tg("Unknown option "+i,tg.ERR_BAD_OPTION)}},validators:ky},Sy=Ny.validators;class Ey{constructor(e){this.defaults=e||{},this.interceptors={request:new fg,response:new fg}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(wn){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Hg(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:s}=t;void 0!==n&&Ny.assertOptions(n,{silentJSONParsing:Sy.transitional(Sy.boolean),forcedJSONParsing:Sy.transitional(Sy.boolean),clarifyTimeoutError:Sy.transitional(Sy.boolean)},!1),null!=r&&(Xp.isFunction(r)?t.paramsSerializer={serialize:r}:Ny.assertOptions(r,{encode:Sy.function,serialize:Sy.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Ny.assertOptions(t,{baseUrl:Sy.spelling("baseURL"),withXsrfToken:Sy.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=s&&Xp.merge(s.common,s[t.method]);s&&Xp.forEach(["delete","get","head","post","put","patch","common"],e=>{delete s[e]}),t.headers=jg.concat(i,s);const a=[];let o=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,a.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let u,d=0;if(!o){const e=[by.bind(this),void 0];for(e.unshift(...a),e.push(...l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=a.length;let h=t;for(;d<u;){const e=a[d++],t=a[d++];try{h=e(h)}catch(f){t.call(this,f);break}}try{c=by.call(this,h)}catch(f){return Promise.reject(f)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return hg(Kg((e=Hg(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Xp.forEach(["delete","get","head","options"],function(e){Ey.prototype[e]=function(t,n){return this.request(Hg(n||{},{method:e,url:t,data:(n||{}).data}))}}),Xp.forEach(["post","put","patch"],function(e){function t(t){return function(n,r,s){return this.request(Hg(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Ey.prototype[e]=t(),Ey.prototype[e+"Form"]=t(!0)});const Ay=Ey;class Ty{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const r=new Promise(e=>{n.subscribe(e),t=e}).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e(function(e,r,s){n.reason||(n.reason=new Og(e,r,s),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new Ty(function(t){e=t});return{token:t,cancel:e}}}const Cy=Ty;const Iy={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Iy).forEach(e=>{let[t,n]=e;Iy[n]=t});const jy=Iy;const Py=function e(t){const n=new Ay(t),r=dp(Ay.prototype.request,n);return Xp.extend(r,Ay.prototype,n,{allOwnKeys:!0}),Xp.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Hg(t,n))},r}(Ng);Py.Axios=Ay,Py.CanceledError=Og,Py.CancelToken=Cy,Py.isCancel=Dg,Py.VERSION=wy,Py.toFormData=ag,Py.AxiosError=tg,Py.Cancel=Py.CanceledError,Py.all=function(e){return Promise.all(e)},Py.spread=function(e){return function(t){return e.apply(null,t)}},Py.isAxiosError=function(e){return Xp.isObject(e)&&!0===e.isAxiosError},Py.mergeConfig=Hg,Py.AxiosHeaders=jg,Py.formToJSON=e=>kg(Xp.isHTMLForm(e)?new FormData(e):e),Py.getAdapter=vy.getAdapter,Py.HttpStatusCode=jy,Py.default=Py;const Dy=Py,Ry={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_PAYMENT_API_URL||"https://payment-api-f7uu.onrender.com/api";const Oy=new class{constructor(){this.client=Dy.create({baseURL:Ry,headers:{"Content-Type":"application/json"}})}async createPaymentIntent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"usd",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{return(await this.client.post("/payments/create-intent",{amount:Math.round(100*e),currency:t,metadata:n})).data}catch(r){throw console.error("Error creating payment intent:",r),r}}async confirmPaymentIntent(e,t){try{return(await this.client.post("/payments/confirm-intent",{paymentIntentId:e,paymentMethodId:t})).data}catch(n){throw console.error("Error confirming payment intent:",n),n}}async getPaymentStatus(e){try{return(await this.client.get("/payments/status/".concat(e))).data}catch(t){throw console.error("Error getting payment status:",t),t}}async processPayment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"usd",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{return(await this.client.post("/payments/process",(0,Oe.A)({amount:e,currency:t},n))).data}catch(r){throw console.error("Error processing payment:",r),r}}async createCheckoutSession(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{return(await this.client.post("/payments/create-checkout-session",{items:e,successUrl:t,cancelUrl:n,metadata:r})).data}catch(s){throw console.error("Error creating checkout session:",s),s}}},Ly=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];lp=!0;var r=Date.now();return cp().then(function(e){return function(e,t,n){if(null===e)return null;var r=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"2.4.0",startTime:t})}(r,n),r}(e,t,r)})}("pk_test_51SOGGbQKEpTq8ihWbeAVv4wMbODXZh9I7euPQlJ923gN5MPlyvbuQB4j8QsysHZZgRt9v8lT5cBJwFKwpoKNJjXz00xdPmpw0X");function My(e){let{bookingId:t,amount:n,currency:s="USD",onSuccess:i}=e;const a=(0,up.useStripe)(),o=(0,up.useElements)(),[l,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(null);return(0,yn.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),d(null),a&&o){c(!0);try{const e=(await Oy.createPaymentIntent(n,s.toLowerCase(),{bookingId:t})).client_secret,{error:r,paymentIntent:l}=await a.confirmCardPayment(e,{payment_method:{card:o.getElement(up.CardElement)}});if(r)throw new Error(r.message);if("succeeded"!==l.status)throw new Error("Payment was not successful");console.log("\u2705 Stripe payment succeeded, calling onSuccess handler..."),i&&i(l),c(!1)}catch(r){d(r.message||"Payment failed"),c(!1)}}},className:"space-y-4",children:[(0,yn.jsx)("div",{className:"p-3 border rounded",children:(0,yn.jsx)(up.CardElement,{options:{hidePostalCode:!0}})}),u&&(0,yn.jsx)("div",{className:"text-red-600",children:u}),(0,yn.jsx)("button",{type:"submit",disabled:!a||l,className:"px-4 py-2 bg-blue-600 text-white rounded",children:l?"Processing...":"Pay ".concat(s," ").concat(n)})]})}function Fy(e){return(0,yn.jsx)(up.Elements,{stripe:Ly,children:(0,yn.jsx)(My,(0,Oe.A)({},e))})}const Uy=()=>{const e=Z(),t=te(),{isAuthenticated:r,refreshUser:s}=As(),{bookingId:i,amount:a}=e.state||{},o=i||null,l=a||10;return(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Payments"}),(0,yn.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Make a payment for a booking"}),(0,yn.jsx)("div",{className:"mt-6 bg-white shadow rounded-lg p-6",children:(0,yn.jsx)("div",{className:"space-y-4",children:(0,yn.jsx)(Fy,{bookingId:o,amount:l,currency:"USD",onSuccess:async o=>{console.log("\ud83d\udcb3 Payment succeeded:",o),console.log("\ud83d\udccb Payment Intent ID:",null===o||void 0===o?void 0:o.id),console.log("\ud83d\udccb Payment Status:",null===o||void 0===o?void 0:o.status);const{auth:l}=await Promise.resolve().then(n.bind(n,958));try{var c,u,d;const S=i||(null===o||void 0===o?void 0:o.bookingId)||(null===o||void 0===o||null===(c=o.metadata)||void 0===c?void 0:c.bookingId),E=null===(u=e.state)||void 0===u?void 0:u.guestData,A=null===(d=e.state)||void 0===d?void 0:d.roomId,T=a||null!==o&&void 0!==o&&o.amount?o.amount/100:0;if(console.log("\ud83d\udce6 Booking ID:",S),console.log("\ud83d\udc64 Guest Data available:",!!E),console.log("\ud83c\udfe0 Room ID:",A),console.log("\ud83d\udd10 User authenticated:",r),!S)return console.warn("\u26a0\ufe0f No booking ID found, payment recorded but booking not updated"),void Or.success("Payment recorded");let C=null;if(!r&&E)try{console.log("\ud83d\udd10 User not authenticated, creating Firebase Auth account..."),console.log("\ud83d\udcdd Guest data:",{email:E.email,firstName:E.firstName,lastName:E.lastName});if(C=(await Xr({email:E.email,password:E.password||"Temp".concat(Date.now(),"!"),firstName:E.firstName,lastName:E.lastName,phone:E.phone||"",address:E.address||"",role:"client"})).user.id,console.log("\u2705 User account created successfully"),console.log("\ud83d\udc64 User ID:",C),console.log("\ud83d\udd11 Auth token obtained"),await new Promise(e=>setTimeout(e,500)),l.currentUser){console.log("\u2705 Auth state verified, current user:",l.currentUser.uid);try{await s(),console.log("\u2705 AuthContext refreshed with new user")}catch(y){console.warn("\u26a0\ufe0f Failed to refresh AuthContext:",y)}}else{console.warn("\u26a0\ufe0f Auth state not immediately available, waiting..."),await new Promise(e=>setTimeout(e,1e3));try{await s()}catch(y){console.warn("\u26a0\ufe0f Failed to refresh AuthContext after wait:",y)}}try{console.log("\ud83d\udd17 Linking guest to user account...");const{collection:e,query:t,where:r,getDocs:s,updateDoc:i,doc:a}=await Promise.resolve().then(n.bind(n,472)),{db:o}=await Promise.resolve().then(n.bind(n,958)),l=t(e(o,"guests"),r("email","==",E.email)),c=await s(l);if(c.empty)console.warn("\u26a0\ufe0f Guest document not found for email:",E.email);else{const e=c.docs[0];await i(a(o,"guests",e.id),{userId:C,updatedAt:(await Promise.resolve().then(n.bind(n,472))).serverTimestamp()}),console.log("\u2705 Guest linked to user account")}}catch(v){console.warn("\u26a0\ufe0f Failed to link guest to user:",v)}Or.success("Account created! You can now view your bookings.")}catch(x){if(console.error("\u274c Failed to create user account:",x),console.error("\u274c Auth error details:",{code:x.code,message:x.message,stack:x.stack}),"auth/email-already-in-use"===x.code&&E.email&&E.password){console.log("\ud83d\udd04 User already exists, attempting to sign in...");try{C=(await Yr({email:E.email,password:E.password})).user.id,console.log("\u2705 Signed in with existing account"),await s()}catch(b){console.error("\u274c Failed to sign in with existing account:",b),Or.error("Account exists but could not sign in. Please sign in manually.")}}else Or.error("Could not create account. Please contact support.")}else if(r||E){if(r){var h;C=(null===(h=l.currentUser)||void 0===h?void 0:h.uid)||null,console.log("\u2705 User already authenticated, user ID:",C)}}else console.warn("\u26a0\ufe0f No guest data available and user not authenticated"),Or.error("Unable to create account: missing guest information");console.log("\u23f3 Ensuring authentication state is available...");let I=0;for(;!l.currentUser&&I<30;)await new Promise(e=>setTimeout(e,100)),I++;if(l.currentUser?console.log("\u2705 Auth state available, user ID:",l.currentUser.uid):console.warn("\u26a0\ufe0f Auth state not available after waiting"),console.log("\ud83d\udcdd Will update booking directly with userId and payment status"),console.log("\u2139\ufe0f Booking ID:",S),console.log("\u2139\ufe0f Room ID:",A),null!==o&&void 0!==o&&o.id){console.log("\ud83d\udcbe Recording payment in Firestore...");try{const{doc:e,setDoc:t,serverTimestamp:r}=await Promise.resolve().then(n.bind(n,472)),{db:s}=await Promise.resolve().then(n.bind(n,958)),i=e(s,"payments",o.id);await t(i,{id:o.id,bookingId:S,amount:T||(o.amount?o.amount/100:0),currency:o.currency||"usd",status:"completed",paymentMethod:"card",paymentIntentId:o.id,createdAt:r(),updatedAt:r()}),console.log("\u2705 Payment recorded in Firestore")}catch(w){console.error("\u274c Failed to record payment:",w)}}console.log("\ud83d\udcdd Updating booking status to confirmed and paid...");const j={status:"confirmed",paymentStatus:"paid",paymentIntentId:(null===o||void 0===o?void 0:o.id)||null};C&&(j.userId=C,console.log("\ud83d\udd17 Linking booking to user:",C));try{const e=await is.update(S,j);console.log("\u2705 Booking status updated successfully"),console.log("\ud83d\udccb Update result:",e),await new Promise(e=>setTimeout(e,1e3)),console.log("\u23f3 Waited for booking update to propagate");try{var f,m,p,g;const e=await is.getById(S);console.log("\u2705 Booking verified after update:",{id:null===(f=e.data)||void 0===f?void 0:f.id,userId:null===(m=e.data)||void 0===m?void 0:m.userId,status:null===(p=e.data)||void 0===p?void 0:p.status,paymentStatus:null===(g=e.data)||void 0===g?void 0:g.paymentStatus})}catch(k){console.warn("\u26a0\ufe0f Could not verify booking after update (might be timing issue):",k.message)}}catch(_){console.error("\u274c Failed to update booking status:",_),console.error("\u274c Update error details:",{code:_.code,message:_.message,bookingId:S}),console.log("\ud83d\udd04 Retrying booking update..."),await new Promise(e=>setTimeout(e,1e3));try{await is.update(S,j),console.log("\u2705 Booking status updated on retry")}catch(N){console.error("\u274c Failed to update booking on retry:",N),Or.error("Payment succeeded but booking update failed. Please contact support.")}}const P=A;P?(console.log("\u2139\ufe0f Room status update skipped (requires admin privileges - can be updated manually)"),console.log("\u2139\ufe0f Room ID:",P)):console.warn("\u26a0\ufe0f No roomId found, skipping room status update"),console.log("\u2705 Payment post-processing complete"),Or.success("Payment successful and booking confirmed!"),console.log("\u23f3 Waiting for auth state to propagate before redirect..."),await new Promise(e=>setTimeout(e,1e3)),l.currentUser?(console.log("\u2705 Auth state confirmed, redirecting to dashboard"),t("/dashboard")):(console.warn("\u26a0\ufe0f Auth state not available, redirecting anyway (AuthContext will handle it)"),t("/dashboard"))}catch(S){console.error("\u274c Critical error in post-payment processing:",S),console.error("\u274c Error details:",{message:S.message,code:S.code,stack:S.stack,bookingId:i||(null===o||void 0===o?void 0:o.bookingId),paymentIntentId:null===o||void 0===o?void 0:o.id}),Or.error("Payment succeeded but post-processing encountered an error. Please contact support with your payment ID.")}}})})})]})},Vy=()=>{var e;const[t,n]=(0,r.useState)(!0),[s,i]=(0,r.useState)("30d"),[a,o]=(0,r.useState)("overview"),[l,c]=(0,r.useState)({}),[u,d]=(0,r.useState)({}),[h,f]=(0,r.useState)({}),[m,p]=(0,r.useState)({}),g=(0,r.useCallback)(async()=>{try{n(!0);const e=await ws();c(e.data);const t=await _s(s);d(t.data);const r=await Ns(s);f(r.data);const i=await Ss(s);p(i.data)}catch(e){Or.error("Failed to load report data"),console.error("Load report data error:",e)}finally{n(!1)}},[s]);(0,r.useEffect)(()=>{g()},[g]);const y=e=>{const t=v(e),n=new Blob([t],{type:"text/csv"}),r=window.URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download="".concat(e,"-report-").concat(s,".csv"),i.click(),window.URL.revokeObjectURL(r),Or.success("Report exported successfully")},v=e=>[["Metric","Value","Period"],...[["Total Users",l.totalUsers||0,s],["Total Bookings",l.totalBookings||0,s],["Total Revenue","$".concat(l.totalRevenue||0),s],["Active Users",l.activeUsers||0,s],["Pending Bookings",l.pendingBookings||0,s]]].map(e=>e.join(",")).join("\n"),x=[{id:"overview",name:"Overview",icon:cm},{id:"bookings",name:"Bookings",icon:Kr},{id:"revenue",name:"Revenue",icon:Ta},{id:"occupancy",name:"Occupancy",icon:Aa}];return t?(0,yn.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,yn.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):(0,yn.jsxs)("div",{className:"space-y-6",children:[(0,yn.jsx)("div",{className:"bg-white shadow rounded-lg p-6",children:(0,yn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Reports & Analytics"}),(0,yn.jsx)("p",{className:"text-gray-600",children:"Comprehensive insights into your hotel operations"})]}),(0,yn.jsxs)("div",{className:"flex space-x-3",children:[(0,yn.jsxs)("button",{onClick:g,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center",children:[(0,yn.jsx)(qa,{className:"h-4 w-4 mr-2"}),"Refresh"]}),(0,yn.jsxs)("button",{onClick:()=>y(a),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[(0,yn.jsx)(Sa,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})}),(0,yn.jsx)("div",{className:"bg-white shadow rounded-lg p-4",children:(0,yn.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,yn.jsxs)("div",{className:"flex-1",children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Report Type"}),(0,yn.jsx)("div",{className:"flex space-x-2",children:x.map(e=>(0,yn.jsxs)("button",{onClick:()=>o(e.id),className:"flex items-center px-4 py-2 rounded-lg text-sm font-medium ".concat(a===e.id?"bg-blue-100 text-blue-700 border border-blue-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[(0,yn.jsx)(e.icon,{className:"h-4 w-4 mr-2"}),e.name]},e.id))})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Period"}),(0,yn.jsx)("select",{value:s,onChange:e=>i(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[{id:"7d",name:"Last 7 Days"},{id:"30d",name:"Last 30 Days"},{id:"90d",name:"Last 90 Days"},{id:"1y",name:"Last Year"}].map(e=>(0,yn.jsx)("option",{value:e.id,children:e.name},e.id))})]})]})}),"overview"===a&&(0,yn.jsxs)("div",{className:"space-y-6",children:[(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,yn.jsx)("div",{className:"bg-white shadow rounded-lg p-6",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"flex-shrink-0",children:(0,yn.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center",children:(0,yn.jsx)(Aa,{className:"h-5 w-5 text-white"})})}),(0,yn.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,yn.jsxs)("dl",{children:[(0,yn.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Users"}),(0,yn.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:l.totalUsers||0})]})})]})}),(0,yn.jsx)("div",{className:"bg-white shadow rounded-lg p-6",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"flex-shrink-0",children:(0,yn.jsx)("div",{className:"w-8 h-8 bg-green-500 rounded-md flex items-center justify-center",children:(0,yn.jsx)(Kr,{className:"h-5 w-5 text-white"})})}),(0,yn.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,yn.jsxs)("dl",{children:[(0,yn.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Bookings"}),(0,yn.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:l.totalBookings||0})]})})]})}),(0,yn.jsx)("div",{className:"bg-white shadow rounded-lg p-6",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"flex-shrink-0",children:(0,yn.jsx)("div",{className:"w-8 h-8 bg-yellow-500 rounded-md flex items-center justify-center",children:(0,yn.jsx)(Ta,{className:"h-5 w-5 text-white"})})}),(0,yn.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,yn.jsxs)("dl",{children:[(0,yn.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Revenue"}),(0,yn.jsxs)("dd",{className:"text-lg font-medium text-gray-900",children:["$",(null===(e=l.totalRevenue)||void 0===e?void 0:e.toLocaleString())||0]})]})})]})}),(0,yn.jsx)("div",{className:"bg-white shadow rounded-lg p-6",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"flex-shrink-0",children:(0,yn.jsx)("div",{className:"w-8 h-8 bg-purple-500 rounded-md flex items-center justify-center",children:(0,yn.jsx)(Va,{className:"h-5 w-5 text-white"})})}),(0,yn.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,yn.jsxs)("dl",{children:[(0,yn.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Active Users"}),(0,yn.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:l.activeUsers||0})]})})]})})]}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,yn.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Booking Trends"}),(0,yn.jsx)("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)(cm,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),(0,yn.jsx)("p",{className:"text-gray-500",children:"Chart visualization would go here"})]})})]}),(0,yn.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Revenue Analysis"}),(0,yn.jsx)("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)(Va,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),(0,yn.jsx)("p",{className:"text-gray-500",children:"Chart visualization would go here"})]})})]})]})]}),"bookings"===a&&(0,yn.jsxs)("div",{className:"space-y-6",children:[(0,yn.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Booking Statistics"}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:u.total||0}),(0,yn.jsx)("div",{className:"text-sm text-gray-500",children:"Total Bookings"})]}),(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"text-3xl font-bold text-green-600",children:u.confirmed||0}),(0,yn.jsx)("div",{className:"text-sm text-gray-500",children:"Confirmed"})]}),(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"text-3xl font-bold text-yellow-600",children:u.pending||0}),(0,yn.jsx)("div",{className:"text-sm text-gray-500",children:"Pending"})]})]})]}),(0,yn.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Booking Trends"}),(0,yn.jsx)("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)(Kr,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),(0,yn.jsx)("p",{className:"text-gray-500",children:"Booking trends chart would go here"})]})})]})]}),"revenue"===a&&(0,yn.jsxs)("div",{className:"space-y-6",children:[(0,yn.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Revenue Analysis"}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsxs)("div",{className:"text-3xl font-bold text-green-600",children:["$",h.total||0]}),(0,yn.jsx)("div",{className:"text-sm text-gray-500",children:"Total Revenue"})]}),(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsxs)("div",{className:"text-3xl font-bold text-blue-600",children:["$",h.average||0]}),(0,yn.jsx)("div",{className:"text-sm text-gray-500",children:"Average per Booking"})]}),(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsxs)("div",{className:"text-3xl font-bold text-purple-600",children:[h.growth||0,"%"]}),(0,yn.jsx)("div",{className:"text-sm text-gray-500",children:"Growth Rate"})]})]})]}),(0,yn.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Revenue Trends"}),(0,yn.jsx)("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)(Ta,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),(0,yn.jsx)("p",{className:"text-gray-500",children:"Revenue trends chart would go here"})]})})]})]}),"occupancy"===a&&(0,yn.jsxs)("div",{className:"space-y-6",children:[(0,yn.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Occupancy Statistics"}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsxs)("div",{className:"text-3xl font-bold text-blue-600",children:[m.rate||0,"%"]}),(0,yn.jsx)("div",{className:"text-sm text-gray-500",children:"Occupancy Rate"})]}),(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"text-3xl font-bold text-green-600",children:m.available||0}),(0,yn.jsx)("div",{className:"text-sm text-gray-500",children:"Available Rooms"})]}),(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"text-3xl font-bold text-yellow-600",children:m.occupied||0}),(0,yn.jsx)("div",{className:"text-sm text-gray-500",children:"Occupied Rooms"})]})]})]}),(0,yn.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Occupancy Trends"}),(0,yn.jsx)("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)(Aa,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),(0,yn.jsx)("p",{className:"text-gray-500",children:"Occupancy trends chart would go here"})]})})]})]}),(0,yn.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quick Actions"}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,yn.jsxs)("button",{onClick:()=>y("overview"),className:"bg-blue-50 hover:bg-blue-100 p-4 rounded-lg text-left transition-colors",children:[(0,yn.jsx)(cm,{className:"h-8 w-8 text-blue-600 mb-2"}),(0,yn.jsx)("h4",{className:"font-medium text-gray-900",children:"Export Overview"}),(0,yn.jsx)("p",{className:"text-sm text-gray-500",children:"Download comprehensive overview report"})]}),(0,yn.jsxs)("button",{onClick:()=>y("bookings"),className:"bg-green-50 hover:bg-green-100 p-4 rounded-lg text-left transition-colors",children:[(0,yn.jsx)(Kr,{className:"h-8 w-8 text-green-600 mb-2"}),(0,yn.jsx)("h4",{className:"font-medium text-gray-900",children:"Export Bookings"}),(0,yn.jsx)("p",{className:"text-sm text-gray-500",children:"Download detailed booking report"})]}),(0,yn.jsxs)("button",{onClick:()=>y("revenue"),className:"bg-yellow-50 hover:bg-yellow-100 p-4 rounded-lg text-left transition-colors",children:[(0,yn.jsx)(Ta,{className:"h-8 w-8 text-yellow-600 mb-2"}),(0,yn.jsx)("h4",{className:"font-medium text-gray-900",children:"Export Revenue"}),(0,yn.jsx)("p",{className:"text-sm text-gray-500",children:"Download financial revenue report"})]})]})]})]})},By=()=>{const{data:e,isLoading:t,isError:n,error:r}=Qm({queryKey:["users"],queryFn:async()=>{const e=await ss.getUsers();return(null===e||void 0===e?void 0:e.data)||e}});return(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Users"}),(0,yn.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage system users and permissions"}),(0,yn.jsxs)("div",{className:"mt-6 bg-white shadow rounded-lg p-6",children:[t&&(0,yn.jsx)("div",{className:"text-gray-500",children:"Loading users..."}),n&&(0,yn.jsxs)("div",{className:"text-red-600",children:["Failed to load users: ",r.message]}),!t&&!n&&(0,yn.jsx)("div",{className:"overflow-x-auto",children:(0,yn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,yn.jsx)("thead",{className:"bg-gray-50",children:(0,yn.jsxs)("tr",{children:[(0,yn.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,yn.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,yn.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"})]})}),(0,yn.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:((null===e||void 0===e?void 0:e.data)||e||[]).map(e=>(0,yn.jsxs)("tr",{children:[(0,yn.jsxs)("td",{className:"px-4 py-2 text-sm text-gray-900",children:[e.first_name," ",e.last_name]}),(0,yn.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700",children:e.email}),(0,yn.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700",children:e.role})]},e.id))})]})})]})]})},qy=()=>{const{register:e,handleSubmit:t,formState:{errors:n}}=Zi(),r=te(),{isLoading:s}=As();return(0,yn.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,yn.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-blue-100",children:(0,yn.jsx)(zr,{className:"h-6 w-6 text-blue-600"})}),(0,yn.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Create a user account"}),(0,yn.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Create accounts for clients or staff from the admin panel."})]}),(0,yn.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:t(async e=>{try{await Xr({username:e.username,email:e.email,password:e.password,firstName:e.firstName,lastName:e.lastName,role:e.role||"client",phone:e.phone||null,address:e.address||null}),Or.success("User created successfully."),r("/super-admin",{replace:!0})}catch(t){Or.error(t.message||"Registration failed")}}),children:[(0,yn.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"First name"}),(0,yn.jsx)("input",(0,Oe.A)((0,Oe.A)({},e("firstName",{required:"First name is required"})),{},{className:"mt-1 block w-full rounded-md border ".concat(n.firstName?"border-red-300":"border-gray-300"," px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"),placeholder:"John"})),n.firstName&&(0,yn.jsx)("p",{className:"mt-1 text-sm text-red-600",children:n.firstName.message})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Last name"}),(0,yn.jsx)("input",(0,Oe.A)((0,Oe.A)({},e("lastName",{required:"Last name is required"})),{},{className:"mt-1 block w-full rounded-md border ".concat(n.lastName?"border-red-300":"border-gray-300"," px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"),placeholder:"Doe"})),n.lastName&&(0,yn.jsx)("p",{className:"mt-1 text-sm text-red-600",children:n.lastName.message})]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Username"}),(0,yn.jsx)("input",(0,Oe.A)((0,Oe.A)({},e("username",{required:"Username is required",minLength:{value:3,message:"Min 3 characters"}})),{},{className:"mt-1 block w-full rounded-md border ".concat(n.username?"border-red-300":"border-gray-300"," px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"),placeholder:"johndoe"})),n.username&&(0,yn.jsx)("p",{className:"mt-1 text-sm text-red-600",children:n.username.message})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,yn.jsx)("input",(0,Oe.A)((0,Oe.A)({},e("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}})),{},{className:"mt-1 block w-full rounded-md border ".concat(n.email?"border-red-300":"border-gray-300"," px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"),placeholder:"you@example.com"})),n.email&&(0,yn.jsx)("p",{className:"mt-1 text-sm text-red-600",children:n.email.message})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,yn.jsx)("input",(0,Oe.A)((0,Oe.A)({type:"password"},e("password",{required:"Password is required",minLength:{value:6,message:"Min 6 characters"}})),{},{className:"mt-1 block w-full rounded-md border ".concat(n.password?"border-red-300":"border-gray-300"," px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"),placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"})),n.password&&(0,yn.jsx)("p",{className:"mt-1 text-sm text-red-600",children:n.password.message})]}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Phone (optional)"}),(0,yn.jsx)("input",(0,Oe.A)((0,Oe.A)({},e("phone")),{},{className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm",placeholder:"+251..."}))]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Address (optional)"}),(0,yn.jsx)("input",(0,Oe.A)((0,Oe.A)({},e("address")),{},{className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm",placeholder:"City, Country"}))]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Role"}),(0,yn.jsxs)("select",(0,Oe.A)((0,Oe.A)({},e("role")),{},{className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm",children:[(0,yn.jsx)("option",{value:"client",children:"Client"}),(0,yn.jsx)("option",{value:"staff",children:"Staff"}),(0,yn.jsx)("option",{value:"manager",children:"Manager"}),(0,yn.jsx)("option",{value:"admin",children:"Admin"})]}))]}),(0,yn.jsx)("button",{type:"submit",disabled:s,className:"w-full rounded-md bg-blue-600 py-2 px-4 text-white shadow hover:bg-blue-700 disabled:opacity-50",children:"Create account"})]})]})})},zy=e=>{let{children:t}=e;const{user:n,isAuthenticated:r,isLoading:s}=As();if(s)return(0,yn.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,yn.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})});if(!r)return(0,yn.jsx)(ye,{to:"/login",replace:!0});return"super_admin"===(null===n||void 0===n?void 0:n.role)?(0,yn.jsx)(yn.Fragment,{children:t}):(0,yn.jsx)(ye,{to:"/admin"})},Ky=e=>{let{children:t}=e;const{user:n,isAuthenticated:r,isLoading:s}=As();if(s)return(0,yn.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,yn.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})});if(!r)return(0,yn.jsx)(ye,{to:"/login",replace:!0});return["super_admin","admin","manager","staff"].includes(null===n||void 0===n?void 0:n.role)?(0,yn.jsx)(yn.Fragment,{children:t}):(0,yn.jsx)(ye,{to:"/client"})},Wy=()=>(0,yn.jsx)(Ts,{children:(0,yn.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,yn.jsxs)(we,{children:[(0,yn.jsx)(xe,{path:"/",element:(0,yn.jsx)(oa,{})}),(0,yn.jsx)(xe,{path:"/login",element:(0,yn.jsx)(ra,{})}),(0,yn.jsxs)(xe,{path:"/super-admin",element:(0,yn.jsx)(zy,{children:(0,yn.jsx)(hm,{})}),children:[(0,yn.jsx)(xe,{index:!0,element:(0,yn.jsx)(La,{})}),(0,yn.jsx)(xe,{path:"admins",element:(0,yn.jsx)(Ua,{})}),(0,yn.jsx)(xe,{path:"bookings",element:(0,yn.jsx)(Jm,{})}),(0,yn.jsx)(xe,{path:"rooms",element:(0,yn.jsx)(Ym,{})}),(0,yn.jsx)(xe,{path:"cabins",element:(0,yn.jsx)(Ym,{})}),(0,yn.jsx)(xe,{path:"pricing",element:(0,yn.jsx)(za,{})}),(0,yn.jsx)(xe,{path:"guests",element:(0,yn.jsx)(Xm,{})}),(0,yn.jsx)(xe,{path:"hr",element:(0,yn.jsx)($m,{})}),(0,yn.jsx)(xe,{path:"payments",element:(0,yn.jsx)(Uy,{})}),(0,yn.jsx)(xe,{path:"payment-gateway",element:(0,yn.jsx)(Uy,{})}),(0,yn.jsx)(xe,{path:"reports",element:(0,yn.jsx)(Vy,{})}),(0,yn.jsx)(xe,{path:"users",element:(0,yn.jsx)(By,{})}),(0,yn.jsx)(xe,{path:"register",element:(0,yn.jsx)(qy,{})})]}),(0,yn.jsxs)(xe,{path:"/admin",element:(0,yn.jsx)(Ky,{children:(0,yn.jsx)(hm,{})}),children:[(0,yn.jsx)(xe,{index:!0,element:(0,yn.jsx)(Ia,{})}),(0,yn.jsx)(xe,{path:"bookings",element:(0,yn.jsx)(Jm,{})}),(0,yn.jsx)(xe,{path:"rooms",element:(0,yn.jsx)(Ym,{})}),(0,yn.jsx)(xe,{path:"cabins",element:(0,yn.jsx)(Ym,{})}),(0,yn.jsx)(xe,{path:"pricing",element:(0,yn.jsx)(za,{})}),(0,yn.jsx)(xe,{path:"guests",element:(0,yn.jsx)(Xm,{})}),(0,yn.jsx)(xe,{path:"hr",element:(0,yn.jsx)($m,{})}),(0,yn.jsx)(xe,{path:"payments",element:(0,yn.jsx)(Uy,{})}),(0,yn.jsx)(xe,{path:"payment-gateway",element:(0,yn.jsx)(Uy,{})}),(0,yn.jsx)(xe,{path:"reports",element:(0,yn.jsx)(Vy,{})}),(0,yn.jsx)(xe,{path:"users",element:(0,yn.jsx)(By,{})})]}),(0,yn.jsx)(xe,{path:"/client",element:(0,yn.jsx)(pa,{})}),(0,yn.jsx)(xe,{path:"/book/:roomId",element:(0,yn.jsx)(ga,{})}),(0,yn.jsx)(xe,{path:"/payments",element:(0,yn.jsx)(Uy,{})}),(0,yn.jsx)(xe,{path:"/dashboard",element:(0,yn.jsx)(Ca,{})}),(0,yn.jsx)(xe,{path:"/client/profile",element:(0,yn.jsx)(Na,{})}),(0,yn.jsx)(xe,{path:"/client/bookings",element:(0,yn.jsx)(Ca,{})})]}),(0,yn.jsx)(Rr,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#10B981",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#EF4444",secondary:"#fff"}}}})]})});try{console.log("[app] mounting React application"),"undefined"!==typeof window&&(window.__HOT_APP_RUNTIME=!0)}catch(wn){}const Hy=new gn({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1}}});i.createRoot(document.getElementById("root")).render((0,yn.jsx)(r.StrictMode,{children:(0,yn.jsx)(xn,{client:Hy,children:(0,yn.jsxs)(Ae,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[(0,yn.jsx)(Wy,{}),(0,yn.jsx)(Rr,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"}}})]})})}))})()})();
//# sourceMappingURL=main.bb745d0d.js.map